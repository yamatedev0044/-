/*! For license information please see 368676bb4ca53670.vendor.js.LICENSE.txt */
(self.webpackChunk_canva_web = self.webpackChunk_canva_web || []).push([
  [99115],
  {
    302768: (e, t, n) => {
      !(function () {
        var e = "undefined" != typeof window ? window : n.g,
          i = {};
        for (var r in (function (e, t, n) {
          var i;
          function a(e) {
            var t = 0;
            return function () {
              return t < e.length ? { done: !1, value: e[t++] } : { done: !0 };
            };
          }
          var o =
            "function" == typeof Object.defineProperties
              ? Object.defineProperty
              : function (e, t, n) {
                  return (
                    e == Array.prototype ||
                      e == Object.prototype ||
                      (e[t] = n.value),
                    e
                  );
                };
          var s = (function (n) {
            n = [
              "object" == typeof globalThis && globalThis,
              n,
              "object" == typeof e && e,
              "object" == typeof self && self,
              "object" == typeof t && t,
            ];
            for (var i = 0; i < n.length; ++i) {
              var r = n[i];
              if (r && r.Math == Math) return r;
            }
            throw Error("Cannot find global object");
          })(this);
          function u(e, t) {
            if (t)
              e: {
                var n = s;
                e = e.split(".");
                for (var i = 0; i < e.length - 1; i++) {
                  var r = e[i];
                  if (!(r in n)) break e;
                  n = n[r];
                }
                (t = t((i = n[(e = e[e.length - 1])]))) != i &&
                  null != t &&
                  o(n, e, { configurable: !0, writable: !0, value: t });
              }
          }
          function l(e) {
            return (
              ((e = { next: e })[Symbol.iterator] = function () {
                return this;
              }),
              e
            );
          }
          function c(e) {
            var t =
              "undefined" != typeof Symbol &&
              Symbol.iterator &&
              e[Symbol.iterator];
            if (t) return t.call(e);
            if ("number" == typeof e.length) return { next: a(e) };
            throw Error(String(e) + " is not an iterable or ArrayLike");
          }
          function d(e) {
            if (!(e instanceof Array)) {
              e = c(e);
              for (var t, n = []; !(t = e.next()).done; ) n.push(t.value);
              e = n;
            }
            return e;
          }
          u("Symbol", function (e) {
            function t(e, t) {
              (this.g = e),
                o(this, "description", {
                  configurable: !0,
                  writable: !0,
                  value: t,
                });
            }
            if (e) return e;
            t.prototype.toString = function () {
              return this.g;
            };
            var n = "jscomp_symbol_" + ((1e9 * Math.random()) >>> 0) + "_",
              i = 0;
            return function e(r) {
              if (this instanceof e)
                throw new TypeError("Symbol is not a constructor");
              return new t(n + (r || "") + "_" + i++, r);
            };
          }),
            u("Symbol.iterator", function (e) {
              if (e) return e;
              e = Symbol("Symbol.iterator");
              for (
                var t =
                    "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(
                      " "
                    ),
                  n = 0;
                n < t.length;
                n++
              ) {
                var i = s[t[n]];
                "function" == typeof i &&
                  "function" != typeof i.prototype[e] &&
                  o(i.prototype, e, {
                    configurable: !0,
                    writable: !0,
                    value: function () {
                      return l(a(this));
                    },
                  });
              }
              return e;
            });
          var h,
            f =
              "function" == typeof Object.create
                ? Object.create
                : function (e) {
                    function t() {}
                    return (t.prototype = e), new t();
                  };
          if ("function" == typeof Object.setPrototypeOf)
            h = Object.setPrototypeOf;
          else {
            var p;
            e: {
              var g = {};
              try {
                (g.__proto__ = { a: !0 }), (p = g.a);
                break e;
              } catch (ly) {}
              p = !1;
            }
            h = p
              ? function (e, t) {
                  if (((e.__proto__ = t), e.__proto__ !== t))
                    throw new TypeError(e + " is not extensible");
                  return e;
                }
              : null;
          }
          var m = h;
          function v(e, t) {
            if (
              ((e.prototype = f(t.prototype)), (e.prototype.constructor = e), m)
            )
              m(e, t);
            else
              for (var n in t)
                if ("prototype" != n)
                  if (Object.defineProperties) {
                    var i = Object.getOwnPropertyDescriptor(t, n);
                    i && Object.defineProperty(e, n, i);
                  } else e[n] = t[n];
            e.Vi = t.prototype;
          }
          function y() {
            (this.o = !1),
              (this.m = null),
              (this.h = void 0),
              (this.g = 1),
              (this.j = this.l = 0),
              (this.A = this.i = null);
          }
          function b(e) {
            if (e.o) throw new TypeError("Generator is already running");
            e.o = !0;
          }
          function w(e, t) {
            (e.i = { Pf: t, $f: !0 }), (e.g = e.l || e.j);
          }
          function x(e, t, n) {
            return (e.g = n), { value: t };
          }
          function S(e) {
            e.g = 0;
          }
          function T(e, t, n) {
            (e.l = t), null != n && (e.j = n);
          }
          function A(e, t, n) {
            (e.g = t), (e.l = n || 0);
          }
          function k(e, t) {
            return (e.l = t || 0), (t = e.i.Pf), (e.i = null), t;
          }
          function I(e) {
            (e.A = [e.i]), (e.l = 0), (e.j = 0);
          }
          function C(e, t) {
            var n = e.A.splice(0)[0];
            (n = e.i = e.i || n)
              ? n.$f
                ? (e.g = e.l || e.j)
                : null != n.u && e.j < n.u
                ? ((e.g = n.u), (e.i = null))
                : (e.g = e.j)
              : (e.g = t);
          }
          function M(e) {
            (this.g = new y()), (this.h = e);
          }
          function E(e, t, n, i) {
            try {
              var r = t.call(e.g.m, n);
              if (!(r instanceof Object))
                throw new TypeError(
                  "Iterator result " + r + " is not an object"
                );
              if (!r.done) return (e.g.o = !1), r;
              var a = r.value;
            } catch (o) {
              return (e.g.m = null), w(e.g, o), D(e);
            }
            return (e.g.m = null), i.call(e.g, a), D(e);
          }
          function D(e) {
            for (; e.g.g; )
              try {
                var t = e.h(e.g);
                if (t) return (e.g.o = !1), { value: t.value, done: !1 };
              } catch (n) {
                (e.g.h = void 0), w(e.g, n);
              }
            if (((e.g.o = !1), e.g.i)) {
              if (((t = e.g.i), (e.g.i = null), t.$f)) throw t.Pf;
              return { value: t.return, done: !0 };
            }
            return { value: void 0, done: !0 };
          }
          function P(e) {
            (this.next = function (t) {
              return (
                b(e.g),
                e.g.m
                  ? (t = E(e, e.g.m.next, t, e.g.s))
                  : (e.g.s(t), (t = D(e))),
                t
              );
            }),
              (this.throw = function (t) {
                return (
                  b(e.g),
                  e.g.m
                    ? (t = E(e, e.g.m.throw, t, e.g.s))
                    : (w(e.g, t), (t = D(e))),
                  t
                );
              }),
              (this.return = function (t) {
                return (function (e, t) {
                  b(e.g);
                  var n = e.g.m;
                  return n
                    ? E(
                        e,
                        "return" in n
                          ? n.return
                          : function (e) {
                              return { value: e, done: !0 };
                            },
                        t,
                        e.g.return
                      )
                    : (e.g.return(t), D(e));
                })(e, t);
              }),
              (this[Symbol.iterator] = function () {
                return this;
              });
          }
          function L(e) {
            return (function (e) {
              function t(t) {
                return e.next(t);
              }
              function n(t) {
                return e.throw(t);
              }
              return new Promise(function (i, r) {
                !(function e(a) {
                  a.done
                    ? i(a.value)
                    : Promise.resolve(a.value).then(t, n).then(e, r);
                })(e.next());
              });
            })(new P(new M(e)));
          }
          function R() {
            for (var e = Number(this), t = [], n = e; n < arguments.length; n++)
              t[n - e] = arguments[n];
            return t;
          }
          function N(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
          }
          function _(e, t) {
            e instanceof String && (e += "");
            var n = 0,
              i = !1,
              r = {
                next: function () {
                  if (!i && n < e.length) {
                    var r = n++;
                    return { value: t(r, e[r]), done: !1 };
                  }
                  return (i = !0), { done: !0, value: void 0 };
                },
              };
            return (
              (r[Symbol.iterator] = function () {
                return r;
              }),
              r
            );
          }
          function U(e, t, n) {
            if (null == e)
              throw new TypeError(
                "The 'this' value for String.prototype." +
                  n +
                  " must not be null or undefined"
              );
            if (t instanceof RegExp)
              throw new TypeError(
                "First argument to String.prototype." +
                  n +
                  " must not be a regular expression"
              );
            return e + "";
          }
          function j(e, t, n) {
            e instanceof String && (e = String(e));
            for (var i = e.length, r = 0; r < i; r++) {
              var a = e[r];
              if (t.call(n, a, r, e)) return { Xf: r, v: a };
            }
            return { Xf: -1, v: void 0 };
          }
          (y.prototype.s = function (e) {
            this.h = e;
          }),
            (y.prototype.return = function (e) {
              (this.i = { return: e }), (this.g = this.j);
            }),
            (y.prototype.u = function (e) {
              this.g = e;
            }),
            u("Promise", function (e) {
              function t(e) {
                (this.h = 0), (this.i = void 0), (this.g = []), (this.o = !1);
                var t = this.j();
                try {
                  e(t.resolve, t.reject);
                } catch (r) {
                  t.reject(r);
                }
              }
              function n() {
                this.g = null;
              }
              function i(e) {
                return e instanceof t
                  ? e
                  : new t(function (t) {
                      t(e);
                    });
              }
              if (e) return e;
              n.prototype.h = function (e) {
                if (null == this.g) {
                  this.g = [];
                  var t = this;
                  this.i(function () {
                    t.l();
                  });
                }
                this.g.push(e);
              };
              var a = s.setTimeout;
              (n.prototype.i = function (e) {
                a(e, 0);
              }),
                (n.prototype.l = function () {
                  for (; this.g && this.g.length; ) {
                    var e = this.g;
                    this.g = [];
                    for (var t = 0; t < e.length; ++t) {
                      var n = e[t];
                      e[t] = null;
                      try {
                        n();
                      } catch (i) {
                        this.j(i);
                      }
                    }
                  }
                  this.g = null;
                }),
                (n.prototype.j = function (e) {
                  this.i(function () {
                    throw e;
                  });
                }),
                (t.prototype.j = function () {
                  function e(e) {
                    return function (i) {
                      n || ((n = !0), e.call(t, i));
                    };
                  }
                  var t = this,
                    n = !1;
                  return { resolve: e(this.D), reject: e(this.l) };
                }),
                (t.prototype.D = function (e) {
                  if (e === this)
                    this.l(new TypeError("A Promise cannot resolve to itself"));
                  else if (e instanceof t) this.G(e);
                  else {
                    e: switch (typeof e) {
                      case "object":
                        var n = null != e;
                        break e;
                      case "function":
                        n = !0;
                        break e;
                      default:
                        n = !1;
                    }
                    n ? this.C(e) : this.m(e);
                  }
                }),
                (t.prototype.C = function (e) {
                  var t = void 0;
                  try {
                    t = e.then;
                  } catch (r) {
                    return void this.l(r);
                  }
                  "function" == typeof t ? this.J(t, e) : this.m(e);
                }),
                (t.prototype.l = function (e) {
                  this.s(2, e);
                }),
                (t.prototype.m = function (e) {
                  this.s(1, e);
                }),
                (t.prototype.s = function (e, t) {
                  if (0 != this.h)
                    throw Error(
                      "Cannot settle(" +
                        e +
                        ", " +
                        t +
                        "): Promise already settled in state" +
                        this.h
                    );
                  (this.h = e),
                    (this.i = t),
                    2 === this.h && this.F(),
                    this.A();
                }),
                (t.prototype.F = function () {
                  var e = this;
                  a(function () {
                    if (e.B()) {
                      var t = s.console;
                      void 0 !== t && t.error(e.i);
                    }
                  }, 1);
                }),
                (t.prototype.B = function () {
                  if (this.o) return !1;
                  var e = s.CustomEvent,
                    t = s.Event,
                    n = s.dispatchEvent;
                  return (
                    void 0 === n ||
                    ("function" == typeof e
                      ? (e = new e("unhandledrejection", { cancelable: !0 }))
                      : "function" == typeof t
                      ? (e = new t("unhandledrejection", { cancelable: !0 }))
                      : (e =
                          s.document.createEvent(
                            "CustomEvent"
                          )).initCustomEvent("unhandledrejection", !1, !0, e),
                    (e.promise = this),
                    (e.reason = this.i),
                    n(e))
                  );
                }),
                (t.prototype.A = function () {
                  if (null != this.g) {
                    for (var e = 0; e < this.g.length; ++e) o.h(this.g[e]);
                    this.g = null;
                  }
                });
              var o = new n();
              return (
                (t.prototype.G = function (e) {
                  var t = this.j();
                  e.md(t.resolve, t.reject);
                }),
                (t.prototype.J = function (e, t) {
                  var n = this.j();
                  try {
                    e.call(t, n.resolve, n.reject);
                  } catch (i) {
                    n.reject(i);
                  }
                }),
                (t.prototype.then = function (e, n) {
                  function i(e, t) {
                    return "function" == typeof e
                      ? function (t) {
                          try {
                            r(e(t));
                          } catch (n) {
                            a(n);
                          }
                        }
                      : t;
                  }
                  var r,
                    a,
                    o = new t(function (e, t) {
                      (r = e), (a = t);
                    });
                  return this.md(i(e, r), i(n, a)), o;
                }),
                (t.prototype.catch = function (e) {
                  return this.then(void 0, e);
                }),
                (t.prototype.md = function (e, t) {
                  function n() {
                    switch (i.h) {
                      case 1:
                        e(i.i);
                        break;
                      case 2:
                        t(i.i);
                        break;
                      default:
                        throw Error("Unexpected state: " + i.h);
                    }
                  }
                  var i = this;
                  null == this.g ? o.h(n) : this.g.push(n), (this.o = !0);
                }),
                (t.resolve = i),
                (t.reject = function (e) {
                  return new t(function (t, n) {
                    n(e);
                  });
                }),
                (t.race = function (e) {
                  return new t(function (t, n) {
                    for (var r = c(e), a = r.next(); !a.done; a = r.next())
                      i(a.value).md(t, n);
                  });
                }),
                (t.all = function (e) {
                  var n = c(e),
                    r = n.next();
                  return r.done
                    ? i([])
                    : new t(function (e, t) {
                        function a(t) {
                          return function (n) {
                            (o[t] = n), 0 == --s && e(o);
                          };
                        }
                        var o = [],
                          s = 0;
                        do {
                          o.push(void 0),
                            s++,
                            i(r.value).md(a(o.length - 1), t),
                            (r = n.next());
                        } while (!r.done);
                      });
                }),
                t
              );
            }),
            u("WeakMap", function (e) {
              function t(e) {
                if (((this.g = (u += Math.random() + 1).toString()), e)) {
                  e = c(e);
                  for (var t; !(t = e.next()).done; )
                    (t = t.value), this.set(t[0], t[1]);
                }
              }
              function n() {}
              function i(e) {
                var t = typeof e;
                return ("object" === t && null !== e) || "function" === t;
              }
              function r(e) {
                if (!N(e, s)) {
                  var t = new n();
                  o(e, s, { value: t });
                }
              }
              function a(e) {
                var t = Object[e];
                t &&
                  (Object[e] = function (e) {
                    return e instanceof n
                      ? e
                      : (Object.isExtensible(e) && r(e), t(e));
                  });
              }
              if (
                (function () {
                  if (!e || !Object.seal) return !1;
                  try {
                    var t = Object.seal({}),
                      n = Object.seal({}),
                      i = new e([
                        [t, 2],
                        [n, 3],
                      ]);
                    return (
                      2 == i.get(t) &&
                      3 == i.get(n) &&
                      (i.delete(t), i.set(n, 4), !i.has(t) && 4 == i.get(n))
                    );
                  } catch (r) {
                    return !1;
                  }
                })()
              )
                return e;
              var s = "$jscomp_hidden_" + Math.random();
              a("freeze"), a("preventExtensions"), a("seal");
              var u = 0;
              return (
                (t.prototype.set = function (e, t) {
                  if (!i(e)) throw Error("Invalid WeakMap key");
                  if ((r(e), !N(e, s))) throw Error("WeakMap key fail: " + e);
                  return (e[s][this.g] = t), this;
                }),
                (t.prototype.get = function (e) {
                  return i(e) && N(e, s) ? e[s][this.g] : void 0;
                }),
                (t.prototype.has = function (e) {
                  return i(e) && N(e, s) && N(e[s], this.g);
                }),
                (t.prototype.delete = function (e) {
                  return (
                    !!(i(e) && N(e, s) && N(e[s], this.g)) &&
                    delete e[s][this.g]
                  );
                }),
                t
              );
            }),
            u("Map", function (e) {
              function t() {
                var e = {};
                return (e.Ab = e.next = e.head = e);
              }
              function n(e, t) {
                var n = e[1];
                return l(function () {
                  if (n) {
                    for (; n.head != e[1]; ) n = n.Ab;
                    for (; n.next != n.head; )
                      return (n = n.next), { done: !1, value: t(n) };
                    n = null;
                  }
                  return { done: !0, value: void 0 };
                });
              }
              function i(e, t) {
                var n = t && typeof t;
                "object" == n || "function" == n
                  ? a.has(t)
                    ? (n = a.get(t))
                    : ((n = "" + ++o), a.set(t, n))
                  : (n = "p_" + t);
                var i = e[0][n];
                if (i && N(e[0], n))
                  for (e = 0; e < i.length; e++) {
                    var r = i[e];
                    if ((t != t && r.key != r.key) || t === r.key)
                      return { id: n, list: i, index: e, entry: r };
                  }
                return { id: n, list: i, index: -1, entry: void 0 };
              }
              function r(e) {
                if (((this[0] = {}), (this[1] = t()), (this.size = 0), e)) {
                  e = c(e);
                  for (var n; !(n = e.next()).done; )
                    (n = n.value), this.set(n[0], n[1]);
                }
              }
              if (
                (function () {
                  if (
                    !e ||
                    "function" != typeof e ||
                    !e.prototype.entries ||
                    "function" != typeof Object.seal
                  )
                    return !1;
                  try {
                    var t = Object.seal({ x: 4 }),
                      n = new e(c([[t, "s"]]));
                    if (
                      "s" != n.get(t) ||
                      1 != n.size ||
                      n.get({ x: 4 }) ||
                      n.set({ x: 4 }, "t") != n ||
                      2 != n.size
                    )
                      return !1;
                    var i = n.entries(),
                      r = i.next();
                    return (
                      !r.done &&
                      r.value[0] == t &&
                      "s" == r.value[1] &&
                      !(
                        (r = i.next()).done ||
                        4 != r.value[0].x ||
                        "t" != r.value[1] ||
                        !i.next().done
                      )
                    );
                  } catch (a) {
                    return !1;
                  }
                })()
              )
                return e;
              var a = new WeakMap();
              (r.prototype.set = function (e, t) {
                var n = i(this, (e = 0 === e ? 0 : e));
                return (
                  n.list || (n.list = this[0][n.id] = []),
                  n.entry
                    ? (n.entry.value = t)
                    : ((n.entry = {
                        next: this[1],
                        Ab: this[1].Ab,
                        head: this[1],
                        key: e,
                        value: t,
                      }),
                      n.list.push(n.entry),
                      (this[1].Ab.next = n.entry),
                      (this[1].Ab = n.entry),
                      this.size++),
                  this
                );
              }),
                (r.prototype.delete = function (e) {
                  return (
                    !(!(e = i(this, e)).entry || !e.list) &&
                    (e.list.splice(e.index, 1),
                    e.list.length || delete this[0][e.id],
                    (e.entry.Ab.next = e.entry.next),
                    (e.entry.next.Ab = e.entry.Ab),
                    (e.entry.head = null),
                    this.size--,
                    !0)
                  );
                }),
                (r.prototype.clear = function () {
                  (this[0] = {}), (this[1] = this[1].Ab = t()), (this.size = 0);
                }),
                (r.prototype.has = function (e) {
                  return !!i(this, e).entry;
                }),
                (r.prototype.get = function (e) {
                  return (e = i(this, e).entry) && e.value;
                }),
                (r.prototype.entries = function () {
                  return n(this, function (e) {
                    return [e.key, e.value];
                  });
                }),
                (r.prototype.keys = function () {
                  return n(this, function (e) {
                    return e.key;
                  });
                }),
                (r.prototype.values = function () {
                  return n(this, function (e) {
                    return e.value;
                  });
                }),
                (r.prototype.forEach = function (e, t) {
                  for (var n, i = this.entries(); !(n = i.next()).done; )
                    (n = n.value), e.call(t, n[1], n[0], this);
                }),
                (r.prototype[Symbol.iterator] = r.prototype.entries);
              var o = 0;
              return r;
            }),
            u("Set", function (e) {
              function t(e) {
                if (((this.g = new Map()), e)) {
                  e = c(e);
                  for (var t; !(t = e.next()).done; ) this.add(t.value);
                }
                this.size = this.g.size;
              }
              return (function () {
                if (
                  !e ||
                  "function" != typeof e ||
                  !e.prototype.entries ||
                  "function" != typeof Object.seal
                )
                  return !1;
                try {
                  var t = Object.seal({ x: 4 }),
                    n = new e(c([t]));
                  if (
                    !n.has(t) ||
                    1 != n.size ||
                    n.add(t) != n ||
                    1 != n.size ||
                    n.add({ x: 4 }) != n ||
                    2 != n.size
                  )
                    return !1;
                  var i = n.entries(),
                    r = i.next();
                  return (
                    !r.done &&
                    r.value[0] == t &&
                    r.value[1] == t &&
                    !(r = i.next()).done &&
                    r.value[0] != t &&
                    4 == r.value[0].x &&
                    r.value[1] == r.value[0] &&
                    i.next().done
                  );
                } catch (a) {
                  return !1;
                }
              })()
                ? e
                : ((t.prototype.add = function (e) {
                    return (
                      (e = 0 === e ? 0 : e),
                      this.g.set(e, e),
                      (this.size = this.g.size),
                      this
                    );
                  }),
                  (t.prototype.delete = function (e) {
                    return (e = this.g.delete(e)), (this.size = this.g.size), e;
                  }),
                  (t.prototype.clear = function () {
                    this.g.clear(), (this.size = 0);
                  }),
                  (t.prototype.has = function (e) {
                    return this.g.has(e);
                  }),
                  (t.prototype.entries = function () {
                    return this.g.entries();
                  }),
                  (t.prototype.values = function () {
                    return this.g.values();
                  }),
                  (t.prototype.keys = t.prototype.values),
                  (t.prototype[Symbol.iterator] = t.prototype.values),
                  (t.prototype.forEach = function (e, t) {
                    var n = this;
                    this.g.forEach(function (i) {
                      return e.call(t, i, i, n);
                    });
                  }),
                  t);
            }),
            u("Array.prototype.values", function (e) {
              return (
                e ||
                function () {
                  return _(this, function (e, t) {
                    return t;
                  });
                }
              );
            }),
            u("Array.from", function (e) {
              return (
                e ||
                function (e, t, n) {
                  t =
                    null != t
                      ? t
                      : function (e) {
                          return e;
                        };
                  var i = [],
                    r =
                      "undefined" != typeof Symbol &&
                      Symbol.iterator &&
                      e[Symbol.iterator];
                  if ("function" == typeof r) {
                    e = r.call(e);
                    for (var a = 0; !(r = e.next()).done; )
                      i.push(t.call(n, r.value, a++));
                  } else
                    for (r = e.length, a = 0; a < r; a++)
                      i.push(t.call(n, e[a], a));
                  return i;
                }
              );
            }),
            u("Array.prototype.keys", function (e) {
              return (
                e ||
                function () {
                  return _(this, function (e) {
                    return e;
                  });
                }
              );
            }),
            u("Object.is", function (e) {
              return (
                e ||
                function (e, t) {
                  return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t;
                }
              );
            }),
            u("Array.prototype.includes", function (e) {
              return (
                e ||
                function (e, t) {
                  var n = this;
                  n instanceof String && (n = String(n));
                  var i = n.length;
                  for (
                    0 > (t = t || 0) && (t = Math.max(t + i, 0));
                    t < i;
                    t++
                  ) {
                    var r = n[t];
                    if (r === e || Object.is(r, e)) return !0;
                  }
                  return !1;
                }
              );
            }),
            u("String.prototype.includes", function (e) {
              return (
                e ||
                function (e, t) {
                  return -1 !== U(this, e, "includes").indexOf(e, t || 0);
                }
              );
            }),
            u("String.fromCodePoint", function (e) {
              return (
                e ||
                function (e) {
                  for (var t = "", n = 0; n < arguments.length; n++) {
                    var i = Number(arguments[n]);
                    if (0 > i || 1114111 < i || i !== Math.floor(i))
                      throw new RangeError("invalid_code_point " + i);
                    65535 >= i
                      ? (t += String.fromCharCode(i))
                      : ((i -= 65536),
                        (t += String.fromCharCode(((i >>> 10) & 1023) | 55296)),
                        (t += String.fromCharCode((1023 & i) | 56320)));
                  }
                  return t;
                }
              );
            }),
            u("Array.prototype.findIndex", function (e) {
              return (
                e ||
                function (e, t) {
                  return j(this, e, t).Xf;
                }
              );
            }),
            u("WeakSet", function (e) {
              function t(e) {
                if (((this.g = new WeakMap()), e)) {
                  e = c(e);
                  for (var t; !(t = e.next()).done; ) this.add(t.value);
                }
              }
              return (function () {
                if (!e || !Object.seal) return !1;
                try {
                  var t = Object.seal({}),
                    n = Object.seal({}),
                    i = new e([t]);
                  return (
                    !(!i.has(t) || i.has(n)) &&
                    (i.delete(t), i.add(n), !i.has(t) && i.has(n))
                  );
                } catch (r) {
                  return !1;
                }
              })()
                ? e
                : ((t.prototype.add = function (e) {
                    return this.g.set(e, !0), this;
                  }),
                  (t.prototype.has = function (e) {
                    return this.g.has(e);
                  }),
                  (t.prototype.delete = function (e) {
                    return this.g.delete(e);
                  }),
                  t);
            }),
            u("Array.prototype.find", function (e) {
              return (
                e ||
                function (e, t) {
                  return j(this, e, t).v;
                }
              );
            }),
            u("String.prototype.startsWith", function (e) {
              return (
                e ||
                function (e, t) {
                  var n = U(this, e, "startsWith"),
                    i = n.length,
                    r = e.length;
                  t = Math.max(0, Math.min(0 | t, n.length));
                  for (var a = 0; a < r && t < i; )
                    if (n[t++] != e[a++]) return !1;
                  return a >= r;
                }
              );
            }),
            u("Object.entries", function (e) {
              return (
                e ||
                function (e) {
                  var t,
                    n = [];
                  for (t in e) N(e, t) && n.push([t, e[t]]);
                  return n;
                }
              );
            });
          var O =
            "function" == typeof Object.assign
              ? Object.assign
              : function (e, t) {
                  for (var n = 1; n < arguments.length; n++) {
                    var i = arguments[n];
                    if (i) for (var r in i) N(i, r) && (e[r] = i[r]);
                  }
                  return e;
                };
          u("Object.assign", function (e) {
            return e || O;
          }),
            u("Object.values", function (e) {
              return (
                e ||
                function (e) {
                  var t,
                    n = [];
                  for (t in e) N(e, t) && n.push(e[t]);
                  return n;
                }
              );
            }),
            u("Promise.prototype.finally", function (e) {
              return (
                e ||
                function (e) {
                  return this.then(
                    function (t) {
                      return Promise.resolve(e()).then(function () {
                        return t;
                      });
                    },
                    function (t) {
                      return Promise.resolve(e()).then(function () {
                        throw t;
                      });
                    }
                  );
                }
              );
            }),
            u("Math.log2", function (e) {
              return (
                e ||
                function (e) {
                  return Math.log(e) / Math.LN2;
                }
              );
            }),
            u("Number.EPSILON", function () {
              return Math.pow(2, -52);
            }),
            u("Number.MAX_SAFE_INTEGER", function () {
              return 9007199254740991;
            }),
            u("String.prototype.endsWith", function (e) {
              return (
                e ||
                function (e, t) {
                  var n = U(this, e, "endsWith");
                  void 0 === t && (t = n.length),
                    (t = Math.max(0, Math.min(0 | t, n.length)));
                  for (var i = e.length; 0 < i && 0 < t; )
                    if (n[--t] != e[--i]) return !1;
                  return 0 >= i;
                }
              );
            }),
            u("Array.prototype.entries", function (e) {
              return (
                e ||
                function () {
                  return _(this, function (e, t) {
                    return [e, t];
                  });
                }
              );
            }),
            u("Number.isNaN", function (e) {
              return (
                e ||
                function (e) {
                  return "number" == typeof e && isNaN(e);
                }
              );
            }),
            u("String.prototype.repeat", function (e) {
              return (
                e ||
                function (e) {
                  var t = U(this, null, "repeat");
                  if (0 > e || 1342177279 < e)
                    throw new RangeError("Invalid count value");
                  e |= 0;
                  for (var n = ""; e; )
                    1 & e && (n += t), (e >>>= 1) && (t += t);
                  return n;
                }
              );
            }),
            u("Number.isFinite", function (e) {
              return (
                e ||
                function (e) {
                  return (
                    "number" == typeof e &&
                    !isNaN(e) &&
                    1 / 0 !== e &&
                    -1 / 0 !== e
                  );
                }
              );
            });
          var B = this || self;
          function F(e, t) {
            e = e.split(".");
            var n,
              i = B;
            e[0] in i || void 0 === i.execScript || i.execScript("var " + e[0]);
            for (; e.length && (n = e.shift()); )
              e.length || void 0 === t
                ? (i =
                    i[n] && i[n] !== Object.prototype[n] ? i[n] : (i[n] = {}))
                : (i[n] = t);
          }
          function H() {}
          function V() {}
          function z(e) {
            (this.g = Math.exp(Math.log(0.5) / e)), (this.i = this.h = 0);
          }
          function G(e) {
            return e.h / (1 - Math.pow(e.g, e.i));
          }
          function q() {
            (this.h = new z(2)),
              (this.j = new z(5)),
              (this.g = 0),
              (this.i = 128e3),
              (this.l = 16e3);
          }
          function K() {}
          function W() {}
          function X() {}
          function Y(e) {
            var t = R.apply(1, arguments);
            J.has(e) || (J.add(e), X.apply(K, d(t)));
          }
          (z.prototype.sample = function (e, t) {
            var n = Math.pow(this.g, e);
            (t = t * (1 - n) + n * this.h),
              isNaN(t) || ((this.h = t), (this.i += e));
          }),
            (q.prototype.configure = function (e) {
              (this.i = e.minTotalBytes),
                (this.l = e.minBytes),
                (this.h.g = Math.exp(Math.log(0.5) / e.fastHalfLife)),
                (this.j.g = Math.exp(Math.log(0.5) / e.slowHalfLife));
            }),
            (q.prototype.sample = function (e, t) {
              if (!(t < this.l)) {
                var n = (8e3 * t) / e;
                (e /= 1e3),
                  (this.g += t),
                  this.h.sample(e, n),
                  this.j.sample(e, n);
              }
            }),
            (q.prototype.getBandwidthEstimate = function (e) {
              return this.g < this.i ? e : Math.min(G(this.h), G(this.j));
            });
          var J = new Set();
          function $() {
            this.g = new Map();
          }
          function Z() {
            this.g = new $();
          }
          function Q(e, t, n, i) {
            (this.target = e),
              (this.type = t),
              (this.listener = n),
              (this.g = (function (e, t) {
                if (null == t) return !1;
                if ("boolean" == typeof t) return t;
                var n = new Set(["passive", "capture"]);
                return (
                  Object.keys(t).filter(function (e) {
                    return !n.has(e);
                  }),
                  (function (e) {
                    var t = ee;
                    if (null == t) {
                      t = !1;
                      try {
                        var n = {},
                          i = {
                            get: function () {
                              return (t = !0), !1;
                            },
                          };
                        Object.defineProperty(n, "passive", i),
                          Object.defineProperty(n, "capture", i),
                          (i = function () {}),
                          e.addEventListener("test", i, n),
                          e.removeEventListener("test", i, n);
                      } catch (r) {
                        t = !1;
                      }
                      ee = t;
                    }
                    return t || !1;
                  })(e)
                    ? t
                    : t.capture || !1
                );
              })(e, i)),
              this.target.addEventListener(t, n, this.g);
          }
          e.console &&
            (new Map()
              .set(1, function () {
                return console.error.apply(console, d(R.apply(0, arguments)));
              })
              .set(2, function () {
                return console.warn.apply(console, d(R.apply(0, arguments)));
              })
              .set(3, function () {
                return console.info.apply(console, d(R.apply(0, arguments)));
              })
              .set(4, function () {
                return console.log.apply(console, d(R.apply(0, arguments)));
              })
              .set(5, function () {
                return console.debug.apply(console, d(R.apply(0, arguments)));
              })
              .set(6, function () {
                return console.debug.apply(console, d(R.apply(0, arguments)));
              }),
            (X = function () {
              return console.warn.apply(console, d(R.apply(0, arguments)));
            }),
            (W = function () {
              console.error.apply(console, d(R.apply(0, arguments)));
            })),
            ((i = $.prototype).push = function (e, t) {
              this.g.has(e) ? this.g.get(e).push(t) : this.g.set(e, [t]);
            }),
            (i.get = function (e) {
              return this.g.has(e) ? this.g.get(e).slice() : null;
            }),
            (i.remove = function (e, t) {
              if (this.g.has(e)) {
                var n = this.g.get(e).filter(function (e) {
                  return e != t;
                });
                this.g.set(e, n), n.length || this.g.delete(e);
              }
            }),
            (i.forEach = function (e) {
              this.g.forEach(function (t, n) {
                e(n, t);
              });
            }),
            (i.size = function () {
              return this.g.size;
            }),
            (i.keys = function () {
              return Array.from(this.g.keys());
            }),
            ((i = Z.prototype).release = function () {
              this.qb(), (this.g = null);
            }),
            (i.H = function (e, t, n, i) {
              this.g && ((e = new Q(e, t, n, i)), this.g.push(t, e));
            }),
            (i.Ea = function (e, t, n, i) {
              var r = this;
              this.H(
                e,
                t,
                function i(a) {
                  r.sb(e, t, i), n(a);
                },
                i
              );
            }),
            (i.sb = function (e, t, n) {
              if (this.g)
                for (
                  var i = this.g.get(t) || [], r = (i = c(i)).next();
                  !r.done;
                  r = i.next()
                )
                  (r = r.value).target != e ||
                    (n != r.listener && n) ||
                    (r.sb(), this.g.remove(t, r));
            }),
            (i.qb = function () {
              if (this.g) {
                for (
                  var e = [], t = c(this.g.g.values()), n = t.next();
                  !n.done;
                  n = t.next()
                )
                  e.push.apply(e, d(n.value));
                for (t = (e = c(e)).next(); !t.done; t = e.next()) t.value.sb();
                this.g.g.clear();
              }
            }),
            F("shaka.util.EventManager", Z),
            (Z.prototype.removeAll = Z.prototype.qb),
            (Z.prototype.unlisten = Z.prototype.sb),
            (Z.prototype.listenOnce = Z.prototype.Ea),
            (Z.prototype.listen = Z.prototype.H),
            (Z.prototype.release = Z.prototype.release),
            (Q.prototype.sb = function () {
              this.target.removeEventListener(this.type, this.listener, this.g),
                (this.listener = this.target = null),
                (this.g = !1);
            });
          var ee = void 0;
          function te(e, t) {
            (this.g = e), (this.h = t);
          }
          function ne(e, t) {
            var n = new te(5, 0),
              i = ae,
              r = i.g,
              a = n.h - r.h;
            (0 < (n.g - r.g || a) ? i.i : i.h)(i.g, n, e, t);
          }
          function ie(e, t, n, i) {
            X(
              [
                n,
                "has been deprecated and will be removed in",
                t,
                ". We are currently at version",
                e,
                ". Additional information:",
                i,
              ].join(" ")
            );
          }
          function re(e, t, n, i) {
            W(
              [
                n,
                "has been deprecated and has been removed in",
                t,
                ". We are now at version",
                e,
                ". Additional information:",
                i,
              ].join(" ")
            );
          }
          F("shaka.config.AutoShowText", {
            NEVER: 0,
            ALWAYS: 1,
            IF_PREFERRED_TEXT_LANGUAGE: 2,
            IF_SUBTITLES_MAY_BE_NEEDED: 3,
          }),
            (te.prototype.toString = function () {
              return "v" + this.g + "." + this.h;
            });
          var ae = null,
            oe = RegExp(
              "^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"
            );
          function se(e) {
            var t;
            e instanceof se
              ? (ue(this, e.rb),
                (this.hc = e.hc),
                le(this, e.gb),
                ce(this, e.Bc),
                (this.jb = e.jb),
                de(this, e.g.clone()),
                (this.Ub = e.Ub))
              : e && (t = String(e).match(oe))
              ? (ue(this, t[1] || "", !0),
                (this.hc = he(t[2] || "")),
                le(this, t[3] || "", !0),
                ce(this, t[4]),
                (this.jb = he(t[5] || "", !0)),
                de(this, t[6] || "", !0),
                (this.Ub = he(t[7] || "")))
              : (this.g = new we(null));
          }
          function ue(e, t, n) {
            (e.rb = n ? he(t, !0) : t), e.rb && (e.rb = e.rb.replace(/:$/, ""));
          }
          function le(e, t, n) {
            e.gb = n ? he(t, !0) : t;
          }
          function ce(e, t) {
            if (t) {
              if (((t = Number(t)), isNaN(t) || 0 > t))
                throw Error("Bad port number " + t);
              e.Bc = t;
            } else e.Bc = null;
          }
          function de(e, t, n) {
            t instanceof we
              ? (e.g = t)
              : (n || (t = fe(t, ye)), (e.g = new we(t)));
          }
          function he(e, t) {
            return e ? (t ? decodeURI(e) : decodeURIComponent(e)) : "";
          }
          function fe(e, t, n) {
            return null != e
              ? ((e = encodeURI(e).replace(t, pe)),
                n && (e = e.replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
                e)
              : null;
          }
          function pe(e) {
            return (
              "%" +
              (((e = e.charCodeAt(0)) >> 4) & 15).toString(16) +
              (15 & e).toString(16)
            );
          }
          ((i = se.prototype).rb = ""),
            (i.hc = ""),
            (i.gb = ""),
            (i.Bc = null),
            (i.jb = ""),
            (i.Ub = ""),
            (i.toString = function () {
              var e = [],
                t = this.rb;
              if ((t && e.push(fe(t, ge, !0), ":"), (t = this.gb))) {
                e.push("//");
                var n = this.hc;
                n && e.push(fe(n, ge, !0), "@"),
                  e.push(
                    encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g, "%$1")
                  ),
                  null != (t = this.Bc) && e.push(":", String(t));
              }
              return (
                (t = this.jb) &&
                  (this.gb && "/" != t.charAt(0) && e.push("/"),
                  e.push(fe(t, "/" == t.charAt(0) ? ve : me, !0))),
                (t = this.g.toString()) && e.push("?", t),
                (t = this.Ub) && e.push("#", fe(t, be)),
                e.join("")
              );
            }),
            (i.resolve = function (e) {
              var t = this.clone();
              "data" === t.rb && (t = new se());
              var n = !!e.rb;
              n ? ue(t, e.rb) : (n = !!e.hc),
                n ? (t.hc = e.hc) : (n = !!e.gb),
                n ? le(t, e.gb) : (n = null != e.Bc);
              var i = e.jb;
              if (n) ce(t, e.Bc);
              else if ((n = !!e.jb)) {
                if ("/" != i.charAt(0))
                  if (this.gb && !this.jb) i = "/" + i;
                  else {
                    var r = t.jb.lastIndexOf("/");
                    -1 != r && (i = t.jb.substr(0, r + 1) + i);
                  }
                if (".." == i || "." == i) i = "";
                else if (-1 != i.indexOf("./") || -1 != i.indexOf("/.")) {
                  (r = 0 == i.lastIndexOf("/", 0)), (i = i.split("/"));
                  for (var a = [], o = 0; o < i.length; ) {
                    var s = i[o++];
                    "." == s
                      ? r && o == i.length && a.push("")
                      : ".." == s
                      ? ((1 < a.length || (1 == a.length && "" != a[0])) &&
                          a.pop(),
                        r && o == i.length && a.push(""))
                      : (a.push(s), (r = !0));
                  }
                  i = a.join("/");
                }
              }
              return (
                n ? (t.jb = i) : (n = "" !== e.g.toString()),
                n ? de(t, e.g.clone()) : (n = !!e.Ub),
                n && (t.Ub = e.Ub),
                t
              );
            }),
            (i.clone = function () {
              return new se(this);
            });
          var ge = /[#\/\?@]/g,
            me = /[#\?:]/g,
            ve = /[#\?]/g,
            ye = /[#\?@]/g,
            be = /#/g;
          function we(e) {
            this.g = e || null;
          }
          function xe(e) {
            if (!e.Da && ((e.Da = new Map()), (e.Jc = 0), e.g))
              for (var t = e.g.split("&"), n = 0; n < t.length; n++) {
                var i = t[n].indexOf("="),
                  r = null;
                if (0 <= i) {
                  var a = t[n].substring(0, i);
                  r = t[n].substring(i + 1);
                } else a = t[n];
                (a = decodeURIComponent(a.replace(/\+/g, " "))),
                  (r = r || ""),
                  e.add(a, decodeURIComponent(r.replace(/\+/g, " ")));
              }
          }
          function Se() {}
          function Te(e, t) {
            if (!e && !t) return !0;
            if (!e || !t || e.byteLength != t.byteLength) return !1;
            if (
              (ArrayBuffer.isView(e) ? e.buffer : e) ==
                (ArrayBuffer.isView(t) ? t.buffer : t) &&
              (e.byteOffset || 0) == (t.byteOffset || 0)
            )
              return !0;
            var n = ke(e);
            t = ke(t);
            for (var i = 0; i < e.byteLength; i++) if (n[i] != t[i]) return !1;
            return !0;
          }
          function Ae(e) {
            return ArrayBuffer.isView(e)
              ? 0 == e.byteOffset && e.byteLength == e.buffer.byteLength
                ? e.buffer
                : new Uint8Array(e).buffer
              : e;
          }
          function ke(e, t, n) {
            return Me(
              e,
              void 0 === t ? 0 : t,
              (n = void 0 === n ? 1 / 0 : n),
              Uint8Array
            );
          }
          function Ie(e, t, n) {
            return Me(
              e,
              void 0 === t ? 0 : t,
              (n = void 0 === n ? 1 / 0 : n),
              Uint16Array
            );
          }
          function Ce(e, t, n) {
            return Me(
              e,
              void 0 === t ? 0 : t,
              (n = void 0 === n ? 1 / 0 : n),
              DataView
            );
          }
          function Me(e, t, n, i) {
            var r = ArrayBuffer.isView(e) ? e.buffer : e,
              a = 1;
            "BYTES_PER_ELEMENT" in i && (a = i.BYTES_PER_ELEMENT);
            var o = ((e.byteOffset || 0) + e.byteLength) / a;
            return new i(
              r,
              (e = Math.floor(
                Math.max(0, Math.min(((e.byteOffset || 0) + t) / a, o))
              )),
              Math.floor(Math.min(e + Math.max(n, 0), o)) - e
            );
          }
          function Ee(e, t, n) {
            var i = R.apply(3, arguments);
            if (
              ((this.severity = e),
              (this.category = t),
              (this.code = n),
              (this.data = i),
              (this.handled = !1),
              (this.message = "Shaka Error " + this.code),
              De)
            )
              try {
                throw Error(this.message || "Shaka Error");
              } catch (r) {
                this.stack = r.stack;
              }
          }
          ((i = we.prototype).Da = null),
            (i.Jc = null),
            (i.add = function (e, t) {
              xe(this), (this.g = null);
              var n = this.Da.has(e) ? this.Da.get(e) : null;
              return n || this.Da.set(e, (n = [])), n.push(t), this.Jc++, this;
            }),
            (i.set = function (e, t) {
              return (
                xe(this),
                (this.g = null),
                this.Da.has(e) ? this.Da.set(e, [t]) : this.add(e, t),
                this
              );
            }),
            (i.get = function (e) {
              return xe(this), this.Da.get(e) || [];
            }),
            (i.toString = function () {
              if (this.g) return this.g;
              if (!this.Da || !this.Da.size) return "";
              for (
                var e = [], t = c(this.Da.keys()), n = t.next();
                !n.done;
                n = t.next()
              ) {
                var i = n.value;
                (n = encodeURIComponent(i)), (i = this.Da.get(i));
                for (var r = 0; r < i.length; r++) {
                  var a = n;
                  "" !== i[r] && (a += "=" + encodeURIComponent(i[r])),
                    e.push(a);
                }
              }
              return (this.g = e.join("&"));
            }),
            (i.clone = function () {
              var e = new we();
              if (((e.g = this.g), this.Da)) {
                for (
                  var t = new Map(), n = c(this.Da), i = n.next();
                  !i.done;
                  i = n.next()
                ) {
                  var r = c(i.value);
                  (i = r.next().value),
                    (r = r.next().value),
                    t.set(i, r.concat());
                }
                (e.Da = t), (e.Jc = this.Jc);
              }
              return e;
            }),
            F("shaka.util.BufferUtils", Se),
            (Se.toDataView = Ce),
            (Se.toUint16 = Ie),
            (Se.toUint8 = ke),
            (Se.toArrayBuffer = Ae),
            (Se.equal = Te),
            (Ee.prototype.toString = function () {
              return "shaka.util.Error " + JSON.stringify(this, null, "  ");
            }),
            F("shaka.util.Error", Ee);
          var De = !0;
          function Pe(e) {
            (this.h = e), (this.g = void 0);
          }
          function Le(e, t) {
            if (!e.length) return t;
            if (!t.length) return e;
            for (var n = [], i = (e = c(e)).next(); !i.done; i = e.next()) {
              i = i.value;
              for (var r = c(t), a = r.next(); !a.done; a = r.next())
                if (((a = a.value), i.keySystem == a.keySystem)) {
                  r = new Map();
                  for (
                    var o = c((i.initData || []).concat(a.initData || [])),
                      s = o.next();
                    !s.done;
                    s = o.next()
                  )
                    (s = s.value), r.set(s.keyId, s);
                  (r = Array.from(r.values())),
                    (o =
                      i.keyIds && a.keyIds
                        ? new Set([].concat(d(i.keyIds), d(a.keyIds)))
                        : i.keyIds || a.keyIds),
                    n.push({
                      keySystem: i.keySystem,
                      licenseServerUri:
                        i.licenseServerUri || a.licenseServerUri,
                      distinctiveIdentifierRequired:
                        i.distinctiveIdentifierRequired ||
                        a.distinctiveIdentifierRequired,
                      persistentStateRequired:
                        i.persistentStateRequired || a.persistentStateRequired,
                      videoRobustness: i.videoRobustness || a.videoRobustness,
                      audioRobustness: i.audioRobustness || a.audioRobustness,
                      serverCertificate:
                        i.serverCertificate || a.serverCertificate,
                      serverCertificateUri:
                        i.serverCertificateUri || a.serverCertificateUri,
                      initData: r,
                      keyIds: o,
                    });
                  break;
                }
            }
            return n;
          }
          function Re(e) {
            return !!e && !!e.match(/^com\.(microsoft|chromecast)\.playready/);
          }
          function Ne(e) {
            return !!e && !!e.match(/^com\.apple\.fps/);
          }
          (Ee.Severity = { RECOVERABLE: 1, CRITICAL: 2 }),
            (Ee.Category = {
              NETWORK: 1,
              TEXT: 2,
              MEDIA: 3,
              MANIFEST: 4,
              STREAMING: 5,
              DRM: 6,
              PLAYER: 7,
              CAST: 8,
              STORAGE: 9,
              ADS: 10,
            }),
            (Ee.Code = {
              UNSUPPORTED_SCHEME: 1e3,
              BAD_HTTP_STATUS: 1001,
              HTTP_ERROR: 1002,
              TIMEOUT: 1003,
              MALFORMED_DATA_URI: 1004,
              REQUEST_FILTER_ERROR: 1006,
              RESPONSE_FILTER_ERROR: 1007,
              MALFORMED_TEST_URI: 1008,
              UNEXPECTED_TEST_REQUEST: 1009,
              ATTEMPTS_EXHAUSTED: 1010,
              SEGMENT_MISSING: 1011,
              INVALID_TEXT_HEADER: 2e3,
              INVALID_TEXT_CUE: 2001,
              UNABLE_TO_DETECT_ENCODING: 2003,
              BAD_ENCODING: 2004,
              INVALID_XML: 2005,
              INVALID_MP4_TTML: 2007,
              INVALID_MP4_VTT: 2008,
              UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
              INVALID_MP4_CEA: 2010,
              TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
              CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
              TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
              MISSING_TEXT_PLUGIN: 2014,
              UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
              BUFFER_READ_OUT_OF_BOUNDS: 3e3,
              JS_INTEGER_OVERFLOW: 3001,
              EBML_OVERFLOW: 3002,
              EBML_BAD_FLOATING_POINT_SIZE: 3003,
              MP4_SIDX_WRONG_BOX_TYPE: 3004,
              MP4_SIDX_INVALID_TIMESCALE: 3005,
              MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
              WEBM_CUES_ELEMENT_MISSING: 3007,
              WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
              WEBM_SEGMENT_ELEMENT_MISSING: 3009,
              WEBM_INFO_ELEMENT_MISSING: 3010,
              WEBM_DURATION_ELEMENT_MISSING: 3011,
              WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
              WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
              MEDIA_SOURCE_OPERATION_FAILED: 3014,
              MEDIA_SOURCE_OPERATION_THREW: 3015,
              VIDEO_ERROR: 3016,
              QUOTA_EXCEEDED_ERROR: 3017,
              TRANSMUXING_FAILED: 3018,
              CONTENT_TRANSFORMATION_FAILED: 3019,
              MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
              MSS_TRANSMUXING_FAILED: 3022,
              TRANSMUXING_NO_VIDEO_DATA: 3023,
              STREAMING_NOT_ALLOWED: 3024,
              UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3,
              DASH_INVALID_XML: 4001,
              DASH_NO_SEGMENT_INFO: 4002,
              DASH_EMPTY_ADAPTATION_SET: 4003,
              DASH_EMPTY_PERIOD: 4004,
              DASH_WEBM_MISSING_INIT: 4005,
              DASH_UNSUPPORTED_CONTAINER: 4006,
              DASH_PSSH_BAD_ENCODING: 4007,
              DASH_NO_COMMON_KEY_SYSTEM: 4008,
              DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
              DASH_CONFLICTING_KEY_IDS: 4010,
              RESTRICTIONS_CANNOT_BE_MET: 4012,
              HLS_PLAYLIST_HEADER_MISSING: 4015,
              INVALID_HLS_TAG: 4016,
              HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
              DASH_DUPLICATE_REPRESENTATION_ID: 4018,
              HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
              HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
              HLS_REQUIRED_TAG_MISSING: 4024,
              HLS_COULD_NOT_GUESS_CODECS: 4025,
              HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
              DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
              DASH_XLINK_DEPTH_LIMIT: 4028,
              CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
              CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
              NO_VARIANTS: 4036,
              PERIOD_FLATTENING_FAILED: 4037,
              INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
              HLS_VARIABLE_NOT_FOUND: 4039,
              HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
              HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
              NO_WEB_CRYPTO_API: 4042,
              CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
              MSS_INVALID_XML: 4046,
              MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
              AES_128_INVALID_IV_LENGTH: 4048,
              AES_128_INVALID_KEY_LENGTH: 4049,
              DASH_CONFLICTING_AES_128: 4050,
              DASH_UNSUPPORTED_AES_128: 4051,
              DASH_INVALID_PATCH: 4052,
              HLS_EMPTY_MEDIA_PLAYLIST: 4053,
              DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4054,
              CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM: 4054,
              STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
              NO_RECOGNIZED_KEY_SYSTEMS: 6e3,
              REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
              FAILED_TO_CREATE_CDM: 6002,
              FAILED_TO_ATTACH_TO_VIDEO: 6003,
              INVALID_SERVER_CERTIFICATE: 6004,
              FAILED_TO_CREATE_SESSION: 6005,
              FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
              LICENSE_REQUEST_FAILED: 6007,
              LICENSE_RESPONSE_REJECTED: 6008,
              ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
              NO_LICENSE_SERVER_GIVEN: 6012,
              OFFLINE_SESSION_REMOVED: 6013,
              EXPIRED: 6014,
              SERVER_CERTIFICATE_REQUIRED: 6015,
              INIT_DATA_TRANSFORM_ERROR: 6016,
              SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
              MIN_HDCP_VERSION_NOT_MATCH: 6018,
              ERROR_CHECKING_HDCP_VERSION: 6019,
              MISSING_EME_SUPPORT: 6020,
              LOAD_INTERRUPTED: 7e3,
              OPERATION_ABORTED: 7001,
              NO_VIDEO_ELEMENT: 7002,
              OBJECT_DESTROYED: 7003,
              CONTENT_NOT_LOADED: 7004,
              SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
              PRELOAD_DESTROYED: 7006,
              CAST_API_UNAVAILABLE: 8e3,
              NO_CAST_RECEIVERS: 8001,
              ALREADY_CASTING: 8002,
              UNEXPECTED_CAST_ERROR: 8003,
              CAST_CANCELED_BY_USER: 8004,
              CAST_CONNECTION_TIMED_OUT: 8005,
              CAST_RECEIVER_APP_UNAVAILABLE: 8006,
              STORAGE_NOT_SUPPORTED: 9e3,
              INDEXED_DB_ERROR: 9001,
              DEPRECATED_OPERATION_ABORTED: 9002,
              REQUESTED_ITEM_NOT_FOUND: 9003,
              MALFORMED_OFFLINE_URI: 9004,
              CANNOT_STORE_LIVE_OFFLINE: 9005,
              NO_INIT_DATA_FOR_OFFLINE: 9007,
              LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
              NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
              KEY_NOT_FOUND: 9012,
              MISSING_STORAGE_CELL: 9013,
              STORAGE_LIMIT_REACHED: 9014,
              DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
              MODIFY_OPERATION_NOT_SUPPORTED: 9016,
              INDEXED_DB_INIT_TIMED_OUT: 9017,
              CS_IMA_SDK_MISSING: 1e4,
              CS_AD_MANAGER_NOT_INITIALIZED: 10001,
              SS_IMA_SDK_MISSING: 10002,
              SS_AD_MANAGER_NOT_INITIALIZED: 10003,
              CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
              MT_AD_MANAGER_NOT_INITIALIZED: 10005,
              INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED: 10006,
              VAST_INVALID_XML: 10007,
            }),
            (Pe.prototype.value = function () {
              return void 0 === this.g && (this.g = this.h()), this.g;
            });
          var _e = new Pe(function () {
              return Ae(new Uint8Array([0]));
            }),
            Ue = new Map();
          function je(e) {
            (this.h = e), (this.g = null);
          }
          function Oe(e) {
            (this.h = e), (this.g = null);
          }
          function Be() {
            var t = e.ManagedMediaSource || e.MediaSource;
            return !(!t || !t.isTypeSupported);
          }
          function Fe(e) {
            return "" != ot().canPlayType(e);
          }
          function He() {
            return !!navigator.userAgent.match(/Edge?\//);
          }
          function Ve() {
            return rt("Xbox One");
          }
          function ze() {
            return rt("Tizen");
          }
          function Ge() {
            return rt("Tizen 3");
          }
          function qe() {
            return rt("Web0S");
          }
          function Ke() {
            return qe() && 38 === Xe();
          }
          function We() {
            return rt("CrKey") && !Qe();
          }
          function Xe() {
            if (!rt("Chrome") || navigator.userAgent.match(/Edge\//))
              return null;
            var e = navigator.userAgent.match(/Chrome\/(\d+)/);
            return e ? parseInt(e[1], 10) : null;
          }
          function Ye() {
            return (
              at() &&
              ((navigator.userAgentData && navigator.userAgentData.platform
                ? "macos" == navigator.userAgentData.platform.toLowerCase()
                : !!navigator.platform &&
                  navigator.platform.toLowerCase().includes("mac")) ||
                !!/(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ||
                (at() && 1 < navigator.maxTouchPoints))
            );
          }
          function Je() {
            return rt("PlayStation 5");
          }
          function $e() {
            return rt("PlayStation 4");
          }
          function Ze() {
            return rt("Hisense") || rt("VIDAA");
          }
          function Qe() {
            return rt("VIZIO SmartCast");
          }
          function et() {
            if (!Ye() && (!at() || Ye())) return null;
            var e = navigator.userAgent.match(/Version\/(\d+)/);
            return e || (e = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))
              ? parseInt(e[1], 10)
              : null;
          }
          function tt() {
            return navigator.userAgentData && navigator.userAgentData.platform
              ? "windows" == navigator.userAgentData.platform.toLowerCase()
              : !!navigator.platform &&
                  navigator.platform.toLowerCase().includes("win32");
          }
          function nt() {
            return navigator.userAgentData && navigator.userAgentData.platform
              ? "android" == navigator.userAgentData.platform.toLowerCase()
              : rt("Android");
          }
          function it() {
            return navigator.userAgentData && navigator.userAgentData.platform
              ? "fuchsia" == navigator.userAgentData.platform.toLowerCase()
              : rt("Fuchsia");
          }
          function rt(e) {
            return (navigator.userAgent || "").includes(e);
          }
          function at() {
            return (navigator.vendor || "").includes("Apple");
          }
          function ot() {
            return (
              dt ||
              (ct ||
                (ct = new Oe(function () {
                  dt = null;
                })),
              (dt =
                document.getElementsByTagName("video")[0] ||
                document.getElementsByTagName("audio")[0]) ||
                (dt = document.createElement("video")),
              ct.ea(1),
              dt)
            );
          }
          function st() {
            if (Ge() || rt("Tizen 2") || Ke() || $e() || Je()) return !1;
            var e = et();
            return !(at() && !Ye() && null != e && 15 > e);
          }
          function ut() {
            var t, n, i, r, a, o, s, u, l, c, d, h, f, p, g;
            return L(function (m) {
              switch (m.g) {
                case 1:
                  if (((t = { width: 1 / 0, height: 1 / 0 }), We())) {
                    if (
                      ((f =
                        e.cast &&
                        cast.__platform__ &&
                        cast.__platform__.canDisplayType),
                      (t.width = 1280),
                      (t.height = 720),
                      T(m, 14),
                      !(p = f))
                    ) {
                      m.u(16);
                      break;
                    }
                    return x(
                      m,
                      cast.__platform__.canDisplayType(
                        'video/mp4; codecs="avc1.640028"; width=3840; height=2160'
                      ),
                      17
                    );
                  }
                  if (ze()) {
                    (n = e.devicePixelRatio),
                      (t.width = 1920 < e.screen.width * n ? 3840 : 1920),
                      (t.height = 1080 < e.screen.height * n ? 2160 : 1080);
                    try {
                      webapis.systeminfo &&
                      webapis.systeminfo.getMaxVideoResolution
                        ? ((i = webapis.systeminfo.getMaxVideoResolution()),
                          (t.width = i.width),
                          (t.height = i.height))
                        : webapis.productinfo.is8KPanelSupported &&
                          webapis.productinfo.is8KPanelSupported()
                        ? ((t.width = 7680), (t.height = 4320))
                        : webapis.productinfo.isUdPanelSupported &&
                          webapis.productinfo.isUdPanelSupported() &&
                          ((t.width = 3840), (t.height = 2160));
                    } catch (v) {
                      X(
                        "Tizen: Error detecting screen size, default screen size 1920x1080."
                      );
                    }
                    m.u(3);
                    break;
                  }
                  if (qe()) {
                    try {
                      (r = JSON.parse(e.PalmSystem.deviceInfo)),
                        (t.width = Math.max(1920, r.screenWidth)),
                        (t.height = Math.max(1080, r.screenHeight));
                    } catch (v) {
                      X(
                        "WebOS: Error detecting screen size, default screen size 1920x1080."
                      ),
                        (t.width = 1920),
                        (t.height = 1080);
                    }
                    m.u(3);
                    break;
                  }
                  if (Ze()) {
                    if (((a = null), e.Hisense_Get4KSupportState))
                      try {
                        a = e.Hisense_Get4KSupportState();
                      } catch (v) {}
                    null == a && (a = rt("UHD")),
                      a
                        ? ((t.width = 3840), (t.height = 2160))
                        : ((t.width = 1920), (t.height = 1080)),
                      m.u(3);
                    break;
                  }
                  if (!$e() && !Je()) {
                    o = void 0;
                    try {
                      o =
                        "undefined" != typeof Windows
                          ? Windows
                          : chrome.webview.hostObjects.sync.Windows;
                    } catch (v) {}
                    if (o) {
                      (t.width = 1920), (t.height = 1080);
                      try {
                        (s = new o.Media.Protection.ProtectionCapabilities()),
                          (u = o.Media.Protection.ProtectionCapabilityResult),
                          (l = null);
                        do {
                          l = s.isTypeSupported(
                            'video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',
                            "com.microsoft.playready.recommendation"
                          );
                        } while (l === u.maybe);
                        l === u.probably &&
                          ((t.width = 3840), (t.height = 2160));
                      } catch (v) {
                        X(
                          "Xbox: Error detecting screen size, default screen size 1920x1080."
                        );
                      }
                    } else
                      Ve() &&
                        ((t.width = 1920),
                        (t.height = 1080),
                        X(
                          "Xbox: Error detecting screen size, default screen size 1920x1080."
                        ));
                    m.u(3);
                    break;
                  }
                  return (
                    (c = !1), T(m, 8), x(m, e.msdk.device.getDisplayInfo(), 10)
                  );
                case 10:
                  (d = m.h), (c = "4K" === d.resolution), A(m, 9);
                  break;
                case 8:
                  return (
                    k(m),
                    T(m, 11),
                    x(m, e.msdk.device.getDisplayInfoImmediate(), 13)
                  );
                case 13:
                  (h = m.h), (c = "4K" === h.resolution), A(m, 9);
                  break;
                case 11:
                  X("PlayStation: Failed to get the display info:", k(m));
                case 9:
                  c
                    ? ((t.width = 3840), (t.height = 2160))
                    : ((t.width = 1920), (t.height = 1080)),
                    m.u(3);
                  break;
                case 17:
                  p = m.h;
                case 16:
                  if (p) {
                    (t.width = 3840), (t.height = 2160), m.u(18);
                    break;
                  }
                  if (!(g = f)) {
                    m.u(19);
                    break;
                  }
                  return x(
                    m,
                    cast.__platform__.canDisplayType(
                      'video/mp4; codecs="avc1.640028"; width=1920; height=1080'
                    ),
                    20
                  );
                case 20:
                  g = m.h;
                case 19:
                  g && ((t.width = 1920), (t.height = 1080));
                case 18:
                  A(m, 3);
                  break;
                case 14:
                  W("Failed to check canDisplayType:", k(m));
                case 3:
                  return m.return(t);
              }
            });
          }
          function lt(t) {
            return void 0 !== e.matchMedia &&
              e.matchMedia("(color-gamut: p3)").matches
              ? t
                ? "HLG"
                : "PQ"
              : "SDR";
          }
          (je.prototype.ea = function (t) {
            var n = this;
            this.stop();
            var i = !0,
              r = null;
            return (
              (this.g = function () {
                e.clearTimeout(r), (i = !1);
              }),
              (r = e.setTimeout(function () {
                i && n.h();
              }, 1e3 * t)),
              this
            );
          }),
            (je.prototype.stop = function () {
              this.g && (this.g(), (this.g = null));
            }),
            (Oe.prototype.Nb = function () {
              return this.stop(), this.h(), this;
            }),
            (Oe.prototype.ea = function (e) {
              var t = this;
              return (
                this.stop(),
                (this.g = new je(function () {
                  t.h();
                }).ea(e)),
                this
              );
            }),
            (Oe.prototype.ta = function (e) {
              var t = this;
              return (
                this.stop(),
                (this.g = new je(function () {
                  t.g.ea(e), t.h();
                }).ea(e)),
                this
              );
            }),
            (Oe.prototype.stop = function () {
              this.g && (this.g.stop(), (this.g = null));
            }),
            F("shaka.util.Timer", Oe),
            (Oe.prototype.stop = Oe.prototype.stop),
            (Oe.prototype.tickEvery = Oe.prototype.ta),
            (Oe.prototype.tickAfter = Oe.prototype.ea),
            (Oe.prototype.tickNow = Oe.prototype.Nb);
          var ct = null,
            dt = null;
          function ht() {}
          function ft(t) {
            if (!t) return "";
            if (
              (239 == (t = ke(t))[0] &&
                187 == t[1] &&
                191 == t[2] &&
                (t = t.subarray(3)),
              e.TextDecoder && !$e())
            )
              return (
                (t = new TextDecoder().decode(t)).includes("") &&
                  W(
                    'Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'
                  ),
                t
              );
            for (var n = "", i = 0; i < t.length; ++i) {
              var r = 65533;
              if (
                (128 & t[i]
                  ? t.length >= i + 2 &&
                    192 == (224 & t[i]) &&
                    128 == (192 & t[i + 1])
                    ? ((r = ((31 & t[i]) << 6) | (63 & t[i + 1])), (i += 1))
                    : t.length >= i + 3 &&
                      224 == (240 & t[i]) &&
                      128 == (192 & t[i + 1]) &&
                      128 == (192 & t[i + 2])
                    ? ((r =
                        ((15 & t[i]) << 12) |
                        ((63 & t[i + 1]) << 6) |
                        (63 & t[i + 2])),
                      (i += 2))
                    : t.length >= i + 4 &&
                      240 == (241 & t[i]) &&
                      128 == (192 & t[i + 1]) &&
                      128 == (192 & t[i + 2]) &&
                      128 == (192 & t[i + 3]) &&
                      ((r =
                        ((7 & t[i]) << 18) |
                        ((63 & t[i + 1]) << 12) |
                        ((63 & t[i + 2]) << 6) |
                        (63 & t[i + 3])),
                      (i += 3))
                  : (r = t[i]),
                65535 >= r)
              )
                n += String.fromCharCode(r);
              else {
                var a = 1023 & (r -= 65536);
                (n += String.fromCharCode(55296 + (r >> 10))),
                  (n += String.fromCharCode(56320 + a));
              }
            }
            return n;
          }
          function pt(e, t, n) {
            if (!e) return "";
            if (!n && 0 != e.byteLength % 2) throw new Ee(2, 2, 2004);
            n = Math.floor(e.byteLength / 2);
            var i = new Uint16Array(n);
            e = Ce(e);
            for (var r = 0; r < n; r++) i[r] = e.getUint16(2 * r, t);
            return yt(i);
          }
          function gt(e) {
            function t(e) {
              return n.byteLength <= e || (9 <= n[e] && 126 >= n[e]);
            }
            if (!e) return "";
            var n = ke(e);
            if (239 == n[0] && 187 == n[1] && 191 == n[2]) return ft(n);
            if (254 == n[0] && 255 == n[1]) return pt(n.subarray(2), !1);
            if (255 == n[0] && 254 == n[1]) return pt(n.subarray(2), !0);
            if (0 == n[0] && 0 == n[2]) return pt(e, !1);
            if (0 == n[1] && 0 == n[3]) return pt(e, !0);
            if (t(0) && t(1) && t(2) && t(3)) return ft(e);
            throw new Ee(2, 2, 2003);
          }
          function mt(t) {
            if (e.TextEncoder && !$e()) {
              var n = new TextEncoder();
              return Ae(n.encode(t));
            }
            (t = encodeURIComponent(t)),
              (t = unescape(t)),
              (n = new Uint8Array(t.length));
            for (var i = 0; i < t.length; i++) n[i] = t[i].charCodeAt(0);
            return Ae(n);
          }
          function vt(e, t) {
            for (
              var n = new ArrayBuffer(2 * e.length), i = new DataView(n), r = 0;
              r < e.length;
              ++r
            )
              i.setUint16(2 * r, e.charCodeAt(r), t);
            return n;
          }
          function yt(e) {
            return wt.value()(e);
          }
          function bt(e) {
            var t = {
                "&amp;": "&",
                "&lt;": "<",
                "&gt;": ">",
                "&quot;": '"',
                "&apos;": "'",
                "&nbsp;": "",
                "&lrm;": "",
                "&rlm;": "",
              },
              n = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,
              i = RegExp(n.source);
            return e && i.test(e)
              ? e.replace(n, function (e) {
                  return "#" == e[1]
                    ? 0 <=
                        (e =
                          "x" == e[2] || "X" == e[2]
                            ? parseInt(e.substring(3), 16)
                            : parseInt(e.substring(2), 10)) && 1114111 >= e
                      ? String.fromCodePoint(e)
                      : ""
                    : t[e] || "'";
                })
              : e || "";
          }
          F("shaka.util.StringUtils", ht),
            (ht.resetFromCharCode = function () {
              wt.g = void 0;
            }),
            (ht.toUTF16 = vt),
            (ht.toUTF8 = mt),
            (ht.fromBytesAutoDetect = gt),
            (ht.fromUTF16 = pt),
            (ht.fromUTF8 = ft);
          var wt = new Pe(function () {
            function e(e) {
              try {
                var t = new Uint8Array(e);
                return 0 < String.fromCharCode.apply(null, t).length;
              } catch (n) {
                return !1;
              }
            }
            for (var t = { Mb: 65536 }; 0 < t.Mb; (t = { Mb: t.Mb }).Mb /= 2)
              if (e(t.Mb))
                return (function (e) {
                  return function (t) {
                    for (var n = "", i = 0; i < t.length; i += e.Mb)
                      n += String.fromCharCode.apply(
                        null,
                        t.subarray(i, i + e.Mb)
                      );
                    return n;
                  };
                })(t);
            return null;
          });
          function xt() {}
          function St(e) {
            return (e = yt(ke(e))), btoa(e);
          }
          function Tt(e, t) {
            return (
              (t = null == t || t),
              (e = St(e).replace(/\+/g, "-").replace(/\//g, "_")),
              t ? e : e.replace(/[=]*$/, "")
            );
          }
          function At(t) {
            t = e.atob(t.replace(/-/g, "+").replace(/_/g, "/"));
            for (var n = new Uint8Array(t.length), i = 0; i < t.length; ++i)
              n[i] = t.charCodeAt(i);
            return n;
          }
          function kt(t) {
            for (var n = t.length / 2, i = new Uint8Array(n), r = 0; r < n; r++)
              i[r] = e.parseInt(t.substr(2 * r, 2), 16);
            return i;
          }
          function It(e) {
            var t = ke(e);
            e = "";
            for (var n = (t = c(t)).next(); !n.done; n = t.next())
              1 == (n = (n = n.value).toString(16)).length && (n = "0" + n),
                (e += n);
            return e;
          }
          function Ct() {
            for (var e = R.apply(0, arguments), t = 0, n = 0; n < e.length; ++n)
              t += e[n].byteLength;
            t = new Uint8Array(t);
            for (var i = (n = 0); i < e.length; ++i) {
              var r = e[i];
              ArrayBuffer.isView(r) && 1 === r.BYTES_PER_ELEMENT
                ? t.set(r, n)
                : t.set(ke(r), n),
                (n += r.byteLength);
            }
            return t;
          }
          function Mt(e, t, n) {
            if (((n = void 0 === n ? "" : n), 0 == t.length)) return e;
            if (1 == e.length && 1 == t.length) {
              var i = new se(e[0]);
              return (
                (t = new se(t[0])),
                (t = i.resolve(t)),
                n && de(t, n),
                [t.toString()]
              );
            }
            (t = t.map(function (e) {
              return new se(e);
            })),
              (i = []);
            for (var r = (e = c(e)).next(); !r.done; r = e.next()) {
              r = new se(r.value);
              for (var a = c(t), o = a.next(); !o.done; o = a.next())
                (o = r.resolve(o.value)), n && de(o, n), i.push(o.toString());
            }
            return i;
          }
          function Et(e, t, n) {
            return {
              keySystem: e,
              encryptionScheme: t,
              licenseServerUri: "",
              distinctiveIdentifierRequired: !1,
              persistentStateRequired: !1,
              audioRobustness: "",
              videoRobustness: "",
              serverCertificate: null,
              serverCertificateUri: "",
              sessionType: "",
              initData: n || [],
              keyIds: new Set(),
            };
          }
          function Dt(e, t) {
            if (1 == t.length) return t[0];
            if (null != (e = Pt(e, t))) return e;
            throw new Ee(2, 4, 4025, t);
          }
          function Pt(e, t) {
            for (
              var n = Ut.get(e), i = (n = c(n)).next();
              !i.done;
              i = n.next()
            ) {
              i = i.value;
              for (var r = c(t), a = r.next(); !a.done; a = r.next())
                if (((a = a.value), i.test(a.trim()))) return a.trim();
            }
            return e == Rt ? "" : null;
          }
          function Lt(e, t) {
            for (
              var n = [], i = (e = c((e = Ut.get(e)))).next();
              !i.done;
              i = e.next()
            ) {
              i = i.value;
              for (var r = c(t), a = r.next(); !a.done; a = r.next())
                (a = a.value), i.test(a.trim()) && n.push(a.trim());
            }
            return n;
          }
          F("shaka.util.Uint8ArrayUtils", xt),
            (xt.concat = Ct),
            (xt.toHex = It),
            (xt.fromHex = kt),
            (xt.fromBase64 = At),
            (xt.toBase64 = Tt),
            (xt.toStandardBase64 = St);
          var Rt = "text",
            Nt = {
              ja: "video",
              P: "audio",
              ua: Rt,
              Mg: "image",
              Hi: "application",
            },
            _t = 1 / 15,
            Ut = new Map()
              .set("audio", [
                /^vorbis$/,
                /^Opus$/,
                /^opus$/,
                /^fLaC$/,
                /^flac$/,
                /^mp4a/,
                /^[ae]c-3$/,
                /^ac-4/,
                /^dts[cex]$/,
                /^iamf/,
                /^mhm[12]/,
                /^ac3$/,
                /^eac3$/,
              ])
              .set("video", [
                /^avc/,
                /^hev/,
                /^hvc/,
                /^vvc/,
                /^vvi/,
                /^vp0?[89]/,
                /^av01/,
                /^dvh/,
                /^dva/,
                /^dav/,
              ])
              .set("text", [/^vtt$/, /^wvtt/, /^stpp/]);
          function jt(e, t, n, i) {
            (this.g = null),
              (this.l = e),
              (this.i = t),
              (this.m = n),
              (this.o = i),
              (this.j = !1);
            e: {
              if (
                ("undefined" == typeof libDPIModule &&
                  X("Could not find LCEVC Library dependencies on this page"),
                "undefined" != typeof LCEVCdec)
              )
                this.h = LCEVCdec;
              else {
                if ("undefined" == typeof LcevcDil) {
                  X("Could not find LCEVC Library on this page"), (e = !1);
                  break e;
                }
                (this.h = LcevcDil),
                  (this.j = !0),
                  ne(
                    "LcevcDil",
                    "lcevc_dil.js is deprecated, please use lcevc_dec.js instead"
                  );
              }
              void 0 === this.h.SupportObject
                ? (X("Could not find LCEVC Library on this page"), (e = !1))
                : (this.h.SupportObject.SupportStatus ||
                    X(this.h.SupportObject.SupportError),
                  (e =
                    void 0 !== this.h &&
                    "undefined" != typeof libDPIModule &&
                    this.i instanceof HTMLCanvasElement &&
                    this.h.SupportObject.SupportStatus));
            }
            e &&
              !this.g &&
              this.h.SupportObject.webGLSupport(this.i) &&
              (this.i.classList.remove("shaka-hidden"),
              (this.g = this.j
                ? new this.h.LcevcDil(this.l, this.i, this.m)
                : new this.h.LCEVCdec(this.l, this.i, this.m)));
          }
          function Ot(e, t, n, i) {
            "video" !== i.type ||
              (e.o && !i.baseOriginalId) ||
              (e.g && e.g.appendBuffer(t, "video", i.id, -n, !e.o));
          }
          function Bt(e) {
            e.g && e.i.classList.add("shaka-hidden");
          }
          function Ft(e) {
            return (
              !(!e || "undefined" == typeof LCEVCdec) && "lvc1" == e.codecs
            );
          }
          function Ht(t) {
            if (Gt.has(t)) return Gt.get(t);
            var n = e.ManagedMediaSource || e.MediaSource;
            return !!n && ((n = n.isTypeSupported(t)), Gt.set(t, n), n);
          }
          function Vt() {
            var t = e.ManagedSourceBuffer || e.SourceBuffer;
            return !!t && !!t.prototype && !!t.prototype.changeType;
          }
          function zt() {
            var t = e.ManagedMediaSource || e.MediaSource;
            return (
              !(!t || !t.prototype) &&
              !!t.prototype.setLiveSeekableRange &&
              !!t.prototype.clearLiveSeekableRange
            );
          }
          (jt.prototype.release = function () {
            this.g && (this.g.close(), (this.g = null));
          }),
            F("shaka.lcevc.Dec", jt),
            (jt.prototype.release = jt.prototype.release);
          var Gt = new Map();
          function qt() {}
          function Kt() {}
          function Wt() {}
          function Xt(e) {
            (this.i = new Kt()),
              (e = Jt(e.toLowerCase())) && (this.i = e()),
              (this.g = new qt()),
              (e = Zt) && (this.g = e());
          }
          function Yt(e, t) {
            $t.set(e, t);
          }
          function Jt(e) {
            return $t.get(e);
          }
          (qt.prototype.extract = function () {}),
            (qt.prototype.decode = function () {
              return [];
            }),
            (qt.prototype.clear = function () {}),
            (qt.prototype.getStreams = function () {
              return [];
            }),
            (Kt.prototype.init = function () {}),
            (Kt.prototype.parse = function () {
              return [];
            }),
            (Wt.prototype.init = function () {}),
            (Wt.prototype.j = function () {}),
            (Wt.prototype.h = function () {}),
            F("shaka.media.IClosedCaptionParser", Wt),
            (Xt.prototype.init = function (e, t) {
              (void 0 !== t && t) || this.h(), this.i.init(e);
            }),
            (Xt.prototype.j = function (e) {
              for (
                var t = (e = c((e = this.i.parse(e)))).next();
                !t.done;
                t = e.next()
              ) {
                var n = ke((t = t.value).packet);
                0 < n.length && this.g.extract(n, t.pts);
              }
              return this.g.decode();
            }),
            (Xt.prototype.h = function () {
              this.g.clear();
            }),
            F("shaka.media.ClosedCaptionParser", Xt),
            (Xt.findDecoder = function () {
              return Zt;
            }),
            (Xt.unregisterDecoder = function () {
              Zt = null;
            }),
            (Xt.registerDecoder = function (e) {
              Zt = e;
            }),
            (Xt.findParser = Jt),
            (Xt.unregisterParser = function (e) {
              $t.delete(e);
            }),
            (Xt.registerParser = Yt);
          var $t = new Map(),
            Zt = null;
          function Qt() {
            (this.id = ""),
              (this.regionAnchorY =
                this.regionAnchorX =
                this.viewportAnchorY =
                this.viewportAnchorX =
                  0),
              (this.height = this.width = 100),
              (this.viewportAnchorUnits =
                this.widthUnits =
                this.heightUnits =
                  en),
              (this.scroll = tn);
          }
          F("shaka.text.CueRegion", Qt);
          var en = 1;
          Qt.units = { PX: 0, PERCENTAGE: en, LINES: 2 };
          var tn = "";
          function nn(e, t) {
            return (
              !(
                "number" != typeof e ||
                "number" != typeof t ||
                !isNaN(e) ||
                !isNaN(t)
              ) || e === t
            );
          }
          function rn(e, t) {
            -1 < (t = e.indexOf(t)) && e.splice(t, 1);
          }
          function an(e, t, n) {
            if (e === t) return !0;
            if (!e || !t) return e == t;
            if ((n || (n = nn), e.length != t.length)) return !1;
            for (var i = 0; i < e.length; i++) if (!n(e[i], t[i])) return !1;
            return !0;
          }
          function on(e) {
            (this.h = e || ""), (this.g = 0);
          }
          function sn(e) {
            un(e, /[ \t]+/gm);
          }
          function un(e, t) {
            return (
              (t.lastIndex = e.g),
              (t =
                null == (t = t.exec(e.h))
                  ? null
                  : { position: t.index, length: t[0].length, results: t }),
              e.g == e.h.length || null == t || t.position != e.g
                ? null
                : ((e.g += t.length), t.results)
            );
          }
          function ln(e) {
            return e.g == e.h.length
              ? null
              : (e = un(e, /[^ \t\n]*/gm))
              ? e[0]
              : null;
          }
          function cn(e) {
            if (null == (e = un(e, dn))) return null;
            var t = Number(e[2]),
              n = Number(e[3]);
            return 59 < t || 59 < n
              ? null
              : (Number(e[6]) || 0) / 1e3 +
                  n +
                  60 * t +
                  3600 * (Number(e[1]) || 0);
          }
          Qt.scrollMode = { NONE: tn, UP: "up" };
          var dn = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;
          function hn(e) {
            var t = new WeakSet();
            return (function e(n) {
              switch (typeof n) {
                case "undefined":
                case "boolean":
                case "number":
                case "string":
                case "symbol":
                case "function":
                  return n;
                default:
                  if (!n || ArrayBuffer.isView(n)) return n;
                  if (t.has(n)) return null;
                  var i = n.constructor == Array;
                  if (n.constructor != Object && !i) return null;
                  t.add(n);
                  var r,
                    a = i ? [] : {};
                  for (r in n) a[r] = e(n[r]);
                  return i && (a.length = n.length), a;
              }
            })(e);
          }
          function fn(e) {
            var t,
              n = {};
            for (t in e) n[t] = e[t];
            return n;
          }
          function pn(e) {
            if (Array.isArray(e)) {
              for (var t = [], n = 0; n < e.length; n++) {
                var i = n.toString(),
                  r = e[n];
                void 0 !== r && (r = pn(r)) && t.push(i + ":" + r);
              }
              e = "[" + t.join(",") + "]";
            } else if ("function" == typeof e) e = "";
            else if (e instanceof Object) {
              for (
                (n = Object.keys(e)).sort(), t = [], i = (n = c(n)).next();
                !i.done;
                i = n.next()
              )
                (r = i.value),
                  (i = JSON.stringify(r)),
                  void 0 !== (r = e[r]) && (r = pn(r)) && t.push(i + ":" + r);
              e = "{" + t.join(",") + "}";
            } else e = JSON.stringify(e);
            return e;
          }
          function gn(e, t) {
            var n = void 0 !== n && n;
            return mn((e = gt(e)), t, n);
          }
          function mn(e, t, n) {
            return (
              (e = (function (e, t) {
                function n(a, o) {
                  o = void 0 !== o && o;
                  for (var s = []; e[r]; )
                    if (60 == e.charCodeAt(r)) {
                      if (47 === e.charCodeAt(r + 1)) {
                        (o = r + 2), (r = e.indexOf(">", r));
                        var u = (o = e.substring(o, r)).indexOf(a);
                        if (-1 == u) {
                          var l = a.indexOf(".");
                          0 < l && (u = o.indexOf(a.substring(0, l)));
                        }
                        if (-1 == u)
                          throw (
                            ((a = e.substring(0, r).split("\n")),
                            Error(
                              "Unexpected close tag\nLine: " +
                                (a.length - 1) +
                                "\nColumn: " +
                                (a[a.length - 1].length + 1) +
                                "\nChar: " +
                                e[r]
                            ))
                          );
                        r + 1 && (r += 1);
                        break;
                      }
                      if (33 === e.charCodeAt(r + 1)) {
                        if (45 == e.charCodeAt(r + 2)) {
                          for (
                            ;
                            -1 !== r &&
                            (62 !== e.charCodeAt(r) ||
                              45 != e.charCodeAt(r - 1) ||
                              45 != e.charCodeAt(r - 2) ||
                              -1 == r);

                          )
                            r = e.indexOf(">", r + 1);
                          -1 === r && (r = e.length);
                        } else if (
                          91 === e.charCodeAt(r + 2) &&
                          91 === e.charCodeAt(r + 8) &&
                          "cdata" === e.substr(r + 3, 5).toLowerCase()
                        ) {
                          -1 == (u = e.indexOf("]]>", r))
                            ? (s.push(e.substr(r + 9)), (r = e.length))
                            : (s.push(e.substring(r + 9, u)), (r = u + 3));
                          continue;
                        }
                        r++;
                        continue;
                      }
                      e: {
                        (l = o), r++;
                        var c = i(),
                          h = {};
                        for (u = []; 62 !== e.charCodeAt(r) && e[r]; ) {
                          var f = e.charCodeAt(r);
                          if ((64 < f && 91 > f) || (96 < f && 123 > f)) {
                            f = i();
                            for (
                              var p = e.charCodeAt(r);
                              p &&
                              39 !== p &&
                              34 !== p &&
                              !((64 < p && 91 > p) || (96 < p && 123 > p)) &&
                              62 !== p;

                            )
                              r++, (p = e.charCodeAt(r));
                            var g = r + 1;
                            if (
                              ((r = e.indexOf(e[r], g)),
                              (g = e.slice(g, r)),
                              39 === p || 34 === p)
                            ) {
                              if (-1 === r) {
                                if (
                                  ((l = {
                                    tagName: c,
                                    attributes: h,
                                    children: u,
                                    parent: null,
                                  }),
                                  t)
                                )
                                  for (c = 0; c < u.length; c++)
                                    "string" != typeof u[c] &&
                                      (u[c].parent = l);
                                u = l;
                                break e;
                              }
                            } else (g = null), r--;
                            if (f.startsWith("xmlns:")) {
                              p = g;
                              var m = f.split(":")[1];
                              qn.set(p, m), Kn.set(m, p);
                            }
                            "tt" === c &&
                              "xml:space" === f &&
                              "preserve" === g &&
                              (l = !0),
                              (h[f] = g);
                          }
                          r++;
                        }
                        for (
                          47 !== e.charCodeAt(r - 1)
                            ? (r++, (u = n(c, l)))
                            : r++,
                            l = {
                              tagName: c,
                              attributes: h,
                              children: u,
                              parent: null,
                            },
                            c = u.length,
                            h = 0;
                          h < c;
                          h++
                        )
                          "string" != typeof (f = u[h])
                            ? t && (f.parent = l)
                            : h == c - 1 && "\n" == f && u.pop();
                        u = l;
                      }
                      if ((s.push(u), "string" == typeof u)) break;
                      "?" === u.tagName[0] &&
                        u.children &&
                        (s.push.apply(s, d(u.children)), (u.children = []));
                    } else
                      (u = r),
                        -2 === (r = e.indexOf("<", r) - 1) && (r = e.length),
                        (u = e.slice(u, r + 1)),
                        o
                          ? 0 < u.length && s.push(u)
                          : ((s.length && 1 == u.length && "\n" == u[0]) ||
                              0 < u.trim().length) &&
                            s.push(u),
                        r++;
                  return s;
                }
                function i() {
                  for (var t = r; -1 === "\r\n\t>/= ".indexOf(e[r]) && e[r]; )
                    r++;
                  return e.slice(t, r);
                }
                var r = 0;
                return n("");
              })(e, void 0 !== n && n)),
              !t && e.length
                ? e[0]
                : (e = e.find(function (e) {
                    return t.split(",").includes(e.tagName);
                  }))
                ? e
                : null
            );
          }
          function vn(e) {
            return qn.has(e) ? qn.get(e) : "";
          }
          function yn(e) {
            return "string" == typeof e;
          }
          function bn(e) {
            var t = [];
            if (!e.children) return [];
            for (var n = (e = c(e.children)).next(); !n.done; n = e.next())
              "string" != typeof (n = n.value) && t.push(n);
            return t;
          }
          function wn(e, t) {
            var n = [];
            if (!e.children) return [];
            for (var i = (e = c(e.children)).next(); !i.done; i = e.next())
              (i = i.value).tagName === t && n.push(i);
            return n;
          }
          function xn(e) {
            return "string" == typeof e
              ? bt(e)
              : "" ===
                (e = e.children.reduce(function (e, t) {
                  return "string" == typeof t ? e + t : e;
                }, ""))
              ? null
              : bt(e);
          }
          function Sn(e) {
            return Array.from(e.children).every(function (e) {
              return "string" == typeof e;
            })
              ? ((e = xn(e)) && (e = e.trim()), e)
              : null;
          }
          function Tn(e, t, n) {
            if (
              ((n = void 0 === n ? [] : n),
              e.tagName === t && n.push(e),
              e.children)
            )
              for (var i = (e = c(e.children)).next(); !i.done; i = e.next())
                Tn(i.value, t, n);
            return n;
          }
          function An(e, t) {
            return 1 != (e = wn(e, t)).length ? null : e[0];
          }
          function kn(e, t, n) {
            return 1 != (e = Mn(e, t, n)).length ? null : e[0];
          }
          function In(e, t, n, i) {
            i = void 0 === i ? null : i;
            var r = null;
            return (
              null != (e = e.attributes[t]) && (r = n(e)), null == r ? i : r
            );
          }
          function Cn(e, t, n) {
            return (t = vn(t)), e.attributes[t + ":" + n] || null;
          }
          function Mn(e, t, n) {
            var i = vn(t);
            if (((t = []), e.children))
              for (
                n = i ? i + ":" + n : n, i = (e = c(e.children)).next();
                !i.done;
                i = e.next()
              )
                (i = i.value) && i.tagName === n && t.push(i);
            return t;
          }
          function En(e, t, n) {
            for (var i = (t = c(t)).next(); !i.done; i = t.next())
              if ((i = Cn(e, i.value, n))) return i;
            return null;
          }
          function Dn(e) {
            return e
              ? (/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e) && (e += "Z"),
                (e = Date.parse(e)),
                isNaN(e) ? null : e / 1e3)
              : null;
          }
          function Pn(e) {
            return e &&
              (e = RegExp(
                "^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$",
                "i"
              ).exec(e))
              ? ((e =
                  31536e3 * Number(e[1] || null) +
                  2592e3 * Number(e[2] || null) +
                  86400 * Number(e[3] || null) +
                  3600 * Number(e[4] || null) +
                  60 * Number(e[5] || null) +
                  Number(e[6] || null)),
                isFinite(e) ? e : null)
              : null;
          }
          function Ln(e) {
            var t = /([0-9]+)-([0-9]+)/.exec(e);
            return t
              ? ((e = Number(t[1])),
                isFinite(e)
                  ? ((t = Number(t[2])),
                    isFinite(t) ? { start: e, end: t } : null)
                  : null)
              : null;
          }
          function Rn(e) {
            return 0 == (e = Number(e)) % 1 ? e : null;
          }
          function Nn(e) {
            return 0 == (e = Number(e)) % 1 && 0 < e ? e : null;
          }
          function _n(e) {
            return 0 == (e = Number(e)) % 1 && 0 <= e ? e : null;
          }
          function Un(e) {
            return (e = Number(e)), isNaN(e) ? null : e;
          }
          function jn(e) {
            return !!e && "true" === e.toLowerCase();
          }
          function On(e) {
            var t,
              n = (t = e.match(/^(\d+)\/(\d+)$/))
                ? Number(t[1]) / Number(t[2])
                : Number(e);
            return isNaN(n) ? null : n;
          }
          function Bn(e) {
            for (
              var t = [],
                n = (e = c(
                  (e = bt(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))
                )).next();
              !n.done;
              n = e.next()
            ) {
              var i = (n = n.value).match(/^([\w]+)/);
              if (i) {
                var r = n.match(/(@id='(.*?)')/),
                  a = n.match(/(@t='(\d+)')/),
                  o = n.match(/(@n='(\d+)')/),
                  s = n.match(/\[(\d+)\]/);
                t.push({
                  name: i[0],
                  id: r ? r[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null,
                  t: a
                    ? Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm, ""))
                    : null,
                  n: o
                    ? Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm, ""))
                    : null,
                  position: s ? Number(s[1]) - 1 : null,
                  Db: n.split("/@")[1] || null,
                });
              } else
                n.startsWith("@") &&
                  t.length &&
                  (t[t.length - 1].Db = n.slice(1));
            }
            return t;
          }
          function Fn(e, t) {
            var n = Bn(t.attributes.sel || "");
            if (n.length) {
              var i = n[n.length - 1],
                r = t.attributes.pos || null;
              null == (n = i.position) &&
                (null !== i.t && (n = Hn(e, "t", i.t)),
                null !== i.n && (n = Hn(e, "n", i.n))),
                null === n
                  ? (n = "prepend" === r ? 0 : e.length)
                  : "prepend" === r
                  ? --n
                  : "after" === r && ++n,
                (r = t.tagName),
                (i = i.Db) && e[n]
                  ? Vn(e[n], r, i, Sn(t) || "")
                  : (("remove" !== r && "replace" !== r) || e.splice(n, 1),
                    ("add" !== r && "replace" !== r) ||
                      e.splice.apply(e, [n, 0].concat(d(t.children))));
            }
          }
          function Hn(e, t, n) {
            for (var i = 0, r = (e = c(e)).next(); !r.done; r = e.next()) {
              if (Number(r.value.attributes[t]) === n) return i;
              i++;
            }
            return null;
          }
          function Vn(e, t, n, i) {
            "remove" === t
              ? delete e.attributes[n]
              : ("add" !== t && "replace" !== t) || (e.attributes[n] = i);
          }
          function zn(e) {
            var t = "",
              n = e.tagName.split(":");
            for (var i in (0 < n.length &&
              ((t = n[0]), (t = Kn.has(t) ? Kn.get(t) : "")),
            (t = document.createElementNS(t, e.tagName)),
            e.attributes))
              t.setAttribute(i, e.attributes[i]);
            for (i = (e = c(e.children)).next(); !i.done; i = e.next())
              (n = void 0),
                (n = "string" == typeof (i = i.value) ? new Text(i) : zn(i)),
                t.appendChild(n);
            return t;
          }
          function Gn(e) {
            if (!e) return null;
            for (
              var t = {
                  tagName: e.tagName,
                  attributes: fn(e.attributes),
                  children: [],
                  parent: null,
                },
                n = (e = c(e.children)).next();
              !n.done;
              n = e.next()
            )
              "string" == typeof (n = n.value) || ((n = Gn(n)).parent = t),
                t.children.push(n);
            return t;
          }
          var qn = new Map(),
            Kn = new Map();
          function Wn(e, t, n) {
            (this.startTime = e),
              (this.endTime = t),
              (this.payload = n),
              (this.region = new Qt()),
              (this.position = null),
              (this.positionAlign = ei),
              (this.size = 0),
              (this.textAlign = ti),
              (this.direction = ai),
              (this.writingMode = oi),
              (this.lineInterpretation = si),
              (this.line = null),
              (this.lineHeight = ""),
              (this.lineAlign = ui),
              (this.displayAlign = ii),
              (this.fontSize =
                this.border =
                this.backgroundImage =
                this.backgroundColor =
                this.color =
                  ""),
              (this.fontWeight = hi),
              (this.fontStyle = pi),
              (this.linePadding = this.letterSpacing = this.fontFamily = ""),
              (this.opacity = 1),
              (this.textCombineUpright = ""),
              (this.textDecoration = []),
              (this.textStrokeWidth =
                this.textStrokeColor =
                this.textShadow =
                  ""),
              (this.wrapLine = !0),
              (this.id = ""),
              (this.nestedCues = []),
              (this.lineBreak = this.isContainer = !1),
              (this.rubyTag = null),
              (this.cellResolution = { Rb: 32, rows: 15 });
          }
          function Xn(e, t) {
            return ((e = new Wn(e, t, "")).lineBreak = !0), e;
          }
          function Yn(e, t) {
            if (
              e.payload != t.payload ||
              !(
                0.001 > Math.abs(e.startTime - t.startTime) &&
                0.001 > Math.abs(e.endTime - t.endTime)
              )
            )
              return !1;
            for (var n in e)
              if ("startTime" != n && "endTime" != n && "payload" != n)
                if ("nestedCues" == n) {
                  if (!an(e.nestedCues, t.nestedCues, Yn)) return !1;
                } else if ("region" == n || "cellResolution" == n) {
                  for (var i in e[n]) if (e[n][i] != t[n][i]) return !1;
                } else if (Array.isArray(e[n])) {
                  if (!an(e[n], t[n])) return !1;
                } else if (e[n] != t[n]) return !1;
            return !0;
          }
          function Jn(e, t) {
            t = void 0 === t ? new Map() : t;
            var n = e.payload;
            if (n.includes("<")) {
              0 === t.size && $n(t);
              var i = n;
              n = [];
              for (var r = -1, a = 0; a < i.length; a++)
                "<" === i[a]
                  ? (r = a + 1)
                  : ">" === i[a] &&
                    0 < r &&
                    ((r = i.substr(r, a - r)).match(yi) && n.push(r), (r = -1));
              for (a = (n = c(n)).next(); !a.done; a = n.next())
                (a = a.value),
                  (i = i.replace("<" + a + ">", '<div time="' + a + '">')),
                  (i += "</div>");
              e: {
                (a = i), (r = []);
                var o = -1;
                (n = ""), (i = !1);
                for (var s = 0; s < a.length; s++)
                  if ("/" === a[s]) {
                    var u = a.indexOf(">", s);
                    if (-1 === u) {
                      n = a;
                      break e;
                    }
                    if ((u = a.substring(s + 1, u)) && "v" == u) {
                      i = !0;
                      var l = null;
                      if ((r.length && (l = r[r.length - 1]), l)) {
                        if (l === u) n += "/" + u + ">";
                        else {
                          if (!l.startsWith("v")) {
                            n += a[s];
                            continue;
                          }
                          n += "/" + l + ">";
                        }
                        s += u.length + 1;
                      } else n += a[s];
                    } else n += a[s];
                  } else
                    "<" === a[s]
                      ? "v" != a[(o = s + 1)] && (o = -1)
                      : ">" === a[s] &&
                        0 < o &&
                        (r.push(a.substr(o, s - o)), (o = -1)),
                      (n += a[s]);
                for (r = (a = c(r)).next(); !r.done; r = a.next())
                  (o = (r = r.value).replace(" ", ".voice-")),
                    (n = (n = n.replace("<" + r + ">", "<" + o + ">")).replace(
                      "</" + r + ">",
                      "</" + o + ">"
                    )),
                    i || (n += "</" + o + ">");
              }
              (n = (function (e) {
                var t = { "< ": "", " >": " &gt;" },
                  n = /(< +>|<\s|\s>)/g,
                  i = RegExp(n.source);
                return e && i.test(e)
                  ? e.replace(n, function (e) {
                      return t[e] || "";
                    })
                  : e || "";
              })(n)),
                (e.payload = "");
              try {
                var d = mn("<span>" + n + "</span>", "span");
              } catch (h) {}
              if (d)
                if (1 != (d = d.children).length || d[0].tagName)
                  for (n = (d = c(d)).next(); !n.done; n = d.next())
                    Zn(n.value, e, t);
                else e.payload = bt(n);
              else e.payload = bt(n);
            } else e.payload = bt(n);
          }
          function $n(e) {
            for (
              var t = c(Object.entries(ci)), n = t.next();
              !n.done;
              n = t.next()
            ) {
              var i = c(n.value);
              (n = i.next().value), (i = i.next().value);
              var r = new Wn(0, 0, "");
              (r.color = i), e.set("." + n, r);
            }
            for (n = (t = c(Object.entries(di))).next(); !n.done; n = t.next())
              (n = (i = c(n.value)).next().value),
                (i = i.next().value),
                ((r = new Wn(0, 0, "")).backgroundColor = i),
                e.set("." + n, r);
          }
          function Zn(e, t, n) {
            var i = t.clone();
            if (
              ((i.nestedCues = []),
              (i.payload = ""),
              (i.rubyTag = ""),
              (i.line = null),
              (i.region = new Qt()),
              (i.position = null),
              (i.size = 0),
              (i.textAlign = ti),
              e.tagName)
            )
              for (
                var r = c(e.tagName.split(/(?=[ .])+/g)), a = r.next();
                !a.done;
                a = r.next()
              ) {
                var o = (a = a.value);
                if (o.startsWith(".voice-")) {
                  var s = o.split("-").pop();
                  (o = 'v[voice="' + s + '"]'),
                    n.has(o) || (o = "v[voice=" + s + "]");
                }
                switch (
                  (n.has(o) &&
                    ((s = i), (o = n.get(o))) &&
                    ((s.backgroundColor = Qn(
                      o.backgroundColor,
                      s.backgroundColor
                    )),
                    (s.color = Qn(o.color, s.color)),
                    (s.fontFamily = Qn(o.fontFamily, s.fontFamily)),
                    (s.fontSize = Qn(o.fontSize, s.fontSize)),
                    (s.textShadow = Qn(o.textShadow, s.textShadow)),
                    (s.fontWeight = o.fontWeight),
                    (s.fontStyle = o.fontStyle),
                    (s.opacity = o.opacity),
                    (s.rubyTag = o.rubyTag),
                    (s.textCombineUpright = o.textCombineUpright),
                    (s.wrapLine = o.wrapLine)),
                  a)
                ) {
                  case "br":
                    return (
                      (i = Xn(i.startTime, i.endTime)),
                      void t.nestedCues.push(i)
                    );
                  case "b":
                    i.fontWeight = fi;
                    break;
                  case "i":
                    i.fontStyle = gi;
                    break;
                  case "u":
                    i.textDecoration.push(vi);
                    break;
                  case "font":
                    (a = e.attributes.color) && (i.color = a);
                    break;
                  case "div":
                    if (!(a = e.attributes.time)) break;
                    (a = a ? cn(new on(a)) : null) && (i.startTime = a);
                    break;
                  case "ruby":
                  case "rp":
                  case "rt":
                    i.rubyTag = a;
                }
              }
            if (((r = e.children), yn(e) || (1 == r.length && yn(r[0]))))
              for (
                n = xn(e).split("\n"), e = !0, r = (n = c(n)).next();
                !r.done;
                r = n.next()
              )
                (r = r.value),
                  e || ((e = Xn(i.startTime, i.endTime)), t.nestedCues.push(e)),
                  0 < r.length &&
                    (((e = i.clone()).payload = bt(r)), t.nestedCues.push(e)),
                  (e = !1);
            else
              for (
                t.nestedCues.push(i), e = (t = c(r)).next();
                !e.done;
                e = t.next()
              )
                Zn(e.value, i, n);
          }
          function Qn(e, t) {
            return e && 0 < e.length ? e : t;
          }
          (Wn.prototype.clone = function () {
            var e,
              t = new Wn(0, 0, "");
            for (e in this)
              (t[e] = this[e]),
                t[e] && t[e].constructor == Array && (t[e] = t[e].slice());
            return t;
          }),
            F("shaka.text.Cue", Wn),
            (Wn.parseCuePayload = Jn),
            (Wn.equal = Yn),
            (Wn.prototype.clone = Wn.prototype.clone);
          var ei = "auto";
          Wn.positionAlign = {
            LEFT: "line-left",
            RIGHT: "line-right",
            CENTER: "center",
            AUTO: ei,
          };
          var ti = "center",
            ni = {
              LEFT: "left",
              RIGHT: "right",
              CENTER: ti,
              START: "start",
              END: "end",
            };
          Wn.textAlign = ni;
          var ii = "after",
            ri = { BEFORE: "before", CENTER: "center", AFTER: ii };
          Wn.displayAlign = ri;
          var ai = "ltr";
          Wn.direction = {
            HORIZONTAL_LEFT_TO_RIGHT: ai,
            HORIZONTAL_RIGHT_TO_LEFT: "rtl",
          };
          var oi = "horizontal-tb";
          Wn.writingMode = {
            HORIZONTAL_TOP_TO_BOTTOM: oi,
            VERTICAL_LEFT_TO_RIGHT: "vertical-lr",
            VERTICAL_RIGHT_TO_LEFT: "vertical-rl",
          };
          var si = 0;
          Wn.lineInterpretation = { LINE_NUMBER: si, PERCENTAGE: 1 };
          var ui = "start",
            li = { CENTER: "center", START: ui, END: "end" };
          Wn.lineAlign = li;
          var ci = {
            white: "white",
            lime: "lime",
            cyan: "cyan",
            red: "red",
            yellow: "yellow",
            magenta: "magenta",
            blue: "blue",
            black: "black",
          };
          Wn.defaultTextColor = ci;
          var di = {
            bg_white: "white",
            bg_lime: "lime",
            bg_cyan: "cyan",
            bg_red: "red",
            bg_yellow: "yellow",
            bg_magenta: "magenta",
            bg_blue: "blue",
            bg_black: "black",
          };
          Wn.defaultTextBackgroundColor = di;
          var hi = 400,
            fi = 700;
          Wn.fontWeight = { NORMAL: hi, BOLD: fi };
          var pi = "normal",
            gi = "italic",
            mi = { NORMAL: pi, ITALIC: gi, OBLIQUE: "oblique" };
          Wn.fontStyle = mi;
          var vi = "underline";
          Wn.textDecoration = {
            UNDERLINE: vi,
            LINE_THROUGH: "lineThrough",
            OVERLINE: "overline",
          };
          var yi = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
          function bi() {}
          function wi(e, t, n) {
            Si.set(e.toLowerCase().split(";")[0] + "-" + n, {
              priority: n,
              Ld: t,
            });
          }
          function xi(e, t) {
            for (
              var n = e.toLowerCase().split(";")[0],
                i = c([Ii, ki, Ai, Ti]),
                r = i.next();
              !r.done;
              r = i.next()
            )
              if ((r = Si.get(n + "-" + r.value))) {
                var a = r.Ld(),
                  o = a.isSupported(e, t);
                if ((a.destroy(), o)) return r.Ld;
              }
            return null;
          }
          (bi.prototype.destroy = function () {}),
            F("shaka.transmuxer.TransmuxerEngine", bi),
            (bi.findTransmuxer = xi),
            (bi.unregisterTransmuxer = function (e, t) {
              Si.delete(e.toLowerCase().split(";")[0] + "-" + t);
            }),
            (bi.registerTransmuxer = wi),
            (bi.prototype.destroy = bi.prototype.destroy);
          var Si = new Map(),
            Ti = 1,
            Ai = 2,
            ki = 3,
            Ii = 4;
          function Ci() {}
          function Mi(e, t) {
            var n = e;
            return t && !Fi.includes(e) && (n += '; codecs="' + t + '"'), n;
          }
          function Ei(e, t) {
            return t && (e += '; codecs="' + t + '"'), e;
          }
          function Di(e, t, n) {
            var i = Mi(e, t);
            return (
              xi((t = Ei(e, t)))
                ? (e = xi(t))
                  ? ((n = (e = e()).convertCodecs(n, t)), e.destroy())
                  : (n = t)
                : (n =
                    "video/mp2t" != e && "audio" == n
                      ? i.replace("video", "audio")
                      : i),
              n
            );
          }
          function Pi(e, t, n) {
            var i = [t];
            return (
              Bi.forEach(function (t, r) {
                var a = e[r];
                "codecs" == r
                  ? Fi.includes(e.mimeType) || i.push('codecs="' + n + '"')
                  : a && i.push(t + '="' + a + '"');
              }),
              "PQ" == e.hdr && i.push('eotf="smpte2084"'),
              i.join(";")
            );
          }
          function Li(e) {
            return e.split(";")[0].split("/")[1];
          }
          function Ri(e) {
            var t = Oi(e);
            switch (((e = t[0].toLowerCase()), (t = t[1].toLowerCase()), !0)) {
              case "mp4a" === e && "69" === t:
              case "mp4a" === e && "6b" === t:
              case "mp4a" === e && "40.34" === t:
                return "mp3";
              case "mp4a" === e && "66" === t:
              case "mp4a" === e && "67" === t:
              case "mp4a" === e && "68" === t:
              case "mp4a" === e && "40.2" === t:
              case "mp4a" === e && "40.02" === t:
              case "mp4a" === e && "40.5" === t:
              case "mp4a" === e && "40.05" === t:
              case "mp4a" === e && "40.29" === t:
              case "mp4a" === e && "40.42" === t:
                return "aac";
              case "mp4a" === e && "a5" === t:
              case "ac3" === e:
              case "ac-3" === e:
                return "ac-3";
              case "mp4a" === e && "a6" === t:
              case "eac3" === e:
              case "ec-3" === e:
                return "ec-3";
              case "ac-4" === e:
                return "ac-4";
              case "mp4a" === e && "b2" === t:
                return "dtsx";
              case "mp4a" === e && "a9" === t:
                return "dtsc";
              case "vp09" === e:
              case "vp9" === e:
                return "vp9";
              case "avc1" === e:
              case "avc3" === e:
                return "avc";
              case "hvc1" === e:
              case "hev1" === e:
                return "hevc";
              case "vvc1" === e:
              case "vvi1" === e:
                return "vvc";
              case "dvh1" === e:
              case "dvhe" === e:
                return t && t.startsWith("05") ? "dovi-p5" : "dovi-hevc";
              case "dvav" === e:
              case "dva1" === e:
                return "dovi-avc";
              case "dav1" === e:
                return "dovi-av1";
              case "dvc1" === e:
              case "dvi1" === e:
                return "dovi-vvc";
            }
            return e;
          }
          function Ni(e) {
            for (
              var t = [], n = (e = c(e.split(","))).next();
              !n.done;
              n = e.next()
            )
              (n = Oi(n.value)), t.push(n[0]);
            return t.sort().join(",");
          }
          function _i(e) {
            return e.split(";")[0];
          }
          function Ui(e) {
            return (
              (e = e.split(/ *; */)).shift(),
              (e = e.find(function (e) {
                return e.startsWith("codecs=");
              }))
                ? e.split("=")[1].replace(/^"|"$/g, "")
                : ""
            );
          }
          function ji(e) {
            return (
              "application/x-mpegurl" === e ||
              "application/vnd.apple.mpegurl" === e
            );
          }
          function Oi(e) {
            var t = (e = e.split("."))[0];
            return e.shift(), [t, e.join(".")];
          }
          (bi.PluginPriority = {
            FALLBACK: Ti,
            PREFERRED_SECONDARY: Ai,
            PREFERRED: ki,
            APPLICATION: Ii,
          }),
            F("shaka.util.MimeUtils", Ci),
            (Ci.getFullTypeWithAllCodecs = Ei),
            (Ci.getFullType = Mi);
          var Bi = new Map()
              .set("codecs", "codecs")
              .set("frameRate", "framerate")
              .set("bandwidth", "bitrate")
              .set("width", "width")
              .set("height", "height")
              .set("channelsCount", "channels"),
            Fi = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];
          function Hi(e) {
            (this.i = null),
              (this.j = e),
              (this.B = !1),
              (this.l = this.s = 0),
              (this.m = 1 / 0),
              (this.h = this.g = null),
              (this.C = ""),
              (this.A = function () {}),
              (this.o = new Map());
          }
          function Vi(e, t) {
            Wi.set(e, t);
          }
          function zi(e) {
            return Wi.get(e);
          }
          function Gi(e) {
            return (
              !!Wi.has(e) ||
              (("application/cea-608" == e || "application/cea-708" == e) &&
                !!Zt)
            );
          }
          function qi(e, t, n) {
            if (((e.C = t), (t = e.o.get(t))))
              for (var i = c(t.keys()), r = i.next(); !r.done; r = i.next())
                (r = t.get(r.value).filter(function (e) {
                  return e.endTime <= n;
                })) && e.j.append(r);
          }
          function Ki(e, t, n) {
            (t.startTime += n), (t.endTime += n);
            for (var i = (t = c(t.nestedCues)).next(); !i.done; i = t.next())
              Ki(e, i.value, n);
          }
          (Hi.prototype.destroy = function () {
            return (this.j = this.i = null), this.o.clear(), Promise.resolve();
          }),
            (Hi.prototype.remove = function (e, t) {
              var n = this;
              return L(function (i) {
                if (1 == i.g) return x(i, Promise.resolve(), 2);
                !n.j ||
                  !n.j.remove(e, t) ||
                  null == n.g ||
                  t <= n.g ||
                  e >= n.h ||
                  (e <= n.g && t >= n.h
                    ? (n.g = n.h = null)
                    : e <= n.g && t < n.h
                    ? (n.g = t)
                    : e > n.g && t >= n.h && (n.h = e)),
                  S(i);
              });
            }),
            F("shaka.text.TextEngine", Hi),
            (Hi.prototype.destroy = Hi.prototype.destroy),
            (Hi.findParser = zi),
            (Hi.unregisterParser = function (e) {
              Wi.delete(e);
            }),
            (Hi.registerParser = Vi);
          var Wi = new Map();
          function Xi(e, t) {
            return e.concat(t);
          }
          function Yi() {}
          function Ji(e) {
            return null != e;
          }
          function $i(e, t) {
            return Promise.race([
              t,
              new Promise(function (t, n) {
                new Oe(n).ea(e);
              }),
            ]);
          }
          function Zi() {}
          function Qi(e, t) {
            return (e = nr(e)), (t = nr(t)), e.split("-")[0] == t.split("-")[0];
          }
          function er(e, t) {
            return (
              (e = nr(e)),
              (t = nr(t)),
              (e = e.split("-")),
              (t = t.split("-")),
              e[0] == t[0] && 1 == e.length && 2 == t.length
            );
          }
          function tr(e, t) {
            return (
              (e = nr(e)),
              (t = nr(t)),
              (e = e.split("-")),
              (t = t.split("-")),
              2 == e.length && 2 == t.length && e[0] == t[0]
            );
          }
          function nr(e) {
            var t = (e = c(e.split("-x-"))).next().value;
            (t = void 0 === t ? "" : t),
              (e = void 0 === (e = e.next().value) ? "" : e);
            var n = c(t.split("-"));
            return (
              (t = void 0 === (t = n.next().value) ? "" : t),
              (n = void 0 === (n = n.next().value) ? "" : n),
              (e = e ? "x-" + e : ""),
              (t = t.toLowerCase()),
              (t = sr.get(t) || t),
              ((n = n.toUpperCase()) ? t + "-" + n : t) + (e ? "-" + e : "")
            );
          }
          function ir(e, t) {
            return (
              (e = nr(e)),
              (t = nr(t)) == e
                ? 4
                : er(t, e)
                ? 3
                : tr(t, e)
                ? 2
                : er(e, t)
                ? 1
                : 0
            );
          }
          function rr(e) {
            var t = e.indexOf("-");
            return (
              (e = (e = 0 <= t ? e.substring(0, t) : e).toLowerCase()),
              sr.get(e) || e
            );
          }
          function ar(e) {
            return e.language
              ? nr(e.language)
              : e.audio && e.audio.language
              ? nr(e.audio.language)
              : e.video && e.video.language
              ? nr(e.video.language)
              : "und";
          }
          function or(e, t) {
            e = nr(e);
            for (
              var n = new Set(), i = (t = c(t)).next();
              !i.done;
              i = t.next()
            )
              n.add(nr(i.value));
            for (i = (t = c(n)).next(); !i.done; i = t.next())
              if ((i = i.value) == e) return i;
            for (i = (t = c(n)).next(); !i.done; i = t.next())
              if (er((i = i.value), e)) return i;
            for (i = (t = c(n)).next(); !i.done; i = t.next())
              if (tr((i = i.value), e)) return i;
            for (t = (n = c(n)).next(); !t.done; t = n.next())
              if (er(e, (t = t.value))) return t;
            return null;
          }
          F("shaka.util.LanguageUtils", Zi),
            (Zi.findClosestLocale = or),
            (Zi.getLocaleForVariant = ar),
            (Zi.getLocaleForText = function (e) {
              return nr(e.language || "und");
            }),
            (Zi.getBase = rr),
            (Zi.relatedness = ir),
            (Zi.areSiblings = function (e, t) {
              var n = rr(e),
                i = rr(t);
              return e != n && t != i && n == i;
            }),
            (Zi.normalize = nr),
            (Zi.isSiblingOf = tr),
            (Zi.isParentOf = er),
            (Zi.areLanguageCompatible = Qi),
            (Zi.areLocaleCompatible = function (e, t) {
              return (e = nr(e)) == (t = nr(t));
            });
          var sr = new Map([
            ["aar", "aa"],
            ["abk", "ab"],
            ["afr", "af"],
            ["aka", "ak"],
            ["alb", "sq"],
            ["amh", "am"],
            ["ara", "ar"],
            ["arg", "an"],
            ["arm", "hy"],
            ["asm", "as"],
            ["ava", "av"],
            ["ave", "ae"],
            ["aym", "ay"],
            ["aze", "az"],
            ["bak", "ba"],
            ["bam", "bm"],
            ["baq", "eu"],
            ["bel", "be"],
            ["ben", "bn"],
            ["bih", "bh"],
            ["bis", "bi"],
            ["bod", "bo"],
            ["bos", "bs"],
            ["bre", "br"],
            ["bul", "bg"],
            ["bur", "my"],
            ["cat", "ca"],
            ["ces", "cs"],
            ["cha", "ch"],
            ["che", "ce"],
            ["chi", "zh"],
            ["chu", "cu"],
            ["chv", "cv"],
            ["cor", "kw"],
            ["cos", "co"],
            ["cre", "cr"],
            ["cym", "cy"],
            ["cze", "cs"],
            ["dan", "da"],
            ["deu", "de"],
            ["div", "dv"],
            ["dut", "nl"],
            ["dzo", "dz"],
            ["ell", "el"],
            ["eng", "en"],
            ["epo", "eo"],
            ["est", "et"],
            ["eus", "eu"],
            ["ewe", "ee"],
            ["fao", "fo"],
            ["fas", "fa"],
            ["fij", "fj"],
            ["fin", "fi"],
            ["fra", "fr"],
            ["fre", "fr"],
            ["fry", "fy"],
            ["ful", "ff"],
            ["geo", "ka"],
            ["ger", "de"],
            ["gla", "gd"],
            ["gle", "ga"],
            ["glg", "gl"],
            ["glv", "gv"],
            ["gre", "el"],
            ["grn", "gn"],
            ["guj", "gu"],
            ["hat", "ht"],
            ["hau", "ha"],
            ["heb", "he"],
            ["her", "hz"],
            ["hin", "hi"],
            ["hmo", "ho"],
            ["hrv", "hr"],
            ["hun", "hu"],
            ["hye", "hy"],
            ["ibo", "ig"],
            ["ice", "is"],
            ["ido", "io"],
            ["iii", "ii"],
            ["iku", "iu"],
            ["ile", "ie"],
            ["ina", "ia"],
            ["ind", "id"],
            ["ipk", "ik"],
            ["isl", "is"],
            ["ita", "it"],
            ["jav", "jv"],
            ["jpn", "ja"],
            ["kal", "kl"],
            ["kan", "kn"],
            ["kas", "ks"],
            ["kat", "ka"],
            ["kau", "kr"],
            ["kaz", "kk"],
            ["khm", "km"],
            ["kik", "ki"],
            ["kin", "rw"],
            ["kir", "ky"],
            ["kom", "kv"],
            ["kon", "kg"],
            ["kor", "ko"],
            ["kua", "kj"],
            ["kur", "ku"],
            ["lao", "lo"],
            ["lat", "la"],
            ["lav", "lv"],
            ["lim", "li"],
            ["lin", "ln"],
            ["lit", "lt"],
            ["ltz", "lb"],
            ["lub", "lu"],
            ["lug", "lg"],
            ["mac", "mk"],
            ["mah", "mh"],
            ["mal", "ml"],
            ["mao", "mi"],
            ["mar", "mr"],
            ["may", "ms"],
            ["mkd", "mk"],
            ["mlg", "mg"],
            ["mlt", "mt"],
            ["mon", "mn"],
            ["mri", "mi"],
            ["msa", "ms"],
            ["mya", "my"],
            ["nau", "na"],
            ["nav", "nv"],
            ["nbl", "nr"],
            ["nde", "nd"],
            ["ndo", "ng"],
            ["nep", "ne"],
            ["nld", "nl"],
            ["nno", "nn"],
            ["nob", "nb"],
            ["nor", "no"],
            ["nya", "ny"],
            ["oci", "oc"],
            ["oji", "oj"],
            ["ori", "or"],
            ["orm", "om"],
            ["oss", "os"],
            ["pan", "pa"],
            ["per", "fa"],
            ["pli", "pi"],
            ["pol", "pl"],
            ["por", "pt"],
            ["pus", "ps"],
            ["que", "qu"],
            ["roh", "rm"],
            ["ron", "ro"],
            ["rum", "ro"],
            ["run", "rn"],
            ["rus", "ru"],
            ["sag", "sg"],
            ["san", "sa"],
            ["sin", "si"],
            ["slk", "sk"],
            ["slo", "sk"],
            ["slv", "sl"],
            ["sme", "se"],
            ["smo", "sm"],
            ["sna", "sn"],
            ["snd", "sd"],
            ["som", "so"],
            ["sot", "st"],
            ["spa", "es"],
            ["sqi", "sq"],
            ["srd", "sc"],
            ["srp", "sr"],
            ["ssw", "ss"],
            ["sun", "su"],
            ["swa", "sw"],
            ["swe", "sv"],
            ["tah", "ty"],
            ["tam", "ta"],
            ["tat", "tt"],
            ["tel", "te"],
            ["tgk", "tg"],
            ["tgl", "tl"],
            ["tha", "th"],
            ["tib", "bo"],
            ["tir", "ti"],
            ["ton", "to"],
            ["tsn", "tn"],
            ["tso", "ts"],
            ["tuk", "tk"],
            ["tur", "tr"],
            ["twi", "tw"],
            ["uig", "ug"],
            ["ukr", "uk"],
            ["urd", "ur"],
            ["uzb", "uz"],
            ["ven", "ve"],
            ["vie", "vi"],
            ["vol", "vo"],
            ["wel", "cy"],
            ["wln", "wa"],
            ["wol", "wo"],
            ["xho", "xh"],
            ["yid", "yi"],
            ["yor", "yo"],
            ["zha", "za"],
            ["zho", "zh"],
            ["zul", "zu"],
          ]);
          function ur() {}
          function lr(e, t, n, i, r) {
            function a(e) {
              var t =
                String(e.width || "") +
                String(e.height || "") +
                String(Math.round(e.frameRate || 0)) +
                (e.hdr || "") +
                e.fastSwitching;
              return (
                e.dependencyStream &&
                  (t += e.dependencyStream.baseOriginalId || ""),
                t
              );
            }
            if (r.length) {
              for (
                var o = e.textStreams, s = (r = c(r)).next(), u = {};
                !s.done;
                u = { vf: void 0 }, s = r.next()
              )
                if (
                  ((u.vf = s.value),
                  (s = o.filter(
                    (function (e) {
                      return function (t) {
                        return !(
                          !t.codecs.startsWith(e.vf) &&
                          !t.mimeType.startsWith(e.vf)
                        );
                      };
                    })(u)
                  )).length)
                ) {
                  o = s;
                  break;
                }
              e.textStreams = o;
            }
            if (
              ((o = e.variants),
              (t.length || n.length) &&
                (o = (function (e, t, n) {
                  for (
                    var i = (t = c(t)).next(), r = {};
                    !i.done;
                    r = { Ig: void 0 }, i = t.next()
                  )
                    if (
                      ((r.Ig = i.value),
                      (i = e.filter(
                        (function (e) {
                          return function (t) {
                            return t.video && t.video.codecs.startsWith(e.Ig);
                          };
                        })(r)
                      )),
                      i.length)
                    ) {
                      e = i;
                      break;
                    }
                  for (
                    n = c(n), t = n.next(), i = {};
                    !t.done;
                    i = { Ef: void 0 }, t = n.next()
                  )
                    if (
                      ((i.Ef = t.value),
                      (t = e.filter(
                        (function (e) {
                          return function (t) {
                            return t.audio && t.audio.codecs.startsWith(e.Ef);
                          };
                        })(i)
                      )),
                      t.length)
                    ) {
                      e = t;
                      break;
                    }
                  return e;
                })(o, t, n)),
              i.length)
            ) {
              for (t = new $(), o = (n = c(o)).next(); !o.done; o = n.next())
                (o = o.value), t.push(String(o.video.width || 0), o);
              var l = [];
              t.forEach(function (e, t) {
                e = 0;
                for (
                  var n = [], r = (t = c(t)).next(), a = {};
                  !r.done;
                  a = { be: void 0 }, r = t.next()
                )
                  (a.be = r.value),
                    (r = i.filter(
                      (function (e) {
                        return function (t) {
                          return e.be.decodingInfos[0][t];
                        };
                      })(a)
                    ).length) > e
                      ? ((e = r), (n = [a.be]))
                      : r == e && n.push(a.be);
                l.push.apply(l, d(n));
              }),
                (o = l);
            }
            for (
              n = new Set(), t = new Set(), r = (o = c(o)).next();
              !r.done;
              r = o.next()
            )
              (r = r.value).audio && n.add(r.audio), r.video && t.add(r.video);
            o = Array.from(n).sort(function (e, t) {
              return e.bandwidth - t.bandwidth;
            });
            var h,
              f,
              p = [];
            for (n = new Map(), r = (o = c(o)).next(); !r.done; r = o.next()) {
              if (
                ((r = r.value),
                (f = void 0),
                (f =
                  (h = r).language +
                  (h.channelsCount || 0) +
                  (h.audioSamplingRate || 0) +
                  h.roles.join(",") +
                  h.label +
                  h.groupId +
                  h.fastSwitching),
                h.dependencyStream &&
                  (f += h.dependencyStream.baseOriginalId || ""),
                (s = f),
                (u = n.get(s) || []).length)
              ) {
                var g = u[u.length - 1],
                  m = Ri(g.codecs),
                  v = Ri(r.codecs);
                m != v ||
                  (r.bandwidth &&
                    g.bandwidth &&
                    !(r.bandwidth > g.bandwidth)) ||
                  (u.push(r), p.push(r.id));
              } else u.push(r), p.push(r.id);
              n.set(s, u);
            }
            var y = {
              vp8: 1,
              avc: 1,
              "dovi-avc": 0.95,
              vp9: 0.9,
              vp09: 0.9,
              hevc: 0.85,
              "dovi-hevc": 0.8,
              "dovi-p5": 0.75,
              av01: 0.7,
              "dovi-av1": 0.65,
              vvc: 0.6,
            };
            (o = Array.from(t).sort(function (e, t) {
              if (!e.bandwidth || !t.bandwidth || e.bandwidth == t.bandwidth) {
                if (
                  e.codecs &&
                  t.codecs &&
                  e.codecs != t.codecs &&
                  e.width == t.width
                ) {
                  var n = Ri(e.codecs),
                    i = Ri(t.codecs);
                  if (n != i) return (y[n] || 1) - (y[i] || 1);
                }
                return e.width - t.width;
              }
              return e.bandwidth - t.bandwidth;
            })),
              (t = Vt());
            var b = [];
            for (n = new Map(), r = (o = c(o)).next(); !r.done; r = o.next()) {
              if (((s = a((r = r.value))), (u = n.get(s) || []).length)) {
                if (
                  ((g = u[u.length - 1]),
                  !t && (m = Ri(g.codecs)) !== (v = Ri(r.codecs)))
                )
                  continue;
                (m = Ri(g.codecs)) != (v = Ri(r.codecs)) ||
                  (r.bandwidth &&
                    g.bandwidth &&
                    !(r.bandwidth > g.bandwidth)) ||
                  (u.push(r), b.push(r.id));
              } else u.push(r), b.push(r.id);
              n.set(s, u);
            }
            e.variants = e.variants.filter(function (e) {
              var t = e.audio;
              return (
                (e = e.video),
                !((t && !p.includes(t.id)) || (e && !b.includes(e.id)))
              );
            });
          }
          function cr(e, t, n) {
            function i(e, t, n) {
              return e >= t && e <= n;
            }
            var r = e.video;
            if (r && r.width && r.height) {
              var a = r.width,
                o = r.height;
              if (
                (o > a &&
                  ((a = (o = c([o, a])).next().value), (o = o.next().value)),
                !i(a, t.minWidth, Math.min(t.maxWidth, n.width)) ||
                  !i(o, t.minHeight, Math.min(t.maxHeight, n.height)) ||
                  !i(r.width * r.height, t.minPixels, t.maxPixels))
              )
                return !1;
            }
            return !(
              (e &&
                e.video &&
                e.video.frameRate &&
                !i(e.video.frameRate, t.minFrameRate, t.maxFrameRate)) ||
              (e &&
                e.audio &&
                e.audio.channelsCount &&
                !i(
                  e.audio.channelsCount,
                  t.minChannelsCount,
                  t.maxChannelsCount
                )) ||
              !i(e.bandwidth, t.minBandwidth, t.maxBandwidth)
            );
          }
          function dr(e, t, n, i) {
            return (
              (n = void 0 === n ? [] : n),
              (i = void 0 === i ? {} : i),
              L(function (r) {
                return 1 == r.g
                  ? x(
                      r,
                      (function (e, t, n, i, r) {
                        var a, o;
                        return L(function (s) {
                          if (1 == s.g)
                            return (
                              Ve() &&
                                (function (e) {
                                  for (
                                    var t = new Map()
                                        .set("dvav", "avc3")
                                        .set("dva1", "avc1")
                                        .set("dvhe", "hev1")
                                        .set("dvh1", "hvc1")
                                        .set("dvc1", "vvc1")
                                        .set("dvi1", "vvi1"),
                                      n = new Set(),
                                      i = (e = c(e)).next();
                                    !i.done;
                                    i = e.next()
                                  )
                                    (i = i.value).video && n.add(i.video);
                                  for (
                                    n = c(n), e = n.next();
                                    !e.done;
                                    e = n.next()
                                  ) {
                                    e = e.value;
                                    for (
                                      var r = (i = c(t)).next();
                                      !r.done;
                                      r = i.next()
                                    ) {
                                      var a = c(r.value);
                                      if (
                                        ((r = a.next().value),
                                        (a = a.next().value),
                                        e.codecs.includes(r))
                                      ) {
                                        e.codecs = e.codecs.replace(r, a);
                                        break;
                                      }
                                    }
                                  }
                                })(t.variants),
                              x(s, pr(t.variants, n, !1, i), 2)
                            );
                          (a = null),
                            e && (o = e.h) && (a = o.keySystem),
                            (t.variants = t.variants.filter(function (e) {
                              var t = (function (e, t, n) {
                                if (
                                  !e.decodingInfos.some(function (e) {
                                    return !(
                                      !e.supported ||
                                      (t &&
                                        (e = e.keySystemAccess) &&
                                        (n[e.keySystem] || e.keySystem) != t)
                                    );
                                  })
                                )
                                  return !1;
                                var i = Ve(),
                                  r = rt("Firefox") && nt(),
                                  a = e.video,
                                  o = (a && a.width) || 0,
                                  s = (a && a.height) || 0;
                                return (
                                  !(
                                    (i &&
                                      a &&
                                      (1920 < o || 1080 < s) &&
                                      (a.codecs.includes("avc1.") ||
                                        a.codecs.includes("avc3."))) ||
                                    ((i = a && a.dependencyStream) && !Ft(i))
                                  ) &&
                                  ((e = e.audio),
                                  !(
                                    (r &&
                                      e &&
                                      e.encrypted &&
                                      e.codecs
                                        .toLowerCase()
                                        .includes("opus")) ||
                                    (e && e.dependencyStream)
                                  ))
                                );
                              })(e, a, r);
                              if (!t) {
                                var n = [];
                                e.audio && n.push(Er(e.audio)),
                                  e.video && n.push(Er(e.video));
                              }
                              return t;
                            })),
                            S(s);
                        });
                      })(e, t, 0 < t.offlineSessionIds.length, n, i),
                      2
                    )
                  : ((function (e) {
                      e.textStreams = e.textStreams.filter(function (e) {
                        return Gi((e = Mi(e.mimeType, e.codecs)));
                      });
                    })(t),
                    x(
                      r,
                      (function (e) {
                        var t, n, i, r, a, o, s;
                        return L(function (u) {
                          switch (u.g) {
                            case 1:
                              (t = []), (n = c(e.imageStreams)), (i = n.next());
                            case 2:
                              if (i.done) {
                                u.u(4);
                                break;
                              }
                              if (
                                ((r = i.value),
                                "application/mp4" == (a = r.mimeType) &&
                                  "mjpg" == r.codecs &&
                                  (a = "image/jpg"),
                                Rr.has(a))
                              ) {
                                u.u(5);
                                break;
                              }
                              if (!(o = Nr.get(a))) {
                                Rr.set(a, !1), u.u(5);
                                break;
                              }
                              return x(
                                u,
                                (function (e) {
                                  return new Promise(function (t) {
                                    var n = new Image();
                                    (n.src = e),
                                      "decode" in n
                                        ? n
                                            .decode()
                                            .then(function () {
                                              t(!0);
                                            })
                                            .catch(function () {
                                              t(!1);
                                            })
                                        : (n.onload = n.onerror =
                                            function () {
                                              t(2 === n.height);
                                            });
                                  });
                                })(o),
                                7
                              );
                            case 7:
                              (s = u.h), Rr.set(a, s);
                            case 5:
                              Rr.get(a) && t.push(r), (i = n.next()), u.u(2);
                              break;
                            case 4:
                              (e.imageStreams = t), S(u);
                          }
                        });
                      })(t),
                      0
                    ));
              })
            );
          }
          function hr(e, t) {
            var n, i, r, a, o, s, u;
            return L(function (l) {
              if (1 == l.g) {
                for (
                  n = function (e, t) {
                    if (e) {
                      var n = fn(e);
                      return (
                        (n.supported = e.supported && t.supported),
                        (n.powerEfficient =
                          e.powerEfficient && t.powerEfficient),
                        (n.smooth = e.smooth && t.smooth),
                        t.keySystemAccess &&
                          !n.keySystemAccess &&
                          (n.keySystemAccess = t.keySystemAccess),
                        n
                      );
                    }
                    return t;
                  },
                    i = null,
                    r = [],
                    a = c(t),
                    o = a.next(),
                    s = {};
                  !o.done;
                  s = { cache: void 0, ld: void 0 }, o = a.next()
                )
                  (u = o.value),
                    (s.ld = pn(u)),
                    (s.cache = Pr),
                    s.cache.has(s.ld)
                      ? (i = n(i, s.cache.get(s.ld)))
                      : r.push(
                          fr(u).then(
                            (function (e) {
                              return function (t) {
                                for (
                                  var r = null, a = (t = c(t || [])).next();
                                  !a.done;
                                  a = t.next()
                                )
                                  r = n(r, a.value);
                                r && (e.cache.set(e.ld, r), (i = n(i, r)));
                              };
                            })(s)
                          )
                        );
                return x(l, Promise.all(r), 2);
              }
              i && e.decodingInfos.push(i), S(l);
            });
          }
          function fr(e) {
            var t = [""];
            e.video && (t = Ui(e.video.contentType).split(","));
            var n = [""];
            e.audio && (n = Ui(e.audio.contentType).split(","));
            for (var i = [], r = (t = c(t)).next(); !r.done; r = t.next()) {
              r = r.value;
              for (
                var a = c(n), o = a.next(), s = {};
                !o.done;
                s = { Sb: void 0 }, o = a.next()
              )
                (o = o.value),
                  (s.Sb = hn(e)),
                  e.video &&
                    (s.Sb.video.contentType = Mi(
                      _i(s.Sb.video.contentType),
                      r
                    )),
                  e.audio &&
                    (s.Sb.audio.contentType = Mi(
                      _i(s.Sb.audio.contentType),
                      o
                    )),
                  i.push(
                    new Promise(
                      (function (e) {
                        return function (t, n) {
                          (nt()
                            ? $i(
                                5,
                                navigator.mediaCapabilities.decodingInfo(e.Sb)
                              )
                            : navigator.mediaCapabilities.decodingInfo(e.Sb)
                          )
                            .then(function (e) {
                              t(e);
                            })
                            .catch(n);
                        };
                      })(s)
                    )
                  );
            }
            return Promise.all(i).catch(function () {
              return JSON.stringify(e), null;
            });
          }
          function pr(e, t, n, i) {
            var r, a, o, s, u, l, d, h, f, p, g, m, v, y, b, w, S, T;
            return L(function (A) {
              switch (A.g) {
                case 1:
                  if (
                    e.some(function (e) {
                      return e.decodingInfos.length;
                    })
                  )
                    return A.return();
                  (r = c(i)), (a = r.next()), (o = {});
                case 2:
                  if (a.done) {
                    A.u(4);
                    break;
                  }
                  (o.mg = a.value), (s = !1), (u = c(e)), (l = u.next());
                case 5:
                  if (l.done) {
                    A.u(7);
                    break;
                  }
                  (d = l.value),
                    (h = gr(d, t, n).filter(
                      ((k = o),
                      function (e) {
                        return (
                          ((e = e[0]).keySystemConfiguration &&
                            e.keySystemConfiguration.keySystem) === k.mg
                        );
                      })
                    )),
                    (f = c(h)),
                    (p = f.next());
                case 8:
                  if (p.done) {
                    A.u(10);
                    break;
                  }
                  return (g = p.value), x(A, hr(d, g), 9);
                case 9:
                  (p = f.next()), A.u(8);
                  break;
                case 10:
                  d.decodingInfos.length && (s = !0), (l = u.next()), A.u(5);
                  break;
                case 7:
                  if (s) return A.return();
                  (o = { mg: void 0 }), (a = r.next()), A.u(2);
                  break;
                case 4:
                  (m = c(e)), (v = m.next());
                case 12:
                  if (v.done) {
                    A.u(0);
                    break;
                  }
                  (y = v.value),
                    (b = gr(y, t, n).filter(function (e) {
                      return (
                        !(e =
                          (e = e[0]).keySystemConfiguration &&
                          e.keySystemConfiguration.keySystem) || !i.includes(e)
                      );
                    })),
                    (w = c(b)),
                    (S = w.next());
                case 15:
                  if (S.done) {
                    (v = m.next()), A.u(12);
                    break;
                  }
                  return (T = S.value), x(A, hr(y, T), 16);
                case 16:
                  (S = w.next()), A.u(15);
              }
              var k;
            });
          }
          function gr(e, t, n) {
            var i = e.audio,
              r = e.video,
              a = [],
              o = [];
            if (r)
              for (
                var s = c(r.fullMimeTypes), u = s.next();
                !u.done;
                u = s.next()
              ) {
                var l = Ui((u = u.value));
                if (l.includes(",") && !i) {
                  var d = l.split(","),
                    h = _i(u);
                  (l = Dt("video", d)),
                    (h = Di(h, (d = mr((d = Dt("audio", d)), h)), "audio")),
                    o.push({
                      contentType: h,
                      channels: 2,
                      bitrate: e.bandwidth || 1,
                      samplerate: 1,
                      spatialRendering: !1,
                    });
                }
                if (
                  ((l = vr(l)),
                  (u = {
                    contentType: Di(_i(u), l, "video"),
                    width: r.width || 64,
                    height: r.height || 64,
                    bitrate: r.bandwidth || e.bandwidth || 1,
                    framerate: r.frameRate || 1,
                  }),
                  r.hdr)
                )
                  switch (r.hdr) {
                    case "SDR":
                      u.transferFunction = "srgb";
                      break;
                    case "PQ":
                      u.transferFunction = "pq";
                      break;
                    case "HLG":
                      u.transferFunction = "hlg";
                  }
                r.colorGamut && (u.colorGamut = r.colorGamut), a.push(u);
              }
            if (i)
              for (u = (s = c(i.fullMimeTypes)).next(); !u.done; u = s.next())
                (u = Di((u = _i((l = u.value))), (l = mr(Ui(l), u)), "audio")),
                  o.push({
                    contentType: u,
                    channels: i.channelsCount || 2,
                    bitrate: i.bandwidth || e.bandwidth || 1,
                    samplerate: i.audioSamplingRate || 1,
                    spatialRendering: i.spatialAudio,
                  });
            for (
              s = [],
                0 == a.length && a.push(null),
                0 == o.length && o.push(null),
                u = (a = c(a)).next();
              !u.done;
              u = a.next()
            )
              for (u = u.value, h = (l = c(o)).next(); !h.done; h = l.next())
                (h = h.value),
                  (d = { type: n ? "file" : "media-source" }),
                  u && (d.video = u),
                  h && (d.audio = h),
                  s.push(d);
            if (
              !(o = (e.video ? e.video.drmInfos : []).concat(
                e.audio ? e.audio.drmInfos : []
              )).length
            )
              return [s];
            for (
              e = [], n = new Map(), a = (o = c(o)).next();
              !a.done;
              a = o.next()
            )
              (a = a.value),
                n.get(a.keySystem) || n.set(a.keySystem, []),
                n.get(a.keySystem).push(a);
            for (
              o = t ? "required" : "optional",
                t = t ? ["persistent-license"] : ["temporary"],
                u = (a = c(n.keys())).next();
              !u.done;
              u = a.next()
            ) {
              for (
                u = u.value, h = n.get(u), l = new Map(), d = (h = c(h)).next();
                !d.done;
                d = h.next()
              ) {
                var f = (d = d.value).videoRobustness + "," + d.audioRobustness;
                l.get(f) || l.set(f, []), l.get(f).push(d);
              }
              for (h = (l = c(l.values())).next(); !h.done; h = l.next()) {
                (h = h.value), (d = []);
                for (var p = (f = c(s)).next(); !p.done; p = f.next()) {
                  p = Object.assign({}, p.value);
                  for (
                    var g = {
                        keySystem: u,
                        initDataType: "cenc",
                        persistentState: o,
                        distinctiveIdentifier: "optional",
                        sessionTypes: t,
                      },
                      m = c(h),
                      v = m.next();
                    !v.done;
                    v = m.next()
                  ) {
                    if ((v = v.value).initData && v.initData.length) {
                      for (
                        var y = new Set(), b = c(v.initData), w = b.next();
                        !w.done;
                        w = b.next()
                      )
                        y.add(w.value.initDataType);
                      g.initDataType = v.initData[0].initDataType;
                    }
                    v.distinctiveIdentifierRequired &&
                      (g.distinctiveIdentifier = "required"),
                      v.persistentStateRequired &&
                        (g.persistentState = "required"),
                      v.sessionType && (g.sessionTypes = [v.sessionType]),
                      i &&
                        (g.audio
                          ? (v.encryptionScheme &&
                              (g.audio.encryptionScheme =
                                g.audio.encryptionScheme || v.encryptionScheme),
                            (g.audio.robustness =
                              g.audio.robustness || v.audioRobustness))
                          : ((g.audio = { robustness: v.audioRobustness }),
                            v.encryptionScheme &&
                              (g.audio.encryptionScheme = v.encryptionScheme)),
                        "" == g.audio.robustness && delete g.audio.robustness),
                      r &&
                        (g.video
                          ? (v.encryptionScheme &&
                              (g.video.encryptionScheme =
                                g.video.encryptionScheme || v.encryptionScheme),
                            (g.video.robustness =
                              g.video.robustness || v.videoRobustness))
                          : ((g.video = { robustness: v.videoRobustness }),
                            v.encryptionScheme &&
                              (g.video.encryptionScheme = v.encryptionScheme)),
                        "" == g.video.robustness && delete g.video.robustness);
                  }
                  (p.keySystemConfiguration = g), d.push(p);
                }
                e.push(d);
              }
            }
            return e;
          }
          function mr(e, t) {
            return "flac" == e.toLowerCase()
              ? Ye()
                ? "fLaC"
                : "flac"
              : "opus" === e.toLowerCase()
              ? Ye() && "mp4" == Li(t)
                ? "Opus"
                : "opus"
              : "ac-3" == e.toLowerCase() && Ge()
              ? "ec-3"
              : e;
          }
          function vr(e) {
            if (e.includes("avc1")) {
              var t = e.split(".");
              if (3 == t.length)
                return (
                  (e = t.shift() + "."),
                  (e += parseInt(t.shift(), 10).toString(16)) +
                    ("000" + parseInt(t.shift(), 10).toString(16)).slice(-4)
                );
            } else if ("vp9" == e) return "vp09.00.41.08";
            return e;
          }
          function yr(e) {
            var t = e.audio,
              n = e.video,
              i = t ? t.mimeType : null,
              r = n ? n.mimeType : null,
              a = t ? t.codecs : null,
              o = n ? n.codecs : null,
              s = t ? t.groupId : null,
              u = [];
            n && u.push(n.mimeType),
              t && u.push(t.mimeType),
              (u = u[0] || null);
            var l = [];
            t && l.push(t.kind), n && l.push(n.kind), (l = l[0] || null);
            var d = new Set();
            if (t)
              for (var h = c(t.roles), f = h.next(); !f.done; f = h.next())
                d.add(f.value);
            if (n)
              for (f = (h = c(n.roles)).next(); !f.done; f = h.next())
                d.add(f.value);
            if (
              ((e = {
                id: e.id,
                active: !1,
                type: "variant",
                bandwidth: e.bandwidth,
                language: e.language,
                label: null,
                kind: l,
                width: null,
                height: null,
                frameRate: null,
                pixelAspectRatio: null,
                hdr: null,
                colorGamut: null,
                videoLayout: null,
                mimeType: u,
                audioMimeType: i,
                videoMimeType: r,
                codecs: "",
                audioCodec: a,
                videoCodec: o,
                primary: e.primary,
                roles: Array.from(d),
                audioRoles: null,
                forced: !1,
                videoId: null,
                audioId: null,
                audioGroupId: s,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                tilesLayout: null,
                audioBandwidth: null,
                videoBandwidth: null,
                originalVideoId: null,
                originalAudioId: null,
                originalTextId: null,
                originalImageId: null,
                accessibilityPurpose: null,
                originalLanguage: null,
              }),
              n &&
                ((e.videoId = n.id),
                (e.originalVideoId = n.originalId),
                (e.width = n.width || null),
                (e.height = n.height || null),
                (e.frameRate = n.frameRate || null),
                (e.pixelAspectRatio = n.pixelAspectRatio || null),
                (e.videoBandwidth = n.bandwidth || null),
                (e.hdr = n.hdr || null),
                (e.colorGamut = n.colorGamut || null),
                (e.videoLayout = n.videoLayout || null),
                (i = n.dependencyStream) &&
                  ((e.width = i.width || e.width),
                  (e.height = i.height || e.height),
                  (e.videoCodec = i.codecs || e.videoCodec)),
                o.includes(",")))
            ) {
              (e.channelsCount = n.channelsCount),
                (e.audioSamplingRate = n.audioSamplingRate),
                (e.spatialAudio = n.spatialAudio),
                (e.originalLanguage = n.originalLanguage),
                (e.audioMimeType = r),
                (n = o.split(","));
              try {
                (e.videoCodec = Dt("video", n)),
                  (e.audioCodec = Dt("audio", n));
              } catch (p) {}
            }
            return (
              t &&
                ((e.audioId = t.id),
                (e.originalAudioId = t.originalId),
                (e.channelsCount = t.channelsCount),
                (e.audioSamplingRate = t.audioSamplingRate),
                (e.audioBandwidth = t.bandwidth || null),
                (e.spatialAudio = t.spatialAudio),
                (e.label = t.label),
                (e.audioRoles = t.roles),
                (e.accessibilityPurpose = t.accessibilityPurpose),
                (e.originalLanguage = t.originalLanguage),
                (t = t.dependencyStream)) &&
                (e.audioCodec = t.codecs || e.audioCodec),
              (t = []),
              e.videoCodec && t.push(e.videoCodec),
              e.audioCodec && t.push(e.audioCodec),
              (e.codecs = t.join(", ")),
              e
            );
          }
          function br(e) {
            return {
              id: e.id,
              active: !1,
              type: Rt,
              bandwidth: 0,
              language: e.language,
              label: e.label,
              kind: e.kind || null,
              width: null,
              height: null,
              frameRate: null,
              pixelAspectRatio: null,
              hdr: null,
              colorGamut: null,
              videoLayout: null,
              mimeType: e.mimeType,
              audioMimeType: null,
              videoMimeType: null,
              codecs: e.codecs || null,
              audioCodec: null,
              videoCodec: null,
              primary: e.primary,
              roles: e.roles,
              audioRoles: null,
              forced: e.forced,
              videoId: null,
              audioId: null,
              audioGroupId: null,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: !1,
              tilesLayout: null,
              audioBandwidth: null,
              videoBandwidth: null,
              originalVideoId: null,
              originalAudioId: null,
              originalTextId: e.originalId,
              originalImageId: null,
              accessibilityPurpose: e.accessibilityPurpose,
              originalLanguage: e.originalLanguage,
            };
          }
          function wr(e) {
            var t = e.width || null,
              n = e.height || null,
              i = null;
            e.segmentIndex && (i = e.segmentIndex.g[0] || null);
            var r = e.tilesLayout;
            return (
              i && (r = i.tilesLayout || r),
              r && null != t && (t /= Number(r.split("x")[0])),
              r && null != n && (n /= Number(r.split("x")[1])),
              {
                id: e.id,
                active: !1,
                type: "image",
                bandwidth: e.bandwidth || 0,
                language: "",
                label: null,
                kind: null,
                width: t,
                height: n,
                frameRate: null,
                pixelAspectRatio: null,
                hdr: null,
                colorGamut: null,
                videoLayout: null,
                mimeType: e.mimeType,
                audioMimeType: null,
                videoMimeType: null,
                codecs: e.codecs || null,
                audioCodec: null,
                videoCodec: null,
                primary: !1,
                roles: [],
                audioRoles: null,
                forced: !1,
                videoId: null,
                audioId: null,
                audioGroupId: null,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                tilesLayout: r || null,
                audioBandwidth: null,
                videoBandwidth: null,
                originalVideoId: null,
                originalAudioId: null,
                originalTextId: null,
                originalImageId: e.originalId,
                accessibilityPurpose: null,
                originalLanguage: null,
              }
            );
          }
          function xr(e) {
            return e.__shaka_id || (e.__shaka_id = Lr++), e.__shaka_id;
          }
          function Sr(e) {
            var t = Tr(e);
            return (
              (t.active = e.enabled),
              (t.type = "variant"),
              (t.originalAudioId = e.id),
              "main" == e.kind && (t.primary = !0),
              e.kind &&
                ((t.roles = [e.kind]),
                (t.audioRoles = [e.kind]),
                (t.label = e.label)),
              t
            );
          }
          function Tr(e) {
            var t = e.language;
            return {
              id: xr(e),
              active: !1,
              type: "",
              bandwidth: 0,
              language: nr(t || "und"),
              label: e.label,
              kind: e.kind,
              width: null,
              height: null,
              frameRate: null,
              pixelAspectRatio: null,
              hdr: null,
              colorGamut: null,
              videoLayout: null,
              mimeType: null,
              audioMimeType: null,
              videoMimeType: null,
              codecs: null,
              audioCodec: null,
              videoCodec: null,
              primary: !1,
              roles: [],
              forced: !1,
              audioRoles: null,
              videoId: null,
              audioId: null,
              audioGroupId: null,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: !1,
              tilesLayout: null,
              audioBandwidth: null,
              videoBandwidth: null,
              originalVideoId: null,
              originalAudioId: null,
              originalTextId: null,
              originalImageId: null,
              accessibilityPurpose: null,
              originalLanguage: t,
            };
          }
          function Ar(e) {
            return (
              e.allowedByApplication &&
              e.allowedByKeySystem &&
              0 == e.disabledUntilTime
            );
          }
          function kr(e) {
            return e.filter(function (e) {
              return Ar(e);
            });
          }
          function Ir(e, t, n, i) {
            var r = e,
              a = e.filter(function (e) {
                return e.primary;
              });
            a.length && (r = a);
            var o = r.length ? r[0].language : "";
            if (
              ((r = r.filter(function (e) {
                return e.language == o;
              })),
              t)
            ) {
              var s = or(
                nr(t),
                e.map(function (e) {
                  return e.language;
                })
              );
              s &&
                (r = e.filter(function (e) {
                  return nr(e.language) == s;
                }));
            }
            if (
              ((r = r.filter(function (e) {
                return e.forced == i;
              })),
              n)
            ) {
              if ((e = Cr(r, n)).length) return e;
            } else if (
              ((e = r.filter(function (e) {
                return 0 == e.roles.length;
              })),
              e.length)
            )
              return e;
            return (
              (e = r
                .map(function (e) {
                  return e.roles;
                })
                .reduce(Xi, [])),
              e.length ? Cr(r, e[0]) : r
            );
          }
          function Cr(e, t) {
            return e.filter(function (e) {
              return e.roles.includes(t);
            });
          }
          function Mr(e, t) {
            t.length &&
              ((t = t
                .filter(function (t) {
                  return Ri(e.codecs) == Ri(t.codecs);
                })
                .sort(function (e, t) {
                  return e.bandwidth &&
                    t.bandwidth &&
                    e.bandwidth != t.bandwidth
                    ? e.bandwidth - t.bandwidth
                    : (e.width || 0) - (t.width || 0);
                })),
              (e.trickModeVideo = t[0]),
              1 < t.length &&
                (t = t.find(function (t) {
                  return e.width == t.width && e.height == t.height;
                }))) &&
              (e.trickModeVideo = t);
          }
          function Er(e) {
            return "audio" == e.type
              ? "type=audio codecs=" +
                  e.codecs +
                  " bandwidth=" +
                  e.bandwidth +
                  " channelsCount=" +
                  e.channelsCount +
                  " audioSamplingRate=" +
                  e.audioSamplingRate
              : "video" == e.type
              ? "type=video codecs=" +
                e.codecs +
                " bandwidth=" +
                e.bandwidth +
                " frameRate=" +
                e.frameRate +
                " width=" +
                e.width +
                " height=" +
                e.height
              : "unexpected stream type";
          }
          function Dr(e, t, n) {
            if (0 == n.autoShowText) return !1;
            if (1 == n.autoShowText) return !0;
            var i = nr(n.preferredTextLanguage);
            return (
              (t = nr(t.language)),
              2 == n.autoShowText
                ? Qi(t, i)
                : 3 == n.autoShowText
                ? !!e && ((e = nr(e.language)), Qi(t, i) && !Qi(e, t))
                : (X("Invalid autoShowText setting!"), !1)
            );
          }
          F("shaka.util.StreamUtils", ur), (ur.meetsRestrictions = cr);
          var Pr = new Map(),
            Lr = 0,
            Rr = new Map()
              .set("image/svg+xml", !0)
              .set("image/png", !0)
              .set("image/jpeg", !0)
              .set("image/jpg", !0),
            Nr = new Map()
              .set(
                "image/webp",
                "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"
              )
              .set(
                "image/avif",
                "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="
              );
          function _r() {
            var t = this;
            (this.F = null),
              (this.o = !1),
              (this.m = new q()),
              (this.j = new Z()),
              navigator.connection &&
                navigator.connection.addEventListener &&
                this.j.H(navigator.connection, "change", function () {
                  if (t.o && t.g.useNetworkInformation) {
                    (t.m = new q()), t.g && t.m.configure(t.g.advanced);
                    var e = t.chooseVariant();
                    e &&
                      navigator.onLine &&
                      t.F(e, t.g.clearBufferSwitch, t.g.safeMarginSwitch);
                  }
                }),
              (this.D = []),
              (this.G = 1),
              (this.J = !1),
              (this.h = this.l = this.g = this.s = null),
              (this.A = new Oe(function () {
                if (
                  t.o &&
                  (t.g.restrictToElementSize || t.g.restrictToScreenSize)
                ) {
                  var e = t.chooseVariant();
                  e && t.F(e, t.g.clearBufferSwitch, t.g.safeMarginSwitch);
                }
              })),
              (this.B = e),
              "documentPictureInPicture" in e &&
                this.j.H(e.documentPictureInPicture, "enter", function () {
                  (t.B = e.documentPictureInPicture.window),
                    t.A && t.A.Nb(),
                    t.j.Ea(t.B, "pagehide", function () {
                      (t.B = e), t.A && t.A.Nb();
                    });
                }),
              (this.C = this.i = null);
          }
          function Ur(e) {
            if (!e.J) {
              var t = e.m;
              if (!(t.g >= t.i)) return;
              (e.J = !0),
                (e.s -= 1e3 * (e.g.switchInterval - e.g.minTimeToSwitch));
            }
            Date.now() - e.s < 1e3 * e.g.switchInterval ||
              ((t = e.chooseVariant()),
              e.getBandwidthEstimate(),
              t && e.F(t, e.g.clearBufferSwitch, e.g.safeMarginSwitch));
          }
          function jr(e, t, n, i, r) {
            if (e.C) {
              var a = e.C.Uf();
              a &&
                (n = n.filter(function (e) {
                  return !e.bandwidth || !a || e.bandwidth <= a;
                }));
            }
            return (
              t &&
                (n = n.filter(function (e) {
                  return cr(e, t, { width: r, height: i });
                })),
              n.sort(function (e, t) {
                return e.bandwidth - t.bandwidth;
              })
            );
          }
          ((i = _r.prototype).stop = function () {
            (this.F = null),
              (this.o = !1),
              (this.D = []),
              (this.G = 1),
              (this.l = this.s = null),
              this.h && (this.h.disconnect(), (this.h = null)),
              this.A.stop(),
              (this.C = this.i = null);
          }),
            (i.release = function () {
              this.j.release(), (this.A = null);
            }),
            (i.init = function (e) {
              this.F = e;
            }),
            (i.chooseVariant = function () {
              var e = 1 / 0,
                t = 1 / 0;
              if (this.g.restrictToScreenSize) {
                var n = this.g.ignoreDevicePixelRatio
                  ? 1
                  : this.B.devicePixelRatio;
                (e = this.B.screen.height * n), (t = this.B.screen.width * n);
              }
              if (this.h && this.g.restrictToElementSize) {
                n = this.g.ignoreDevicePixelRatio ? 1 : this.B.devicePixelRatio;
                var i = this.l.clientHeight,
                  r = this.l.clientWidth;
                this.i &&
                  document.pictureInPictureElement &&
                  document.pictureInPictureElement == this.l &&
                  ((i = this.i.height), (r = this.i.width)),
                  (e = Math.min(e, i * n)),
                  (t = Math.min(t, r * n));
              }
              if (
                ((n = this.D.filter(function (e) {
                  return (
                    e &&
                    !(
                      (e.audio && e.audio.fastSwitching) ||
                      (e.video && e.video.fastSwitching)
                    )
                  );
                })).length || (n = this.D),
                (i = n),
                n.length != this.D.length &&
                  (i = this.D.filter(function (e) {
                    return (
                      e &&
                      !!(
                        (e.audio && e.audio.fastSwitching) ||
                        (e.video && e.video.fastSwitching)
                      )
                    );
                  })),
                (n = jr(this, this.g.restrictions, i, 1 / 0, 1 / 0)),
                1 / 0 != e || 1 / 0 != t)
              ) {
                for (
                  n = (function (e) {
                    for (
                      var t = [], n = (e = c(e)).next();
                      !n.done;
                      n = e.next()
                    )
                      (n = n.value.video) &&
                        n.height &&
                        n.width &&
                        t.push({ height: n.height, width: n.width });
                    return t.sort(function (e, t) {
                      return e.width - t.width;
                    });
                  })(n),
                    r = (n = c(n)).next();
                  !r.done;
                  r = n.next()
                )
                  if ((r = r.value).height >= e && r.width >= t) {
                    (e = r.height), (t = r.width);
                    break;
                  }
                n = jr(this, this.g.restrictions, i, e, t);
              }
              for (
                e = this.getBandwidthEstimate(),
                  i.length &&
                    !n.length &&
                    (n = [(n = jr(this, null, i, 1 / 0, 1 / 0))[0]]),
                  t = n[0] || null,
                  i = 0;
                i < n.length;
                i++
              ) {
                r = n[i];
                for (
                  var a = isNaN(this.G) ? 1 : Math.abs(this.G),
                    o = (a * r.bandwidth) / this.g.bandwidthDowngradeTarget,
                    s = { bandwidth: 1 / 0 },
                    u = i + 1;
                  u < n.length;
                  u++
                )
                  if (r.bandwidth != n[u].bandwidth) {
                    s = n[u];
                    break;
                  }
                (a = (a * s.bandwidth) / this.g.bandwidthUpgradeTarget),
                  e >= o &&
                    e <= a &&
                    (t.bandwidth != r.bandwidth ||
                      (t.bandwidth == r.bandwidth &&
                        t.video &&
                        r.video &&
                        (t.video.width < r.video.width ||
                          t.video.height < r.video.height))) &&
                    (t = r);
              }
              return (this.s = Date.now()), t;
            }),
            (i.enable = function () {
              this.o = !0;
            }),
            (i.disable = function () {
              this.o = !1;
            }),
            (i.segmentDownloaded = function (e, t, n) {
              e < this.g.cacheLoadThreshold ||
                (this.m.sample(e, t),
                n && null != this.s && this.o && Ur(this));
            }),
            (i.trySuggestStreams = function () {
              null != this.s && this.o && Ur(this);
            }),
            (i.getBandwidthEstimate = function () {
              var e = this.g.defaultBandwidthEstimate;
              return (
                navigator.connection &&
                  navigator.connection.downlink &&
                  this.g.useNetworkInformation &&
                  (e = 1e6 * navigator.connection.downlink),
                navigator.connection &&
                navigator.connection.downlink &&
                this.g.useNetworkInformation &&
                this.g.preferNetworkInformationBandwidth
                  ? e
                  : ((e = this.m.getBandwidthEstimate(e)),
                    this.C ? this.C.getBandwidthEstimate(e) : e)
              );
            }),
            (i.setVariants = function (e) {
              this.D = e;
            }),
            (i.playbackRateChanged = function (e) {
              this.G = e;
            }),
            (i.setMediaElement = function (t) {
              function n() {
                i.A.ea(Or);
              }
              var i = this;
              (this.l = t),
                this.h && (this.h.disconnect(), (this.h = null)),
                this.l &&
                  "ResizeObserver" in e &&
                  ((this.h = new ResizeObserver(n)), this.h.observe(this.l)),
                this.j.H(t, "enterpictureinpicture", function (e) {
                  e.pictureInPictureWindow &&
                    ((i.i = e.pictureInPictureWindow), i.j.H(i.i, "resize", n));
                }),
                this.j.H(t, "leavepictureinpicture", function () {
                  i.i && i.j.sb(i.i, "resize", n), (i.i = null);
                });
            }),
            (i.setCmsdManager = function (e) {
              this.C = e;
            }),
            (i.configure = function (e) {
              (this.g = e),
                this.m && this.g && this.m.configure(this.g.advanced);
            }),
            F("shaka.abr.SimpleAbrManager", _r),
            (_r.prototype.configure = _r.prototype.configure),
            (_r.prototype.setCmsdManager = _r.prototype.setCmsdManager),
            (_r.prototype.setMediaElement = _r.prototype.setMediaElement),
            (_r.prototype.playbackRateChanged =
              _r.prototype.playbackRateChanged),
            (_r.prototype.setVariants = _r.prototype.setVariants),
            (_r.prototype.getBandwidthEstimate =
              _r.prototype.getBandwidthEstimate),
            (_r.prototype.trySuggestStreams = _r.prototype.trySuggestStreams),
            (_r.prototype.segmentDownloaded = _r.prototype.segmentDownloaded),
            (_r.prototype.disable = _r.prototype.disable),
            (_r.prototype.enable = _r.prototype.enable),
            (_r.prototype.chooseVariant = _r.prototype.chooseVariant),
            (_r.prototype.init = _r.prototype.init),
            (_r.prototype.release = _r.prototype.release),
            (_r.prototype.stop = _r.prototype.stop);
          var Or = 1;
          function Br(e, t, n, i, r) {
            if (i >= r) return null;
            for (var a = -1, o = -1, s = 0; s < n.length; s++)
              if (
                n[s].some(function (e) {
                  return null != e && "" != e.g.trim();
                })
              ) {
                a = s;
                break;
              }
            for (s = n.length - 1; 0 <= s; s--)
              if (
                n[s].some(function (e) {
                  return null != e && "" != e.g.trim();
                })
              ) {
                o = s;
                break;
              }
            if (-1 === a || -1 === o) return null;
            for (
              var u = (s = !1),
                l = "white",
                c = "black",
                d = Fr(i, r, s, u, l, c);
              a <= o;
              a++
            ) {
              for (var h = n[a], f = -1, p = -1, g = 0; g < h.length; g++)
                if (null != h[g] && "" !== h[g].g.trim()) {
                  f = g;
                  break;
                }
              for (g = h.length - 1; 0 <= g; g--)
                if (null != h[g] && "" !== h[g].g.trim()) {
                  p = g;
                  break;
                }
              if (-1 === f || -1 === p) (h = Hr(i, r)), e.nestedCues.push(h);
              else {
                for (; f <= p; f++)
                  if ((g = h[f])) {
                    var m = g.l,
                      v = g.i,
                      y = g.j,
                      b = g.h;
                    (m == s && v == u && y == l && b == c) ||
                      (d.payload && e.nestedCues.push(d),
                      (d = Fr(i, r, m, v, y, b)),
                      (s = m),
                      (u = v),
                      (l = y),
                      (c = b)),
                      (d.payload += g.g);
                  } else d.payload += " ";
                d.payload && e.nestedCues.push(d),
                  a !== o && ((d = Hr(i, r)), e.nestedCues.push(d)),
                  (d = Fr(i, r, s, u, l, c));
              }
            }
            return e.nestedCues.length ? { cue: e, stream: t } : null;
          }
          function Fr(e, t, n, i, r, a) {
            return (
              (e = new Wn(e, t, "")),
              n && e.textDecoration.push(vi),
              i && (e.fontStyle = gi),
              (e.color = r),
              (e.backgroundColor = a),
              e
            );
          }
          function Hr(e, t) {
            return ((e = new Wn(e, t, "")).lineBreak = !0), e;
          }
          function Vr(e, t, n, i, r) {
            (this.g = e),
              (this.l = t),
              (this.i = n),
              (this.h = i),
              (this.j = r);
          }
          function zr(e, t) {
            (this.i = []),
              (this.g = 1),
              (this.h = 0),
              (this.C = e),
              (this.B = t),
              (this.j = this.m = !1),
              (this.l = "white"),
              (this.o = "black"),
              (this.s = this.A = null),
              qr(this);
          }
          function Gr(e, t, n) {
            var i = "CC" + (1 + ((e.C << 1) | e.B)),
              r = new Wn(t, n, "");
            r.lineInterpretation = 1;
            var a = Qr.get(e.g);
            return (
              a && (r.line = a),
              null != e.s &&
                null != e.A &&
                (r.position = 10 + Math.min(70, 10 * e.s) + 2.5 * e.A),
              (t = Br(r, i, e.i, t, n)) &&
                15 < e.g + t.cue.nestedCues.length - 3 &&
                (a = Qr.get(e.g + 3 - t.cue.nestedCues.length)) &&
                (r.line = a),
              t
            );
          }
          function qr(e) {
            Xr(e, 0, 15), (e.g = 1);
          }
          function Kr(e, t, n) {
            if (!(32 > n || 127 < n)) {
              var i = "";
              switch (t) {
                case 0:
                  i = Yr.has(n) ? Yr.get(n) : String.fromCharCode(n);
                  break;
                case 1:
                  i = Jr.get(n);
                  break;
                case 2:
                  e.i[e.g].pop(), (i = $r.get(n));
                  break;
                case 3:
                  e.i[e.g].pop(), (i = Zr.get(n));
              }
              i && e.i[e.g].push(new Vr(i, e.m, e.j, e.o, e.l));
            }
          }
          function Wr(e, t, n, i) {
            if (!(0 > n || 0 > t))
              if (t >= n)
                for (--i; 0 <= i; i--)
                  e.i[t + i] = e.i[n + i].map(function (e) {
                    return e;
                  });
              else
                for (var r = 0; r < i; r++)
                  e.i[t + r] = e.i[n + r].map(function (e) {
                    return e;
                  });
          }
          function Xr(e, t, n) {
            for (var i = 0; i <= n; i++) e.i[t + i] = [];
          }
          var Yr = new Map([
              [39, ""],
              [42, ""],
              [92, ""],
              [92, ""],
              [94, ""],
              [95, ""],
              [96, ""],
              [123, ""],
              [124, ""],
              [125, ""],
              [126, ""],
              [127, ""],
            ]),
            Jr = new Map([
              [48, ""],
              [49, ""],
              [50, ""],
              [51, ""],
              [52, ""],
              [53, ""],
              [54, ""],
              [55, ""],
              [56, ""],
              [57, " "],
              [58, ""],
              [59, ""],
              [60, ""],
              [61, ""],
              [62, ""],
              [63, ""],
            ]),
            $r = new Map([
              [32, ""],
              [33, ""],
              [34, ""],
              [35, ""],
              [36, ""],
              [37, ""],
              [38, ""],
              [39, ""],
              [40, "*"],
              [41, "'"],
              [42, ""],
              [43, ""],
              [44, ""],
              [45, ""],
              [46, ""],
              [47, ""],
              [48, ""],
              [49, ""],
              [50, ""],
              [51, ""],
              [52, ""],
              [53, ""],
              [54, ""],
              [55, ""],
              [56, ""],
              [57, ""],
              [58, ""],
              [59, ""],
              [60, ""],
              [61, ""],
              [62, ""],
              [63, ""],
            ]),
            Zr = new Map([
              [32, ""],
              [33, ""],
              [34, ""],
              [35, ""],
              [36, ""],
              [37, ""],
              [38, ""],
              [39, ""],
              [40, ""],
              [41, "{"],
              [42, "}"],
              [43, "\\"],
              [44, "^"],
              [45, "_"],
              [46, "|"],
              [47, "~"],
              [48, ""],
              [49, ""],
              [50, ""],
              [51, ""],
              [52, ""],
              [53, ""],
              [54, ""],
              [55, ""],
              [56, ""],
              [57, ""],
              [58, ""],
              [59, ""],
              [60, ""],
              [61, ""],
              [62, ""],
              [63, ""],
            ]),
            Qr = new Map([
              [1, 10],
              [2, 15.33],
              [3, 20.66],
              [4, 26],
              [5, 31.33],
              [6, 36.66],
              [7, 42],
              [8, 47.33],
              [9, 52.66],
              [10, 58],
              [11, 63.33],
              [12, 68.66],
              [13, 74],
              [14, 79.33],
              [15, 84.66],
            ]);
          function ea(e, t) {
            (this.h = 0),
              (this.o = new zr(e, t)),
              (this.i = new zr(e, t)),
              (this.g = this.j = new zr(e, t)),
              (this.l = 0),
              (this.m = null);
          }
          function ta(e, t, n) {
            e.g = e.i;
            var i = e.g,
              r = null;
            return (
              3 !== e.h &&
                4 !== e.h &&
                ((r = Gr(i, e.l, n)),
                ((n = e.i).g = 0 < n.h ? n.h : 0),
                Xr(n, 0, 15),
                ((n = e.j).g = 0 < n.h ? n.h : 0),
                Xr(n, 0, 15),
                (i.g = 15)),
              (e.h = 3),
              (i.h = t),
              r
            );
          }
          function na(e) {
            (e.h = 1), (e.g = e.j), (e.g.h = 0);
          }
          function ia(e) {
            Y(
              "Cea608DataChannel",
              "CEA-608 text mode entered, but is unsupported"
            ),
              (e.g = e.o),
              (e.h = 4);
          }
          var ra = "black green blue cyan red yellow magenta black".split(" "),
            aa = "white green blue cyan red yellow magenta white_italics".split(
              " "
            );
          function oa(e, t) {
            (this.J = t),
              (this.O = e),
              (this.K = this.l = !1),
              (this.m = this.o = this.F = this.L = this.G = 0),
              (this.D = 2),
              (this.i = []),
              (this.g = this.h = this.j = 0),
              (this.C = this.A = !1),
              (this.B = "white"),
              (this.s = "black"),
              sa(this);
          }
          function sa(e) {
            e.i = [];
            for (var t = 0; 16 > t; t++) e.i.push(ua());
          }
          function ua() {
            for (var e = [], t = 0; 42 > t; t++) e.push(null);
            return e;
          }
          function la(e, t) {
            ca(e) && ((e.i[e.h][e.g] = new Vr(t, e.C, e.A, e.s, e.B)), e.g++);
          }
          function ca(e) {
            var t = e.g < e.m && 0 <= e.g;
            return e.h < e.o && 0 <= e.h && t;
          }
          function da(e, t, n) {
            var i = new Wn(e.j, t, "");
            i.textAlign = 0 === e.D ? "left" : 1 === e.D ? "right" : ti;
            var r = i.region;
            switch (
              (e.J && (r.id += "svc" + e.J),
              (r.id += "win" + e.O),
              (r.height = e.o),
              (r.width = e.m),
              (r.heightUnits = 2),
              (r.widthUnits = 2),
              (r.viewportAnchorX = e.G),
              (r.viewportAnchorY = e.L),
              (r.viewportAnchorUnits = e.K ? en : 2),
              e.F)
            ) {
              case 0:
                (r.regionAnchorX = 0), (r.regionAnchorY = 0);
                break;
              case 1:
                (r.regionAnchorX = 50), (r.regionAnchorY = 0);
                break;
              case 2:
                (r.regionAnchorX = 100), (r.regionAnchorY = 0);
                break;
              case 3:
                (r.regionAnchorX = 0), (r.regionAnchorY = 50);
                break;
              case 4:
                (r.regionAnchorX = 50), (r.regionAnchorY = 50);
                break;
              case 5:
                (r.regionAnchorX = 100), (r.regionAnchorY = 50);
                break;
              case 6:
                (r.regionAnchorX = 0), (r.regionAnchorY = 100);
                break;
              case 7:
                (r.regionAnchorX = 50), (r.regionAnchorY = 100);
                break;
              case 8:
                (r.regionAnchorX = 100), (r.regionAnchorY = 100);
            }
            return (n = Br(i, "svc" + n, e.i, e.j, t)) && (e.j = t), n;
          }
          function ha() {
            (this.i = []), (this.h = null), (this.g = 0);
          }
          function fa(e, t) {
            3 === t.type
              ? ((e.g = 2 * (63 & t.value) - 1), (e.h = []))
              : e.h &&
                (0 < e.g && (e.h.push(t), e.g--),
                0 === e.g && (e.i.push(new pa(e.h)), (e.h = null), (e.g = 0)));
          }
          function pa(e) {
            (this.g = 0), (this.h = e);
          }
          function ga(e) {
            if (!e.ya()) throw new Ee(2, 2, 3e3);
            return e.h[e.g++];
          }
          function ma(e) {
            (this.i = e),
              (this.h = [null, null, null, null, null, null, null, null]),
              (this.g = null);
          }
          function va(e, t, n, i) {
            if (!e.g) return [];
            if (24 == n)
              return (
                (n = ga(t).value),
                (i = ga(t).value),
                (n = [n, i]
                  .map(function (e) {
                    return ("0" + (255 & e).toString(16)).slice(-2);
                  })
                  .join("")),
                la(e.g, String.fromCharCode(parseInt(n, 16))),
                []
              );
            t = e.g;
            var r = null;
            switch (n) {
              case 8:
                !ca(t) ||
                  (0 >= t.g && 0 >= t.h) ||
                  (0 >= t.g ? ((t.g = t.m - 1), t.h--) : t.g--,
                  (t.i[t.h][t.g] = null));
                break;
              case 13:
                t.isVisible() && (r = da(t, i, e.i)),
                  t.h + 1 >= t.o
                    ? (function (e) {
                        for (var t = 0, n = 1; 16 > n; n++, t++)
                          e.i[t] = e.i[n];
                        for (n = 0; 1 > n; n++, t++) e.i[t] = ua();
                      })(t)
                    : t.h++,
                  (t.g = 0);
                break;
              case 14:
                t.isVisible() && (r = da(t, i, e.i)),
                  (t.i[t.h] = ua()),
                  (t.g = 0);
                break;
              case 12:
                t.isVisible() && (r = da(t, i, e.i)),
                  sa(t),
                  (t.h = 0),
                  (t.g = 0);
            }
            return r ? [r] : [];
          }
          function ya(e, t, n, i) {
            if (128 <= n && 135 >= n) (i = 7 & n), e.h[i] && (e.g = e.h[i]);
            else {
              if (136 === n) {
                (n = ga(t).value), (t = []);
                for (var r = (n = c(ba(e, n))).next(); !r.done; r = n.next()) {
                  if ((r = e.h[r.value]).isVisible()) {
                    var a = da(r, i, e.i);
                    a && t.push(a);
                  }
                  sa(r);
                }
                return t;
              }
              if (137 === n)
                for (
                  n = (t = c(ba(e, (t = ga(t).value)))).next();
                  !n.done;
                  n = t.next()
                )
                  (n = e.h[n.value]).isVisible() || (n.j = i), n.display();
              else {
                if (138 === n) {
                  for (
                    n = ga(t).value, t = null, r = (n = c(ba(e, n))).next();
                    !r.done;
                    r = n.next()
                  )
                    (r = e.h[r.value]).isVisible() && (t = da(r, i, e.i)),
                      (r.l = !1);
                  return t ? [t] : [];
                }
                if (139 === n) {
                  for (
                    n = ga(t).value, t = null, r = (n = c(ba(e, n))).next();
                    !r.done;
                    r = n.next()
                  )
                    (r = e.h[r.value]).isVisible()
                      ? (t = da(r, i, e.i))
                      : (r.j = i),
                      (r.l = !r.l);
                  return t ? [t] : [];
                }
                if (140 === n) return wa(e, (t = ga(t).value), i);
                if (143 === n) return (i = wa(e, 255, i)), xa(e), i;
                if (144 === n)
                  t.skip(1),
                    (i = ga(t).value),
                    e.g && ((e.g.A = 0 < (128 & i)), (e.g.C = 0 < (64 & i)));
                else if (145 === n)
                  (i = ga(t).value),
                    (n = ga(t).value),
                    t.skip(1),
                    e.g &&
                      ((t = Sa((48 & n) >> 4, (12 & n) >> 2, 3 & n)),
                      (e.g.B = Sa((48 & i) >> 4, (12 & i) >> 2, 3 & i)),
                      (e.g.s = t));
                else if (146 === n)
                  (i = ga(t).value),
                    (t = ga(t).value),
                    e.g && (((e = e.g).h = 15 & i), (e.g = 63 & t));
                else if (151 === n)
                  t.skip(1),
                    t.skip(1),
                    (i = ga(t).value),
                    t.skip(1),
                    e.g && (e.g.D = 3 & i);
                else if (152 <= n && 159 >= n) {
                  (n = (15 & n) - 8),
                    (r = null !== e.h[n]) ||
                      (((a = new oa(n, e.i)).j = i), (e.h[n] = a)),
                    (i = ga(t).value),
                    (a = ga(t).value);
                  var o = ga(t).value,
                    s = ga(t).value,
                    u = ga(t).value;
                  (t = ga(t).value),
                    (r && !(7 & t)) ||
                      (((t = e.h[n]).h = 0),
                      (t.g = 0),
                      (t.C = !1),
                      (t.A = !1),
                      (t.B = "white"),
                      (t.s = "black")),
                    ((t = e.h[n]).l = 0 < (32 & i)),
                    (t.L = 127 & a),
                    (t.G = o),
                    (t.F = (240 & s) >> 4),
                    (t.K = 0 < (128 & a)),
                    (t.o = 1 + (15 & s)),
                    (t.m = 1 + (63 & u)),
                    (e.g = e.h[n]);
                }
              }
            }
            return [];
          }
          function ba(e, t) {
            for (var n = [], i = 0; 8 > i; i++)
              !(1 & ~t) && e.h[i] && n.push(i), (t >>= 1);
            return n;
          }
          function wa(e, t, n) {
            for (
              var i = [], r = (t = c(ba(e, t))).next();
              !r.done;
              r = t.next()
            ) {
              r = r.value;
              var a = e.h[r];
              a.isVisible() && (a = da(a, n, e.i)) && i.push(a),
                (e.h[r] = null);
            }
            return i;
          }
          function xa(e) {
            (e.g = null),
              (e.h = [null, null, null, null, null, null, null, null]);
          }
          function Sa(e, t, n) {
            var i = { 0: 0, 1: 0, 2: 1, 3: 1 };
            return Aa[((e = i[e]) << 2) | ((t = i[t]) << 1) | (n = i[n])];
          }
          (oa.prototype.isVisible = function () {
            return this.l;
          }),
            (oa.prototype.display = function () {
              this.l = !0;
            }),
            (pa.prototype.ya = function () {
              return this.g < this.h.length;
            }),
            (pa.prototype.ra = function () {
              return this.g;
            }),
            (pa.prototype.skip = function (e) {
              if (this.g + e > this.h.length) throw new Ee(2, 2, 3e3);
              this.g += e;
            }),
            (pa.prototype.pg = function (e) {
              if (0 > this.g - e) throw new Ee(2, 2, 3e3);
              this.g -= e;
            });
          var Ta = new Map([
              [32, " "],
              [33, ""],
              [37, ""],
              [42, ""],
              [44, ""],
              [48, ""],
              [49, ""],
              [50, ""],
              [51, ""],
              [52, ""],
              [53, ""],
              [57, ""],
              [58, ""],
              [60, ""],
              [61, ""],
              [63, ""],
              [118, ""],
              [119, ""],
              [120, ""],
              [121, ""],
              [122, ""],
              [123, ""],
              [124, ""],
              [125, ""],
              [126, ""],
              [127, ""],
            ]),
            Aa = "black blue green cyan red magenta yellow white".split(" ");
          function ka(e, t) {
            (this.h = Ce(e)), (this.i = t == Ca), (this.g = 0);
          }
          function Ia() {
            return new Ee(2, 3, 3e3);
          }
          ((i = ka.prototype).ya = function () {
            return this.g < this.h.byteLength;
          }),
            (i.ra = function () {
              return this.g;
            }),
            (i.getLength = function () {
              return this.h.byteLength;
            }),
            (i.lb = function () {
              try {
                var e = this.h.getUint8(this.g);
                return (this.g += 1), e;
              } catch (t) {
                throw Ia();
              }
            }),
            (i.kb = function () {
              try {
                var e = this.h.getUint16(this.g, this.i);
                return (this.g += 2), e;
              } catch (t) {
                throw Ia();
              }
            }),
            (i.M = function () {
              try {
                var e = this.h.getUint32(this.g, this.i);
                return (this.g += 4), e;
              } catch (t) {
                throw Ia();
              }
            }),
            (i.ef = function () {
              try {
                var e = this.h.getInt32(this.g, this.i);
                return (this.g += 4), e;
              } catch (t) {
                throw Ia();
              }
            }),
            (i.Cc = function () {
              try {
                if (this.i)
                  var e = this.h.getUint32(this.g, !0),
                    t = this.h.getUint32(this.g + 4, !0);
                else
                  (t = this.h.getUint32(this.g, !1)),
                    (e = this.h.getUint32(this.g + 4, !1));
              } catch (n) {
                throw Ia();
              }
              if (2097151 < t) throw new Ee(2, 3, 3001);
              return (this.g += 8), t * Math.pow(2, 32) + e;
            }),
            (i.Ib = function (e) {
              if (this.g + e > this.h.byteLength) throw Ia();
              var t = ke(this.h, this.g, e);
              return (this.g += e), t;
            }),
            (i.skip = function (e) {
              if (this.g + e > this.h.byteLength) throw Ia();
              this.g += e;
            }),
            (i.pg = function (e) {
              if (this.g < e) throw Ia();
              this.g -= e;
            }),
            (i.seek = function (e) {
              if (0 > e || e > this.h.byteLength) throw Ia();
              this.g = e;
            }),
            (i.dc = function () {
              for (var e = this.g; this.ya() && 0 != this.h.getUint8(this.g); )
                this.g += 1;
              return (e = ke(this.h, e, this.g - e)), (this.g += 1), ft(e);
            }),
            F("shaka.util.DataViewReader", ka),
            (ka.prototype.readTerminatedString = ka.prototype.dc),
            (ka.prototype.seek = ka.prototype.seek),
            (ka.prototype.rewind = ka.prototype.pg),
            (ka.prototype.skip = ka.prototype.skip),
            (ka.prototype.readBytes = ka.prototype.Ib),
            (ka.prototype.readUint64 = ka.prototype.Cc),
            (ka.prototype.readInt32 = ka.prototype.ef),
            (ka.prototype.readUint32 = ka.prototype.M),
            (ka.prototype.readUint16 = ka.prototype.kb),
            (ka.prototype.readUint8 = ka.prototype.lb),
            (ka.prototype.getLength = ka.prototype.getLength),
            (ka.prototype.getPosition = ka.prototype.ra),
            (ka.prototype.hasMoreData = ka.prototype.ya);
          var Ca = 1;
          function Ma() {
            (this.h = []),
              (this.g = []),
              (this.i = new ha()),
              (this.l = 0),
              (this.m = new Map([
                ["CC1", new ea(0, 0)],
                ["CC2", new ea(0, 1)],
                ["CC3", new ea(1, 0)],
                ["CC4", new ea(1, 1)],
              ])),
              (this.s = this.o = 0),
              (this.j = new Map()),
              (this.B = !0),
              (this.A = new Set()),
              Ea(this);
          }
          function Ea(e) {
            (e.o = 0), (e.s = 0);
            for (var t = c(e.m.values()), n = t.next(); !n.done; n = t.next())
              ((n = n.value).h = 0),
                (n.g = n.j),
                (n.m = null),
                qr(n.i),
                qr(n.j),
                qr(n.o);
            e.B = !0;
          }
          function Da(e, t) {
            var n = t.type;
            if (16 == (112 & t.Za)) {
              var i = (t.Za >> 3) & 1;
              0 === n ? (e.o = i) : (e.s = i);
            }
            if (
              ((i = "CC" + (1 + ((n << 1) | (n ? e.s : e.o)))),
              (n = e.m.get(i)),
              (255 === t.Za && 255 === t.vb) ||
                (!t.Za && !t.vb) ||
                !La(t.Za) ||
                !La(t.vb))
            )
              return 45 <= ++e.l && Ea(e), null;
            (e.l = 0), (t.Za &= 127), (t.vb &= 127);
            var r = t.Za;
            if ((1 <= r && 15 >= r) || (!t.Za && !t.vb)) return null;
            if (((r = null), 16 == (112 & t.Za)))
              e: {
                if (
                  (e.A.add(i), (i = t.Za), (e = t.vb), n.m === ((i << 8) | e))
                )
                  n.m = null;
                else if (
                  ((n.m = (i << 8) | e), 16 == (240 & i) && 64 == (192 & e))
                ) {
                  (t = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][
                    ((7 & i) << 1) | ((e >> 5) & 1)
                  ]),
                    (i = "white"),
                    (r = !1);
                  var a = null,
                    o = 95 < e ? e - 96 : e - 64;
                  13 >= o
                    ? (i = aa[Math.floor(o / 2)])
                    : 15 >= o
                    ? (r = !0)
                    : (a = Math.floor((o - 16) / 2)),
                    (e = !(1 & ~e)),
                    4 !== n.h &&
                      ((o = n.g),
                      3 === n.h &&
                        t !== o.g &&
                        (Wr(o, (n = 1 + t - o.h), 1 + o.g - o.h, o.h),
                        Xr(o, 0, n - 1),
                        Xr(o, t + 1, 15 - t)),
                      (o.g = t),
                      (o.m = e),
                      (o.j = r),
                      (o.l = i),
                      (o.s = a),
                      (o.o = "black"));
                } else if (17 == (247 & i) && 32 == (240 & e))
                  (n.g.m = !1),
                    (n.g.j = !1),
                    (n.g.l = "white"),
                    Kr(n.g, 0, 32),
                    (i = !1),
                    "white_italics" === (t = aa[(14 & e) >> 1]) &&
                      ((t = "white"), (i = !0)),
                    (n.g.m = !(1 & ~e)),
                    (n.g.j = i),
                    (n.g.l = t);
                else if (
                  (16 == (247 & i) && 32 == (240 & e)) ||
                  (23 == (247 & i) && 45 == (255 & e))
                )
                  (t = "black"),
                    !(7 & i) && (t = ra[(14 & e) >> 1]),
                    (n.g.o = t);
                else if (17 == (247 & i) && 48 == (240 & e)) Kr(n.g, 1, e);
                else if (18 == (246 & i) && 32 == (224 & e))
                  Kr(n.g, 1 & i ? 3 : 2, e);
                else {
                  if (20 == (246 & i) && 32 == (240 & e)) {
                    switch (((e = t.pts), (i = null), t.vb)) {
                      case 32:
                        na(n);
                        break;
                      case 33:
                        (n = n.g).i[n.g].pop();
                        break;
                      case 37:
                        i = ta(n, 2, e);
                        break;
                      case 38:
                        i = ta(n, 3, e);
                        break;
                      case 39:
                        i = ta(n, 4, e);
                        break;
                      case 40:
                        Kr(n.g, 0, 32);
                        break;
                      case 41:
                        (n.h = 2), (n.g = n.i), (n.g.h = 0), (n.l = e);
                        break;
                      case 42:
                        qr(n.o), ia(n);
                        break;
                      case 43:
                        ia(n);
                        break;
                      case 44:
                        (t = n.i),
                          (i = null),
                          4 !== n.h && (i = Gr(t, n.l, e)),
                          Xr(t, 0, 15);
                        break;
                      case 45:
                        (t = n.g),
                          3 !== n.h
                            ? (i = null)
                            : ((i = Gr(t, n.l, e)),
                              Wr(t, (r = t.g - t.h + 1) - 1, r, t.h),
                              Xr(t, 0, r - 1),
                              Xr(t, t.g, 15 - t.g),
                              (n.l = e));
                        break;
                      case 46:
                        Xr(n.j, 0, 15);
                        break;
                      case 47:
                        (t = null),
                          4 !== n.h && (t = Gr(n.i, n.l, e)),
                          (i = n.j),
                          (n.j = n.i),
                          (n.i = i),
                          na(n),
                          (n.l = e),
                          (i = t);
                    }
                    r = i;
                    break e;
                  }
                  (23 == i || 31 == i) &&
                    33 <= e &&
                    35 >= e &&
                    (n.g.A = e - 32);
                }
                r = null;
              }
            else (e = t.vb), Kr(n.g, 0, t.Za), Kr(n.g, 0, e);
            return r;
          }
          function Pa(e, t) {
            var n = [];
            try {
              for (; t.ya(); ) {
                var i = ga(t).value,
                  r = (224 & i) >> 5,
                  a = 31 & i;
                if ((7 === r && 0 != a && (r = 63 & ga(t).value), 0 != r)) {
                  e.A.add("svc" + r), e.j.has(r) || e.j.set(r, new ma(r));
                  for (var o = e.j.get(r), s = t.ra(); t.ra() - s < a; ) {
                    r = o;
                    var u = t,
                      l = ga(u),
                      c = l.value,
                      h = l.pts;
                    if (16 === c) c = (c << 16) | ga(u).value;
                    if (0 <= c && 31 >= c) var f = va(r, u, c, h);
                    else if (128 <= c && 159 >= c) f = ya(r, u, c, h);
                    else {
                      if (4096 <= c && 4127 >= c)
                        (r = u),
                          8 <= (u = 255 & c) && 15 >= u
                            ? r.skip(1)
                            : 16 <= u && 23 >= u
                            ? r.skip(2)
                            : 24 <= u && 31 >= u && r.skip(3);
                      else if (4224 <= c && 4255 >= c)
                        (r = u),
                          128 <= (u = 255 & c) && 135 >= u
                            ? r.skip(4)
                            : 136 <= u && 143 >= u && r.skip(5);
                      else if (32 <= c && 127 >= c)
                        (u = c),
                          r.g &&
                            la(r.g, 127 === u ? "" : String.fromCharCode(u));
                      else if (160 <= c && 255 >= c)
                        r.g && la(r.g, String.fromCharCode(c));
                      else if (4128 <= c && 4223 >= c) {
                        if (((u = 255 & c), r.g))
                          if (Ta.has(u)) {
                            var p = Ta.get(u);
                            la(r.g, p);
                          } else la(r.g, "_");
                      } else
                        4256 <= c &&
                          4351 >= c &&
                          r.g &&
                          la(r.g, 160 != (255 & c) ? "_" : "[CC]");
                      f = [];
                    }
                    n.push.apply(n, d(f));
                  }
                }
              }
            } catch (g) {
              if (!(g instanceof Ee && 3e3 === g.code)) throw g;
              Y(
                "CEA708_INVALID_DATA",
                "Buffer read out of bounds / invalid CEA-708 Data."
              );
            }
            return n;
          }
          function La(e) {
            for (var t = 0; e; ) (t ^= 1 & e), (e >>= 1);
            return 1 === t;
          }
          function Ra(e) {
            for (var t = [], n = e, i = (e = 0); i < n.length; )
              2 == e && 3 == n[i]
                ? ((e = 0),
                  (n = [].concat(d(n))).splice(i, 1),
                  (n = new Uint8Array(n)))
                : 0 == n[i]
                ? e++
                : (e = 0),
                i++;
            for (e = n, i = 0; i < e.length; ) {
              for (n = 0; 255 == e[i]; ) (n += 255), i++;
              n += e[i++];
              for (var r = 0; 255 == e[i]; ) (r += 255), i++;
              (r += e[i++]), 4 == n && t.push(e.subarray(i, i + r)), (i += r);
            }
            return t;
          }
          function Na() {
            (this.i = new Map()), (this.h = new Map()), (this.g = !1);
          }
          function _a(e) {
            for (var t = Va(e); e.reader.ya() && !e.parser.g; )
              e.parser.zc(e.start + t, e.reader, e.partialOkay);
          }
          function Ua(e) {
            for (
              var t = Va(e), n = e.reader.M(), i = 0;
              i < n &&
              (e.parser.zc(e.start + t, e.reader, e.partialOkay), !e.parser.g);
              i++
            );
          }
          function ja(e) {
            var t = Va(e);
            for (e.reader.skip(78); e.reader.ya() && !e.parser.g; )
              e.parser.zc(e.start + t, e.reader, e.partialOkay);
          }
          function Oa(e) {
            var t = Va(e);
            e.reader.skip(8);
            var n = e.reader.kb();
            for (
              e.reader.skip(6),
                2 == n ? e.reader.skip(48) : e.reader.skip(12),
                1 == n && e.reader.skip(16);
              e.reader.ya() && !e.parser.g;

            )
              e.parser.zc(e.start + t, e.reader, e.partialOkay);
          }
          function Ba(e) {
            return function (t) {
              e(t.reader.Ib(t.reader.getLength() - t.reader.ra()));
            };
          }
          function Fa(e) {
            for (var t = 0, n = (e = c(e)).next(); !n.done; n = e.next())
              t = (t << 8) | n.value.charCodeAt(0);
            return t;
          }
          function Ha(e) {
            return String.fromCharCode(
              (e >> 24) & 255,
              (e >> 16) & 255,
              (e >> 8) & 255,
              255 & e
            );
          }
          function Va(e) {
            return 8 + (e.has64BitSize ? 8 : 0) + (null != e.flags ? 4 : 0);
          }
          (ka.Endianness = { BIG_ENDIAN: 0, LITTLE_ENDIAN: Ca }),
            (Ma.prototype.clear = function () {
              (this.l = 0), (this.h = []), (this.g = []);
              var e = this.i;
              (e.i = []), (e.h = []), (e.g = 0), Ea(this);
              for (
                var t = (e = c(this.j.values())).next();
                !t.done;
                t = e.next()
              )
                xa(t.value);
            }),
            (Ma.prototype.extract = function (e, t) {
              if (this.B) {
                for (
                  var n = c(this.m.values()), i = n.next();
                  !i.done;
                  i = n.next()
                )
                  i.value.l = t;
                this.B = !1;
              }
              if (
                !(8 > (e = new ka(e, 0)).getLength()) &&
                181 === e.lb() &&
                49 === e.kb() &&
                1195456820 === e.M() &&
                3 === e.lb() &&
                64 & (n = e.lb())
              )
                for (n &= 31, e.skip(1), i = 0; i < n; i++) {
                  var r = e.lb(),
                    a = (4 & r) >> 2,
                    o = e.lb(),
                    s = e.lb();
                  a &&
                    (0 === (r &= 3) || 1 === r
                      ? this.h.push({
                          pts: t,
                          type: r,
                          Za: o,
                          vb: s,
                          order: this.h.length,
                        })
                      : (this.g.push({
                          pts: t,
                          type: r,
                          value: o,
                          order: this.g.length,
                        }),
                        this.g.push({
                          pts: t,
                          type: 2,
                          value: s,
                          order: this.g.length,
                        })));
                }
            }),
            (Ma.prototype.decode = function () {
              function e(e, t) {
                return e.pts - t.pts || e.order - t.order;
              }
              var t = [];
              this.h.sort(e), this.g.sort(e);
              for (var n = c(this.h), i = n.next(); !i.done; i = n.next())
                (i = Da(this, i.value)) && t.push(i);
              for (i = (n = c(this.g)).next(); !i.done; i = n.next())
                fa(this.i, i.value);
              for (i = (n = c(this.i.i)).next(); !i.done; i = n.next())
                (i = Pa(this, i.value)), t.push.apply(t, d(i));
              return (this.i.i = []), (this.h = []), (this.g = []), t;
            }),
            (Ma.prototype.getStreams = function () {
              return Array.from(this.A);
            }),
            F("shaka.cea.CeaDecoder", Ma),
            (Zt = function () {
              return new Ma();
            }),
            ((i = Na.prototype).box = function (e, t) {
              return (e = Fa(e)), this.i.set(e, za), this.h.set(e, t), this;
            }),
            (i.N = function (e, t) {
              return (e = Fa(e)), this.i.set(e, Ga), this.h.set(e, t), this;
            }),
            (i.stop = function () {
              this.g = !0;
            }),
            (i.parse = function (e, t, n) {
              for (e = new ka(e, 0), this.g = !1; e.ya() && !this.g; )
                this.zc(0, e, t, n);
            }),
            (i.zc = function (e, t, n, i) {
              var r = t.ra();
              if (i && r + 8 > t.getLength()) this.g = !0;
              else {
                var a = t.M(),
                  o = t.M(),
                  s = Ha(o),
                  u = !1;
                switch (a) {
                  case 0:
                    a = t.getLength() - r;
                    break;
                  case 1:
                    if (i && t.ra() + 8 > t.getLength())
                      return void (this.g = !0);
                    (a = t.Cc()), (u = !0);
                }
                var l = this.h.get(o);
                if (l) {
                  var c = null,
                    d = null;
                  if (this.i.get(o) == Ga) {
                    if (i && t.ra() + 4 > t.getLength())
                      return void (this.g = !0);
                    (c = (d = t.M()) >>> 24), (d &= 16777215);
                  }
                  (o = r + a),
                    n && o > t.getLength() && (o = t.getLength()),
                    i && o > t.getLength()
                      ? (this.g = !0)
                      : ((i = o - t.ra()),
                        l({
                          name: s,
                          parser: this,
                          partialOkay: n || !1,
                          version: c,
                          flags: d,
                          reader: (t = new ka(
                            (t = 0 < i ? t.Ib(i) : new Uint8Array(0)),
                            0
                          )),
                          size: a,
                          start: r + e,
                          has64BitSize: u,
                        }));
                } else t.skip(Math.min(r + a - t.ra(), t.getLength() - t.ra()));
              }
            }),
            F("shaka.util.Mp4Parser", Na),
            (Na.headerSize = Va),
            (Na.typeToString = Ha),
            (Na.allData = Ba),
            (Na.audioSampleEntry = Oa),
            (Na.visualSampleEntry = ja),
            (Na.sampleDescription = Ua),
            (Na.children = _a),
            (Na.prototype.parseNext = Na.prototype.zc),
            (Na.prototype.parse = Na.prototype.parse),
            (Na.prototype.stop = Na.prototype.stop),
            (Na.prototype.fullBox = Na.prototype.N),
            (Na.prototype.box = Na.prototype.box);
          var za = 0,
            Ga = 1;
          function qa(e, t) {
            var n = null,
              i = null,
              r = null,
              a = null,
              o = e.M();
            return (
              1 & t && (r = e.Cc()),
              2 & t && (a = e.M()),
              8 & t && (n = e.M()),
              16 & t && (i = e.M()),
              { trackId: o, Kc: n, Lc: i, Tg: r, qg: a }
            );
          }
          function Ka(e, t) {
            return 1 == t
              ? ((t = e.M()),
                (e = e.M()),
                { baseMediaDecodeTime: t * Math.pow(2, 32) + e })
              : { baseMediaDecodeTime: e.M() };
          }
          function Wa(e, t) {
            return (
              1 == t ? (e.skip(8), e.skip(8)) : (e.skip(4), e.skip(4)),
              (t = e.M()),
              e.skip(4),
              (e = e.kb()),
              {
                timescale: t,
                language:
                  String.fromCharCode(96 + (e >> 10)) +
                  String.fromCharCode(96 + ((960 & e) >> 5)) +
                  String.fromCharCode(96 + (31 & e)),
              }
            );
          }
          function Xa(e, t, n) {
            var i = e.M(),
              r = [],
              a = null;
            1 & n && (a = e.ef()), 4 & n && e.skip(4);
            for (var o = 0; o < i; o++) {
              var s = { kf: null, sampleSize: null, Od: null };
              256 & n && (s.kf = e.M()),
                512 & n && (s.sampleSize = e.M()),
                1024 & n && e.skip(4),
                2048 & n && (s.Od = 0 == t ? e.M() : e.ef()),
                r.push(s);
            }
            return { Ui: i, jf: r, xe: a };
          }
          function Ya(e) {
            return { codec: Ha((e = e.M())) };
          }
          function Ja() {
            (this.j = new Map()), (this.i = this.h = 0), (this.g = Za);
          }
          function $a(e, t, n, i, r, a, o, s, u) {
            var l = 0,
              h = a,
              f = s.map(function (e) {
                return e.jf;
              });
            for (
              (f = [].concat.apply([], d(f))).length &&
                (h = f[0].sampleSize || a),
                t.skip(o + s[0].xe);
              t.ya();

            ) {
              o = t.M();
              var p = t.lb(),
                g = null;
              switch (((g = !1), (s = 1), e.g)) {
                case Qa:
                  g = 6 == (g = 31 & p);
                  break;
                case eo:
                  (s = 2),
                    t.skip(1),
                    (g = 39 == (g = (p >> 1) & 63) || 40 == g);
                  break;
                case to:
                  (s = 2),
                    t.skip(1),
                    (g = 23 == (g = (p >> 1) & 63) || 24 == g);
                  break;
                default:
                  return;
              }
              if (g)
                for (
                  p = 0,
                    l < f.length && (p = f[l].Od || 0),
                    p = (n + p) / i,
                    g = (s = c(Ra(t.Ib(o - s)))).next();
                  !g.done;
                  g = s.next()
                )
                  u.push({ packet: g.value, pts: p });
              else
                try {
                  t.skip(o - s);
                } catch (m) {
                  break;
                }
              0 == (h -= o + 4) &&
                ((n = l < f.length ? n + (f[l].kf || r) : n + r),
                (h = (++l < f.length && f[l].sampleSize) || a));
            }
          }
          (Ja.prototype.init = function (e) {
            function t(e) {
              (e = e.name), no.has(e) && (n.g = no.get(e));
            }
            var n = this,
              i = [],
              r = [];
            if (
              (new Na()
                .box("moov", _a)
                .box("mvex", _a)
                .N("trex", function (e) {
                  var t = e.reader;
                  t.skip(4),
                    t.skip(4),
                    (e = t.M()),
                    (t = t.M()),
                    (n.h = e),
                    (n.i = t);
                })
                .box("trak", _a)
                .N("tkhd", function (e) {
                  var t = e.reader;
                  1 == (e = e.version)
                    ? (t.skip(8), t.skip(8))
                    : (t.skip(4), t.skip(4));
                  var n = t.M();
                  1 == e ? t.skip(8) : t.skip(4),
                    t.skip(4),
                    t.skip(8),
                    t.skip(2),
                    t.skip(2),
                    t.skip(2),
                    t.skip(2),
                    t.skip(36),
                    t.kb(),
                    t.kb(),
                    t.kb(),
                    t.kb(),
                    i.push(n);
                })
                .box("mdia", _a)
                .N("mdhd", function (e) {
                  (e = Wa(e.reader, e.version)), r.push(e.timescale);
                })
                .box("minf", _a)
                .box("stbl", _a)
                .N("stsd", Ua)
                .box("avc1", t)
                .box("avc3", t)
                .box("dvav", t)
                .box("dva1", t)
                .box("hev1", t)
                .box("hvc1", t)
                .box("dvh1", t)
                .box("dvhe", t)
                .box("vvc1", t)
                .box("vvi1", t)
                .box("dvc1", t)
                .box("dvi1", t)
                .box("encv", ja)
                .box("sinf", _a)
                .box("frma", function (e) {
                  (e = Ya(e.reader).codec), no.has(e) && (n.g = no.get(e));
                })
                .parse(e, !0),
              !i.length || !r.length || i.length != r.length)
            )
              throw new Ee(2, 2, 2010);
            this.g == Za &&
              X("Unable to determine bitstream format for CEA parsing!"),
              i.forEach(function (e, t) {
                n.j.set(e, r[t]);
              });
          }),
            (Ja.prototype.parse = function (e) {
              var t = this;
              if (this.g == Za) return [];
              var n = [],
                i = 0,
                r = [];
              return (
                new Na()
                  .box("moof", function (e) {
                    (i = e.start), (r = []), _a(e);
                  })
                  .box("traf", function (e) {
                    r.push({
                      baseMediaDecodeTime: null,
                      Kc: t.h,
                      Lc: t.i,
                      lg: [],
                      timescale: 9e4,
                    }),
                      _a(e);
                  })
                  .N("trun", function (e) {
                    var t = r[r.length - 1];
                    (e = Xa(e.reader, e.version, e.flags)), t.lg.push(e);
                  })
                  .N("tfhd", function (e) {
                    var n = r[r.length - 1];
                    (e = qa(e.reader, e.flags)),
                      (n.Kc = e.Kc || t.h),
                      (n.Lc = e.Lc || t.i),
                      (e = e.trackId),
                      t.j.has(e) && (n.timescale = t.j.get(e));
                  })
                  .N("tfdt", function (e) {
                    var t = r[r.length - 1];
                    (e = Ka(e.reader, e.version)),
                      (t.baseMediaDecodeTime = e.baseMediaDecodeTime);
                  })
                  .box("mdat", function (e) {
                    for (
                      var a = i - e.start - 8,
                        o = e.reader.ra(),
                        s = c(r),
                        u = s.next();
                      !u.done;
                      u = s.next()
                    ) {
                      if (null === (u = u.value).baseMediaDecodeTime)
                        throw (
                          (X(
                            "Unable to find base media decode time for CEA captions!"
                          ),
                          new Ee(2, 2, 2010))
                        );
                      e.reader.seek(o),
                        $a(
                          t,
                          e.reader,
                          u.baseMediaDecodeTime,
                          u.timescale,
                          u.Kc,
                          u.Lc,
                          a,
                          u.lg,
                          n
                        );
                    }
                  })
                  .parse(e, !1),
                n
              );
            }),
            F("shaka.cea.Mp4CeaParser", Ja);
          var Za = 0,
            Qa = 1,
            eo = 2,
            to = 3,
            no = new Map()
              .set("avc1", Qa)
              .set("avc3", Qa)
              .set("dvav", Qa)
              .set("dva1", Qa)
              .set("hev1", eo)
              .set("hvc1", eo)
              .set("dvh1", eo)
              .set("dvhe", eo)
              .set("vvc1", to)
              .set("vvi1", to)
              .set("dvc1", to)
              .set("dvi1", to);
          function io(e, t) {
            if (((this.j = e), void 0 !== t && t)) {
              t = new Uint8Array(e.byteLength);
              for (var n = 0, i = 0; i < e.byteLength; i++)
                (2 <= i && 3 == e[i] && 0 == e[i - 1] && 0 == e[i - 2]) ||
                  ((t[n] = e[i]), n++);
              this.j = ke(t, 0, n);
            }
            (this.i = this.j.byteLength), (this.g = this.h = 0);
          }
          function ro(e) {
            var t = e.j.byteLength - e.i,
              n = new Uint8Array(4),
              i = Math.min(4, e.i);
            0 !== i &&
              (n.set(e.j.subarray(t, t + i)),
              (e.h = new ka(n, 0).M()),
              (e.g = 8 * i),
              (e.i -= i));
          }
          function ao(e, t) {
            if (e.g <= t) {
              t -= e.g;
              var n = Math.floor(t / 8);
              (t -= 8 * n), (e.g -= n), ro(e);
            }
            (e.h <<= t), (e.g -= t);
          }
          function oo(e, t) {
            var n = Math.min(e.g, t),
              i = e.h >>> (32 - n);
            return (
              (e.g -= n),
              0 < e.g ? (e.h <<= n) : 0 < e.i && ro(e),
              0 < (n = t - n) ? (i << n) | oo(e, n) : i
            );
          }
          function so(e) {
            var t;
            for (t = 0; t < e.g; ++t)
              if (e.h & (2147483648 >>> t)) return (e.h <<= t), (e.g -= t), t;
            return ro(e), t + so(e);
          }
          function uo(e) {
            ao(e, 1 + so(e));
          }
          function lo(e) {
            return oo(e, so(e) + 1) - 1;
          }
          function co(e) {
            return 1 & (e = lo(e)) ? (1 + e) >>> 1 : -1 * (e >>> 1);
          }
          function ho(e) {
            return 1 === oo(e, 1);
          }
          function fo(e) {
            return oo(e, 8);
          }
          function po(e, t) {
            for (var n = 8, i = 8, r = 0; r < t; r++)
              0 !== i && (i = (n + (i = co(e)) + 256) % 256),
                (n = 0 === i ? n : i);
          }
          function go(e) {
            return fo(e), lo(e), lo(e);
          }
          function mo() {}
          function vo(e, t) {
            return (
              t + 10 <= e.length &&
              73 === e[t] &&
              68 === e[t + 1] &&
              51 === e[t + 2] &&
              255 > e[t + 3] &&
              255 > e[t + 4] &&
              128 > e[t + 6] &&
              128 > e[t + 7] &&
              128 > e[t + 8] &&
              128 > e[t + 9]
            );
          }
          function yo(e, t) {
            return (
              t + 10 <= e.length &&
              51 === e[t] &&
              68 === e[t + 1] &&
              73 === e[t + 2] &&
              255 > e[t + 3] &&
              255 > e[t + 4] &&
              128 > e[t + 6] &&
              128 > e[t + 7] &&
              128 > e[t + 8] &&
              128 > e[t + 9]
            );
          }
          function bo(e, t) {
            var n = (127 & e[t]) << 21;
            return (
              (n |= (127 & e[t + 1]) << 14),
              (n |= (127 & e[t + 2]) << 7) | (127 & e[t + 3])
            );
          }
          function wo(e) {
            var t = {
              key: e.type,
              description: "",
              data: "",
              mimeType: null,
              pictureType: null,
            };
            if ("APIC" === e.type) {
              if (2 > e.size || 3 !== e.data[0]) return null;
              var n = e.data.subarray(1).indexOf(0);
              if (-1 === n) return null;
              var i = ft(ke(e.data, 1, n)),
                r = e.data[2 + n],
                a = e.data.subarray(3 + n).indexOf(0);
              if (-1 === a) return null;
              var o,
                s = ft(ke(e.data, 3 + n, a));
              return (
                (o =
                  "--\x3e" === i
                    ? ft(ke(e.data, 4 + n + a))
                    : Ae(e.data.subarray(4 + n + a))),
                (t.mimeType = i),
                (t.pictureType = r),
                (t.description = s),
                (t.data = o),
                t
              );
            }
            return "TXXX" === e.type || "WXXX" === e.type
              ? 2 > e.size ||
                3 !== e.data[0] ||
                -1 === (i = e.data.subarray(1).indexOf(0))
                ? null
                : ((n = ft(ke(e.data, 1, i))),
                  (e = ft(ke(e.data, 2 + i)).replace(/\0*$/, "")),
                  (t.description = n),
                  (t.data = e),
                  t)
              : "PRIV" === e.type
              ? 2 > e.size || -1 === (n = e.data.indexOf(0))
                ? null
                : ((n = ft(ke(e.data, 0, n))),
                  (t.description = n),
                  "com.apple.streaming.transportStreamTimestamp" == n
                    ? ((n = e.data.subarray(n.length + 1)),
                      (e = 1 & n[3]),
                      (n = (n[4] << 23) + (n[5] << 15) + (n[6] << 7) + n[7]),
                      (n /= 45),
                      e && (n += 47721858.84),
                      (t.data = n))
                    : ((e = Ae(e.data.subarray(n.length + 1))), (t.data = e)),
                  t)
              : "T" === e.type[0]
              ? 2 > e.size || 3 !== e.data[0]
                ? null
                : ((e = ft(e.data.subarray(1)).replace(/\0*$/, "")),
                  (t.data = e),
                  t)
              : "W" === e.type[0]
              ? ((e = ft(e.data).replace(/\0*$/, "")), (t.data = e), t)
              : e.data
              ? ((t.data = Ae(e.data)), t)
              : null;
          }
          function xo(e) {
            for (var t = 0, n = []; vo(e, t); ) {
              var i = bo(e, t + 6);
              for (
                (e[t + 5] >> 6) & 1 && (t += 10), i = (t += 10) + i;
                t + 10 < i;

              ) {
                var r = e.subarray(t),
                  a = bo(r, 4);
                (a = wo(
                  (r = {
                    type: String.fromCharCode(r[0], r[1], r[2], r[3]),
                    size: a,
                    data: r.subarray(10, 10 + a),
                  })
                )) && n.push(a),
                  (t += r.size + 10);
              }
              yo(e, t) && (t += 10);
            }
            return n;
          }
          function So(e, t) {
            for (var n = (t = void 0 === t ? 0 : t), i = 0; vo(e, t); )
              (e[t + 5] >> 6) & 1 && (i += 10),
                (i += 10),
                (i += bo(e, t + 6)),
                yo(e, t + 10) && (i += 10),
                (t += i);
            return 0 < i ? e.subarray(n, n + i) : new Uint8Array([]);
          }
          function To() {
            (this.F = null),
              (this.G = !1),
              (this.m = this.J = null),
              (this.j = []),
              (this.g = []),
              (this.A = this.B = null),
              (this.i = []),
              (this.h = []),
              (this.C = null),
              (this.l = []),
              (this.D = this.o = this.s = null);
          }
          function Ao(e, t) {
            if (1 != ((t[0] << 16) | (t[1] << 8) | t[2])) return null;
            var n = {
              data: new Uint8Array(0),
              packetLength: (t[4] << 8) | t[5],
              pts: null,
              dts: null,
              nalus: [],
            };
            if (n.packetLength && n.packetLength > t.byteLength - 6)
              return null;
            var i = t[7];
            if (192 & i) {
              var r =
                536870912 * (14 & t[9]) +
                4194304 * (255 & t[10]) +
                16384 * (254 & t[11]) +
                128 * (255 & t[12]) +
                (254 & t[13]) / 2;
              null == e.s && (e.s = r),
                (n.pts = Io(r, e.s)),
                (e.s = n.pts),
                (n.dts = n.pts),
                64 & i &&
                  ((i =
                    536870912 * (14 & t[14]) +
                    4194304 * (255 & t[15]) +
                    16384 * (254 & t[16]) +
                    128 * (255 & t[17]) +
                    (254 & t[18]) / 2),
                  null == e.o && (e.o = i),
                  (n.dts = Io(i, e.o))),
                (e.o = n.dts);
            }
            return (
              (e = t[8] + 9),
              t.byteLength <= e ? null : ((n.data = t.subarray(e)), n)
            );
          }
          function ko(e) {
            var t = e.Zb();
            return 1 < t.length &&
              ((e = t[0].pts), (t = t[1].pts), !isNaN(t - e))
              ? String((1 / (t - e)) * 9e4)
              : null;
          }
          function Io(e, t) {
            var n = 1;
            for (e > t && (n = -1); 4294967296 < Math.abs(t - e); )
              e += 8589934592 * n;
            return e;
          }
          function Co(e) {
            return !(0 > Mo(e));
          }
          function Mo(e) {
            for (var t = Math.min(1e3, e.length - 564), n = 0; n < t; ) {
              if (71 == e[n] && 71 == e[n + 188] && 71 == e[n + 376]) return n;
              n++;
            }
            return -1;
          }
          Yt("video/mp4", function () {
            return new Ja();
          }),
            F("shaka.util.ExpGolomb", io),
            F("shaka.util.Id3Utils", mo),
            (mo.getID3Data = So),
            (mo.getID3Frames = xo),
            ((i = To.prototype).clearData = function () {
              (this.j = []),
                (this.g = []),
                (this.i = []),
                (this.h = []),
                (this.l = []);
            }),
            (i.parse = function (e) {
              if (564 > e.length) return this;
              for (
                var t = Math.max(0, Mo(e)),
                  n = e.length - ((e.length + t) % 188),
                  i = !1,
                  r = t;
                r < n;
                r += 188
              )
                if (71 == e[r]) {
                  var a = !!(64 & e[r + 1]),
                    o = ((31 & e[r + 1]) << 8) + e[r + 2];
                  if (1 < (48 & e[r + 3]) >> 4) {
                    var s = r + 5 + e[r + 4];
                    if (s == r + 188) continue;
                  } else s = r + 4;
                  switch (o) {
                    case 0:
                      a && (s += e[s] + 1),
                        (this.F = ((31 & e[s + 10]) << 8) | e[s + 11]);
                      break;
                    case 17:
                    case 8191:
                      break;
                    case this.F:
                      a && (s += e[s] + 1),
                        (o = {
                          audio: -1,
                          video: -1,
                          xd: -1,
                          audioCodec: "",
                          videoCodec: "",
                        });
                      var u =
                        s + 3 + (((15 & (a = e)[s + 1]) << 8) | a[s + 2]) - 4;
                      for (
                        s += 12 + (((15 & a[s + 10]) << 8) | a[s + 11]);
                        s < u;

                      ) {
                        var l = ((31 & a[s + 1]) << 8) | a[s + 2],
                          c = ((15 & a[s + 3]) << 8) | a[s + 4];
                        switch (a[s]) {
                          case 6:
                            if (0 < c)
                              for (var d = s + 5, h = c; 2 < h; ) {
                                var f = a[d + 1] + 2;
                                switch (a[d]) {
                                  case 5:
                                    var p = yt(a.subarray(d + 2, d + f));
                                    -1 == o.audio && "Opus" === p
                                      ? ((o.audio = l), (o.audioCodec = "opus"))
                                      : -1 == o.video &&
                                        "AV01" === p &&
                                        ((o.video = l), (o.videoCodec = "av1"));
                                    break;
                                  case 106:
                                    -1 == o.audio &&
                                      ((o.audio = l), (o.audioCodec = "ac3"));
                                    break;
                                  case 122:
                                    -1 == o.audio &&
                                      ((o.audio = l), (o.audioCodec = "ec3"));
                                    break;
                                  case 124:
                                    -1 == o.audio &&
                                      ((o.audio = l), (o.audioCodec = "aac"));
                                    break;
                                  case 127:
                                    "opus" == o.audioCodec &&
                                      ((p = null),
                                      128 === a[d + 2] && (p = a[d + 3]),
                                      null != p &&
                                        (this.D = {
                                          channelCount: 15 & p ? 15 & p : 2,
                                          Ug: p,
                                          sampleRate: 48e3,
                                        }));
                                }
                                (d += f), (h -= f);
                              }
                            break;
                          case 15:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "aac"));
                            break;
                          case 17:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "aac-loas"));
                            break;
                          case 21:
                            -1 == o.xd && (o.xd = l);
                            break;
                          case 27:
                            -1 == o.video &&
                              ((o.video = l), (o.videoCodec = "avc"));
                            break;
                          case 3:
                          case 4:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "mp3"));
                            break;
                          case 36:
                            -1 == o.video &&
                              ((o.video = l), (o.videoCodec = "hvc"));
                            break;
                          case 129:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "ac3"));
                            break;
                          case 132:
                          case 135:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "ec3"));
                        }
                        s += c + 5;
                      }
                      -1 != (a = o).video &&
                        ((this.J = a.video), (this.m = a.videoCodec)),
                        -1 != a.audio &&
                          ((this.B = a.audio), (this.A = a.audioCodec)),
                        -1 != a.xd && (this.C = a.xd),
                        i && !this.G && ((i = !1), (r = t - 188)),
                        (this.G = !0);
                      break;
                    case this.J:
                      (s = e.subarray(s, r + 188)),
                        a
                          ? this.j.push([s])
                          : this.j.length &&
                            this.j[this.j.length - 1] &&
                            this.j[this.j.length - 1].push(s);
                      break;
                    case this.B:
                      (s = e.subarray(s, r + 188)),
                        a
                          ? this.i.push([s])
                          : this.i.length &&
                            this.i[this.i.length - 1] &&
                            this.i[this.i.length - 1].push(s);
                      break;
                    case this.C:
                      (s = e.subarray(s, r + 188)),
                        a
                          ? this.l.push([s])
                          : this.l.length &&
                            this.l[this.l.length - 1] &&
                            this.l[this.l.length - 1].push(s);
                      break;
                    default:
                      i = !0;
                  }
                }
              return this;
            }),
            (i.di = function (e) {
              return (
                ne(
                  "TsParser.parseAvcNalus",
                  "Please use parseNalus function instead."
                ),
                this.bf(e, { Zc: null, state: null })
              );
            }),
            (i.bf = function (e, t) {
              var n = e.pts ? e.pts / 9e4 : null,
                i = (e = e.data).byteLength,
                r = 1;
              "hvc" == this.m && (r = 2);
              var a = t.state || 0,
                o = a,
                s = 0,
                u = [],
                l = -1,
                c = 0;
              for (
                -1 == a &&
                ((l = 0),
                (c = "hvc" == this.m ? (e[0] >> 1) & 63 : 31 & e[0]),
                (a = 0),
                (s = 1));
                s < i;

              ) {
                var d = e[s++];
                a
                  ? 1 === a
                    ? (a = d ? 0 : 2)
                    : d
                    ? 1 == d
                      ? ((d = s - a - 1),
                        0 <= l
                          ? u.push({
                              data: e.subarray(l + r, d),
                              fullData: e.subarray(l, d),
                              type: c,
                              time: n,
                              state: null,
                            })
                          : (a = u.length ? u[u.length - 1] : t.Zc) &&
                            (o &&
                              s <= 4 - o &&
                              a.state &&
                              ((a.data = a.data.subarray(
                                0,
                                a.data.byteLength - o
                              )),
                              (a.fullData = a.fullData.subarray(
                                0,
                                a.fullData.byteLength - o
                              ))),
                            0 < d &&
                              ((d = e.subarray(0, d)),
                              (a.data = Ct(a.data, d)),
                              (a.fullData = Ct(a.fullData, d)),
                              (a.state = 0))),
                        s < i
                          ? ((c =
                              "hvc" == this.m ? (e[s] >> 1) & 63 : 31 & e[s]),
                            (l = s),
                            (a = 0))
                          : (a = -1))
                      : (a = 0)
                    : (a = 3)
                  : (a = d ? 0 : 1);
              }
              return (
                0 <= l &&
                  0 <= a &&
                  u.push({
                    data: e.subarray(l + r, i),
                    fullData: e.subarray(l, i),
                    type: c,
                    time: n,
                    state: a,
                  }),
                !u.length &&
                  t.Zc &&
                  (n = u.length ? u[u.length - 1] : t.Zc) &&
                  ((n.data = Ct(n.data, e)), (n.fullData = Ct(n.fullData, e))),
                (t.state = a),
                u
              );
            }),
            (i.getMetadata = function () {
              for (
                var e = [], t = c(this.l), n = t.next();
                !n.done;
                n = t.next()
              )
                (n = Ao(this, (n = Ct.apply(xt, d(n.value))))) &&
                  e.push({
                    cueTime: n.pts ? n.pts / 9e4 : null,
                    data: n.data,
                    frames: xo(n.data),
                    dts: n.dts,
                    pts: n.pts,
                  });
              return e;
            }),
            (i.Fb = function () {
              if (this.i.length && !this.h.length) {
                for (
                  var e = !1, t = c(this.i), n = t.next();
                  !n.done;
                  n = t.next()
                ) {
                  var i = Ct.apply(xt, d(n.value)),
                    r = Ao(this, i);
                  (n = this.h.length ? this.h[this.h.length - 1] : null),
                    r &&
                    null != r.pts &&
                    null != r.dts &&
                    (!n || (n.pts != r.pts && n.dts != r.dts))
                      ? (this.h.length && r.dts < (n.dts || 0) && (e = !0),
                        this.h.push(r))
                      : this.h.length &&
                        (i = r ? r.data : i) &&
                        (((n = this.h.pop()).data = Ct(n.data, i)),
                        this.h.push(n));
                }
                e &&
                  (this.h = this.h.sort(function (e, t) {
                    var n = (e.pts || 0) - (t.pts || 0);
                    return (e.dts || 0) - (t.dts || 0) || n;
                  }));
              }
              return this.h;
            }),
            (i.Zb = function (e) {
              if (((e = void 0 === e || e), this.j.length && !this.g.length)) {
                for (
                  var t = !1, n = c(this.j), i = n.next();
                  !i.done;
                  i = n.next()
                ) {
                  var r = Ct.apply(xt, d(i.value)),
                    a = Ao(this, r);
                  (i = this.g.length ? this.g[this.g.length - 1] : null),
                    a &&
                    null != a.pts &&
                    null != a.dts &&
                    (!i || (i.pts != a.pts && i.dts != a.dts))
                      ? (this.g.length && a.dts < (i.dts || 0) && (t = !0),
                        this.g.push(a))
                      : this.g.length &&
                        (r = a ? a.data : r) &&
                        (((i = this.g.pop()).data = Ct(i.data, r)),
                        this.g.push(i));
                }
                if (e) {
                  for (
                    n = { Zc: null, state: null },
                      i = [],
                      a = (r = c(this.g)).next();
                    !a.done;
                    a = r.next()
                  )
                    ((a = a.value).nalus = this.bf(a, n)),
                      a.nalus.length &&
                        (i.push(a), (n.Zc = a.nalus[a.nalus.length - 1]));
                  this.g = i;
                }
                t &&
                  (this.g = this.g.sort(function (e, t) {
                    var n = (e.pts || 0) - (t.pts || 0);
                    return (e.dts || 0) - (t.dts || 0) || n;
                  }));
              }
              return e ? this.g : ((e = this.g), (this.g = []), e);
            }),
            (i.getStartTime = function (e) {
              if ("audio" == e) {
                e = null;
                var t = this.Fb();
                return (
                  t.length && ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)),
                  e
                );
              }
              return "video" == e
                ? ((e = null),
                  (t = this.Zb(!1)).length &&
                    ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)),
                  e)
                : null;
            }),
            (i.rd = function () {
              return { audio: this.A, video: this.m };
            }),
            (i.wd = function () {
              for (
                var e = [], t = c(this.Zb()), n = t.next();
                !n.done;
                n = t.next()
              )
                e.push.apply(e, d(n.value.nalus));
              return e;
            }),
            (i.Ih = function () {
              ne(
                "TsParser.getVideoResolution",
                "Please use getVideoInfo function instead."
              );
              var e = this.Wf();
              return { height: e.height, width: e.width };
            }),
            (i.Wf = function () {
              return "hvc" == this.m
                ? (function (e) {
                    var t = {
                        height: null,
                        width: null,
                        codec: null,
                        frameRate: null,
                      },
                      n = e.wd();
                    if (!n.length) return t;
                    if (
                      !(n = n.find(function (e) {
                        return 33 == e.type;
                      }))
                    )
                      return t;
                    var i = new io(n.fullData, !0);
                    fo(i), fo(i), oo(i, 4);
                    var r = oo(i, 3);
                    ho(i);
                    var a = oo(i, 2),
                      o = oo(i, 1),
                      s = oo(i, 5),
                      u = oo(i, 32);
                    n = fo(i);
                    for (
                      var l = fo(i),
                        c = fo(i),
                        d = fo(i),
                        h = fo(i),
                        f = fo(i),
                        p = fo(i),
                        g = [],
                        m = [],
                        v = 0;
                      v < r;
                      v++
                    )
                      g.push(ho(i)), m.push(ho(i));
                    if (0 < r) for (v = r; 8 > v; v++) oo(i, 2);
                    for (v = 0; v < r; v++) g[v] && oo(i, 88), m[v] && fo(i);
                    lo(i),
                      3 == (r = lo(i)) && oo(i, 1),
                      (g = lo(i)),
                      (m = lo(i));
                    var y = (v = 0),
                      b = 0,
                      w = 0;
                    return (
                      ho(i) &&
                        ((v += lo(i)),
                        (y += lo(i)),
                        (b += lo(i)),
                        (w += lo(i))),
                      (t.width = String(
                        g - (v + y) * (1 === r || 2 === r ? 2 : 1)
                      )),
                      (t.height = String(m - (b + w) * (1 === r ? 2 : 1))),
                      (i = (function (e) {
                        for (var t = 0, n = 0; 32 > n; n++)
                          t |= ((e >> n) & 1) << (31 - n);
                        return t >>> 0;
                      })(u)),
                      (o = 1 == o ? "H" : "L"),
                      (a = "hvc1." + ["", "A", "B", "C"][a] + s),
                      (a += "." + i.toString(16).toUpperCase()),
                      (a += "." + o + p),
                      f && (a += "." + f.toString(16).toUpperCase()),
                      h && (a += "." + h.toString(16).toUpperCase()),
                      d && (a += "." + d.toString(16).toUpperCase()),
                      c && (a += "." + c.toString(16).toUpperCase()),
                      l && (a += "." + l.toString(16).toUpperCase()),
                      n && (a += "." + n.toString(16).toUpperCase()),
                      (t.codec = a),
                      (t.frameRate = ko(e)),
                      t
                    );
                  })(this)
                : (function (e) {
                    var t = {
                        height: null,
                        width: null,
                        codec: null,
                        frameRate: null,
                      },
                      n = e.wd();
                    if (!n.length) return t;
                    if (
                      !(n = n.find(function (e) {
                        return 7 == e.type;
                      }))
                    )
                      return t;
                    var i = fo((n = new io(n.data))),
                      r = fo(n),
                      a = fo(n);
                    if ((uo(n), Eo.includes(i))) {
                      var o = lo(n);
                      if (
                        (3 === o && ao(n, 1), uo(n), uo(n), ao(n, 1), ho(n))
                      ) {
                        o = 3 !== o ? 8 : 12;
                        for (var s = 0; s < o; s++)
                          ho(n) && po(n, 6 > s ? 16 : 64);
                      }
                    }
                    if ((uo(n), 0 === (o = lo(n)))) lo(n);
                    else if (1 === o)
                      for (ao(n, 1), uo(n), uo(n), o = lo(n), s = 0; s < o; s++)
                        uo(n);
                    uo(n), ao(n, 1), (o = lo(n)), (s = lo(n));
                    var u = oo(n, 1);
                    0 === u && ao(n, 1), ao(n, 1);
                    var l = 0,
                      c = 0,
                      d = 0,
                      h = 0;
                    return (
                      ho(n) &&
                        ((l = lo(n)), (c = lo(n)), (d = lo(n)), (h = lo(n))),
                      (t.height = String(
                        (2 - u) * (s + 1) * 16 - 2 * d - 2 * h
                      )),
                      (t.width = String(16 * (o + 1) - 2 * l - 2 * c)),
                      (t.codec =
                        "avc1." +
                        ("0" + i.toString(16).toUpperCase()).slice(-2) +
                        ("0" + r.toString(16).toUpperCase()).slice(-2) +
                        ("0" + a.toString(16).toUpperCase()).slice(-2)),
                      (t.frameRate = ko(e)),
                      t
                    );
                  })(this);
            }),
            F("shaka.util.TsParser", To),
            (To.syncOffset = Mo),
            (To.probe = Co),
            (To.prototype.getVideoInfo = To.prototype.Wf),
            (To.prototype.getVideoResolution = To.prototype.Ih),
            (To.prototype.getVideoNalus = To.prototype.wd),
            (To.prototype.getCodecs = To.prototype.rd),
            (To.prototype.getStartTime = To.prototype.getStartTime),
            (To.prototype.getVideoData = To.prototype.Zb),
            (To.prototype.getAudioData = To.prototype.Fb),
            (To.prototype.getMetadata = To.prototype.getMetadata),
            (To.prototype.parseNalus = To.prototype.bf),
            (To.prototype.parseAvcNalus = To.prototype.di),
            (To.prototype.parse = To.prototype.parse),
            (To.prototype.clearData = To.prototype.clearData),
            (To.Timescale = 9e4);
          var Eo = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
          function Do() {
            this.g = null;
          }
          function Po(e) {
            return (e = (function (e) {
              var t = 0,
                n = Ce(e),
                i = n.getUint32(t, !0);
              if (i != e.byteLength) return [];
              e: {
                for (e = t + 6, t = []; e < n.byteLength - 1; ) {
                  (i = n.getUint16(e, !0)), (e += 2);
                  var r = n.getUint16(e, !0);
                  if (((e += 2), 1 & r || r + e > n.byteLength)) {
                    n = [];
                    break e;
                  }
                  var a = ke(n, e, r);
                  t.push({ type: i, value: a }), (e += r);
                }
                n = t;
              }
              return n;
            })((e = At(xn(e)))).filter(function (e) {
              return e.type === Ro;
            })[0]) && (e = mn((e = pt(e.value, !0)), "WRMHEADER"))
              ? e
              : null;
          }
          function Lo(e) {
            try {
              var t = Po(e);
              if (t)
                e: {
                  for (
                    var n = c(Tn(t, "DATA")), i = n.next();
                    !i.done;
                    i = n.next()
                  ) {
                    var r = i.value;
                    if (r.children)
                      for (
                        var a = c(r.children), o = a.next();
                        !o.done;
                        o = a.next()
                      ) {
                        var s = o.value;
                        if ("LA_URL" == s.tagName) {
                          var u = xn(s);
                          break e;
                        }
                      }
                  }
                  u = "";
                }
              else u = "";
              return u;
            } catch (l) {
              return "";
            }
          }
          (Do.prototype.init = function () {}),
            (Do.prototype.parse = function (e) {
              this.g ? this.g.clearData() : (this.g = new To());
              var t = [];
              if (!Co((e = ke(e)))) return t;
              var n = (e = this.g.parse(e)).rd(),
                i = e.wd();
              switch (((e = []), n.video)) {
                case "avc":
                  e.push(6);
                  break;
                case "hvc":
                  e.push(39), e.push(40);
              }
              if (!e.length) return t;
              for (i = (n = c(i)).next(); !i.done; i = n.next())
                if (((i = i.value), e.includes(i.type) && null != i.time))
                  for (
                    var r = c(Ra(i.data)), a = r.next();
                    !a.done;
                    a = r.next()
                  )
                    t.push({ packet: a.value, pts: i.time });
              return t;
            }),
            F("shaka.cea.TsCeaParser", Do),
            Yt("video/mp2t", function () {
              return new Do();
            }),
            F("shaka.config.CodecSwitchingStrategy", {
              RELOAD: "reload",
              SMOOTH: "smooth",
            }),
            F("shaka.config.CrossBoundaryStrategy", {
              KEEP: "keep",
              RESET: "reset",
              RESET_TO_ENCRYPTED: "reset_to_encrypted",
              RESET_ON_ENCRYPTION_CHANGE: "RESET_ON_ENCRYPTION_CHANGE",
            });
          var Ro = 1;
          function No(e) {
            var t = this;
            (this.h = []),
              (this.g = []),
              (this.data = []),
              new Na()
                .box("moov", _a)
                .box("moof", _a)
                .N("pssh", function (e) {
                  if (!(1 < e.version)) {
                    var n = ke(e.reader.h, -12, e.size);
                    if (
                      (t.data.push(n),
                      t.h.push(It(e.reader.Ib(16))),
                      0 < e.version)
                    ) {
                      n = e.reader.M();
                      for (var i = 0; i < n; i++) {
                        var r = It(e.reader.Ib(16));
                        t.g.push(r);
                      }
                    }
                  }
                })
                .parse(e);
          }
          function _o(e, t, n, i) {
            var r = e.length,
              a = t.length + 16 + r;
            0 < i && (a += 4 + 16 * n.size);
            var o = new Uint8Array(a),
              s = Ce(o),
              u = 0;
            if (
              (s.setUint32(u, a),
              (u += 4),
              s.setUint32(u, 1886614376),
              (u += 4),
              1 > i ? s.setUint32(u, 0) : s.setUint32(u, 16777216),
              (u += 4),
              o.set(t, u),
              (u += t.length),
              0 < i)
            )
              for (
                s.setUint32(u, n.size), u += 4, n = (t = c(n)).next();
                !n.done;
                n = t.next()
              )
                (n = kt(n.value)), o.set(n, u), (u += n.length);
            return s.setUint32(u, r), o.set(e, u + 4), o;
          }
          function Uo(t, n, i) {
            var r = (function (e) {
                for (var t = [], n = (e = c(e)).next(); !n.done; n = e.next())
                  (n = Oo(n.value)) && t.push(n);
                return t;
              })(t),
              a = null;
            t = [];
            var o = [],
              s = null,
              u = new Set(
                r.map(function (e) {
                  return e.keyId;
                })
              );
            u.delete(null);
            var l = "cenc";
            if (1 < u.size) throw new Ee(2, 4, 4010);
            if (!n) {
              if (
                1 <
                (o = r.filter(function (e) {
                  return "urn:mpeg:dash:sea:2012" == e.Dc;
                })).length
              )
                throw new Ee(2, 4, 4050);
              o.length &&
                (s = (function (t) {
                  if (!e.crypto || !e.crypto.subtle)
                    throw (
                      (X(
                        "Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"
                      ),
                      new Ee(2, 4, 4042))
                    );
                  var n = kn(
                    t.node,
                    "urn:mpeg:dash:schema:sea:2012",
                    "SegmentEncryption"
                  );
                  if (!n) throw new Ee(2, 4, 4051);
                  if (
                    "urn:mpeg:dash:sea:aes128-cbc:2013" !=
                    n.attributes.schemeIdUri
                  )
                    throw new Ee(2, 4, 4051);
                  if (
                    ((n = kn(
                      t.node,
                      "urn:mpeg:dash:schema:sea:2012",
                      "CryptoPeriod"
                    )),
                    !n)
                  )
                    throw new Ee(2, 4, 4051);
                  if (
                    ((t = n.attributes.IV),
                    (n = bt(n.attributes.keyUriTemplate)),
                    !t || !n)
                  )
                    throw new Ee(2, 4, 4051);
                  if (((t = kt(t.substr(2))), 16 != t.byteLength))
                    throw new Ee(2, 4, 4048);
                  return { Sh: n, iv: t };
                })(o[0])),
                (o = r.find(function (e) {
                  return "urn:mpeg:dash:mp4protection:2011" == e.Dc;
                })) &&
                  o.encryptionScheme &&
                  (l = o.encryptionScheme),
                (o = r.filter(function (e) {
                  return "urn:mpeg:dash:mp4protection:2011" == e.Dc
                    ? ((a = e.init || a), !1)
                    : "urn:mpeg:dash:sea:2012" != e.Dc;
                })).length &&
                  ((t = (function (e, t, n, i, r) {
                    for (
                      var a = [], o = (n = c(n)).next();
                      !o.done;
                      o = n.next()
                    ) {
                      var s = i[(o = o.value).Dc];
                      if (s) {
                        var u;
                        if (
                          (u = kn(o.node, "urn:microsoft:playready", "pro")) &&
                          xn(u)
                        ) {
                          u = At((u = xn(u)));
                          var l = new Uint8Array([
                            154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230,
                            91, 224, 136, 95, 149,
                          ]);
                          u = [
                            {
                              initData: _o(u, l, new Set(), 0),
                              initDataType: "cenc",
                              keyId: o.keyId,
                            },
                          ];
                        } else u = null;
                        if (
                          ((l = null),
                          "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e" ===
                            o.Dc)
                        ) {
                          l = o;
                          var d = r;
                          if (0 == d.size) l = null;
                          else {
                            var h = new Uint8Array([
                              16, 119, 239, 236, 192, 178, 77, 2, 172, 227, 60,
                              30, 82, 226, 251, 75,
                            ]);
                            l = [
                              {
                                initData: _o(new Uint8Array([]), h, d, 1),
                                initDataType: "cenc",
                                keyId: l.keyId,
                              },
                            ];
                          }
                        }
                        (u = Et(s, t, o.init || e || u || l)),
                          (s = Bo.get(s)) && (u.licenseServerUri = s(o)),
                          a.push(u);
                      }
                    }
                    return a;
                  })(a, l, o, i, u)),
                  0 == t.length && (t = [Et("", l, a)]));
            }
            if (r.length && !s && (n || !o.length))
              for (
                t = [], i = (n = c(Object.values(i))).next();
                !i.done;
                i = n.next()
              )
                "org.w3.clearkey" != (i = i.value) && t.push(Et(i, l, a));
            if ((u = Array.from(u)[0] || null))
              for (n = (l = c(t)).next(); !n.done; n = l.next())
                for (
                  i = (n = c(n.value.initData)).next();
                  !i.done;
                  i = n.next()
                )
                  i.value.keyId = u;
            return { Kf: u, Ri: a, drmInfos: t, ne: s, Qf: !0 };
          }
          function jo(e) {
            var t = kn(e.node, "https://dashif.org/CPS", "Laurl");
            if (t && (t = xn(t))) return t;
            if ((t = kn(e.node, "urn:microsoft:playready", "pro")) && xn(t))
              return Lo(t);
            if ((e = kn(e.node, "urn:mpeg:cenc:2013", "pssh")) && (e = xn(e))) {
              (t = At(e)), (e = 8);
              var n = (t = Ce(t)).getUint8(e);
              return (
                (e += 20),
                0 < n && (e += 4 + 16 * t.getUint32(e)),
                Lo((e = mn("<pro>" + (e = St((e = ke(t, e + 4)))) + "</pro>")))
              );
            }
            return "";
          }
          function Oo(e) {
            var t = e.attributes.schemeIdUri,
              n = Cn(e, "urn:mpeg:cenc:2013", "default_KID"),
              i = Mn(e, "urn:mpeg:cenc:2013", "pssh").map(Sn),
              r = e.attributes.value;
            if (!t) return null;
            if (
              ((t = t.toLowerCase()),
              n && (n = n.replace(/-/g, "").toLowerCase()).includes(" "))
            )
              throw new Ee(2, 4, 4009);
            var a = [];
            try {
              a = i.map(function (e) {
                return { initDataType: "cenc", initData: At(e), keyId: null };
              });
            } catch (o) {
              throw new Ee(2, 4, 4007);
            }
            return {
              node: e,
              Dc: t,
              keyId: n,
              init: 0 < a.length ? a : null,
              encryptionScheme: r,
            };
          }
          var Bo = new Map()
            .set("com.apple.fps", function (t) {
              if ("apple" === e.shakaMediaKeysPolyfill)
                throw new Ee(2, 4, 4054);
              return (t = kn(t.node, "https://dashif.org/CPS", "Laurl")) &&
                (t = xn(t))
                ? t
                : "";
            })
            .set("com.widevine.alpha", function (e) {
              var t = kn(e.node, "https://dashif.org/CPS", "Laurl");
              return t && (t = xn(t))
                ? t
                : ((e = kn(e.node, "urn:microsoft", "laurl")) &&
                    bt(e.attributes.licenseUrl)) ||
                    "";
            })
            .set("com.microsoft.playready", jo)
            .set("com.microsoft.playready.recommendation", jo)
            .set("com.microsoft.playready.software", jo)
            .set("com.microsoft.playready.hardware", jo)
            .set("org.w3.clearkey", function (e) {
              var t = kn(e.node, "https://dashif.org/CPS", "Laurl");
              return t && (t = xn(t))
                ? t
                : (e = kn(
                    e.node,
                    "http://dashif.org/guidelines/clearKey",
                    "Laurl"
                  )) &&
                  "EME-1.0" === e.attributes.Lic_type &&
                  e &&
                  (e = xn(e))
                ? e
                : "";
            });
          function Fo(e, t) {
            var n = {
              maxAttempts: 2,
              baseDelay: 1e3,
              backoffFactor: 2,
              fuzzFactor: 0.5,
              timeout: 3e4,
              stallTimeout: 5e3,
              connectionTimeout: 1e4,
            };
            (this.l = null == e.maxAttempts ? n.maxAttempts : e.maxAttempts),
              (this.j = null == e.baseDelay ? n.baseDelay : e.baseDelay),
              (this.o = null == e.fuzzFactor ? n.fuzzFactor : e.fuzzFactor),
              (this.m =
                null == e.backoffFactor ? n.backoffFactor : e.backoffFactor),
              (this.g = 0),
              (this.h = this.j),
              (this.i = void 0 !== t && t) && (this.g = 1);
          }
          function Ho(e) {
            var t, n;
            return L(function (i) {
              if (1 == i.g) {
                if (e.g >= e.l) {
                  if (!e.i) throw new Ee(2, 7, 1010);
                  (e.g = 1), (e.h = e.j);
                }
                return (
                  (t = e.g),
                  e.g++,
                  0 == t
                    ? i.return()
                    : ((n = e.h * (1 + (2 * Math.random() - 1) * e.o)),
                      x(
                        i,
                        new Promise(function (e) {
                          new Oe(e).ea(n / 1e3);
                        }),
                        2
                      ))
                );
              }
              (e.h *= e.m), S(i);
            });
          }
          function Vo() {
            var e,
              t,
              n = new Promise(function (n, i) {
                (e = n), (t = i);
              });
            return (n.resolve = e), (n.reject = t), n;
          }
          function zo(e, t) {
            (this.promise = e), (this.i = t), (this.g = null);
          }
          function Go(e) {
            return new zo(Promise.reject(e), function () {
              return Promise.resolve();
            });
          }
          function qo() {
            var e = Promise.reject(new Ee(2, 7, 7001));
            return (
              e.catch(function () {}),
              new zo(e, function () {
                return Promise.resolve();
              })
            );
          }
          function Ko(e) {
            return new zo(Promise.resolve(e), function () {
              return Promise.resolve();
            });
          }
          function Wo(e) {
            return new zo(e, function () {
              return e.catch(function () {});
            });
          }
          function Xo(e) {
            return new zo(
              Promise.all(
                e.map(function (e) {
                  return e.promise;
                })
              ),
              function () {
                return Promise.all(
                  e.map(function (e) {
                    return e.abort();
                  })
                );
              }
            );
          }
          function Yo(t, n) {
            if (n)
              if (n instanceof Map)
                for (var i = c(n.keys()), r = i.next(); !r.done; r = i.next())
                  (r = r.value),
                    Object.defineProperty(this, r, {
                      value: n.get(r),
                      writable: !0,
                      enumerable: !0,
                    });
              else
                for (i in n)
                  Object.defineProperty(this, i, {
                    value: n[i],
                    writable: !0,
                    enumerable: !0,
                  });
            (this.defaultPrevented = this.cancelable = this.bubbles = !1),
              (this.timeStamp =
                e.performance && e.performance.now
                  ? e.performance.now()
                  : Date.now()),
              (this.type = t),
              (this.isTrusted = !1),
              (this.target = this.currentTarget = null),
              (this.g = !1);
          }
          function Jo() {
            (this.Xa = new $()), (this.Af = this);
          }
          function $o() {
            this.g = [];
          }
          function Zo(e, t) {
            e.g.push(
              t.finally(function () {
                rn(e.g, t);
              })
            );
          }
          function Qo(e, t, n, i, r, a, o) {
            Jo.call(this),
              (this.i = !1),
              (this.s = new $o()),
              (this.g = new Set()),
              (this.h = new Set()),
              (this.m = e || null),
              (this.l = t || null),
              (this.C = n || null),
              (this.D = i || null),
              (this.F = r || null),
              (this.J = a || null),
              (this.G = o || null),
              (this.A = this.B = !1),
              (this.o = 16e3),
              (this.j = new Map());
          }
          function es(e, t, n, i) {
            (i = void 0 !== i && i), (n = n || ss);
            var r = us.get(e);
            (!r || n >= r.priority) && us.set(e, { priority: n, Ld: t, ei: i });
          }
          function ts(e, t, n) {
            return {
              uris: e,
              method: "GET",
              body: null,
              headers: {},
              allowCrossSiteCredentials: !1,
              retryParameters: t,
              licenseRequestType: null,
              sessionId: null,
              drmInfo: null,
              initData: null,
              initDataType: null,
              streamDataCallback: void 0 === n ? null : n,
            };
          }
          function ns(e, t, n, i, r, a, o, s) {
            e.B && (n.uris[a] = n.uris[a].replace("https://", "http://")),
              e.A && (n.uris[a] = n.uris[a].replace("http://", "https://")),
              0 < a && e.J && e.J(t, i, n.uris[a], n.uris[a - 1]);
            var u = new se(n.uris[a]),
              l = u.rb,
              c = !1;
            l ||
              (ue(u, (l = (l = location.protocol).slice(0, -1))),
              (n.uris[a] = u.toString())),
              (l = l.toLowerCase());
            var d = (l = us.get(l)) ? l.Ld : null;
            if (!d) return Go(new Ee(2, 1, 1e3, u));
            var h = l.ei;
            (u = e.j.get(u.gb)) && (n.headers["common-access-token"] = u);
            var f,
              p = null,
              g = null,
              m = !1,
              v = !1;
            return Wo(Ho(r))
              .Pa(function () {
                if (e.i) return qo();
                f = Date.now();
                var r = 0;
                n.requestStartTime = Date.now();
                var o = d(
                  n.uris[a],
                  n,
                  t,
                  function (a, o, u) {
                    p && p.stop(),
                      g && g.ea(l / 1e3),
                      e.m &&
                        t == os &&
                        (r++,
                        (n.packetNumber = r),
                        e.m(a, o, is(i), n),
                        (c = !0),
                        (s.g = u));
                  },
                  function (i) {
                    (v = !0),
                      (n.timeToFirstByte = Date.now() - n.requestStartTime),
                      e.l && e.l(i, n, t);
                  },
                  { minBytesForProgressEvents: e.o }
                );
                if (!h) return o;
                var u = n.retryParameters.connectionTimeout;
                u &&
                  (p = new Oe(function () {
                    (m = !0), o.abort();
                  })).ea(u / 1e3);
                var l = n.retryParameters.stallTimeout;
                return (
                  l &&
                    (g = new Oe(function () {
                      (m = !0), o.abort();
                    })),
                  o
                );
              })
              .Pa(
                function (i) {
                  p && p.stop(),
                    g && g.stop(),
                    null == i.timeMs && (i.timeMs = Date.now() - f);
                  var r = i.headers["common-access-token"];
                  if (r) {
                    var a = new se(i.uri);
                    e.j.set(a.gb, r);
                  }
                  return (
                    (r = { response: i, Kh: c }),
                    !v && e.l && e.l(i.headers, n, t),
                    e.C && e.C(n, i),
                    r
                  );
                },
                function (u) {
                  if ((p && p.stop(), g && g.stop(), e.D)) {
                    var l = null,
                      c = 0;
                    u instanceof Ee &&
                      ((l = u), 1001 == u.code && (c = u.data[1])),
                      e.D(n, l, c, m);
                  }
                  if (e.i) return qo();
                  if (
                    (m && (u = new Ee(1, 1, 1003, n.uris[a], t)),
                    u instanceof Ee)
                  ) {
                    if (7001 == u.code) throw u;
                    if (1010 == u.code) throw o;
                    if (1 == u.severity) {
                      if (
                        (((l = new Yo(
                          "retry",
                          (l = new Map().set("error", u))
                        )).cancelable = !0),
                        e.dispatchEvent(l),
                        l.defaultPrevented)
                      )
                        throw u;
                      return (
                        (a = (a + 1) % n.uris.length),
                        ns(e, t, n, i, r, a, u, s)
                      );
                    }
                  }
                  throw u;
                }
              );
          }
          function is(e) {
            if (e) {
              var t = e.segment;
              if (((e = e.stream), t && e && e.fastSwitching && t.m)) return !1;
            }
            return !0;
          }
          function rs() {
            this.g = 0;
          }
          function as(e, t, n) {
            zo.call(this, e, t), (this.h = n);
          }
          (Vo.prototype.resolve = function () {}),
            (Vo.prototype.reject = function () {}),
            (zo.prototype.abort = function () {
              return this.g || (this.g = this.i()), this.g;
            }),
            (zo.prototype.finally = function (e) {
              return (
                this.promise.then(
                  function () {
                    return e(!0);
                  },
                  function () {
                    return e(!1);
                  }
                ),
                this
              );
            }),
            (zo.prototype.Pa = function (e, t) {
              function n(n) {
                return function (s) {
                  if (r.g && n) a.reject(o);
                  else {
                    var u = n ? e : t;
                    u
                      ? (i = (function (e, t, n) {
                          try {
                            var i = e(t);
                            return i && i.promise && i.abort
                              ? (n.resolve(i.promise),
                                function () {
                                  return i.abort();
                                })
                              : (n.resolve(i),
                                function () {
                                  return Promise.resolve(i).then(
                                    function () {},
                                    function () {}
                                  );
                                });
                          } catch (r) {
                            return (
                              n.reject(r),
                              function () {
                                return Promise.resolve();
                              }
                            );
                          }
                        })(u, s, a))
                      : (n ? a.resolve : a.reject)(s);
                  }
                };
              }
              function i() {
                return a.reject(o), r.abort();
              }
              var r = this,
                a = new Vo();
              a.catch(function () {});
              var o = new Ee(2, 7, 7001);
              return (
                this.promise.then(n(!0), n(!1)),
                new zo(a, function () {
                  return i();
                })
              );
            }),
            s.Object.defineProperties(zo.prototype, {
              aborted: {
                configurable: !0,
                enumerable: !0,
                get: function () {
                  return null !== this.g;
                },
              },
            }),
            F("shaka.util.AbortableOperation", zo),
            (zo.prototype.chain = zo.prototype.Pa),
            (zo.prototype.finally = zo.prototype.finally),
            (zo.all = Xo),
            (zo.prototype.abort = zo.prototype.abort),
            (zo.notAbortable = Wo),
            (zo.completed = Ko),
            (zo.aborted = qo),
            (zo.failed = Go),
            (Yo.prototype.preventDefault = function () {
              this.cancelable && (this.defaultPrevented = !0);
            }),
            (Yo.prototype.stopImmediatePropagation = function () {
              this.g = !0;
            }),
            (Yo.prototype.stopPropagation = function () {}),
            F("shaka.util.FakeEvent", Yo),
            (Jo.prototype.addEventListener = function (e, t) {
              this.Xa && this.Xa.push(e, t);
            }),
            (Jo.prototype.removeEventListener = function (e, t) {
              this.Xa && this.Xa.remove(e, t);
            }),
            (Jo.prototype.dispatchEvent = function (e) {
              if (!this.Xa) return !0;
              var t = this.Xa.get(e.type) || [],
                n = this.Xa.get("All");
              for (
                n && (t = t.concat(n)), n = (t = c(t)).next();
                !n.done;
                n = t.next()
              ) {
                (n = n.value),
                  (e.target = this.Af),
                  (e.currentTarget = this.Af);
                try {
                  n.handleEvent ? n.handleEvent(e) : n.call(this, e);
                } catch (i) {}
                if (e.g) break;
              }
              return e.defaultPrevented;
            }),
            (Jo.prototype.release = function () {
              this.Xa = null;
            }),
            ($o.prototype.destroy = function () {
              for (
                var e = [], t = c(this.g), n = t.next();
                !n.done;
                n = t.next()
              )
                (n = n.value).promise.catch(function () {}), e.push(n.abort());
              return (this.g = []), Promise.all(e);
            }),
            v(Qo, Jo),
            ((i = Qo.prototype).lf = function (e) {
              this.B = e;
            }),
            (i.mf = function (e) {
              this.A = e;
            }),
            (i.hi = function (e) {
              this.g.add(e);
            }),
            (i.Ci = function (e) {
              this.g.delete(e);
            }),
            (i.Vg = function () {
              this.g.clear();
            }),
            (i.ii = function (e) {
              this.h.add(e);
            }),
            (i.Di = function (e) {
              this.h.delete(e);
            }),
            (i.Wg = function () {
              this.h.clear();
            }),
            (i.Jf = function () {
              this.j.clear();
            }),
            (i.destroy = function () {
              return (
                (this.i = !0),
                this.g.clear(),
                this.h.clear(),
                this.j.clear(),
                Jo.prototype.release.call(this),
                this.s.destroy()
              );
            }),
            (i.request = function (e, t, n) {
              var i = this,
                r = new rs();
              if (this.i) {
                var a = Promise.reject(new Ee(2, 7, 7001));
                return (
                  a.catch(function () {}),
                  new as(
                    a,
                    function () {
                      return Promise.resolve();
                    },
                    r
                  )
                );
              }
              (t.method = t.method || "GET"),
                (t.headers = t.headers || {}),
                (t.retryParameters = t.retryParameters
                  ? hn(t.retryParameters)
                  : {
                      maxAttempts: 2,
                      baseDelay: 1e3,
                      backoffFactor: 2,
                      fuzzFactor: 0.5,
                      timeout: 3e4,
                      stallTimeout: 5e3,
                      connectionTimeout: 1e4,
                    }),
                (t.uris = hn(t.uris)),
                (a = (function (e, t, n, i) {
                  function r(e) {
                    a = a.Pa(function () {
                      return n.body && (n.body = Ae(n.body)), e(t, n, i);
                    });
                  }
                  var a = Ko(void 0);
                  e.F && r(e.F);
                  for (var o = (e = c(e.g)).next(); !o.done; o = e.next())
                    r(o.value);
                  return a.Pa(void 0, function (e) {
                    if (e instanceof Ee && 7001 == e.code) throw e;
                    throw new Ee(2, 1, 1006, e);
                  });
                })(this, e, t, n));
              var o = a.Pa(function () {
                  return ns(
                    i,
                    e,
                    t,
                    n,
                    new Fo(t.retryParameters, !1),
                    0,
                    null,
                    r
                  );
                }),
                s = o.Pa(function (t) {
                  return (function (e, t, n, i) {
                    for (
                      var r = Ko(void 0), a = (e = c(e.h)).next(), o = {};
                      !a.done;
                      o = { og: void 0 }, a = e.next()
                    )
                      (o.og = a.value),
                        (r = r.Pa(
                          (function (e) {
                            return function () {
                              var r = n.response;
                              return (
                                r.data && (r.data = Ae(r.data)),
                                (0, e.og)(t, r, i)
                              );
                            };
                          })(o)
                        ));
                    return r.Pa(
                      function () {
                        return n;
                      },
                      function (e) {
                        var t = 2;
                        if (e instanceof Ee) {
                          if (7001 == e.code) throw e;
                          t = e.severity;
                        }
                        throw new Ee(t, 1, 1007, e);
                      }
                    );
                  })(i, e, t, n);
                }),
                u = Date.now(),
                l = 0;
              a.promise.then(
                function () {
                  l = Date.now() - u;
                },
                function () {}
              );
              var d = 0;
              o.promise.then(
                function () {
                  d = Date.now();
                },
                function () {}
              );
              var h = s.Pa(
                function (r) {
                  var a = Date.now() - d,
                    o = r.response;
                  return (
                    (o.timeMs += l),
                    (o.timeMs += a),
                    r.Kh ||
                      !i.m ||
                      o.fromCache ||
                      "HEAD" == t.method ||
                      e != os ||
                      i.m(o.timeMs, o.data.byteLength, is(n)),
                    i.G && i.G(e, o, n),
                    o
                  );
                },
                function (e) {
                  throw (e && (e.severity = 2), e);
                }
              );
              return (
                (a = new as(
                  h.promise,
                  function () {
                    return h.abort();
                  },
                  r
                )),
                Zo(this.s, a),
                a
              );
            }),
            F("shaka.net.NetworkingEngine", Qo),
            (Qo.prototype.request = Qo.prototype.request),
            (Qo.prototype.destroy = Qo.prototype.destroy),
            (Qo.makeRequest = ts),
            (Qo.defaultRetryParameters = function () {
              return {
                maxAttempts: 2,
                baseDelay: 1e3,
                backoffFactor: 2,
                fuzzFactor: 0.5,
                timeout: 3e4,
                stallTimeout: 5e3,
                connectionTimeout: 1e4,
              };
            }),
            (Qo.prototype.clearCommonAccessTokenMap = Qo.prototype.Jf),
            (Qo.prototype.clearAllResponseFilters = Qo.prototype.Wg),
            (Qo.prototype.unregisterResponseFilter = Qo.prototype.Di),
            (Qo.prototype.registerResponseFilter = Qo.prototype.ii),
            (Qo.prototype.clearAllRequestFilters = Qo.prototype.Vg),
            (Qo.prototype.unregisterRequestFilter = Qo.prototype.Ci),
            (Qo.prototype.registerRequestFilter = Qo.prototype.hi),
            (Qo.unregisterScheme = function (e) {
              us.delete(e);
            }),
            (Qo.registerScheme = es),
            (Qo.prototype.setForceHTTPS = Qo.prototype.mf),
            (Qo.prototype.setForceHTTP = Qo.prototype.lf),
            (Qo.NumBytesRemainingClass = rs),
            v(as, zo),
            (Qo.PendingRequest = as);
          var os = 1;
          (Qo.RequestType = {
            MANIFEST: 0,
            SEGMENT: os,
            LICENSE: 2,
            APP: 3,
            TIMING: 4,
            SERVER_CERTIFICATE: 5,
            KEY: 6,
            ADS: 7,
            CONTENT_STEERING: 8,
          }),
            (Qo.AdvancedRequestType = {
              INIT_SEGMENT: 0,
              MEDIA_SEGMENT: 1,
              MEDIA_PLAYLIST: 2,
              MASTER_PLAYLIST: 3,
              MPD: 4,
              MSS: 5,
              MPD_PATCH: 6,
              MEDIATAILOR_SESSION_INFO: 7,
              MEDIATAILOR_TRACKING_INFO: 8,
              MEDIATAILOR_STATIC_RESOURCE: 9,
              MEDIATAILOR_TRACKING_EVENT: 10,
              INTERSTITIAL_ASSET_LIST: 11,
              INTERSTITIAL_AD_URL: 12,
            });
          var ss = 3;
          Qo.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: ss };
          var us = new Map();
          function ls(t, n, i, r, a, o) {
            var s = new Map()
              .set("RepresentationID", n)
              .set("Number", i)
              .set("SubNumber", r)
              .set("Bandwidth", a)
              .set("Time", o);
            return t.replace(
              /\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,
              function (t, n, i, r) {
                if ("$$" == t) return "$";
                var a = s.get(n);
                if (null == a) return t;
                switch (
                  ("RepresentationID" == n && i && (i = void 0),
                  "Time" == n &&
                    "bigint" != typeof a &&
                    (0.2 <= Math.abs(a - Math.round(a)) &&
                      X("Calculated $Time$ values must be close to integers"),
                    (a = Math.round(a))),
                  r)
                ) {
                  case void 0:
                  case "d":
                  case "i":
                  case "u":
                    t = a.toString();
                    break;
                  case "o":
                    t = a.toString(8);
                    break;
                  case "x":
                    t = a.toString(16);
                    break;
                  case "X":
                    t = a.toString(16).toUpperCase();
                    break;
                  default:
                    t = a.toString();
                }
                return (
                  (i = e.parseInt(i, 10) || 1),
                  Array(Math.max(0, i - t.length) + 1).join("0") + t
                );
              }
            );
          }
          function cs(e, t) {
            var n = hs(e, t, "timescale"),
              i = 1;
            n && (i = Nn(n) || 1);
            var r = (n = Nn((n = hs(e, t, "duration")) || "")) ? n / i : null,
              a = hs(e, t, "startNumber"),
              o = Number(hs(e, t, "presentationTimeOffset")) || 0,
              s = _n(a || "");
            if (
              ((null != a && null != s) || (s = 1),
              (a = null),
              (t = fs(e, t, "SegmentTimeline")))
            ) {
              (t = wn(t, "S")), (a = i), (e = e.$.duration || 1 / 0);
              for (var u = s, l = [], c = -o, d = 0; d < t.length; ++d) {
                var h = t[d],
                  f = t[d + 1],
                  p = In(h, "t", _n),
                  g = In(h, "d", _n),
                  m = In(h, "r", Rn);
                if (((h = In(h, "k", Rn) || 0), null != p && (p -= o), g)) {
                  if (((p = null != p ? p : c), 0 > (m = m || 0)))
                    if (f) {
                      if (null == (f = In(f, "t", _n))) break;
                      if (p >= f) break;
                      m = Math.ceil((f - p) / g) - 1;
                    } else {
                      if (1 / 0 == e) break;
                      if (p / a >= e) break;
                      m = Math.ceil((e * a - p) / g) - 1;
                    }
                  for (
                    0 < l.length && p != c && (l[l.length - 1].end = p / a),
                      f = 0;
                    f <= m;
                    ++f
                  )
                    (c = p + g),
                      l.push({
                        start: p / a,
                        end: c / a,
                        zf: p,
                        Kd: h,
                        ri: l.length + u,
                      }),
                      (p = c);
                }
              }
              a = l;
            }
            return {
              timescale: i,
              Wd: n,
              Fa: r,
              fd: s,
              Kb: o / i || 0,
              yf: o,
              timeline: a,
            };
          }
          function ds(e, t) {
            return [t(e.I), t(e.Z), t(e.ia)].filter(Ji);
          }
          function hs(e, t, n) {
            (t = ds(e, t)), (e = null);
            for (
              var i = (t = c(t)).next();
              !i.done && !(e = i.value.attributes[n]);
              i = t.next()
            );
            return e;
          }
          function fs(e, t, n) {
            (t = ds(e, t)), (e = null);
            for (
              var i = (t = c(t)).next();
              !i.done && !(e = An(i.value, n));
              i = t.next()
            );
            return e;
          }
          function ps(e, t, n, i, r, a) {
            if (
              ((a = void 0 === a ? 0 : a),
              Cn(e, "http://www.w3.org/1999/xlink", "href"))
            ) {
              var o = (function (e, t, n, i, r, a) {
                for (
                  var o = Cn(e, "http://www.w3.org/1999/xlink", "href"),
                    s =
                      Cn(e, "http://www.w3.org/1999/xlink", "actuate") ||
                      "onRequest",
                    u = c(Object.keys(e.attributes)),
                    l = u.next();
                  !l.done;
                  l = u.next()
                ) {
                  var d = (l = l.value).split(":"),
                    h = vn("http://www.w3.org/1999/xlink");
                  d[0] == h && delete e.attributes[l];
                }
                if (5 <= a) return Go(new Ee(2, 4, 4028));
                if ("onLoad" != s) return Go(new Ee(2, 4, 4027));
                var f = Mt([i], [o]);
                return r.request(0, ts(f, t)).Pa(function (i) {
                  if (!(i = gn(i.data, e.tagName)))
                    return Go(new Ee(2, 4, 4001, o));
                  for (e.children = []; i.children.length; ) {
                    var s = i.children.shift();
                    e.children.push(s);
                  }
                  for (
                    var u = (s = c(Object.keys(i.attributes))).next();
                    !u.done;
                    u = s.next()
                  )
                    (u = u.value), (e.attributes[u] = i.attributes[u]);
                  return ps(e, t, n, f[0], r, a + 1);
                });
              })(e, t, n, i, r, a);
              return (
                n &&
                  (o = o.Pa(void 0, function () {
                    return ps(e, t, n, i, r, a);
                  })),
                o
              );
            }
            o = [];
            for (
              var s = c(bn(e)), u = s.next(), l = {};
              !u.done;
              l = { Ic: void 0 }, u = s.next()
            )
              (l.Ic = u.value),
                "urn:mpeg:dash:resolve-to-zero:2013" ==
                Cn(l.Ic, "http://www.w3.org/1999/xlink", "href")
                  ? (e.children = e.children.filter(
                      (function (e) {
                        return function (t) {
                          return t !== e.Ic;
                        };
                      })(l)
                    ))
                  : "SegmentTimeline" != l.Ic.tagName &&
                    o.push(ps(l.Ic, t, n, i, r, a));
            return Xo(o).Pa(function () {
              return e;
            });
          }
          function gs(e, t, n, i, r, a, o, s) {
            (this.T = e),
              (this.startByte = t),
              (this.endByte = n),
              (this.We = void 0 === i ? null : i),
              (this.timescale = void 0 === r ? null : r),
              (this.h = void 0 === a ? null : a),
              (this.aesKey = void 0 === o ? null : o),
              (this.g = this.mimeType = this.codecs = null),
              (this.encrypted = void 0 !== s && s);
          }
          function ms(e, t) {
            return (
              e === t ||
              (e && t
                ? e.qc() == t.qc() &&
                  e.oc() == t.oc() &&
                  an(e.T().sort(), t.T().sort()) &&
                  Te(e.Xb(), t.Xb())
                : e == t)
            );
          }
          function vs(e, t, n, i, r, a, o, s, u, l, d, h, f, p, g, m) {
            for (
              l = void 0 === l ? [] : l,
                p = void 0 === p ? bs : p,
                this.startTime = e,
                this.i = this.endTime = t,
                this.G = n,
                this.startByte = i,
                this.endByte = r,
                this.ha = a,
                this.l = o,
                this.F = s,
                this.D = u,
                this.g = l,
                this.tilesLayout = void 0 === d ? "" : d,
                this.C = void 0 === h ? null : h,
                this.B = void 0 === f ? null : f,
                this.status = p,
                this.preload = !1,
                this.j = !0,
                this.A = !1,
                this.aesKey = void 0 === g ? null : g,
                this.thumbnailSprite = null,
                this.h = -1,
                this.s = void 0 !== m && m,
                this.J = this.m = !1,
                t = (e = c(this.g)).next();
              !t.done;
              t = e.next()
            )
              t.value.eg();
            this.s && this.g.length && this.g[this.g.length - 1].dg(),
              (this.o = this.bandwidth = this.mimeType = this.codecs = null),
              (this.K = !1);
          }
          function ys(e, t) {
            e.ha = t;
            for (var n = (e = c(e.g)).next(); !n.done; n = e.next())
              ys(n.value, t);
          }
          (gs.prototype.qc = function () {
            return this.startByte;
          }),
            (gs.prototype.oc = function () {
              return this.endByte;
            }),
            (gs.prototype.yg = function (e) {
              this.h = e;
            }),
            (gs.prototype.Xb = function () {
              return this.h;
            }),
            F("shaka.media.InitSegmentReference", gs),
            (gs.prototype.getEndByte = gs.prototype.oc),
            (gs.prototype.getStartByte = gs.prototype.qc),
            ((i = vs.prototype).T = function () {
              return this.G();
            }),
            (i.getStartTime = function () {
              return this.startTime;
            }),
            (i.jh = function () {
              return this.endTime;
            }),
            (i.qc = function () {
              return this.startByte;
            }),
            (i.oc = function () {
              return this.endByte;
            }),
            (i.Gh = function () {
              return this.tilesLayout;
            }),
            (i.Fh = function () {
              return this.C;
            }),
            (i.Pc = function () {
              return this.status;
            }),
            (i.Xh = function () {
              this.status = ws;
            }),
            (i.Wh = function () {
              this.preload = !0;
            }),
            (i.isPreload = function () {
              return this.preload;
            }),
            (i.Xc = function () {
              this.j = !1;
            }),
            (i.Oh = function () {
              return this.j;
            }),
            (i.eg = function () {
              this.m = !0;
            }),
            (i.Qh = function () {
              return this.m;
            }),
            (i.dg = function () {
              this.J = !0;
            }),
            (i.Ph = function () {
              return this.J;
            }),
            (i.Vh = function () {
              this.A = !0;
            }),
            (i.Lh = function () {
              return this.A;
            }),
            (i.zg = function (e) {
              this.thumbnailSprite = e;
            }),
            (i.Dh = function () {
              return this.thumbnailSprite;
            }),
            (i.offset = function (e) {
              (this.startTime += e), (this.endTime += e), (this.i += e);
              for (var t = c(this.g), n = t.next(); !n.done; n = t.next())
                ((n = n.value).startTime += e), (n.endTime += e), (n.i += e);
            }),
            (i.zi = function (e) {
              null == this.B
                ? W("Sync attempted without sync time!")
                : ((e = this.B - e - this.startTime),
                  0.001 <= Math.abs(e) && this.offset(e));
            }),
            (i.yg = function (e, t) {
              (this.o = e), (this.K = void 0 !== t && t);
            }),
            (i.Xb = function (e) {
              var t = this.o;
              return (void 0 === e || e) && this.K && (this.o = null), t;
            }),
            F("shaka.media.SegmentReference", vs),
            (vs.prototype.getSegmentData = vs.prototype.Xb),
            (vs.prototype.setSegmentData = vs.prototype.yg),
            (vs.prototype.syncAgainst = vs.prototype.zi),
            (vs.prototype.offset = vs.prototype.offset),
            (vs.prototype.getThumbnailSprite = vs.prototype.Dh),
            (vs.prototype.setThumbnailSprite = vs.prototype.zg),
            (vs.prototype.hasByterangeOptimization = vs.prototype.Lh),
            (vs.prototype.markAsByterangeOptimization = vs.prototype.Vh),
            (vs.prototype.isLastPartial = vs.prototype.Ph),
            (vs.prototype.markAsLastPartial = vs.prototype.dg),
            (vs.prototype.isPartial = vs.prototype.Qh),
            (vs.prototype.markAsPartial = vs.prototype.eg),
            (vs.prototype.isIndependent = vs.prototype.Oh),
            (vs.prototype.markAsNonIndependent = vs.prototype.Xc),
            (vs.prototype.isPreload = vs.prototype.isPreload),
            (vs.prototype.markAsPreload = vs.prototype.Wh),
            (vs.prototype.markAsUnavailable = vs.prototype.Xh),
            (vs.prototype.getStatus = vs.prototype.Pc),
            (vs.prototype.getTileDuration = vs.prototype.Fh),
            (vs.prototype.getTilesLayout = vs.prototype.Gh),
            (vs.prototype.getEndByte = vs.prototype.oc),
            (vs.prototype.getStartByte = vs.prototype.qc),
            (vs.prototype.getEndTime = vs.prototype.jh),
            (vs.prototype.getStartTime = vs.prototype.getStartTime),
            (vs.prototype.getUris = vs.prototype.T);
          var bs = 0,
            ws = 1;
          function xs(e, t, n, i, r, a, o) {
            var s,
              u = new Na().N("sidx", function (e) {
                s = (function (e, t, n, i, r, a, o) {
                  var s = [];
                  o.reader.skip(4);
                  var u = o.reader.M();
                  if (0 == u) throw new Ee(2, 3, 3005);
                  if (0 == o.version)
                    var l = o.reader.M(),
                      c = o.reader.M();
                  else (l = o.reader.Cc()), (c = o.reader.Cc());
                  o.reader.skip(2);
                  var d = o.reader.kb();
                  for (e = e + o.size + c, c = 0; c < d; c++) {
                    var h = o.reader.M(),
                      f = (2147483648 & h) >>> 31;
                    h &= 2147483647;
                    var p = o.reader.M();
                    if ((o.reader.skip(4), 1 == f)) throw new Ee(2, 3, 3006);
                    s.push(
                      new vs(
                        l / u + n,
                        (l + p) / u + n,
                        function () {
                          return a;
                        },
                        e,
                        e + h - 1,
                        t,
                        n,
                        i,
                        r
                      )
                    ),
                      (l += p),
                      (e += h);
                  }
                  return o.parser.stop(), s;
                })(t, i, r, a, o, n, e);
              });
            if ((e && u.parse(e), s)) return s;
            throw new Ee(2, 3, 3004);
          }
          function Ss(e) {
            (this.h = Ce(e)), (this.g = new ka(this.h, 0));
          }
          function Ts(e) {
            var t = As(e);
            if (7 < t.length) throw new Ee(2, 3, 3002);
            for (var n = 0, i = (t = c(t)).next(); !i.done; i = t.next())
              n = 256 * n + i.value;
            t = As(e);
            e: {
              for (var r = (i = c(ks)).next(); !r.done; r = i.next())
                if (Te(t, new Uint8Array(r.value))) {
                  i = !0;
                  break e;
                }
              i = !1;
            }
            if (i) t = e.h.byteLength - e.g.ra();
            else {
              if (8 == t.length && 224 & t[1]) throw new Ee(2, 3, 3001);
              for (r = i = 0; r < t.length; r++) {
                var a = t[r];
                i = 0 == r ? a & ((1 << (8 - t.length)) - 1) : 256 * i + a;
              }
              t = i;
            }
            return (
              (t =
                e.g.ra() + t <= e.h.byteLength ? t : e.h.byteLength - e.g.ra()),
              (i = Ce(e.h, e.g.ra(), t)),
              e.g.skip(t),
              new Is(n, i)
            );
          }
          function As(e) {
            var t = e.g.ra(),
              n = e.g.lb();
            if (0 == n) throw new Ee(2, 3, 3002);
            return (
              (n = 8 - Math.floor(Math.log2(n))), e.g.skip(n - 1), ke(e.h, t, n)
            );
          }
          (vs.Status = { Ii: bs, Pi: ws, Ni: 2 }),
            (Ss.prototype.ya = function () {
              return this.g.ya();
            });
          var ks = [
            [255],
            [127, 255],
            [63, 255, 255],
            [31, 255, 255, 255],
            [15, 255, 255, 255, 255],
            [7, 255, 255, 255, 255, 255],
            [3, 255, 255, 255, 255, 255, 255],
            [1, 255, 255, 255, 255, 255, 255, 255],
          ];
          function Is(e, t) {
            (this.id = e), (this.g = t);
          }
          function Cs(e) {
            if (8 < e.g.byteLength) throw new Ee(2, 3, 3002);
            if (8 == e.g.byteLength && 224 & e.g.getUint8(0))
              throw new Ee(2, 3, 3001);
            for (var t = 0, n = 0; n < e.g.byteLength; n++) {
              t = 256 * t + e.g.getUint8(n);
            }
            return t;
          }
          function Ms(e) {
            var t = new Ss(e.g);
            if (179 != (e = Ts(t)).id) throw new Ee(2, 3, 3013);
            if (((e = Cs(e)), 183 != (t = Ts(t)).id)) throw new Ee(2, 3, 3012);
            t = new Ss(t.g);
            for (var n = 0; t.ya(); ) {
              var i = Ts(t);
              if (241 == i.id) {
                n = Cs(i);
                break;
              }
            }
            return { Ei: e, ji: n };
          }
          function Es(e) {
            (this.g = e), (this.m = null), (this.i = 0), (this.o = !1);
          }
          function Ds(e, t, n) {
            return new Es([
              (e = new vs(
                e,
                e + t,
                function () {
                  return n;
                },
                0,
                null,
                null,
                e,
                e,
                e + t
              )),
            ]);
          }
          function Ps(e, t, n, i) {
            (this.i = e), (this.h = t), (this.g = n), (this.reverse = i);
          }
          function Ls() {
            Es.call(this, []), (this.h = []);
          }
          function Rs(e, t, n) {
            if (!(t = fs(e, t, "Initialization"))) return null;
            var i = e.I.Ca(),
              r = t.attributes.sourceURL;
            r && (i = Mt(i, [bt(r)], e.eb())), (r = 0);
            var a = null;
            return (
              (t = In(t, "range", Ln)) && ((r = t.start), (a = t.end)),
              ((n = new gs(
                function () {
                  return i;
                },
                r,
                a,
                Bs(e),
                null,
                null,
                n,
                e.Z.encrypted
              )).codecs = e.I.codecs),
              (n.mimeType = e.I.mimeType),
              e.$ && (n.g = e.$.start + e.$.duration),
              n
            );
          }
          function Ns(e, t, n) {
            var i = Number(hs(e, Us, "presentationTimeOffset")) || 0,
              r = hs(e, Us, "timescale"),
              a = 1;
            r && (a = Nn(r) || 1);
            var o = i / a || 0,
              s = Rs(e, Us, n);
            !(function (e, t) {
              if ((Os(e, t), !js(e))) throw new Ee(2, 4, 4002);
            })(e, s);
            var u = fn(e);
            return {
              Vb: function () {
                var e = fs(u, Us, "RepresentationIndex"),
                  n = u.I.Ca();
                return (
                  e &&
                    (e = bt(e.attributes.sourceURL)) &&
                    (n = Mt(n, [e], u.eb())),
                  (e = js(u)),
                  _s(u, t, s, n, e.start, e.end, o)
                );
              },
            };
          }
          function _s(e, t, n, i, r, a, o) {
            var s, u, l, d, h, f, p, g, m, v, y, b, w, S, T, A, k, I;
            return L(function (C) {
              if (1 == C.g)
                return (
                  (s = e.presentationTimeline),
                  (u = !e.wb || !e.$.ag),
                  (l = e.$.start),
                  (d = e.$.duration),
                  (h = e.I.mimeType.split("/")[1]),
                  (p = null),
                  (g = [
                    (f = t)(i, r, a, !1),
                    "webm" == h ? f(n.T(), n.startByte, n.endByte, !0) : null,
                  ]),
                  (f = null),
                  x(C, Promise.all(g), 2)
                );
              if (
                ((m = C.h),
                (v = m[0]),
                (y = m[1] || null),
                null,
                (w = l - o),
                (S = l),
                (T = d ? l + d : 1 / 0),
                "mp4" == h)
              )
                var M = xs(v, r, i, n, w, S, T);
              else {
                M = v;
                var E = new Ss(y);
                if (440786851 != Ts(E).id) throw new Ee(2, 3, 3008);
                var D = Ts(E);
                if (408125543 != D.id) throw new Ee(2, 3, 3009);
                (E = D.g.byteOffset), (D = new Ss(D.g));
                for (var P = null; D.ya(); ) {
                  var L = Ts(D);
                  if (357149030 == L.id) {
                    P = L;
                    break;
                  }
                }
                if (!P) throw new Ee(2, 3, 3010);
                for (P = new Ss(P.g), L = 1e6, D = null; P.ya(); ) {
                  var R = Ts(P);
                  if (2807729 == R.id) L = Cs(R);
                  else if (17545 == R.id)
                    if (4 == R.g.byteLength) D = R.g.getFloat32(0);
                    else {
                      if (8 != R.g.byteLength) throw new Ee(2, 3, 3003);
                      D = R.g.getFloat64(0);
                    }
                }
                if (null == D) throw new Ee(2, 3, 3011);
                if (((D *= P = L / 1e9), 475249515 != (M = Ts(new Ss(M))).id))
                  throw new Ee(2, 3, 3007);
                M = (function (e, t, n, i, r, a, o, s, u) {
                  function l() {
                    return r;
                  }
                  var c = [];
                  e = new Ss(e.g);
                  for (var d = null, h = null; e.ya(); ) {
                    var f = Ts(e);
                    if (187 == f.id) {
                      var p = Ms(f);
                      p &&
                        ((f = n * p.Ei),
                        (p = t + p.ji),
                        null != d &&
                          c.push(new vs(d + o, f + o, l, h, p - 1, a, o, s, u)),
                        (d = f),
                        (h = p));
                    }
                  }
                  return (
                    null != d &&
                      c.push(new vs(d + o, i + o, l, h, null, a, o, s, u)),
                    c
                  );
                })(M, E, P, D, i, n, w, S, T);
              }
              for (A = c((b = M)), k = A.next(); !k.done; k = A.next())
                ((I = k.value).codecs = e.I.codecs),
                  (I.mimeType = e.I.mimeType),
                  (I.bandwidth = e.bandwidth);
              return s.Ye(b), (p = new Es(b)), u && p.Nc(S, T, !0), C.return(p);
            });
          }
          function Us(e) {
            return e.Ec;
          }
          function js(e) {
            var t = fs(e, Us, "RepresentationIndex");
            return (
              (e = Ln((e = hs(e, Us, "indexRange")) || "")),
              t && (e = In(t, "range", Ln, e)),
              e
            );
          }
          function Os(e, t) {
            var n = e.I.mimeType.split("/")[1];
            if (e.I.contentType != Rt && "mp4" != n && "webm" != n)
              throw new Ee(2, 4, 4006);
            if ("webm" == n && !t) throw new Ee(2, 4, 4005);
          }
          function Bs(e) {
            var t = e.I;
            return {
              bandwidth: e.bandwidth,
              audioSamplingRate: t.audioSamplingRate,
              codecs: t.codecs,
              contentType: t.contentType,
              frameRate: t.frameRate || null,
              height: t.height || null,
              mimeType: t.mimeType,
              channelsCount: t.Id,
              pixelAspectRatio: t.pixelAspectRatio || null,
              width: t.width || null,
              label: e.Z.label || null,
              roles: e.roles || null,
              language: e.Z.language || null,
            };
          }
          function Fs(e, t, n) {
            var i = Rs(e, Hs, n),
              r = (function (e) {
                var t = (function (e) {
                  return [e.I.Bb, e.Z.Bb, e.ia.Bb]
                    .filter(Ji)
                    .map(function (e) {
                      return wn(e, "SegmentURL");
                    })
                    .reduce(function (e, t) {
                      return 0 < e.length ? e : t;
                    })
                    .map(function (t) {
                      return (
                        t.attributes.indexRange && !e.Re && (e.Re = !0),
                        {
                          Zh: bt(t.attributes.media),
                          start: (t = In(t, "mediaRange", Ln, {
                            start: 0,
                            end: null,
                          })).start,
                          end: t.end,
                        }
                      );
                    });
                })(e);
                e = cs(e, Hs);
                var n = e.fd;
                0 == n && (n = 1);
                var i = 0;
                return (
                  e.Fa
                    ? (i = e.Fa * (n - 1))
                    : e.timeline &&
                      0 < e.timeline.length &&
                      (i = e.timeline[0].start),
                  {
                    Fa: e.Fa,
                    startTime: i,
                    fd: n,
                    Kb: e.Kb,
                    timeline: e.timeline,
                    yc: t,
                  }
                );
              })(e);
            if (!r.Fa && !r.timeline && 1 < r.yc.length)
              throw new Ee(2, 4, 4002);
            if (!r.Fa && !e.$.duration && !r.timeline && 1 == r.yc.length)
              throw new Ee(2, 4, 4002);
            if (r.timeline && 0 == r.timeline.length) throw new Ee(2, 4, 4002);
            var a = null,
              o = null;
            e.ia.id &&
              e.I.id &&
              (o = t.get(e.ia.id + "," + e.I.id)) &&
              (a = o.segmentIndex);
            var s = (function (e, t, n, i, r, a, o, s, u, l) {
              var c = i.yc.length;
              i.timeline &&
                i.timeline.length != i.yc.length &&
                (c = Math.min(i.timeline.length, i.yc.length));
              for (
                var d = e - i.Kb,
                  h = t ? e + t : 1 / 0,
                  f = [],
                  p = i.startTime,
                  g = {},
                  m = 0;
                m < c;
                g = { Yd: void 0, Pd: void 0 }, m++
              ) {
                g.Pd = i.yc[m];
                var v = p;
                (p = void 0),
                  (p =
                    null != i.Fa
                      ? v + i.Fa
                      : i.timeline
                      ? i.timeline[m].end
                      : v + t),
                  (g.Yd = null),
                  ((g = new vs(
                    e + v,
                    e + p,
                    (function (e) {
                      return function () {
                        return (
                          null == e.Yd && (e.Yd = Mt(n(), [e.Pd.Zh], l())), e.Yd
                        );
                      };
                    })(g),
                    g.Pd.start,
                    g.Pd.end,
                    r,
                    d,
                    e,
                    h,
                    [],
                    "",
                    null,
                    null,
                    bs,
                    a
                  )).codecs = s),
                  (g.mimeType = o),
                  (g.bandwidth = u),
                  f.push(g);
              }
              return f;
            })(
              e.$.start,
              e.$.duration,
              e.I.Ca,
              r,
              i,
              n,
              e.I.mimeType,
              e.I.codecs,
              e.bandwidth,
              e.eb
            );
            return (
              (t = !a),
              a ? a.Ed(s, e.presentationTimeline.xb()) : (a = new Es(s)),
              e.presentationTimeline.Ye(s),
              (e.wb && e.$.ag) ||
                a.Nc(
                  e.$.start,
                  e.$.duration ? e.$.start + e.$.duration : 1 / 0,
                  t
                ),
              o && (o.segmentIndex = a),
              {
                Vb: function () {
                  return (
                    (a && 0 != a.getNumReferences()) || a.Dd(s),
                    Promise.resolve(a)
                  );
                },
              }
            );
          }
          function Hs(e) {
            return e.Bb;
          }
          function Vs(t, n, i, r, a, o, s, u, l) {
            l || t.I.yd || (t.I.yd = hs(t, zs, "initialization"));
            var d = t.I.yd
                ? (function (e, t) {
                    var n = e.I.yd;
                    if ((n || (n = hs(e, zs, "initialization")), !n))
                      return null;
                    n = bt(n);
                    var i = e.I.originalId,
                      r = e.bandwidth || null,
                      a = e.I.Ca,
                      o = e.eb;
                    return (
                      (t = new gs(
                        function () {
                          var e = ls(n, i, null, null, r, null);
                          return Mt(a(), [e], o());
                        },
                        0,
                        null,
                        Bs(e),
                        null,
                        null,
                        t,
                        e.Z.encrypted
                      )),
                      (t.codecs = e.I.codecs),
                      (t.mimeType = e.I.mimeType),
                      e.$ && (t.g = e.$.start + e.$.duration),
                      t
                    );
                  })(t, s)
                : null,
              h = (function (e) {
                var t = cs(e, zs),
                  n = hs(e, zs, "media"),
                  i = hs(e, zs, "index"),
                  r = hs(e, zs, "k"),
                  a = 0;
                return (
                  r && (a = parseInt(r, 10)),
                  {
                    Wd: t.Wd,
                    Fa: t.Fa,
                    timescale: t.timescale,
                    fd: t.fd,
                    Kb: t.Kb,
                    yf: t.yf,
                    timeline: t.timeline,
                    Hb: n && bt(n),
                    Tc: i,
                    mimeType: e.I.mimeType,
                    codecs: e.I.codecs,
                    bandwidth: e.bandwidth,
                    $h: a,
                  }
                );
              })(t);
            !(function (e) {
              var t = e.Tc ? 1 : 0;
              if (((t += e.timeline ? 1 : 0), (t += e.Fa ? 1 : 0), 0 == t))
                throw new Ee(2, 4, 4002);
              if (
                (1 != t &&
                  (e.Tc && (e.timeline = null), (e.Wd = null), (e.Fa = null)),
                !e.Tc && !e.Hb)
              )
                throw new Ee(2, 4, 4002);
            })(h);
            var f = fn(t);
            if (h.Tc)
              return (
                Os(t, d),
                {
                  Vb: function () {
                    var e = ls(
                      h.Tc,
                      f.I.originalId,
                      null,
                      null,
                      f.bandwidth || null,
                      null
                    );
                    return (
                      (e = Mt(f.I.Ca(), [e])), _s(f, n, d, e, 0, null, h.Kb)
                    );
                  },
                }
              );
            if (h.Fa)
              return (
                r ||
                  "image" === t.Z.contentType ||
                  "text" === t.Z.contentType ||
                  ((i = t.$.start),
                  (r = t.ia.id),
                  (l = t.$.duration),
                  (r = (r = (null != r && o.get(r)) || l) ? i + r : 1 / 0),
                  t.presentationTimeline.Xe(h.Fa),
                  t.presentationTimeline.ig(i, r)),
                {
                  Vb: function () {
                    return (function (t, n, i, r, a, o, s, u) {
                      function l(i) {
                        var a = i - y,
                          s = a * v,
                          l = n.Wd,
                          c = a * l;
                        "BigInt" in e &&
                          c > Number.MAX_SAFE_INTEGER &&
                          (c = BigInt(a) * BigInt(l)),
                          (a = (s += p) + v),
                          (l = Math.min(a, h()));
                        var d = [],
                          f = n.$h;
                        if (f)
                          for (
                            var g = (l - s) / f, m = {}, k = 0;
                            k < f;
                            m = { Dg: void 0 }, k++
                          ) {
                            var I = s + g * k,
                              C = I + g;
                            (m.Dg = k + 1),
                              ((m = new vs(
                                I,
                                C,
                                (function (e) {
                                  return function () {
                                    var t = ls(b, x, i, e.Dg, w, c);
                                    return Mt(S(), [t], T());
                                  };
                                })(m),
                                0,
                                null,
                                r,
                                A,
                                p,
                                h(),
                                [],
                                "",
                                null,
                                null,
                                bs,
                                o
                              )).codecs = t.I.codecs),
                              (m.mimeType = t.I.mimeType),
                              0 == u ? 0 < k && m.Xc() : 0 != k % u && m.Xc(),
                              d.push(m);
                          }
                        return (
                          ((s = new vs(
                            s,
                            l,
                            function () {
                              if (f) return [];
                              var e = ls(b, x, i, null, w, c);
                              return Mt(S(), [e], T());
                            },
                            0,
                            null,
                            r,
                            A,
                            p,
                            h(),
                            d,
                            "",
                            null,
                            null,
                            bs,
                            o,
                            0 < d.length
                          )).codecs = t.I.codecs),
                          (s.mimeType = t.I.mimeType),
                          (s.bandwidth = t.bandwidth),
                          (s.i = a),
                          s
                        );
                      }
                      function d() {
                        var e = [
                          Math.max(f.xb(), p),
                          Math.min(f.Gb(), h()),
                        ].map(function (e) {
                          return e - p;
                        });
                        return (
                          (e = [Math.ceil(e[0] / v), Math.ceil(e[1] / v) - 1]),
                          t.I.Na && e[1]++,
                          e.map(function (e) {
                            return e + y;
                          })
                        );
                      }
                      function h() {
                        var e = (null != g && a.get(g)) || m;
                        return e ? p + e : 1 / 0;
                      }
                      var f = t.presentationTimeline,
                        p = t.$.start,
                        g = t.ia.id,
                        m = t.$.duration,
                        v = n.Fa,
                        y = n.fd,
                        b = n.Hb,
                        w = t.bandwidth || null,
                        x = t.I.id,
                        S = t.I.Ca,
                        T = t.eb,
                        A = p - n.Kb,
                        k = d();
                      (i = t.wb ? Math.max(k[0], k[1] - i + 1) : k[0]),
                        (s = s || k[1]),
                        (k = []);
                      for (var I = i; I <= s; ++I) {
                        var C = l(I);
                        k.push(C);
                      }
                      var M = new Es(k);
                      if (((k = f.Gb() < h()), (I = f.R()), k || I)) {
                        var E = Math.max(i, s + 1);
                        (i = v),
                          t.I.Na && (i = 0.1),
                          M.Xd(i, function () {
                            var e = f.xb();
                            M.Ba(e);
                            var t = c(d());
                            t.next(), (t = t.next().value);
                            for (var n = []; E <= t; ) {
                              var i = l(E);
                              n.push(i), E++;
                            }
                            return e > h() && !n.length ? null : n;
                          });
                      }
                      return Promise.resolve(M);
                    })(f, h, a, d, o, s, u, t.I.Qd);
                  },
                }
              );
            var p = null;
            (r = r = null),
              t.ia.id &&
                t.I.id &&
                ((r = t.ia.id + "," + t.I.id), (r = i.get(r))) &&
                (p = r.segmentIndex);
            var g = t.$.start,
              m = t.$.duration ? g + t.$.duration : 1 / 0;
            return (
              p
                ? (qs((i = p), h, g, m, d), i.Ba(t.presentationTimeline.xb()))
                : (p = new Gs(
                    h,
                    t.I.originalId,
                    t.bandwidth,
                    t.I.Ca,
                    t.eb,
                    g,
                    m,
                    d,
                    s,
                    t.I.Qd
                  )),
              h.timeline &&
                "image" !== t.Z.contentType &&
                "text" !== t.Z.contentType &&
                t.presentationTimeline.jg(p.h ? p.h.timeline : [], g),
              r && t.wb && (r.segmentIndex = p),
              {
                Vb: function () {
                  return (
                    p instanceof Gs &&
                      0 == p.getNumReferences() &&
                      qs(p, h, g, m, d),
                    Promise.resolve(p)
                  );
                },
              }
            );
          }
          function zs(e) {
            return e.Lb;
          }
          function Gs(e, t, n, i, r, a, o, s, u, l) {
            Es.call(this, []),
              (this.h = e),
              (this.D = t),
              (this.B = n),
              (this.C = i),
              (this.G = r),
              (this.j = a),
              (this.l = o),
              (this.s = s),
              (this.A = u),
              (this.F = l),
              Ks(this);
          }
          function qs(e, t, n, i, r) {
            if (
              ((function (e, t) {
                if (e.s !== t) {
                  e.s = t;
                  for (var n = (e = c(e.g)).next(); !n.done; n = e.next())
                    (n = n.value) && ys(n, t);
                }
              })(e, r),
              e.h)
            ) {
              if (
                ((n = e.h.timeline),
                e.h.Hb !== t.Hb && (e.h.Hb = t.Hb),
                n.length)
              ) {
                var a = n[n.length - 1];
                t = t.timeline.filter(function (e) {
                  return e.end > a.end;
                });
              } else t = t.timeline.slice();
              0 < t.length && e.h.timeline.push.apply(e.h.timeline, d(t)),
                e.l !== i && (e.l = i);
            } else (e.h = t), (e.j = n), (e.l = i);
            Ks(e);
          }
          function Ks(e) {
            if (e.h && !e.o) {
              for (
                var t = [], n = c(e.h.timeline), i = n.next();
                !i.done;
                i = n.next()
              )
                (i = i.value).start >= e.l || 0 >= i.end || t.push(i);
              (e.h.timeline = t), e.Ba(e.j);
            }
          }
          function Ws(e, t, n, i, r, a, o, s) {
            return (
              (e = ls(e, t, n, a, i || null, r)),
              Mt(o(), [e], s()).map(function (e) {
                return e.toString();
              })
            );
          }
          function Xs() {}
          function Ys(e, t) {
            Js.set(e, t);
          }
          ((i = Es.prototype).getNumReferences = function () {
            return this.g.length;
          }),
            (i.getNumEvicted = function () {
              return this.i;
            }),
            (i.release = function () {
              this.o ||
                ((this.g = []), this.m && this.m.stop(), (this.m = null));
            }),
            (i.Yh = function () {
              this.o = !0;
            }),
            (i.Tb = function (e) {
              for (var t = c(this.g), n = t.next(); !n.done; n = t.next())
                e(n.value);
            }),
            (i.find = function (e) {
              for (var t = this.g.length - 1, n = t; 0 <= n; --n) {
                var i = this.g[n],
                  r = n < t ? this.g[n + 1].startTime : i.endTime;
                if (e >= i.startTime && e < r) return n + this.i;
              }
              return this.g.length && e < this.g[0].startTime ? this.i : null;
            }),
            (i.get = function (e) {
              return 0 == this.g.length ||
                0 > (e -= this.i) ||
                e >= this.g.length
                ? null
                : this.g[e];
            }),
            (i.offset = function (e) {
              if (!this.o)
                for (var t = c(this.g), n = t.next(); !n.done; n = t.next())
                  n.value.offset(e);
            }),
            (i.Dd = function (e) {
              if (!this.o && e.length) {
                var t = Math.round(1e3 * e[0].startTime) / 1e3;
                (this.g = this.g.filter(function (e) {
                  return Math.round(1e3 * e.startTime) / 1e3 < t;
                })),
                  this.g.push.apply(this.g, d(e));
              }
            }),
            (i.Ed = function (e, t) {
              var n = this;
              (e = e.filter(function (e) {
                return (
                  e.endTime > t &&
                  (0 == n.g.length || e.endTime > n.g[0].startTime)
                );
              })),
                this.Dd(e),
                this.Ba(t);
            }),
            (i.Ba = function (e) {
              if (!this.o) {
                var t = this.g.length;
                (this.g = this.g.filter(function (t) {
                  return t.endTime > e;
                })),
                  (this.i += t - this.g.length);
              }
            }),
            (i.Nc = function (e, t, n) {
              if (((n = void 0 !== n && n), !this.o)) {
                for (
                  ;
                  this.g.length && this.g[this.g.length - 1].startTime >= t;

                )
                  this.g.pop();
                for (; this.g.length && this.g[0].endTime <= e; )
                  this.g.shift(), n || this.i++;
                0 != this.g.length &&
                  (((t = new vs(
                    (e = this.g[this.g.length - 1]).startTime,
                    t,
                    e.G,
                    e.startByte,
                    e.endByte,
                    e.ha,
                    e.l,
                    e.F,
                    e.D,
                    e.g,
                    e.tilesLayout,
                    e.C,
                    e.B,
                    e.status,
                    e.aesKey
                  )).mimeType = e.mimeType),
                  (t.codecs = e.codecs),
                  (t.h = e.h),
                  (this.g[this.g.length - 1] = t));
              }
            }),
            (i.Xd = function (e, t) {
              var n = this;
              this.o ||
                (this.m && this.m.stop(),
                (this.m = new Oe(function () {
                  var e = t();
                  e ? n.g.push.apply(n.g, d(e)) : (n.m.stop(), (n.m = null));
                })),
                this.m.ta(e));
            }),
            (Es.prototype[Symbol.iterator] = function () {
              return this.ob(0);
            }),
            (Es.prototype.ob = function (e, t, n) {
              (t = void 0 !== t && t), (n = void 0 !== n && n);
              var i = this.find(e);
              if (null == i) return null;
              var r = this.get(i);
              n ? i++ : i--;
              var a = -1;
              if (r && 0 < r.g.length)
                for (var o = r.g.length - 1; 0 <= o; --o) {
                  var s = r.g[o];
                  if (e >= s.startTime && e < s.endTime) {
                    if (!t) {
                      for (; o && !s.j; ) o--, (s = r.g[o]);
                      if (!s.j)
                        return W("No independent partial segment found!"), null;
                    }
                    n ? i-- : i++, (a = o - 1);
                    break;
                  }
                }
              return new Ps(this, i, a, n);
            }),
            F("shaka.media.SegmentIndex", Es),
            (Es.forSingleSegment = Ds),
            (Es.prototype.getIteratorForTime = Es.prototype.ob),
            (Es.prototype.updateEvery = Es.prototype.Xd),
            (Es.prototype.fit = Es.prototype.Nc),
            (Es.prototype.evict = Es.prototype.Ba),
            (Es.prototype.mergeAndEvict = Es.prototype.Ed),
            (Es.prototype.offset = Es.prototype.offset),
            (Es.prototype.get = Es.prototype.get),
            (Es.prototype.find = Es.prototype.find),
            (Es.prototype.markImmutable = Es.prototype.Yh),
            (Es.prototype.release = Es.prototype.release),
            (Es.prototype.getNumEvicted = Es.prototype.getNumEvicted),
            (Es.prototype.getNumReferences = Es.prototype.getNumReferences),
            ((i = Ps.prototype).Fc = function (e) {
              this.reverse = e;
            }),
            (i.Yg = function () {
              return this.h;
            }),
            (i.current = function () {
              var e = this.i.get(this.h);
              return (
                e &&
                  0 < e.g.length &&
                  e.s &&
                  this.g >= e.g.length &&
                  (this.h++, (this.g = 0), (e = this.i.get(this.h))),
                e && 0 < e.g.length ? e.g[this.g] : e
              );
            }),
            (i.next = function () {
              var e = this.i.get(this.h);
              return (
                this.reverse
                  ? e && 0 < e.g.length
                    ? (this.g--,
                      0 > this.g &&
                        (this.h--,
                        (this.g =
                          (e = this.i.get(this.h)) && 0 < e.g.length
                            ? e.g.length - 1
                            : 0)))
                    : (this.h--, (this.g = 0))
                  : e && 0 < e.g.length
                  ? (this.g++,
                    e.s && this.g == e.g.length && (this.h++, (this.g = 0)))
                  : (this.h++, (this.g = 0)),
                { value: (e = this.current()), done: !e }
              );
            }),
            (i.gf = function () {
              var e = this.current();
              if (e.m && !e.j && (e = this.i.get(this.h)) && 0 < e.g.length)
                for (var t = e.g[this.g]; t.j && !(0 >= this.g); )
                  this.g--, (t = e.g[this.g]);
            }),
            F("shaka.media.SegmentIterator", Ps),
            (Ps.prototype.resetToLastIndependent = Ps.prototype.gf),
            (Ps.prototype.next = Ps.prototype.next),
            (Ps.prototype.current = Ps.prototype.current),
            (Ps.prototype.currentPosition = Ps.prototype.Yg),
            (Ps.prototype.setReverse = Ps.prototype.Fc),
            v(Ls, Es),
            ((i = Ls.prototype).clone = function () {
              var e = new Ls();
              return (e.h = this.h.slice()), (e.i = this.i), e;
            }),
            (i.release = function () {
              for (var e = c(this.h), t = e.next(); !t.done; t = e.next())
                t.value.release();
              this.h = [];
            }),
            (i.Tb = function (e) {
              for (var t = c(this.h), n = t.next(); !n.done; n = t.next())
                n.value.Tb(e);
            }),
            (i.find = function (e) {
              for (
                var t = this.i, n = c(this.h), i = n.next();
                !i.done;
                i = n.next()
              ) {
                var r = (i = i.value).find(e);
                if (null != r) return r + t;
                t += i.getNumEvicted() + i.getNumReferences();
              }
              return null;
            }),
            (i.get = function (e) {
              for (
                var t = this.i, n = c(this.h), i = n.next();
                !i.done;
                i = n.next()
              ) {
                var r = (i = i.value).get(e - t);
                if (r) return r;
                (r = i.getNumReferences()), (t += i.getNumEvicted() + r);
              }
              return null;
            }),
            (i.offset = function () {}),
            (i.Dd = function () {}),
            (i.Ba = function (e) {
              for (var t = c(this.h), n = t.next(); !n.done; n = t.next())
                n.value.Ba(e);
              for (; 1 < this.h.length && 0 == this.h[0].getNumReferences(); )
                (e = this.h.shift()),
                  (this.i += e.getNumEvicted()),
                  e.release();
            }),
            (i.Ed = function () {}),
            (i.Nc = function () {}),
            (i.Xd = function () {}),
            F("shaka.media.MetaSegmentIndex", Ls),
            (Ls.prototype.updateEvery = Ls.prototype.Xd),
            (Ls.prototype.fit = Ls.prototype.Nc),
            (Ls.prototype.mergeAndEvict = Ls.prototype.Ed),
            (Ls.prototype.evict = Ls.prototype.Ba),
            (Ls.prototype.merge = Ls.prototype.Dd),
            (Ls.prototype.offset = Ls.prototype.offset),
            (Ls.prototype.get = Ls.prototype.get),
            (Ls.prototype.find = Ls.prototype.find),
            (Ls.prototype.forEachTopLevelReference = Ls.prototype.Tb),
            (Ls.prototype.release = Ls.prototype.release),
            v(Gs, Es),
            ((i = Gs.prototype).getNumReferences = function () {
              return this.h ? this.h.timeline.length : 0;
            }),
            (i.release = function () {
              Es.prototype.release.call(this), (this.h = null);
            }),
            (i.Ba = function (e) {
              if (this.h) {
                for (
                  var t = 0, n = this.h.timeline, i = 0;
                  i < n.length && n[i].end + this.j <= e;
                  i += 1
                )
                  t += 1;
                0 < t &&
                  ((this.h.timeline = n.slice(t)),
                  this.g.length >= t && (this.g = this.g.slice(t)),
                  (this.i += t),
                  0 === this.getNumReferences() && this.release());
              }
            }),
            (i.find = function (e) {
              if (
                this.h &&
                this.h.timeline &&
                this.h.timeline.length &&
                e < this.h.timeline[0].start + this.j
              )
                return this.i;
              if (!this.h) return null;
              var t = this.h.timeline;
              if (e < this.j || e >= this.l) return null;
              for (var n = t.length - 1, i = 0; i < t.length; i++) {
                var r = t[i],
                  a = r.start + this.j;
                if (
                  ((r =
                    i < n
                      ? t[i + 1].start + this.j
                      : 1 / 0 === this.l
                      ? r.end + this.j
                      : this.l),
                  e >= a && e < r)
                )
                  return i + this.i;
              }
              return null;
            }),
            (i.get = function (e) {
              var t = this;
              if (0 > (e -= this.i) || e >= this.getNumReferences() || !this.h)
                return null;
              var n = this.g[e];
              if (!n) {
                var i = this.h.timeline[e],
                  r = i.ri,
                  a = i.zf + this.h.yf;
                n = this.j - this.h.Kb;
                var o = this.j + i.end,
                  s = o;
                e === this.getNumReferences() - 1 &&
                  1 / 0 !== this.l &&
                  (s = Math.min(s, this.l));
                for (
                  var u = this.h.codecs,
                    l = this.h.mimeType,
                    c = this.h.bandwidth,
                    d = [],
                    h = (i.end - i.start) / i.Kd,
                    f = {},
                    p = 0;
                  p < i.Kd;
                  f = { Zd: void 0, Eg: void 0 }, p++
                ) {
                  var g = i.start + h * p,
                    m = g + h;
                  (f.Eg = p + 1),
                    (f.Zd = null),
                    ((f = new vs(
                      this.j + g,
                      this.j + m,
                      (function (e) {
                        return function () {
                          return t.h
                            ? (null == e.Zd &&
                                (e.Zd = Ws(
                                  t.h.Hb,
                                  t.D,
                                  r,
                                  t.B,
                                  a,
                                  e.Eg,
                                  t.C,
                                  t.G
                                )),
                              e.Zd)
                            : [];
                        };
                      })(f),
                      0,
                      null,
                      this.s,
                      n,
                      this.j,
                      this.l,
                      [],
                      "",
                      null,
                      null,
                      bs,
                      this.A
                    )).codecs = u),
                    (f.mimeType = l),
                    (f.bandwidth = c),
                    0 == this.F ? 0 < p && f.Xc() : 0 != p % this.F && f.Xc(),
                    d.push(f);
                }
                ((n = new vs(
                  this.j + i.start,
                  s,
                  function () {
                    return 0 < i.Kd || !t.h
                      ? []
                      : Ws(t.h.Hb, t.D, r, t.B, a, null, t.C, t.G);
                  },
                  0,
                  null,
                  this.s,
                  n,
                  this.j,
                  this.l,
                  d,
                  "",
                  null,
                  null,
                  bs,
                  this.A,
                  0 < i.Kd
                )).codecs = u),
                  (n.mimeType = l),
                  (n.i = o),
                  (n.bandwidth = c),
                  (this.g[e] = n);
              }
              return n;
            }),
            (i.Tb = function (e) {
              Ks(this);
              for (var t = 0; t < this.getNumReferences(); t++) {
                var n = this.get(t + this.i);
                n && e(n);
              }
            }),
            F("shaka.media.ManifestParser", Xs),
            (Xs.unregisterParserByMime = function (e) {
              Js.delete(e);
            }),
            (Xs.registerParserByMime = Ys),
            (Xs.registerParserByExtension = function () {
              ne(
                "ManifestParser.registerParserByExtension",
                "Please use an ManifestParser with registerParserByMime function."
              );
            }),
            (Xs.AccessibilityPurpose = {
              Qi: "visually impaired",
              Ji: "hard of hearing",
            });
          var Js = new Map();
          function $s(e, t, n) {
            (this.i = e),
              (this.F = t),
              (this.m = this.l = 1 / 0),
              (this.h = 1),
              (this.g = this.j = null),
              (this.o = 0),
              (this.B = !0),
              (this.J = !1),
              (this.G = 0),
              (this.C = void 0 === n || n),
              (this.D = 0),
              (this.A = !1),
              (this.s = e);
          }
          function Zs(e) {
            for (
              var t = new Set(), n = [], i = (e = c(e)).next();
              !i.done;
              i = e.next()
            ) {
              var r = Ni((i = i.value));
              t.has(r) || (n.push(i), t.add(r));
            }
            return (
              (t = Lt("audio", n)),
              (i = Lt("video", n)),
              (e = Lt(Rt, n)),
              (i = (function (e) {
                if (1 >= e.length) return e;
                var t = e.find(function (e) {
                  return (
                    e.startsWith("dvav.") ||
                    e.startsWith("dva1.") ||
                    e.startsWith("dvh1.") ||
                    e.startsWith("dvhe.") ||
                    e.startsWith("dav1.") ||
                    e.startsWith("dvc1.") ||
                    e.startsWith("dvi1.")
                  );
                });
                return t
                  ? Ht('video/mp4; codecs="' + t + '"')
                    ? [t]
                    : e.filter(function (e) {
                        return e != t;
                      })
                  : e;
              })(i)),
              (t = t.concat(i).concat(e)),
              n.length && !t.length ? n : t
            );
          }
          function Qs(e) {
            (this.o = null),
              (this.A = e),
              (this.F = new $o()),
              (this.j = []),
              (this.h = null),
              (this.m = []),
              (this.B = null),
              (this.D = []),
              (this.C = 300),
              (this.l = new Map()),
              (this.i = new Map()),
              (this.g = null),
              (this.s = "UNKNOWN");
          }
          function eu(e, t) {
            var n, i, r, a, o, s, u;
            return L(function (l) {
              return 1 == l.g
                ? ((n = Mt(e.j, [tu(e, t)])),
                  (i = ts(n, e.o.retryParameters)),
                  (r = e.A.networkingEngine.request(8, i)),
                  Zo(e.F, r),
                  T(l, 2),
                  x(l, r.promise, 4))
                : 2 != l.g
                ? ((a = l.h),
                  (o = ft(a.data)),
                  1 == (s = JSON.parse(o)).VERSION &&
                    (function (e, t, n) {
                      null != e.g && (e.g.stop(), (e.g = null));
                      var i = t["RELOAD-URI"] || n;
                      (e.g = new Oe(function () {
                        eu(e, i);
                      })),
                        (n = t.TTL) && (e.C = n);
                      e.g.ea(e.C),
                        (e.m = t["PATHWAY-PRIORITY"] || []),
                        (e.D = t["PATHWAY-CLONES"] || []);
                    })(e, s, a.uri),
                  A(l, 0))
                : (u = k(l)) && 7001 == u.code
                ? l.return()
                : (null != e.g && (e.g.stop(), (e.g = null)),
                  (e.g = new Oe(function () {
                    eu(e, t);
                  })),
                  e.g.ea(e.C),
                  void S(l));
            });
          }
          function tu(e, t) {
            if (!e.m.length) return t;
            t = new se(t);
            var n = e.B || e.m[0],
              i = Math.round(e.A.getBandwidthEstimate()),
              r = t.g;
            return (
              "DASH" == e.s
                ? (r.add("_DASH_pathway", n),
                  r.add("_DASH_throughput", String(i)))
                : "HLS" == e.s &&
                  (r.add("_HLS_pathway", n),
                  r.add("_HLS_throughput", String(i))),
              xe(r),
              r.Jc && de(t, r),
              t.toString()
            );
          }
          function nu(e, t, n, i) {
            var r = e.l.get(t);
            r || (r = new Map()), r.set(n, i), e.l.set(t, r);
          }
          function iu(e, t, n) {
            (n = void 0 !== n && n), (t = e.l.get(t) || new Map());
            for (
              var i = [], r = c(e.m), a = r.next(), o = {};
              !a.done;
              o = { Ac: void 0 }, a = r.next()
            )
              if (((o.Ac = a.value), (a = t.get(o.Ac))))
                i.push({ cf: o.Ac, location: a });
              else if (
                (a = e.D.find(
                  (function (e) {
                    return function (t) {
                      return t.Ki == e.Ac;
                    };
                  })(o)
                ))
              ) {
                var s = t.get(a["BASE-ID"]);
                s &&
                  (a["URI-REPLACEMENT"].Lg
                    ? (le((s = new se(s)), a["URI-REPLACEMENT"].Lg),
                      i.push({ cf: o.Ac, location: s.toString() }))
                    : i.push({ cf: o.Ac, location: s }));
              }
            for (
              r = Date.now(), a = (o = c(e.i.keys())).next();
              !a.done;
              a = o.next()
            )
              (a = a.value), r > (s = e.i.get(a)) && e.i.delete(a);
            if (
              ((i = i.filter(function (t) {
                for (var n = c(e.i.keys()), i = n.next(); !i.done; i = n.next())
                  if (i.value.includes(new se(t.location).gb)) return !1;
                return !0;
              })),
              i.length && (e.B = i[0].cf),
              (i = i.map(function (e) {
                return e.location;
              })),
              !i.length && e.h)
            )
              for (o = (r = c(e.h.split(","))).next(); !o.done; o = r.next())
                (o = t.get(o.value)) && ((e.B = e.h), i.push(o));
            if (!i.length)
              for (r = (t = c(t.values())).next(); !r.done; r = t.next())
                i.push(r.value);
            return n ? i : Mt(e.j, i);
          }
          function ru(e, t, n, i, r) {
            return (
              (e = ts(e, i, r)),
              (0 == t && null == n) ||
                (e.headers.Range = n
                  ? "bytes=" + t + "-" + n
                  : "bytes=" + t + "-"),
              e
            );
          }
          function au() {
            (this.l = []),
              (this.h = []),
              (this.g = []),
              (this.j = []),
              (this.i = []),
              (this.s = this.o = !1),
              (this.m = new Set());
          }
          function ou(e, t) {
            for (
              var n = [], i = [], r = [], a = [], o = (e = c(e)).next();
              !o.done;
              o = e.next()
            ) {
              var s = o.value;
              o = new Map(
                s.audioStreams.map(function (e) {
                  return [Mu(e), e];
                })
              );
              var u = new Map(
                  s.videoStreams.map(function (e) {
                    return [Cu(e), e];
                  })
                ),
                l = new Map(
                  s.textStreams.map(function (e) {
                    return [Eu(e), e];
                  })
                );
              if (
                ((s = new Map(
                  s.imageStreams.map(function (e) {
                    return [Du(e), e];
                  })
                )),
                t)
              ) {
                var d = Tu(Rt);
                l.set(Eu(d), d), (d = Tu("image")), s.set(Du(d), d);
              }
              n.push(o), i.push(u), r.push(l), a.push(s);
            }
            return { Ff: n, Jg: i, Fg: r, Yf: a };
          }
          function su(e, t, n, i, r) {
            var a,
              o,
              s,
              u,
              l,
              d,
              h,
              f,
              p,
              g,
              m,
              v,
              y,
              b,
              w,
              S,
              T,
              A,
              k = du,
              I = hu;
            return L(function (C) {
              switch (C.g) {
                case 1:
                  for (a = [], o = 0; o < n.length; o++)
                    o >= i ? a.push(new Set(n[o].values())) : a.push(new Set());
                  (s = c(t)), (u = s.next());
                case 2:
                  if (u.done) {
                    C.u(4);
                    break;
                  }
                  return (
                    (l = u.value),
                    x(
                      C,
                      (function (e, t, n, i, r, a, o) {
                        return L(function (s) {
                          return 1 == s.g
                            ? (fu(e, n, t, 0 < o),
                              t.matchedStreams
                                ? t.segmentIndex
                                  ? x(s, uu(t, i + o), 2)
                                  : s.u(2)
                                : s.return(!1))
                            : (cu(t, i, r, a, o), s.return(!0));
                        });
                      })(e, l, n, i, I, a, r),
                      5
                    )
                  );
                case 5:
                  if (!C.h) throw new Ee(2, 4, 4037);
                  (u = s.next()), C.u(2);
                  break;
                case 4:
                  for (d = c(a), h = d.next(); !h.done; h = d.next())
                    for (
                      f = h.value, p = c(f), g = p.next();
                      !g.done;
                      g = p.next()
                    )
                      (m = g.value), (v = lu(e, m, n, k, I, a)) && t.push(v);
                  for (y = c(a), b = y.next(); !b.done; b = y.next())
                    for (
                      w = b.value, S = c(w), T = S.next(), A = {};
                      !T.done;
                      A = { qf: void 0 }, T = S.next()
                    )
                      if (
                        ((A.qf = T.value),
                        !Iu(A.qf) &&
                          t.some(
                            (function (t) {
                              return function (n) {
                                return mu(e, t.qf, n);
                              };
                            })(A)
                          ))
                      )
                        throw new Ee(2, 4, 4037);
                  return C.return(t);
              }
            });
          }
          function uu(e, t) {
            var n, i, r, a, o, s;
            return L(function (u) {
              if (1 == u.g) {
                for (n = [], i = e.matchedStreams, r = t; r < i.length; r++)
                  (a = i[r]),
                    n.push(a.createSegmentIndex()),
                    a.trickModeVideo &&
                      !a.trickModeVideo.segmentIndex &&
                      n.push(a.trickModeVideo.createSegmentIndex()),
                    a.dependencyStream &&
                      !a.dependencyStream.segmentIndex &&
                      n.push(a.dependencyStream.createSegmentIndex());
                return x(u, Promise.all(n), 2);
              }
              if (e.segmentIndex instanceof Ls)
                for (o = t; o < i.length; o++)
                  (s = i[o]).segmentIndex &&
                    e.segmentIndex.h.push(s.segmentIndex);
              S(u);
            });
          }
          function lu(e, t, n, i, r, a) {
            if (Iu(t)) return null;
            var o = i(t);
            return (
              fu(e, n, o),
              o.createSegmentIndex &&
                (o.createSegmentIndex = function () {
                  return L(function (e) {
                    return o.segmentIndex
                      ? e.u(0)
                      : ((o.segmentIndex = new Ls()), x(e, uu(o, 0), 0));
                  });
                }),
              o.matchedStreams && o.matchedStreams.length
                ? (cu(o, 0, r, a, 0), o)
                : null
            );
          }
          function cu(e, t, n, i, r) {
            var a = e.matchedStreams;
            for (t += r; t < a.length; t++) {
              var o = a[t];
              n(e, o);
              var s = !0;
              if (
                ("audio" == e.type &&
                  0 == ir(e.language, o.language) &&
                  (s = !1),
                s && (i[t - r].delete(o), o.fullMimeTypes))
              )
                for (
                  s = (o = c(o.fullMimeTypes.values())).next();
                  !s.done;
                  s = o.next()
                )
                  e.fullMimeTypes.add(s.value);
            }
          }
          function du(e) {
            var t = Object.assign({}, e);
            return (
              (t.originalId = null),
              (t.createSegmentIndex = function () {
                return Promise.resolve();
              }),
              (t.closeSegmentIndex = function () {
                if (
                  (t.segmentIndex &&
                    (t.segmentIndex.release(), (t.segmentIndex = null)),
                  t.matchedStreams)
                )
                  for (
                    var e = c(t.matchedStreams), n = e.next();
                    !n.done;
                    n = e.next()
                  )
                    (n = n.value).segmentIndex &&
                      (n.segmentIndex.release(), (n.segmentIndex = null));
              }),
              (t.roles = t.roles.slice()),
              (t.segmentIndex = null),
              (t.emsgSchemeIdUris = []),
              (t.keyIds = new Set(e.keyIds)),
              (t.closedCaptions = e.closedCaptions
                ? new Map(e.closedCaptions)
                : null),
              (t.trickModeVideo = null),
              (t.dependencyStream = null),
              t
            );
          }
          function hu(e, t) {
            function n(e, t) {
              e || (e = []);
              for (var n = (t = c(t)).next(); !n.done; n = t.next())
                (n = n.value), e.includes(n) || e.push(n);
              return e;
            }
            (e.roles = n(e.roles, t.roles)),
              t.emsgSchemeIdUris &&
                (e.emsgSchemeIdUris = n(
                  e.emsgSchemeIdUris,
                  t.emsgSchemeIdUris
                ));
            for (var i = c(t.keyIds), r = i.next(); !r.done; r = i.next())
              e.keyIds.add(r.value);
            if (
              (null == e.originalId
                ? (e.originalId = t.originalId)
                : (i = t.originalId || "") &&
                  !e.originalId.endsWith(i) &&
                  (e.originalId += "," + i),
              (i = Le(e.drmInfos, t.drmInfos)),
              t.drmInfos.length && e.drmInfos.length && !i.length)
            )
              throw new Ee(2, 4, 4038);
            if (
              ((e.drmInfos = i),
              (e.encrypted = e.encrypted || t.encrypted),
              t.closedCaptions)
            )
              for (
                e.closedCaptions || (e.closedCaptions = new Map()),
                  r = (i = c(t.closedCaptions)).next();
                !r.done;
                r = i.next()
              ) {
                var a = c(r.value);
                (r = a.next().value),
                  (a = a.next().value),
                  e.closedCaptions.set(r, a);
              }
            e.bandwidth &&
              t.bandwidth &&
              (e.bandwidth = Math.max(e.bandwidth, t.bandwidth)),
              t.trickModeVideo
                ? (e.trickModeVideo ||
                    ((e.trickModeVideo = du(t.trickModeVideo)),
                    (e.trickModeVideo.matchedStreams = []),
                    (e.trickModeVideo.createSegmentIndex = function () {
                      if (e.trickModeVideo.segmentIndex)
                        return Promise.resolve();
                      for (
                        var t = new Ls(),
                          n = c(e.trickModeVideo.matchedStreams),
                          i = n.next();
                        !i.done;
                        i = n.next()
                      )
                        t.h.push(i.value.segmentIndex);
                      return (
                        (e.trickModeVideo.segmentIndex = t), Promise.resolve()
                      );
                    })),
                  e.trickModeVideo.matchedStreams.push(t.trickModeVideo),
                  hu(e.trickModeVideo, t.trickModeVideo))
                : e.trickModeVideo &&
                  (e.trickModeVideo.matchedStreams.push(t),
                  hu(e.trickModeVideo, t)),
              t.dependencyStream
                ? (e.dependencyStream ||
                    ((e.dependencyStream = du(t.dependencyStream)),
                    (e.dependencyStream.matchedStreams = []),
                    (e.dependencyStream.createSegmentIndex = function () {
                      if (e.dependencyStream.segmentIndex)
                        return Promise.resolve();
                      for (
                        var t = new Ls(),
                          n = c(e.dependencyStream.matchedStreams),
                          i = n.next();
                        !i.done;
                        i = n.next()
                      )
                        t.h.push(i.value.segmentIndex);
                      return (
                        (e.dependencyStream.segmentIndex = t), Promise.resolve()
                      );
                    })),
                  e.dependencyStream.matchedStreams.push(t.dependencyStream),
                  hu(e.dependencyStream, t.dependencyStream))
                : e.dependencyStream &&
                  (e.dependencyStream.matchedStreams.push(t),
                  hu(e.dependencyStream, t));
          }
          function fu(e, t, n, i) {
            i = void 0 !== i && i ? n.matchedStreams : [];
            for (var r = (t = c(t)).next(); !r.done; r = t.next()) {
              if (!(r = pu(e, r.value, n))) return;
              i.push(r);
            }
            n.matchedStreams = i;
          }
          function pu(e, t, n) {
            var i = { audio: Mu, video: Cu, text: Eu, image: Du }[n.type],
              r = null,
              a = i(n);
            if (t.has(a)) r = t.get(a);
            else {
              a = {
                audio: function (t, n) {
                  return mu(e, t, n);
                },
                video: function (t, n) {
                  return mu(e, t, n);
                },
                text: vu,
                image: yu,
              }[n.type];
              for (
                var o = { audio: bu, video: wu, text: xu, image: Su }[n.type],
                  s = c(t.values()),
                  u = s.next();
                !u.done;
                u = s.next()
              )
                !a(n, (u = u.value)) ||
                  n.fastSwitching != u.fastSwitching ||
                  (r && !o(n, r, u)) ||
                  (r = u);
            }
            return e.s && !Iu(r) && t.delete(i(r)), r;
          }
          function gu(e, t) {
            return e.mimeType == t.mimeType && Pu(e.codecs) === Pu(t.codecs);
          }
          function mu(e, t, n) {
            return (
              !(e = !gu(t, n) && !e.o) &&
                (e = t.drmInfos) &&
                ((t = t.drmInfos),
                (n = n.drmInfos),
                (e = !(
                  !t.length ||
                  !n.length ||
                  t === n ||
                  0 < Le(t, n).length
                ))),
              !e
            );
          }
          function vu(e, t) {
            return (
              !t.language ||
              (e.forced === t.forced &&
                0 != ir(e.language, t.language) &&
                t.kind == e.kind)
            );
          }
          function yu() {
            return !0;
          }
          function bu(e, t, n) {
            var i = gu(e, t),
              r = gu(e, n);
            if (i && !r) return !1;
            if (!i && r) return !0;
            if (
              ((i = ir(e.language, t.language)),
              (r = ir(e.language, n.language)) > i)
            )
              return !0;
            if (r < i) return !1;
            if (t.label !== n.label) {
              if (e.label === t.label) return !1;
              if (e.label === n.label) return !0;
            }
            if (e.roles.length) {
              if (
                ((i = t.roles.filter(function (t) {
                  return e.roles.includes(t);
                })),
                (r = n.roles.filter(function (t) {
                  return e.roles.includes(t);
                })).length > i.length)
              )
                return !0;
              if (r.length < i.length) return !1;
              if (n.roles.length !== t.roles.length)
                return n.roles.length < t.roles.length;
            } else {
              if (!n.roles.length && t.roles.length) return !0;
              if (n.roles.length && !t.roles.length) return !1;
            }
            return (
              !(t.primary || !n.primary) ||
              (!(t.primary && !n.primary) &&
                ((i = Au(e.channelsCount, t.channelsCount, n.channelsCount)) ==
                  Lu ||
                  (i != Nu &&
                    ((i = Au(
                      e.audioSamplingRate,
                      t.audioSamplingRate,
                      n.audioSamplingRate
                    )) == Lu ||
                      (i != Nu &&
                        !(
                          !e.bandwidth ||
                          ku(e.bandwidth, t.bandwidth, n.bandwidth) != Lu
                        ))))))
            );
          }
          function wu(e, t, n) {
            var i = gu(e, t),
              r = gu(e, n);
            if (i && !r) return !1;
            if (!i && r) return !0;
            if (
              (i = Au(
                e.width * e.height,
                t.width * t.height,
                n.width * n.height
              )) == Lu
            )
              return !0;
            if (i == Nu) return !1;
            if (e.frameRate) {
              if ((i = Au(e.frameRate, t.frameRate, n.frameRate)) == Lu)
                return !0;
              if (i == Nu) return !1;
            }
            return !(
              !e.bandwidth || ku(e.bandwidth, t.bandwidth, n.bandwidth) != Lu
            );
          }
          function xu(e, t, n) {
            var i = ir(e.language, t.language),
              r = ir(e.language, n.language);
            if (r > i) return !0;
            if (r < i) return !1;
            if (!t.primary && n.primary) return !0;
            if (t.primary && !n.primary) return !1;
            if (t.label !== n.label) {
              if (e.label === t.label) return !1;
              if (e.label === n.label) return !0;
            }
            if (e.roles.length) {
              if (
                ((i = t.roles.filter(function (t) {
                  return e.roles.includes(t);
                })),
                (r = n.roles.filter(function (t) {
                  return e.roles.includes(t);
                })).length > i.length)
              )
                return !0;
              if (r.length < i.length) return !1;
            } else {
              if (!n.roles.length && t.roles.length) return !0;
              if (n.roles.length && !t.roles.length) return !1;
            }
            return (
              n.mimeType == e.mimeType &&
              n.codecs == e.codecs &&
              (t.mimeType != e.mimeType || t.codecs != e.codecs)
            );
          }
          function Su(e, t, n) {
            return (
              Au(e.width * e.height, t.width * t.height, n.width * n.height) ==
              Lu
            );
          }
          function Tu(e) {
            return {
              id: 0,
              originalId: "",
              groupId: null,
              createSegmentIndex: function () {
                return Promise.resolve();
              },
              segmentIndex: new Es([]),
              mimeType: "",
              codecs: "",
              encrypted: !1,
              drmInfos: [],
              keyIds: new Set(),
              language: "",
              originalLanguage: null,
              label: null,
              type: e,
              primary: !1,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: null,
              roles: [],
              forced: !1,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: !1,
              closedCaptions: null,
              accessibilityPurpose: null,
              external: !1,
              fastSwitching: !1,
              fullMimeTypes: new Set(),
              isAudioMuxedInVideo: !1,
              baseOriginalId: null,
            };
          }
          function Au(e, t, n) {
            if (t == e && e != n) return Nu;
            if (n == e && e != t) return Lu;
            if (t > e) {
              if (n <= e || n - e < t - e) return Lu;
              if (n - e > t - e) return Nu;
            } else {
              if (n > e) return Nu;
              if (e - n < e - t) return Lu;
              if (e - n > e - t) return Nu;
            }
            return Ru;
          }
          function ku(e, t, n) {
            return (
              (t = Math.abs(e - t)),
              (e = Math.abs(e - n)) < t ? Lu : t < e ? Nu : Ru
            );
          }
          function Iu(e) {
            switch (e.type) {
              case Rt:
                return !e.language;
              case "image":
                return !e.tilesLayout;
              default:
                return !1;
            }
          }
          function Cu(e) {
            return JSON.stringify([
              e.fastSwitching,
              e.width,
              e.frameRate,
              Pu(e.codecs),
              e.mimeType,
              e.label,
              e.roles,
              e.closedCaptions ? Array.from(e.closedCaptions.entries()) : null,
              e.bandwidth,
              e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
              Array.from(e.keyIds),
            ]);
          }
          function Mu(e) {
            return JSON.stringify([
              e.fastSwitching,
              e.channelsCount,
              e.language,
              e.bandwidth,
              e.label,
              Pu(e.codecs),
              e.mimeType,
              e.roles,
              e.audioSamplingRate,
              e.primary,
              e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
              Array.from(e.keyIds),
            ]);
          }
          function Eu(e) {
            return JSON.stringify([
              e.language,
              e.label,
              e.codecs,
              e.mimeType,
              e.bandwidth,
              e.roles,
            ]);
          }
          function Du(e) {
            return JSON.stringify([e.width, e.codecs, e.mimeType]);
          }
          function Pu(e) {
            if (!_u.has(e)) {
              var t = Ri(e);
              _u.set(e, t);
            }
            return _u.get(e);
          }
          ((i = $s.prototype).getDuration = function () {
            return this.l;
          }),
            (i.rh = function () {
              return this.h;
            }),
            (i.wi = function (e) {
              this.i = e;
            }),
            (i.nb = function (e) {
              this.l = e;
            }),
            (i.yh = function () {
              return this.i;
            }),
            (i.wg = function (e) {
              this.o = e;
            }),
            (i.Sd = function (e) {
              e && !this.B && (this.J = !0), (this.B = e);
            }),
            (i.pf = function (e) {
              this.m = e;
            }),
            (i.vd = function () {
              return this.m;
            }),
            (i.xg = function (e) {
              this.F = e;
            }),
            (i.ih = function () {
              return this.F;
            }),
            (i.jg = function (e, t) {
              if (0 != e.length) {
                var n = (Date.now() + this.o) / 1e3;
                if (
                  0 !=
                  (e = e.filter(function (e) {
                    return e.start + t < n;
                  })).length
                ) {
                  var i = e[e.length - 1].end + t;
                  this.Hd(e[0].start + t),
                    (this.h = e.reduce(function (e, t) {
                      return Math.max(e, t.end - t.start);
                    }, this.h)),
                    (this.g = Math.max(this.g, i)),
                    null != this.i &&
                      this.C &&
                      !this.A &&
                      (this.i = n - this.g - this.h);
                }
              }
            }),
            (i.Ye = function (e) {
              if (0 != e.length) {
                for (
                  var t = e[0].startTime,
                    n = e[0].endTime,
                    i = (Date.now() + this.o) / 1e3,
                    r = (e = c(e)).next();
                  !r.done;
                  r = e.next()
                )
                  i < (r = r.value).startTime ||
                    ((t = Math.min(t, r.startTime)),
                    (n = Math.max(n, r.endTime)),
                    (this.h = Math.max(this.h, r.endTime - r.startTime)));
                this.Hd(t),
                  (this.g = Math.max(this.g, n)),
                  null != this.i &&
                    this.C &&
                    !this.A &&
                    (this.i = i - this.g - this.h);
              }
            }),
            (i.ig = function (e, t) {
              this.Hd(e),
                1 / 0 == t || this.R() || (this.g = Math.max(this.g, t));
            }),
            (i.sh = function () {
              return this.g;
            }),
            (i.Ve = function () {
              this.A = !0;
            }),
            (i.Rh = function () {
              return this.A;
            }),
            (i.ui = function (e) {
              this.s = e;
            }),
            (i.nh = function () {
              return this.s;
            }),
            (i.Hd = function (e) {
              null == this.j
                ? (this.j = e)
                : this.J || (this.j = Math.min(this.j, e));
            }),
            (i.Xe = function (e) {
              this.h = Math.max(this.h, e);
            }),
            (i.offset = function (e) {
              null != this.j && (this.j += e), null != this.g && (this.g += e);
            }),
            (i.R = function () {
              return 1 / 0 == this.l && !this.B;
            }),
            (i.wc = function () {
              return 1 / 0 != this.l && !this.B;
            }),
            (i.xb = function () {
              return Math.max(this.G, this.Gb() - this.m);
            }),
            (i.Bg = function (e) {
              this.G = e;
            }),
            (i.Gb = function () {
              return this.R() || this.wc()
                ? Math.min(
                    Math.max(0, (Date.now() + this.o) / 1e3 - this.h - this.i) +
                      this.D,
                    this.l
                  )
                : this.g
                ? Math.min(this.g, this.l)
                : this.l;
            }),
            (i.Oc = function (e) {
              var t = Math.max(this.j, this.G);
              return 1 / 0 == this.m
                ? Math.ceil(1e3 * t) / 1e3
                : Math.max(t, Math.min(this.Gb() - this.m + e, this.bb()));
            }),
            (i.pb = function () {
              return this.Oc(0);
            }),
            (i.bb = function () {
              return Math.max(
                0,
                this.Gb() - (this.R() || this.wc() ? this.F : 0)
              );
            }),
            (i.Hg = function () {
              return !(null == this.i || (null != this.g && this.C));
            }),
            (i.vg = function (e) {
              this.D = e;
            }),
            (i.eh = function () {
              return this.D;
            }),
            F("shaka.media.PresentationTimeline", $s),
            ($s.prototype.getAvailabilityTimeOffset = $s.prototype.eh),
            ($s.prototype.setAvailabilityTimeOffset = $s.prototype.vg),
            ($s.prototype.usingPresentationStartTime = $s.prototype.Hg),
            ($s.prototype.getSeekRangeEnd = $s.prototype.bb),
            ($s.prototype.getSeekRangeStart = $s.prototype.pb),
            ($s.prototype.getSafeSeekRangeStart = $s.prototype.Oc),
            ($s.prototype.getSegmentAvailabilityEnd = $s.prototype.Gb),
            ($s.prototype.setUserSeekStart = $s.prototype.Bg),
            ($s.prototype.getSegmentAvailabilityStart = $s.prototype.xb),
            ($s.prototype.isInProgress = $s.prototype.wc),
            ($s.prototype.isLive = $s.prototype.R),
            ($s.prototype.offset = $s.prototype.offset),
            ($s.prototype.notifyMaxSegmentDuration = $s.prototype.Xe),
            ($s.prototype.notifyMinSegmentStartTime = $s.prototype.Hd),
            ($s.prototype.getInitialProgramDateTime = $s.prototype.nh),
            ($s.prototype.setInitialProgramDateTime = $s.prototype.ui),
            ($s.prototype.isStartTimeLocked = $s.prototype.Rh),
            ($s.prototype.lockStartTime = $s.prototype.Ve),
            ($s.prototype.getMaxSegmentEndTime = $s.prototype.sh),
            ($s.prototype.notifyPeriodDuration = $s.prototype.ig),
            ($s.prototype.notifySegments = $s.prototype.Ye),
            ($s.prototype.notifyTimeRange = $s.prototype.jg),
            ($s.prototype.getDelay = $s.prototype.ih),
            ($s.prototype.setDelay = $s.prototype.xg),
            ($s.prototype.getSegmentAvailabilityDuration = $s.prototype.vd),
            ($s.prototype.setSegmentAvailabilityDuration = $s.prototype.pf),
            ($s.prototype.setStatic = $s.prototype.Sd),
            ($s.prototype.setClockOffset = $s.prototype.wg),
            ($s.prototype.getPresentationStartTime = $s.prototype.yh),
            ($s.prototype.setDuration = $s.prototype.nb),
            ($s.prototype.setPresentationStartTime = $s.prototype.wi),
            ($s.prototype.getMaxSegmentDuration = $s.prototype.rh),
            ($s.prototype.getDuration = $s.prototype.getDuration),
            (Qs.prototype.configure = function (e) {
              this.o = e;
            }),
            (Qs.prototype.destroy = function () {
              return (
                (this.A = this.o = null),
                (this.j = []),
                (this.h = null),
                (this.m = []),
                (this.D = []),
                this.l.clear(),
                null != this.g && (this.g.stop(), (this.g = null)),
                this.F.destroy()
              );
            }),
            (Qs.prototype.setManifestType = function (e) {
              this.s = e;
            }),
            (Qs.prototype.banLocation = function (e) {
              this.i.set(e, Date.now() + 6e4);
            }),
            ((i = au.prototype).release = function () {
              for (
                var e = c(this.h.concat(this.g, this.j, this.i)), t = e.next();
                !t.done;
                t = e.next()
              )
                (t = t.value).segmentIndex && t.segmentIndex.release();
              (this.h = []),
                (this.g = []),
                (this.j = []),
                (this.i = []),
                (this.l = []),
                (this.s = this.o = !1),
                this.m.clear();
            }),
            (i.Hh = function () {
              return this.l;
            }),
            (i.Qe = function () {
              return this.j.slice();
            }),
            (i.lh = function () {
              return this.i;
            }),
            (i.Lf = function (e, t) {
              if (e) {
                if ("audio" == e.type)
                  for (var n = c(this.h), i = n.next(); !i.done; i = n.next())
                    (i = i.value).matchedStreams = i.matchedStreams.filter(
                      function (t) {
                        return t !== e;
                      }
                    );
                else if ("video" == e.type)
                  for (i = (n = c(this.g)).next(); !i.done; i = n.next())
                    ((i = i.value).matchedStreams = i.matchedStreams.filter(
                      function (t) {
                        return t !== e;
                      }
                    )),
                      i.trickModeVideo &&
                        (i.trickModeVideo.matchedStreams =
                          i.trickModeVideo.matchedStreams.filter(function (t) {
                            return t !== e;
                          })),
                      i.dependencyStream &&
                        (i.dependencyStream.matchedStreams =
                          i.dependencyStream.matchedStreams.filter(function (
                            t
                          ) {
                            return t !== e;
                          }));
                else if (e.type == Rt)
                  for (i = (n = c(this.j)).next(); !i.done; i = n.next())
                    (i = i.value).matchedStreams = i.matchedStreams.filter(
                      function (t) {
                        return t !== e;
                      }
                    );
                else if ("image" == e.type)
                  for (i = (n = c(this.i)).next(); !i.done; i = n.next())
                    (i = i.value).matchedStreams = i.matchedStreams.filter(
                      function (t) {
                        return t !== e;
                      }
                    );
                e.segmentIndex && e.closeSegmentIndex(), this.m.delete(t);
              }
            }),
            (i.re = function (e, t, n) {
              n = void 0 !== n && n;
              var i,
                r,
                a,
                o,
                s,
                u,
                l,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b,
                w,
                T,
                A,
                k,
                I,
                C,
                M,
                E,
                D,
                P,
                R,
                N,
                _,
                U,
                j,
                O,
                B = this;
              return L(function (L) {
                if (1 == L.g) {
                  if (((i = Nt), !t && 1 == e.length))
                    return (
                      (r = ou(e, !1)),
                      (a = r.Ff),
                      (o = r.Jg),
                      (s = r.Fg),
                      (u = r.Yf),
                      (B.h = Array.from(a[0].values())),
                      (B.g = Array.from(o[0].values())),
                      (B.j = Array.from(s[0].values())),
                      (B.i = Array.from(u[0].values())),
                      L.u(2)
                    );
                  for (l = n ? B.m.size : 0, d = -1, h = 0; h < e.length; h++)
                    (f = e[h]),
                      B.m.has(f.id) || (B.m.add(f.id), -1 == d && (d = h));
                  return -1 == d
                    ? L.return()
                    : ((p = ou(e, !0)),
                      (g = p.Ff),
                      (m = p.Jg),
                      (v = p.Fg),
                      (y = p.Yf),
                      x(
                        L,
                        Promise.all([
                          su(B, B.h, g, d, l),
                          su(B, B.g, m, d, l),
                          su(B, B.j, v, d, l),
                          su(B, B.i, y, d, l),
                        ]),
                        2
                      ));
                }
                if (((b = 0), (w = []), B.g.length && B.h.length))
                  for (E = c(B.h), D = E.next(); !D.done; D = E.next())
                    for (
                      P = D.value, R = c(B.g), N = R.next();
                      !N.done;
                      N = R.next()
                    )
                      (_ = N.value),
                        (U = Le(P.drmInfos, _.drmInfos)),
                        (P.drmInfos.length && _.drmInfos.length && !U.length) ||
                          ((j = (P.bandwidth || 0) + (_.bandwidth || 0)),
                          P.dependencyStream &&
                            (j += P.dependencyStream.bandwidth || 0),
                          _.dependencyStream &&
                            (j += _.dependencyStream.bandwidth || 0),
                          (O = b++),
                          w.push({
                            id: O,
                            language: P.language,
                            disabledUntilTime: 0,
                            primary: P.primary,
                            audio: P,
                            video: _,
                            bandwidth: j,
                            drmInfos: U,
                            allowedByApplication: !0,
                            allowedByKeySystem: !0,
                            decodingInfos: [],
                          }));
                else
                  for (
                    T = B.g.length ? B.g : B.h, A = c(T), k = A.next();
                    !k.done;
                    k = A.next()
                  )
                    (I = k.value),
                      (C = b++),
                      (M = I.bandwidth || 0),
                      I.dependencyStream &&
                        (M += I.dependencyStream.bandwidth || 0),
                      w.push({
                        id: C,
                        language: I.language,
                        disabledUntilTime: 0,
                        primary: I.primary,
                        audio: I.type == i.P ? I : null,
                        video: I.type == i.ja ? I : null,
                        bandwidth: M,
                        drmInfos: I.drmInfos,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      });
                (B.l = w), S(L);
              });
            }),
            (i.ug = function (e) {
              this.o = e;
            }),
            (i.Ag = function (e) {
              this.s = e;
            }),
            F("shaka.util.PeriodCombiner", au),
            (au.prototype.setUseStreamOnce = au.prototype.Ag),
            (au.prototype.setAllowMultiTypeVariants = au.prototype.ug),
            (au.prototype.combinePeriods = au.prototype.re),
            (au.prototype.deleteStream = au.prototype.Lf),
            (au.prototype.getImageStreams = au.prototype.lh),
            (au.prototype.getTextStreams = au.prototype.Qe),
            (au.prototype.getVariants = au.prototype.Hh);
          var Lu = 1,
            Ru = 0,
            Nu = -1,
            _u = new Map();
          function Uu() {}
          function ju(e) {
            return new se((e = gt(e))).gb;
          }
          function Ou(e, t, n) {
            function i(e) {
              Ce(a).setUint32(o, e.byteLength, !0),
                (o += 4),
                a.set(ke(e), o),
                (o += e.byteLength);
            }
            if (!n || !n.byteLength) throw new Ee(2, 6, 6015);
            var r;
            (r = "string" == typeof t ? vt(t, !0) : t),
              (e = vt((e = gt(e)), !0));
            var a = new Uint8Array(
                12 + e.byteLength + r.byteLength + n.byteLength
              ),
              o = 0;
            return i(e), i(r), i(n), a;
          }
          function Bu(e, t, n) {
            return "skd" !== t
              ? e
              : ((t = n.serverCertificate),
                Ou(e, (n = gt(e).split("skd://").pop()), t));
          }
          function Fu(e, t) {
            2 === e &&
              (e = t.drmInfo) &&
              Ne(e.keySystem) &&
              (t.headers["Content-Type"] = "application/octet-stream");
          }
          function Hu(e, t, n) {
            for (
              n = void 0 === n || n,
                this.h = e,
                this.g = new Set([e]),
                t = (e = c((t = t || []))).next();
              !t.done;
              t = e.next()
            )
              this.add(t.value, n);
          }
          function Vu(e, t) {
            if (e.mimeType != t.mimeType) return !1;
            if (
              ((e = e.codecs.split(",").map(function (e) {
                return Ni(e);
              })),
              (t = t.codecs.split(",").map(function (e) {
                return Ni(e);
              })),
              e.length != t.length)
            )
              return !1;
            e.sort(), t.sort();
            for (var n = 0; n < e.length; n++) if (e[n] != t[n]) return !1;
            return !0;
          }
          function zu(e, t) {
            if (
              ((e = new Set(e)),
              (t = new Set(t)),
              e.delete("main"),
              t.delete("main"),
              e.size != t.size)
            )
              return !1;
            for (var n = (e = c(e)).next(); !n.done; n = e.next())
              if (!t.has(n.value)) return !1;
            return !0;
          }
          function Gu() {}
          function qu() {
            this.g = null;
          }
          function Ku() {}
          function Wu(e, t, n, i, r) {
            var a,
              o = r in i,
              s = o
                ? n.constructor == Object && 0 == Object.keys(i).length
                : n.constructor == Object && 0 == Object.keys(n).length,
              u = o || s,
              l = !0;
            for (a in t) {
              var c = r + "." + a,
                d = o ? i[r] : n[a];
              u || a in n
                ? void 0 === t[a]
                  ? void 0 === d || u
                    ? delete e[a]
                    : (e[a] = hn(d))
                  : s
                  ? (e[a] = t[a])
                  : d.constructor == Object &&
                    t[a] &&
                    t[a].constructor == Object
                  ? (e[a] || (e[a] = hn(d)),
                    (c = Wu(e[a], t[a], d, i, c)),
                    (l = l && c))
                  : typeof t[a] != typeof d ||
                    null == t[a] ||
                    ("function" != typeof t[a] &&
                      t[a].constructor != d.constructor)
                  ? (W("Invalid config, wrong type for " + c), (l = !1))
                  : "function" == typeof n[a] && n[a].length != t[a].length
                  ? (X("Unexpected number of arguments for " + c),
                    (e[a] = t[a]))
                  : (e[a] = Array.isArray(e[a]) ? t[a].slice() : t[a])
                : (W("Invalid config, unrecognized key " + c), (l = !1));
            }
            return l;
          }
          function Xu(e, t) {
            for (
              var n = {}, i = n, r = 0, a = 0;
              !(0 > (r = e.indexOf(".", r)));

            )
              (0 != r && "\\" == e[r - 1]) ||
                ((i[(a = e.substring(a, r).replace(/\\\./g, "."))] = {}),
                (i = i[a]),
                (a = r + 1)),
                (r += 1);
            return (i[e.substring(a).replace(/\\\./g, ".")] = t), n;
          }
          function Yu(e, t) {
            return e && t;
          }
          function Ju(e, t) {
            function n(e) {
              return e && "object" == typeof e && !Array.isArray(e);
            }
            return (
              (e = (function e(t, i) {
                return Object.keys(t).reduce(function (r, a) {
                  var o = t[a];
                  return (
                    i.hasOwnProperty(a)
                      ? o instanceof HTMLElement && i[a] instanceof HTMLElement
                        ? o.isEqualNode(i[a]) || (r[a] = o)
                        : n(o) && n(i[a])
                        ? ((o = e(o, i[a])),
                          (0 < Object.keys(o).length || !n(o)) && (r[a] = o))
                        : Array.isArray(o) && Array.isArray(i[a])
                        ? (function (e, t) {
                            var n;
                            if ((n || (n = nn), e.length != t.length))
                              return !1;
                            t = t.slice();
                            for (
                              var i = (e = c(e)).next(), r = {};
                              !i.done;
                              r = { bg: void 0 }, i = e.next()
                            ) {
                              if (
                                ((r.bg = i.value),
                                -1 ==
                                  (i = t.findIndex(
                                    (function (e) {
                                      return function (t) {
                                        return n(e.bg, t);
                                      };
                                    })(r)
                                  )))
                              )
                                return !1;
                              (t[i] = t[t.length - 1]), t.pop();
                            }
                            return 0 == t.length;
                          })(o, i[a]) || (r[a] = o)
                        : (Number.isNaN(o) && Number.isNaN(i[a])) ||
                          (o !== i[a] && (r[a] = o))
                      : (r[a] = o),
                    r
                  );
                }, {});
              })(e, t)),
              (function e(t) {
                for (
                  var i = c(Object.keys(t)), r = i.next();
                  !r.done;
                  r = i.next()
                )
                  if (!(t[(r = r.value)] instanceof HTMLElement))
                    if (n(t[r]) && 0 === Object.keys(t[r]).length) delete t[r];
                    else {
                      var a = t[r];
                      (Array.isArray(a) && 0 === a.length) ||
                      "function" == typeof t[r]
                        ? delete t[r]
                        : n(t[r]) &&
                          (e(t[r]),
                          0 === Object.keys(t[r]).length && delete t[r]);
                    }
              })(e),
              e
            );
          }
          function $u() {}
          function Zu() {
            var t = 1 / 0;
            navigator.connection && navigator.connection.saveData && (t = 360);
            var n = {
              retryParameters: {
                maxAttempts: 2,
                baseDelay: 1e3,
                backoffFactor: 2,
                fuzzFactor: 0.5,
                timeout: 3e4,
                stallTimeout: 5e3,
                connectionTimeout: 1e4,
              },
              servers: {},
              clearKeys: {},
              advanced: {},
              delayLicenseRequestUntilPlayed: !1,
              persistentSessionOnlinePlayback: !1,
              persistentSessionsMetadata: [],
              initDataTransform: function (t, n, i) {
                return (
                  "apple" === e.shakaMediaKeysPolyfill &&
                    "skd" == n &&
                    ((n = i.serverCertificate), (t = Ou(t, (i = ju(t)), n))),
                  t
                );
              },
              logLicenseExchange: !1,
              updateExpirationTime: 1,
              preferredKeySystems: [],
              keySystemsMapping: {},
              parseInbandPsshEnabled: Ve(),
              minHdcpVersion: "",
              ignoreDuplicateInitData: !rt("Tizen 2"),
              defaultAudioRobustnessForWidevine: "SW_SECURE_CRYPTO",
              defaultVideoRobustnessForWidevine: "SW_SECURE_DECODE",
            };
            (Ve() || $e()) &&
              n.preferredKeySystems.push("com.microsoft.playready"),
              tt() &&
                !He() &&
                (n.keySystemsMapping = {
                  "com.microsoft.playready":
                    "com.microsoft.playready.recommendation",
                });
            var i = "reload",
              r = !1;
            !Vt() ||
              ze() ||
              $e() ||
              Je() ||
              (qe() && 79 === Xe()) ||
              (We() && !nt() && !it()) ||
              (tt() && He()) ||
              ((i = "smooth"), (r = !0)),
              (r = {
                retryParameters: {
                  maxAttempts: 2,
                  baseDelay: 1e3,
                  backoffFactor: 2,
                  fuzzFactor: 0.5,
                  timeout: 3e4,
                  stallTimeout: 5e3,
                  connectionTimeout: 1e4,
                },
                availabilityWindowOverride: NaN,
                disableAudio: !1,
                disableVideo: !1,
                disableText: !1,
                disableThumbnails: !1,
                disableIFrames: !1,
                defaultPresentationDelay: 0,
                segmentRelativeVttTiming: !1,
                raiseFatalErrorOnManifestUpdateRequestFailure: !1,
                continueLoadingWhenPaused: !0,
                ignoreSupplementalCodecs: !1,
                updatePeriod: -1,
                ignoreDrmInfo: !1,
                dash: {
                  clockSyncUri: "",
                  disableXlinkProcessing: !0,
                  xlinkFailGracefully: !1,
                  ignoreMinBufferTime: !1,
                  autoCorrectDrift: !0,
                  initialSegmentLimit: 1e3,
                  ignoreSuggestedPresentationDelay: !1,
                  ignoreEmptyAdaptationSet: !1,
                  ignoreMaxSegmentDuration: !1,
                  keySystemsByURI: {
                    "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":
                      "org.w3.clearkey",
                    "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":
                      "org.w3.clearkey",
                    "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":
                      "com.widevine.alpha",
                    "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":
                      "com.microsoft.playready",
                    "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":
                      "com.microsoft.playready",
                    "urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":
                      "com.apple.fps",
                    "urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":
                      "com.huawei.wiseplay",
                  },
                  manifestPreprocessor: tl,
                  manifestPreprocessorTXml: nl,
                  sequenceMode: !1,
                  multiTypeVariantsAllowed: r,
                  useStreamOnceInPeriodFlattening: !1,
                  enableFastSwitching: !0,
                },
                hls: {
                  ignoreTextStreamFailures: !1,
                  ignoreImageStreamFailures: !1,
                  defaultAudioCodec: "mp4a.40.2",
                  defaultVideoCodec: "avc1.42E01E",
                  ignoreManifestProgramDateTime: !1,
                  ignoreManifestProgramDateTimeForTypes: [],
                  mediaPlaylistFullMimeType:
                    'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',
                  liveSegmentsDelay: 3,
                  sequenceMode: st(),
                  ignoreManifestTimestampsInSegmentsMode: !1,
                  disableCodecGuessing: !1,
                  disableClosedCaptionsDetection: !1,
                  allowLowLatencyByteRangeOptimization: !0,
                  allowRangeRequestsToGuessMimeType: !1,
                },
                mss: {
                  manifestPreprocessor: tl,
                  manifestPreprocessorTXml: nl,
                  sequenceMode: !1,
                  keySystemsBySystemId: {
                    "9a04f079-9840-4286-ab92-e65be0885f95":
                      "com.microsoft.playready",
                    "79f0049a-4098-8642-ab92-e65be0885f95":
                      "com.microsoft.playready",
                  },
                },
              });
            var a = {
              retryParameters: {
                maxAttempts: 2,
                baseDelay: 1e3,
                backoffFactor: 2,
                fuzzFactor: 0.5,
                timeout: 3e4,
                stallTimeout: 5e3,
                connectionTimeout: 1e4,
              },
              failureCallback: function (e) {
                return Yu([e]);
              },
              rebufferingGoal: 0,
              bufferingGoal: 10,
              bufferBehind: 30,
              evictionGoal: 1,
              ignoreTextStreamFailures: !1,
              alwaysStreamText: !1,
              startAtSegmentBoundary: !1,
              gapDetectionThreshold: 0.5,
              gapPadding: 0,
              gapJumpTimerTime: 0.25,
              durationBackoff: 1,
              safeSeekOffset: 5,
              safeSeekEndOffset: 0,
              stallEnabled: !0,
              stallThreshold: 1,
              stallSkip: 0.1,
              useNativeHlsForFairPlay: !0,
              inaccurateManifestTolerance: 2,
              lowLatencyMode: !1,
              forceHTTP: !1,
              forceHTTPS: !1,
              minBytesForProgressEvents: 16e3,
              preferNativeDash: !1,
              preferNativeHls: !1,
              updateIntervalSeconds: 1,
              observeQualityChanges: !1,
              maxDisabledTime: 30,
              segmentPrefetchLimit: 1,
              prefetchAudioLanguages: [],
              disableAudioPrefetch: !1,
              disableTextPrefetch: !1,
              disableVideoPrefetch: !1,
              liveSync: {
                enabled: !1,
                targetLatency: 0.5,
                targetLatencyTolerance: 0.5,
                maxPlaybackRate: 1.1,
                minPlaybackRate: 0.95,
                panicMode: !1,
                panicThreshold: 60,
                dynamicTargetLatency: {
                  enabled: !1,
                  stabilityThreshold: 60,
                  rebufferIncrement: 0.5,
                  maxAttempts: 10,
                  maxLatency: 4,
                  minLatency: 1,
                },
              },
              allowMediaSourceRecoveries: !0,
              minTimeBetweenRecoveries: 5,
              vodDynamicPlaybackRate: !1,
              vodDynamicPlaybackRateLowBufferRate: 0.95,
              vodDynamicPlaybackRateBufferRatio: 0.5,
              preloadNextUrlWindow: 30,
              loadTimeout: 30,
              clearDecodingCache: $e() || Je(),
              dontChooseCodecs: !1,
              shouldFixTimestampOffset: qe() || ze(),
              avoidEvictionOnQuotaExceededError: !1,
              crossBoundaryStrategy: "keep",
            };
            (qe() || ze() || We() || Ze()) && (a.stallSkip = 0),
              (navigator.userAgent.match(/Edge\//) || Ve()) &&
                (a.gapPadding = 0.01),
              ze() && (a.gapPadding = 2),
              Ke() && (a.crossBoundaryStrategy = "reset"),
              Ge() && (a.crossBoundaryStrategy = "reset_to_encrypted");
            var o = {
              trackSelectionCallback: function (e) {
                return L(function (t) {
                  return t.return(e);
                });
              },
              downloadSizeCallback: function (e) {
                var t;
                return L(function (n) {
                  return 1 == n.g
                    ? navigator.storage && navigator.storage.estimate
                      ? x(n, navigator.storage.estimate(), 3)
                      : n.return(!0)
                    : ((t = n.h), n.return(t.usage + e < 0.95 * t.quota));
                });
              },
              progressCallback: function (e, t) {
                return Yu([e, t]);
              },
              usePersistentLicense: !0,
              numberOfParallelDownloads: 5,
            };
            (t = {
              enabled: !0,
              useNetworkInformation: !0,
              defaultBandwidthEstimate: 1e6,
              switchInterval: 8,
              bandwidthUpgradeTarget: 0.85,
              bandwidthDowngradeTarget: 0.95,
              restrictions: {
                minWidth: 0,
                maxWidth: 1 / 0,
                minHeight: 0,
                maxHeight: t,
                minPixels: 0,
                maxPixels: 1 / 0,
                minFrameRate: 0,
                maxFrameRate: 1 / 0,
                minBandwidth: 0,
                maxBandwidth: 1 / 0,
                minChannelsCount: 0,
                maxChannelsCount: 1 / 0,
              },
              advanced: {
                minTotalBytes: 128e3,
                minBytes: 16e3,
                fastHalfLife: 2,
                slowHalfLife: 5,
              },
              restrictToElementSize: !1,
              restrictToScreenSize: !1,
              ignoreDevicePixelRatio: !1,
              clearBufferSwitch: !1,
              safeMarginSwitch: 0,
              cacheLoadThreshold: 20,
              minTimeToSwitch: Ye() ? 0.5 : 0,
              preferNetworkInformationBandwidth: !1,
            }),
              (i = {
                codecSwitchingStrategy: i,
                addExtraFeaturesToSourceBuffer: function (e) {
                  return Yu([e], "");
                },
                forceTransmux: !1,
                insertFakeEncryptionInInit: !0,
                correctEc3Enca: !1,
                modifyCueCallback: function (e, t) {
                  return Yu([e, t]);
                },
                dispatchAllEmsgBoxes: !1,
              });
            var s = !1,
              u = !1,
              l = !0;
            (ze() ||
              qe() ||
              Ve() ||
              $e() ||
              Je() ||
              We() ||
              Ze() ||
              Qe() ||
              (at() && !Ye())) &&
              ((u = s = !0), (l = !1));
            var h = {
              drm: n,
              manifest: r,
              streaming: a,
              mediaSource: i,
              offline: o,
              abrFactory: function () {
                return new _r();
              },
              adaptationSetCriteriaFactory: function () {
                return new (Function.prototype.bind.apply(
                  qu,
                  [null].concat(d(R.apply(0, arguments)))
                ))();
              },
              abr: t,
              autoShowText: 3,
              preferredAudioLanguage: "",
              preferredAudioLabel: "",
              preferredTextLanguage: "",
              preferredVariantRole: "",
              preferredTextRole: "",
              preferredAudioChannelCount: 2,
              preferredVideoHdrLevel: "AUTO",
              preferredVideoLayout: "",
              preferredVideoLabel: "",
              preferredVideoCodecs: [],
              preferredAudioCodecs: [],
              preferredTextFormats: [],
              preferForcedSubs: !1,
              preferSpatialAudio: !1,
              preferredDecodingAttributes: [],
              restrictions: {
                minWidth: 0,
                maxWidth: 1 / 0,
                minHeight: 0,
                maxHeight: 1 / 0,
                minPixels: 0,
                maxPixels: 1 / 0,
                minFrameRate: 0,
                maxFrameRate: 1 / 0,
                minBandwidth: 0,
                maxBandwidth: 1 / 0,
                minChannelsCount: 0,
                maxChannelsCount: 1 / 0,
              },
              playRangeStart: 0,
              playRangeEnd: 1 / 0,
              textDisplayer: { captionsUpdatePeriod: 0.25, fontScaleFactor: 1 },
              textDisplayFactory: function () {
                return null;
              },
              cmcd: {
                enabled: !1,
                sessionId: "",
                contentId: "",
                rtpSafetyFactor: 5,
                useHeaders: !1,
                includeKeys: [],
                version: 1,
              },
              cmsd: {
                enabled: !0,
                applyMaximumSuggestedBitrate: !0,
                estimatedThroughputWeightRatio: 0.5,
              },
              lcevc: {
                enabled: !1,
                dynamicPerformanceScaling: !0,
                logLevel: 0,
                drawLogo: !1,
                poster: !0,
              },
              ads: {
                customPlayheadTracker: s,
                skipPlayDetection: u,
                supportsMultipleMediaElements: l,
                disableHLSInterstitial: !1,
                disableDASHInterstitial: !1,
                allowPreloadOnDomElements: !0,
              },
              ignoreHardwareResolution: !1,
            };
            return (
              (o.trackSelectionCallback = function (e) {
                return L(function (t) {
                  return t.return(
                    (function (e, t, n) {
                      var i = n;
                      "AUTO" == i &&
                        ((n = e.some(function (e) {
                          return !(!e.hdr || "HLG" != e.hdr);
                        })),
                        (i = lt(n)));
                      var r = e.filter(function (e) {
                        return !("variant" != e.type || (e.hdr && e.hdr != i));
                      });
                      n = [];
                      var a = or(
                        t,
                        r.map(function (e) {
                          return e.language;
                        })
                      );
                      a &&
                        (n = r.filter(function (e) {
                          return nr(e.language) == a;
                        })),
                        0 == n.length &&
                          (n = r.filter(function (e) {
                            return e.primary;
                          })),
                        0 == n.length &&
                          (r.map(function (e) {
                            return e.language;
                          }),
                          (n = r));
                      var o = n.filter(function (e) {
                        return e.height && 480 >= e.height;
                      });
                      for (
                        o.length &&
                          (o.sort(function (e, t) {
                            return t.height - e.height;
                          }),
                          (n = o.filter(function (e) {
                            return e.height == o[0].height;
                          }))),
                          t = [],
                          n.length &&
                            ((r = Math.floor(n.length / 2)),
                            n.sort(function (e, t) {
                              return e.bandwidth - t.bandwidth;
                            }),
                            t.push(n[r])),
                          e = c(e),
                          n = e.next();
                        !n.done;
                        n = e.next()
                      )
                        ((n = n.value).type != Rt && "image" != n.type) ||
                          t.push(n);
                      return t;
                    })(e, h.preferredAudioLanguage, h.preferredVideoHdrLevel)
                  );
                });
              }),
              h
            );
          }
          function Qu() {
            return {
              streaming: {
                inaccurateManifestTolerance: 0,
                segmentPrefetchLimit: 2,
                updateIntervalSeconds: 0.1,
                maxDisabledTime: 1,
                retryParameters: { baseDelay: 100 },
              },
              manifest: {
                dash: { autoCorrectDrift: !1 },
                retryParameters: { baseDelay: 100 },
              },
              drm: { retryParameters: { baseDelay: 100 } },
            };
          }
          function el(e, t, n) {
            var i = {
              ".drm.keySystemsMapping": "",
              ".drm.servers": "",
              ".drm.clearKeys": "",
              ".drm.advanced": {
                distinctiveIdentifierRequired: !1,
                persistentStateRequired: !1,
                videoRobustness: [],
                audioRobustness: [],
                sessionType: "",
                serverCertificate: new Uint8Array(0),
                serverCertificateUri: "",
                individualizationServer: "",
                headers: {},
              },
            };
            return Wu(e, t, n || Zu(), i, "");
          }
          function tl(e) {
            return Yu([e], e);
          }
          function nl(e) {
            return Yu([e], e);
          }
          function il(e, t) {
            try {
              return (function (e, t) {
                var n = new DOMParser(),
                  i = rl.value()(e);
                e = null;
                try {
                  e = n.parseFromString(i, "text/xml");
                } catch (r) {
                  return null;
                }
                if (
                  !(n = e.documentElement) ||
                  n.getElementsByTagName("parsererror").length ||
                  n.tagName != t
                )
                  return null;
                if (!("createNodeIterator" in document)) return n;
                for (
                  t = document.createNodeIterator(e, NodeFilter.SHOW_ALL);
                  (e = t.nextNode());

                )
                  if (e instanceof HTMLElement || e instanceof SVGElement)
                    return null;
                return n;
              })(gt(e), t);
            } catch (n) {
              return null;
            }
          }
          F("shaka.drm.FairPlay", Uu),
            (Uu.commonFairPlayResponse = function (e, t) {
              if (
                2 === e &&
                (e = t.originalRequest.drmInfo) &&
                Ne(e.keySystem)
              ) {
                try {
                  var n = ft(t.data);
                } catch (r) {
                  return;
                }
                if (
                  ((e = !1),
                  "<ckc>" === (n = n.trim()).substr(0, 5) &&
                    "</ckc>" === n.substr(-6) &&
                    ((n = n.slice(5, -6)), (e = !0)),
                  !e)
                )
                  try {
                    var i = JSON.parse(n);
                    i.ckc && ((n = i.ckc), (e = !0)),
                      i.CkcMessage && ((n = i.CkcMessage), (e = !0)),
                      i.License && ((n = i.License), (e = !0));
                  } catch (r) {}
                e && (t.data = Ae(At(n)));
              }
            }),
            (Uu.muxFairPlayRequest = function (e, t) {
              Fu(e, t);
            }),
            (Uu.expressplayFairPlayRequest = function (e, t) {
              if (2 === e) {
                var n = t.drmInfo;
                n && Ne(n.keySystem) && Fu(e, t);
              }
            }),
            (Uu.conaxFairPlayRequest = function (e, t) {
              Fu(e, t);
            }),
            (Uu.ezdrmFairPlayRequest = function (e, t) {
              Fu(e, t);
            }),
            (Uu.verimatrixFairPlayRequest = function (e, t) {
              2 === e &&
                (e = t.drmInfo) &&
                Ne(e.keySystem) &&
                ((e = Tt((e = ke(t.body)))),
                (t.headers["Content-Type"] =
                  "application/x-www-form-urlencoded"),
                (t.body = mt("spc=" + e)));
            }),
            (Uu.muxInitDataTransform = function (e, t, n) {
              return Bu(e, t, n);
            }),
            (Uu.expressplayInitDataTransform = function (e, t, n) {
              return Bu(e, t, n);
            }),
            (Uu.conaxInitDataTransform = function (t, n, i) {
              if ("skd" !== n) return t;
              (n = i.serverCertificate),
                (i = gt(t).split("skd://").pop().split("?").shift()),
                (i = e.atob(i));
              var r = new ArrayBuffer(2 * i.length);
              r = Ie(r);
              for (var a = 0, o = i.length; a < o; a++) r[a] = i.charCodeAt(a);
              return Ou(t, r, n);
            }),
            (Uu.ezdrmInitDataTransform = function (e, t, n) {
              return "skd" !== t
                ? e
                : ((t = n.serverCertificate),
                  Ou(e, (n = gt(e).split(";").pop()), t));
            }),
            (Uu.verimatrixInitDataTransform = function (e, t, n) {
              return Bu(e, t, n);
            }),
            (Uu.initDataTransform = Ou),
            (Uu.defaultGetContentId = ju),
            (Uu.isFairPlaySupported = function () {
              var e;
              return L(function (t) {
                return 1 == t.g
                  ? ((e = {
                      initDataTypes: ["cenc", "sinf", "skd"],
                      videoCapabilities: [
                        { contentType: 'video/mp4; codecs="avc1.42E01E"' },
                      ],
                    }),
                    T(t, 2),
                    x(
                      t,
                      navigator.requestMediaKeySystemAccess("com.apple.fps", [
                        e,
                      ]),
                      4
                    ))
                  : 2 != t.g
                  ? t.return(!0)
                  : (k(t), t.return(!1));
              });
            }),
            (Hu.prototype.add = function (e, t) {
              var n,
                i = this.h;
              if (
                ((t = void 0 === t || t),
                !(n =
                  !!i.audio != !!e.audio ||
                  !!i.video != !!e.video ||
                  i.language != e.language) && (n = i.audio && e.audio))
              ) {
                n = i.audio;
                var r = e.audio;
                n = !(
                  !(
                    ((!n.channelsCount ||
                      !r.channelsCount ||
                      2 < n.channelsCount ||
                      2 < r.channelsCount) &&
                      n.channelsCount != r.channelsCount) ||
                    n.spatialAudio !== r.spatialAudio ||
                    (t && !Vu(n, r))
                  ) &&
                  zu(n.roles, r.roles) &&
                  n.groupId === r.groupId
                );
              }
              return (
                !n &&
                  (n = i.video && e.video) &&
                  ((i = i.video),
                  (n = e.video),
                  (n = !((!t || Vu(i, n)) && zu(i.roles, n.roles)))),
                !n && (this.g.add(e), !0)
              );
            }),
            (Hu.prototype.values = function () {
              return this.g.values();
            }),
            F("shaka.media.AdaptationSet", Hu),
            (Gu.prototype.create = function () {}),
            (Gu.prototype.configure = function () {}),
            F("shaka.media.AdaptationSetCriteria", Gu),
            (qu.prototype.configure = function (e) {
              this.g = e;
            }),
            (qu.prototype.create = function (e) {
              var t;
              if (this.g.language) {
                var n = (function (e, t) {
                  t = nr(t);
                  var n = or(
                    t,
                    e.map(function (e) {
                      return ar(e);
                    })
                  );
                  return n
                    ? e.filter(function (e) {
                        return n == ar(e);
                      })
                    : [];
                })(e, this.g.language);
                n.length && (t = n);
              }
              return (
                t ||
                  (t = (t = e.filter(function (e) {
                    return e.primary;
                  })).length
                    ? t
                    : e),
                (e = (function (e, t) {
                  return e.filter(function (e) {
                    return (
                      !!e.audio &&
                      (t
                        ? e.audio.roles.includes(t)
                        : 0 == e.audio.roles.length)
                    );
                  });
                })(t, this.g.role)),
                e.length && (t = e),
                this.g.videoLayout &&
                  ((e = (function (e, t) {
                    return e.filter(function (e) {
                      return (
                        !e.video ||
                        !e.video.videoLayout ||
                        e.video.videoLayout == t
                      );
                    });
                  })(t, this.g.videoLayout)),
                  e.length && (t = e)),
                this.g.sc &&
                  ((e = (function (e, t) {
                    if ("AUTO" == t) {
                      var n = e.some(function (e) {
                        return !(
                          !e.video ||
                          !e.video.hdr ||
                          "HLG" != e.video.hdr
                        );
                      });
                      t = lt(n);
                    }
                    return e.filter(function (e) {
                      return !e.video || !e.video.hdr || e.video.hdr == t;
                    });
                  })(t, this.g.sc)),
                  e.length && (t = e)),
                this.g.channelCount &&
                  ((e = (function (e, t) {
                    return e
                      .filter(function (e) {
                        return !(
                          e.audio &&
                          e.audio.channelsCount &&
                          e.audio.channelsCount > t
                        );
                      })
                      .sort(function (e, t) {
                        return e.audio || t.audio
                          ? e.audio
                            ? t.audio
                              ? (t.audio.channelsCount || 0) -
                                (e.audio.channelsCount || 0)
                              : 1
                            : -1
                          : 0;
                      });
                  })(t, this.g.channelCount)),
                  e.length && (t = e)),
                this.g.kc &&
                  ((e = (function (e, t) {
                    return e.filter(function (e) {
                      return (
                        !(!e.audio || !e.audio.label) &&
                        e.audio.label.toLowerCase() == t.toLowerCase()
                      );
                    });
                  })(t, this.g.kc)),
                  e.length && (t = e)),
                this.g.Gc &&
                  ((e = (function (e, t) {
                    return e.filter(function (e) {
                      return (
                        !(!e.video || !e.video.label) &&
                        e.video.label.toLowerCase() == t.toLowerCase()
                      );
                    });
                  })(t, this.g.Gc)),
                  e.length && (t = e)),
                (e = (function (e, t) {
                  return e.filter(function (e) {
                    return !e.audio || e.audio.spatialAudio == t;
                  });
                })(t, this.g.spatialAudio)),
                e.length && (t = e),
                this.g.audioCodec &&
                  ((e = (function (e, t) {
                    return e.filter(function (e) {
                      return !e.audio || e.audio.codecs == t;
                    });
                  })(t, this.g.audioCodec)),
                  e.length && (t = e)),
                new Hu(
                  t[0],
                  t,
                  !("smooth" == this.g.codecSwitchingStrategy && Vt())
                )
              );
            }),
            F("shaka.util.ConfigUtils", Ku),
            (Ku.getDifferenceFromConfigObjects = Ju),
            (Ku.convertToConfigObject = Xu),
            (Ku.mergeConfigObjects = Wu),
            F("shaka.util.PlayerConfiguration", $u),
            ($u.mergeConfigObjects = el),
            ($u.createDefaultForLL = Qu),
            ($u.createDefault = Zu);
          var rl = new Pe(function () {
            if ("undefined" != typeof trustedTypes) {
              var e = trustedTypes.createPolicy("shaka-player#xml", {
                createHTML: function (e) {
                  return e;
                },
              });
              return function (t) {
                return e.createHTML(t);
              };
            }
            return function (e) {
              return e;
            };
          });
          function al() {
            var e = this;
            (this.j = this.g = null),
              (this.A = []),
              (this.i = null),
              (this.pa = 1),
              (this.D = []),
              (this.l = {
                Gd: "",
                type: "",
                profiles: [],
                zb: null,
                Na: 0,
                Ca: null,
                cd: 0,
              }),
              (this.s = new Map()),
              (this.o = new Map()),
              (this.B = new Map()),
              (this.la = new Map()),
              (this.m = new au()),
              (this.J = 0),
              (this.oa = new z(5)),
              (this.K = new Oe(function () {
                e.G &&
                !e.g.continueLoadingWhenPaused &&
                (e.F.sb(e.G, "timeupdate"), e.G.paused)
                  ? e.F.Ea(e.G, "timeupdate", function () {
                      return wl(e);
                    })
                  : wl(e);
              })),
              (this.S = new $o()),
              (this.O = null),
              (this.C = []),
              (this.da = 1 / 0),
              (this.ga = !1),
              (this.h = null),
              (this.L = 0),
              (this.W = !1),
              (this.F = new Z()),
              (this.G = null),
              (this.X = !1),
              (this.ca = ""),
              (this.fa = function () {
                return !1;
              }),
              (this.Y = []);
          }
          function ol(e) {
            var t, n, i, r, a, o, s, u, l, h, f;
            return L(function (p) {
              return 1 == p.g
                ? ((t = 4),
                  (n = "MPD"),
                  (i = (function (e) {
                    var t = e.l.cd;
                    if (!e.l.Gd || !t || !e.D.length) return [];
                    var n = Date.now() / 1e3,
                      i = e.D.filter(function (e) {
                        return !(e = _n(e.attributes.ttl)) || t + e > n;
                      })
                        .map(Sn)
                        .filter(Ji);
                    return i.length ? Mt(e.A, i) : [];
                  })(e)),
                  (r = e.A),
                  i.length
                    ? ((r = i), (n = "Patch"), (t = 6))
                    : 1 < e.A.length &&
                      e.h &&
                      (a = iu(e.h, "Location", !0)).length &&
                      (r = a),
                  (o = ts(r, e.g.retryParameters)),
                  (s = Date.now()),
                  x(p, Cl(e, o, 0, { type: t }), 2))
                : 3 != p.g
                ? ((u = p.h),
                  e.j
                    ? (u.uri &&
                        u.uri != u.originalUri &&
                        !e.A.includes(u.uri) &&
                        e.A.unshift(u.uri),
                      (l = new se(u.uri)),
                      (e.ca = l.g.toString()),
                      x(
                        p,
                        (function (e, t, n, i) {
                          var r, a, o, s, u, l, h, f;
                          return L(function (p) {
                            if (1 == p.g) {
                              if (
                                ((r = t),
                                (a = e.g.dash.manifestPreprocessor) != tl)
                              ) {
                                if (
                                  (ne(
                                    "manifest.dash.manifestPreprocessor configuration",
                                    "Please Use manifest.dash.manifestPreprocessorTXml instead."
                                  ),
                                  !(o = il(r, i)))
                                )
                                  throw new Ee(2, 4, 4001, n);
                                a(o), (r = mt(o.outerHTML));
                              }
                              if (!(s = gn(r, i))) throw new Ee(2, 4, 4001, n);
                              return (
                                (u = e.g.dash.manifestPreprocessorTXml) != nl &&
                                  u(s),
                                "Patch" === i
                                  ? p.return(
                                      (function (e, t) {
                                        var n,
                                          i,
                                          r,
                                          a,
                                          o,
                                          s,
                                          u,
                                          l,
                                          h,
                                          f,
                                          p,
                                          g,
                                          m,
                                          v,
                                          y,
                                          b,
                                          w,
                                          T,
                                          A,
                                          k,
                                          I,
                                          C,
                                          M,
                                          E;
                                        return L(function (D) {
                                          if (1 == D.g) {
                                            if (
                                              ((n = t.attributes.mpdId),
                                              (i = In(
                                                t,
                                                "originalPublishTime",
                                                Dn
                                              )),
                                              !n ||
                                                n !== e.l.Gd ||
                                                i !== e.l.cd)
                                            )
                                              throw (
                                                ((e.D = []), new Ee(1, 4, 4052))
                                              );
                                            for (
                                              r = [],
                                                a = [],
                                                o = new Set(),
                                                s = c(bn(t)),
                                                u = s.next();
                                              !u.done;
                                              u = s.next()
                                            )
                                              if (
                                                ((l = u.value),
                                                (h = Bn(
                                                  l.attributes.sel || ""
                                                )),
                                                (f = h[h.length - 1]),
                                                (p = Sn(l) || ""),
                                                "MPD" === f.name)
                                              )
                                                if (
                                                  "mediaPresentationDuration" ===
                                                  f.Db
                                                ) {
                                                  var P = Pn(Sn(l) || "");
                                                  if (null != P) {
                                                    e.l.zb = P;
                                                    for (
                                                      var L = c(e.s.values()),
                                                        R = L.next();
                                                      !R.done;
                                                      R = L.next()
                                                    )
                                                      R.value.zb = P;
                                                  }
                                                } else if ("type" === f.Db) {
                                                  for (
                                                    e.i.presentationTimeline.Sd(
                                                      "static" == p
                                                    ),
                                                      e.l.type = p,
                                                      L = (P = c(
                                                        e.s.values()
                                                      )).next();
                                                    !L.done;
                                                    L = P.next()
                                                  )
                                                    L.value.wb = "dynamic" == p;
                                                  "static" == p && (e.J = -1);
                                                } else
                                                  "publishTime" === f.Db
                                                    ? (e.l.cd = Dn(p) || 0)
                                                    : null === f.Db &&
                                                      "add" === l.tagName &&
                                                      a.push(l);
                                              else if (
                                                "PatchLocation" === f.name
                                              )
                                                Fn(e.D, l);
                                              else if ("Period" === f.name)
                                                "add" === l.tagName
                                                  ? a.push(l)
                                                  : "remove" === l.tagName &&
                                                    f.id &&
                                                    cl(e, f.id);
                                              else if (
                                                "SegmentTemplate" === f.name
                                              ) {
                                                if (
                                                  (P = (L = Bn(
                                                    l.attributes.sel || ""
                                                  ))[L.length - 1]).Db
                                                ) {
                                                  (L = dl(e, L)),
                                                    (R = Sn(l) || "");
                                                  for (
                                                    var N = c(L), _ = N.next();
                                                    !_.done;
                                                    _ = N.next()
                                                  )
                                                    Vn(
                                                      (_ = e.s.get(_.value)).I
                                                        .Lb,
                                                      l.tagName,
                                                      P.Db,
                                                      R
                                                    );
                                                  P = L;
                                                } else P = [];
                                                for (
                                                  g = c(P), m = g.next();
                                                  !m.done;
                                                  m = g.next()
                                                )
                                                  (v = m.value), o.add(v);
                                              } else if (
                                                "SegmentTimeline" === f.name ||
                                                "S" === f.name
                                              ) {
                                                for (
                                                  P = Bn(
                                                    l.attributes.sel || ""
                                                  ),
                                                    R = (L = c(
                                                      (P = dl(e, P))
                                                    )).next();
                                                  !R.done;
                                                  R = L.next()
                                                )
                                                  Fn(
                                                    (N = wn(
                                                      (R = fs(
                                                        (R = e.s.get(R.value)),
                                                        zs,
                                                        "SegmentTimeline"
                                                      )),
                                                      "S"
                                                    )),
                                                    l
                                                  ),
                                                    (R.children = N);
                                                for (
                                                  y = c(P), b = y.next();
                                                  !b.done;
                                                  b = y.next()
                                                )
                                                  (w = b.value), o.add(w);
                                              }
                                            for (
                                              T = c(o), A = T.next();
                                              !A.done;
                                              A = T.next()
                                            )
                                              (k = A.value), hl(e, k);
                                            for (
                                              I = c(a), C = I.next();
                                              !C.done;
                                              C = I.next()
                                            )
                                              (M = C.value),
                                                r.push.apply(r, d(ll(e, M)));
                                            return r.length
                                              ? ((e.i.periodCount += r.length),
                                                (e.i.gapCount = e.L),
                                                x(D, ul(e, r, !0), 2))
                                              : D.u(2);
                                          }
                                          "static" == e.l.type &&
                                            ((E = e.l.zb),
                                            e.i.presentationTimeline.nb(
                                              E || 1 / 0
                                            )),
                                            S(D);
                                        });
                                      })(e, s)
                                    )
                                  : e.g.dash.disableXlinkProcessing
                                  ? p.return(sl(e, s, n))
                                  : ((l = e.g.dash.xlinkFailGracefully),
                                    (h = ps(
                                      s,
                                      e.g.retryParameters,
                                      l,
                                      n,
                                      e.j.networkingEngine
                                    )),
                                    Zo(e.S, h),
                                    x(p, h.promise, 2))
                              );
                            }
                            return (f = p.h), p.return(sl(e, f, n));
                          });
                        })(e, u.data, u.uri, n),
                        3
                      ))
                    : p.return(0))
                : ((h = Date.now()),
                  (f = (h - s) / 1e3),
                  e.oa.sample(1, f),
                  p.return(f));
            });
          }
          function sl(e, t, n) {
            var i,
              r,
              a,
              o,
              s,
              u,
              l,
              d,
              h,
              f,
              p,
              g,
              m,
              v,
              y,
              b,
              w,
              I,
              C,
              M,
              E,
              D,
              P,
              R,
              N,
              _,
              U,
              j,
              O,
              B,
              F,
              H,
              V,
              z,
              G,
              q,
              K,
              W,
              Y,
              J,
              $,
              Z,
              Q,
              ee,
              te,
              ne,
              ie,
              re,
              ae,
              oe,
              se,
              ue;
            return L(function (le) {
              switch (le.g) {
                case 1:
                  for (
                    e.h && e.h.l.clear(),
                      i = [n],
                      r = [],
                      a = new Map(),
                      o = wn(t, "Location"),
                      s = c(o),
                      u = s.next();
                    !u.done;
                    u = s.next()
                  )
                    (l = u.value),
                      (d = l.attributes.serviceLocation),
                      (h = Sn(l)) &&
                        ((f = Mt(i, [h])[0]),
                        d && (e.h ? nu(e.h, "Location", d, f) : a.set(d, f)),
                        r.push(f));
                  if (
                    (e.h
                      ? 0 < (p = iu(e.h, "Location", !0)).length &&
                        (i = e.A = p)
                      : r.length && (i = e.A = r),
                    (e.l.Gd = t.attributes.id || ""),
                    (e.l.cd = In(t, "publishTime", Dn) || 0),
                    (e.D = wn(t, "PatchLocation")),
                    (g = Promise.resolve()),
                    (m = An(t, "ContentSteering")) && e.j)
                  )
                    for (
                      v = m.attributes.defaultServiceLocation,
                        e.h
                          ? ((e.h.j = i), (e.h.h = v))
                          : ((e.h = new Qs(e.j)),
                            e.h.configure(e.g),
                            e.h.setManifestType("DASH"),
                            (e.h.j = i),
                            (e.h.h = v),
                            (y = Sn(m)) &&
                              (In(m, "queryBeforeStart", jn, !1)
                                ? (g = eu(e.h, y))
                                : eu(e.h, y))),
                        b = c(a.keys()),
                        w = b.next();
                      !w.done;
                      w = b.next()
                    )
                      (I = w.value), (C = a.get(I)), nu(e.h, "Location", I, C);
                  if (((M = wn(t, "BaseURL")), (E = !1), e.h))
                    for (D = c(M), P = D.next(); !P.done; P = D.next())
                      (R = P.value),
                        (N = R.attributes.serviceLocation),
                        (_ = Sn(R)),
                        N && _ && (nu(e.h, "BaseURL", N, _), (E = !0));
                  if (
                    ((e.Y = null),
                    (E && e.h) || ((U = M.map(Sn)), (e.Y = Mt(i, U))),
                    (j = function () {
                      return e.h && E ? iu(e.h, "BaseURL") : e.Y ? e.Y : [];
                    }),
                    (e.l.Ca = j),
                    (O = 0),
                    M &&
                      M.length &&
                      (O = In(M[0], "availabilityTimeOffset", Un) || 0),
                    (e.l.Na = O),
                    (e.J = In(t, "minimumUpdatePeriod", Pn, -1)),
                    (B = In(t, "availabilityStartTime", Dn)),
                    (F = In(t, "timeShiftBufferDepth", Pn)),
                    (H = e.g.dash.ignoreSuggestedPresentationDelay),
                    (V = null),
                    H || (V = In(t, "suggestedPresentationDelay", Pn)),
                    (z = e.g.dash.ignoreMaxSegmentDuration),
                    (G = null),
                    z || (G = In(t, "maxSegmentDuration", Pn)),
                    (q = t.attributes.type || "static"),
                    e.i &&
                      e.i.presentationTimeline &&
                      (e.X = e.i.presentationTimeline.R() && "static" == q),
                    (e.l.type = q),
                    e.i)
                  )
                    for (
                      K = e.i.presentationTimeline,
                        W = K.xb(),
                        Y = c(e.o.values()),
                        J = Y.next();
                      !J.done;
                      J = Y.next()
                    )
                      ($ = J.value).segmentIndex && $.segmentIndex.Ba(W);
                  else
                    (Z = e.g.dash.ignoreMinBufferTime),
                      (Q = 0),
                      Z || (Q = In(t, "minBufferTime", Pn) || 0),
                      0,
                      (ee =
                        null != V
                          ? Math.min(V, F || 1 / 0)
                          : 0 < e.g.defaultPresentationDelay
                          ? e.g.defaultPresentationDelay
                          : Math.min(1.5 * Q, F || 1 / 0)),
                      (K = new $s(B, ee, e.g.dash.autoCorrectDrift));
                  return (
                    K.Sd("static" == q),
                    K.R() &&
                      !isNaN(e.g.availabilityWindowOverride) &&
                      (F = e.g.availabilityWindowOverride),
                    null == F && (F = 1 / 0),
                    K.pf(F),
                    (te = t.attributes.profiles || ""),
                    (e.l.profiles = te.split(",")),
                    (ne = {
                      wb: "static" != q,
                      presentationTimeline: K,
                      ia: null,
                      $: null,
                      Z: null,
                      I: null,
                      bandwidth: 0,
                      Re: !1,
                      Na: O,
                      zb: null,
                      profiles: te.split(","),
                      roles: null,
                      eb: function () {
                        return "";
                      },
                    }),
                    x(le, g, 2)
                  );
                case 2:
                  return (
                    (e.L = 0),
                    (ie = gl(e, ne, j, t, !1)),
                    (re = ie.duration),
                    (ae = ie.periods),
                    (("static" != q || e.X) && ie.Of) || K.nb(re || 1 / 0),
                    e.W && e.ga && K.vg(e.da),
                    K.Xe(G || 1),
                    e.W &&
                      e.ga &&
                      ((oe = null != V ? V : e.g.defaultPresentationDelay),
                      K.xg(oe)),
                    e.i
                      ? ((e.i.periodCount = ae.length),
                        (e.i.gapCount = e.L),
                        x(le, ul(e, ae, !1), 4))
                      : x(le, e.m.re(ae, ne.wb), 6)
                  );
                case 6:
                  if (
                    ((e.i = {
                      presentationTimeline: K,
                      variants: e.m.l,
                      textStreams: e.m.Qe(),
                      imageStreams: e.m.i,
                      offlineSessionIds: [],
                      sequenceMode: e.g.dash.sequenceMode,
                      ignoreManifestTimestampsInSegmentsMode: !1,
                      type: "DASH",
                      serviceDescription: fl(t),
                      nextUrl: pl(t),
                      periodCount: ae.length,
                      gapCount: e.L,
                      isLowLatency: e.W,
                      startTime: null,
                    }),
                    !K.Hg())
                  ) {
                    le.u(7);
                    break;
                  }
                  return (
                    (se = wn(t, "UTCTiming")),
                    x(
                      le,
                      (function (e, t, n) {
                        var i, r, a, o, s, u, l, d;
                        return L(function (h) {
                          switch (h.g) {
                            case 1:
                              (i = n.map(function (e) {
                                return {
                                  scheme: e.attributes.schemeIdUri,
                                  value: e.attributes.value,
                                };
                              })),
                                (r = e.g.dash.clockSyncUri),
                                !i.length &&
                                  r &&
                                  i.push({
                                    scheme: "urn:mpeg:dash:utc:http-head:2014",
                                    value: r,
                                  }),
                                (a = c(i)),
                                (o = a.next());
                            case 2:
                              if (o.done) {
                                h.u(4);
                                break;
                              }
                              switch (
                                ((s = o.value),
                                T(h, 5),
                                (u = s.scheme),
                                (l = s.value),
                                u)
                              ) {
                                case "urn:mpeg:dash:utc:http-head:2014":
                                case "urn:mpeg:dash:utc:http-head:2012":
                                  return h.u(7);
                                case "urn:mpeg:dash:utc:http-xsdate:2014":
                                case "urn:mpeg:dash:utc:http-iso:2014":
                                case "urn:mpeg:dash:utc:http-xsdate:2012":
                                case "urn:mpeg:dash:utc:http-iso:2012":
                                  return h.u(8);
                                case "urn:mpeg:dash:utc:direct:2014":
                                case "urn:mpeg:dash:utc:direct:2012":
                                  return (
                                    (d = Date.parse(l)),
                                    h.return(isNaN(d) ? 0 : d - Date.now())
                                  );
                                case "urn:mpeg:dash:utc:http-ntp:2014":
                                case "urn:mpeg:dash:utc:ntp:2014":
                                case "urn:mpeg:dash:utc:sntp:2014":
                                  X("NTP UTCTiming scheme is not supported");
                                  break;
                                default:
                                  X(
                                    "Unrecognized scheme in UTCTiming element",
                                    u
                                  );
                              }
                              h.u(9);
                              break;
                            case 7:
                              return x(h, Tl(e, t, l, "HEAD"), 10);
                            case 10:
                              return h.return(h.h);
                            case 8:
                              return x(h, Tl(e, t, l, "GET"), 11);
                            case 11:
                              return h.return(h.h);
                            case 9:
                              A(h, 3);
                              break;
                            case 5:
                              k(h);
                            case 3:
                              (o = a.next()), h.u(2);
                              break;
                            case 4:
                              return (
                                X(
                                  "A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"
                                ),
                                h.return(0)
                              );
                          }
                        });
                      })(e, j, se),
                      8
                    )
                  );
                case 8:
                  if (((ue = le.h), !e.j)) return le.return();
                  K.wg(ue);
                case 7:
                  K.Ve(), e.m && !e.i.presentationTimeline.R() && e.m.release();
                case 4:
                  e.j.makeTextStreamsForClosedCaptions(e.i),
                    (function (e) {
                      for (
                        var t = Array.from(e.B.keys()).filter(function (t) {
                            return !e.C.includes(t);
                          }),
                          n = (t = c(t)).next();
                        !n.done;
                        n = t.next()
                      ) {
                        n = n.value;
                        for (
                          var i = !0, r = c(e.B.get(n)), a = r.next();
                          !a.done;
                          a = r.next()
                        ) {
                          a = a.value;
                          var o = e.o.get(a);
                          o &&
                            (o.segmentIndex &&
                            0 != o.segmentIndex.getNumReferences()
                              ? (i = !1)
                              : (e.m && e.m.Lf(o, n), e.o.delete(a)));
                        }
                        i && e.B.delete(n);
                      }
                    })(e),
                    S(le);
              }
            });
          }
          function ul(e, t, n) {
            var i;
            return L(function (r) {
              if (1 == r.g) return x(r, e.m.re(t, !0, n), 2);
              (e.i.variants = e.m.l),
                0 < (i = e.m.Qe()).length && (e.i.textStreams = i),
                (e.i.imageStreams = e.m.i),
                e.j.filter(e.i),
                S(r);
            });
          }
          function ll(e, t) {
            return gl(
              e,
              {
                wb: "dynamic" == e.l.type,
                presentationTimeline: e.i.presentationTimeline,
                ia: null,
                $: null,
                Z: null,
                I: null,
                bandwidth: 0,
                Re: !1,
                Na: e.l.Na,
                profiles: e.l.profiles,
                zb: e.l.zb,
                roles: null,
                eb: function () {
                  return "";
                },
              },
              e.l.Ca,
              t,
              !0
            ).periods;
          }
          function cl(e, t) {
            e.i.periodCount--;
            for (var n = c(e.s.keys()), i = n.next(); !i.done; i = n.next())
              if ((i = i.value).startsWith(t)) {
                (fs(e.s.get(i), zs, "SegmentTimeline").children = []),
                  hl(e, i),
                  e.s.delete(i);
              }
            e.C = e.C.filter(function (e) {
              return e !== t;
            });
          }
          function dl(e, t) {
            for (
              var n = "", i = "", r = -1, a = "", o = (t = c(t)).next();
              !o.done;
              o = t.next()
            )
              "Period" === (o = o.value).name
                ? (n = o.id)
                : "AdaptationSet" === o.name
                ? ((i = o.id), null !== o.position && (r = o.position))
                : "Representation" === o.name && (a = o.id);
            if (((t = []), a)) t.push(n + "," + a);
            else if (i)
              for (r = c(e.s.values()), e = r.next(); !e.done; e = r.next())
                (e = e.value).ia.id === n &&
                  e.Z.id === i &&
                  e.I.id &&
                  t.push(n + "," + e.I.id);
            else if (-1 < r)
              for (i = c(e.s.values()), e = i.next(); !e.done; e = i.next())
                (e = e.value).ia.id === n &&
                  e.Z.position === r &&
                  e.I.id &&
                  t.push(n + "," + e.I.id);
            return t;
          }
          function hl(e, t) {
            var n = e.s.get(t),
              i = e.o.get(t);
            i.segmentIndex && i.segmentIndex.Ba(e.i.presentationTimeline.xb());
            try {
              var r = Vs(
                n,
                function (t, n, i, r) {
                  return kl(e, t, n, i, r);
                },
                e.o,
                !0,
                e.g.dash.initialSegmentLimit,
                e.la,
                n.I.aesKey,
                null,
                !0
              );
              i.createSegmentIndex = function () {
                return L(function (e) {
                  if (1 == e.g)
                    return i.segmentIndex ? e.u(0) : x(e, r.Vb(), 3);
                  (i.segmentIndex = e.h), S(e);
                });
              };
            } catch (a) {
              if (
                ((t = n.I.contentType) != Rt &&
                  "application" != t &&
                  "image" != t) ||
                4002 != a.code
              )
                throw a;
            }
          }
          function fl(e) {
            var t = An(e, "ServiceDescription");
            if (!t) return null;
            if (((e = An(t, "Latency")), (t = An(t, "PlaybackRate")), !e && !t))
              return null;
            var n = {};
            return (
              e &&
                ("target" in e.attributes &&
                  (n.targetLatency = parseInt(e.attributes.target, 10) / 1e3),
                "max" in e.attributes &&
                  (n.maxLatency = parseInt(e.attributes.max, 10) / 1e3),
                "min" in e.attributes &&
                  (n.minLatency = parseInt(e.attributes.min, 10) / 1e3)),
              t &&
                ("max" in t.attributes &&
                  (n.maxPlaybackRate = parseFloat(t.attributes.max)),
                "min" in t.attributes &&
                  (n.minPlaybackRate = parseFloat(t.attributes.min))),
              n
            );
          }
          function pl(e) {
            if (!(e = wn(e, "SupplementalProperty")).length) return null;
            for (var t = (e = c(e)).next(); !t.done; t = e.next())
              if (
                "urn:mpeg:dash:chaining:2016" ==
                (t = t.value).attributes.schemeIdUri
              )
                return t.attributes.value;
            return null;
          }
          function gl(e, t, n, i, r) {
            var a = t.zb;
            a || ((a = In(i, "mediaPresentationDuration", Pn)), (e.l.zb = a));
            var o = 0;
            e.i &&
              e.i.presentationTimeline &&
              e.X &&
              (o = e.i.presentationTimeline.pb());
            var s = [],
              u = o;
            i = wn(i, "Period");
            for (var l = 0; l < i.length; l++) {
              var d = i[l],
                h = i[l + 1],
                f = In(d, "start", Pn, u),
                p = d.attributes.id,
                g = In(d, "duration", Pn);
              f = 0 == l && 0 == f && e.X ? o : f;
              var m = null;
              if (h) {
                var v = In(h, "start", Pn);
                null != v && (m = v - f + o);
              } else null != a && (m = a - f + o);
              if (
                ((v = _t),
                m && g && Math.abs(m - g) > v && m > g && e.L++,
                null == m && (m = g),
                !(null !== e.O && null !== p && null !== f && f < e.O) ||
                  e.C.includes(p) ||
                  l + 1 == i.length)
              ) {
                if (
                  (null !== f && (null === e.O || f > e.O) && (e.O = f),
                  (u = ml(e, t, n, {
                    start: f,
                    duration: m,
                    node: d,
                    ag: null == m || !h,
                  })),
                  s.push(u),
                  t.ia.id && m && e.la.set(t.ia.id, m),
                  null == m)
                ) {
                  u = null;
                  break;
                }
                u = f + m;
              }
            }
            if (r)
              for (n = (t = c(s)).next(); !n.done; n = t.next())
                (n = n.value.id), e.C.includes(n) || e.C.push(n);
            else
              e.C = s.map(function (e) {
                return e.id;
              });
            return null != a
              ? { periods: s, duration: a + o, Of: !1 }
              : { periods: s, duration: u, Of: !0 };
          }
          function ml(e, t, n, i) {
            (t.ia = Sl(e, i.node, null, n)),
              (t.$ = i),
              (t.ia.Na = t.Na),
              t.ia.id || (t.ia.id = "__shaka_period_" + i.start);
            var r = wn(i.node, "EventStream");
            n = t.presentationTimeline.xb();
            for (var a = (r = c(r)).next(); !a.done; a = r.next())
              Al(e, i.start, i.duration, a.value, n);
            for (
              r = (n = c((n = wn(i.node, "SupplementalProperty")))).next();
              !r.done;
              r = n.next()
            )
              "urn:mpeg:dash:urlparam:2014" ==
                (r = r.value).attributes.schemeIdUri &&
                (r = bl(e, r)) &&
                (t.eb = r);
            if (
              ((n = wn(i.node, "AdaptationSet")
                .map(function (n, i) {
                  return yl(e, t, i, n);
                })
                .filter(Ji)),
              t.wb)
            ) {
              r = [];
              for (var o = (a = c(n)).next(); !o.done; o = a.next())
                for (var s = (o = c(o.value.li)).next(); !s.done; s = o.next())
                  r.push(s.value);
              if (r.length != new Set(r).size) throw new Ee(2, 4, 4018);
            }
            for (r = new Map(), o = (a = c(n)).next(); !o.done; o = a.next())
              for (s = (o = c(o.value.Zg)).next(); !s.done; s = o.next()) {
                var u = c(s.value);
                (s = u.next().value), (u = u.next().value), r.set(s, u);
              }
            if (r.size)
              for (a = null, s = (o = c(n)).next(); !s.done; s = o.next()) {
                u = [];
                for (
                  var l = c((s = s.value).streams), h = l.next(), f = {};
                  !h.done;
                  f = { rf: void 0 }, h = l.next()
                )
                  if (((f.rf = h.value), r.has(f.rf.originalId))) {
                    a ||
                      (a = wn(i.node, "AdaptationSet")
                        .map(function (n, i) {
                          return yl(e, t, i, n);
                        })
                        .filter(Ji));
                    for (var p = (h = c(a)).next(); !p.done; p = h.next())
                      (p = p.value.streams.find(
                        (function (e) {
                          return function (t) {
                            return t.originalId == e.rf.originalId;
                          };
                        })(f)
                      )) &&
                        ((p.dependencyStream = r.get(p.originalId)),
                        (p.originalId += p.dependencyStream.originalId),
                        u.push(p));
                  }
                u.length && s.streams.push.apply(s.streams, d(u));
              }
            if (
              ((i = n.filter(function (e) {
                return !e.xf;
              })),
              (n = n.filter(function (e) {
                return e.xf;
              })),
              !e.g.disableIFrames)
            )
              for (r = (n = c(n)).next(); !r.done; r = n.next())
                for (
                  a = (r = r.value).xf.split(" "), s = (o = c(i)).next();
                  !s.done;
                  s = o.next()
                )
                  if (((s = s.value), a.includes(s.id)))
                    for (u = (s = c(s.streams)).next(); !u.done; u = s.next())
                      Mr(u.value, r.streams);
            if (
              ((n = vl(e.g.disableAudio, i, "audio")),
              (r = vl(e.g.disableVideo, i, "video")),
              (a = vl(e.g.disableText, i, Rt)),
              (i = vl(e.g.disableThumbnails, i, "image")),
              0 === r.length && 0 === n.length)
            )
              throw new Ee(2, 4, 4004);
            return {
              id: t.ia.id,
              audioStreams: n,
              videoStreams: r,
              textStreams: a,
              imageStreams: i,
            };
          }
          function vl(e, t, n) {
            return e || !t.length
              ? []
              : t.reduce(function (e, t) {
                  return t.contentType != n || e.push.apply(e, d(t.streams)), e;
                }, []);
          }
          function yl(t, n, i, r) {
            function a(e) {
              var i = e.attributes["dvb:fontFamily"];
              (e = e.attributes["dvb:url"]),
                i &&
                  e &&
                  ((e = Mt(n.Z.Ca(), [e], n.eb())), t.j.addFont(i, e[0]));
            }
            function o(e) {
              switch (e) {
                case 1:
                case 5:
                case 6:
                case 7:
                  return "srgb";
                case 9:
                  return "rec2020";
                case 11:
                case 12:
                  return "p3";
              }
            }
            function s(e) {
              switch (e) {
                case 1:
                case 6:
                case 13:
                case 14:
                case 15:
                  return "SDR";
                case 16:
                  return "PQ";
                case 18:
                  return "HLG";
              }
            }
            (n.Z = Sl(t, r, n.ia, null)), (n.Z.position = i);
            var u = !1,
              l = (i = wn(r, "Role"))
                .map(function (e) {
                  return e.attributes.value;
                })
                .filter(Ji),
              h = void 0,
              f = n.Z.contentType == Rt;
            f && (h = "subtitle");
            for (var p = (i = c(i)).next(); !p.done; p = i.next()) {
              var g = (p = p.value).attributes.schemeIdUri;
              if (null == g || "urn:mpeg:dash:role:2011" == g)
                switch (((p = p.attributes.value), p)) {
                  case "main":
                    u = !0;
                    break;
                  case "caption":
                  case "subtitle":
                    h = p;
                }
            }
            var m = wn(r, "EssentialProperty");
            i = null;
            var v = !1;
            (p = null), (g = !1);
            for (var y = (m = c(m)).next(); !y.done; y = m.next()) {
              var b = (y = y.value).attributes.schemeIdUri;
              if ("http://dashif.org/guidelines/trickmode" == b)
                i = y.attributes.value;
              else if ("urn:mpeg:mpegB:cicp:TransferCharacteristics" == b)
                var w = s(parseInt(y.attributes.value, 10));
              else if ("urn:mpeg:mpegB:cicp:ColourPrimaries" == b)
                var T = o(parseInt(y.attributes.value, 10));
              else
                "urn:mpeg:mpegB:cicp:MatrixCoefficients" != b &&
                  ("urn:mpeg:dash:ssr:2023" == b && t.g.dash.enableFastSwitching
                    ? (v = !0)
                    : "urn:dvb:dash:fontdownload:2014" == b
                    ? a(y)
                    : ("urn:mpeg:dash:urlparam:2014" == b && (p = bl(t, y))) ||
                      (g = !0));
            }
            if (g) return null;
            var A = null;
            for (
              m = (g = c((g = wn(r, "SupplementalProperty")))).next();
              !m.done;
              m = g.next()
            )
              "http://dashif.org/guidelines/last-segment-number" ==
              (y = (m = m.value).attributes.schemeIdUri)
                ? (A = parseInt(m.attributes.value, 10) - 1)
                : "urn:mpeg:mpegB:cicp:TransferCharacteristics" == y
                ? (w = s(parseInt(m.attributes.value, 10)))
                : "urn:mpeg:mpegB:cicp:ColourPrimaries" == y
                ? (T = o(parseInt(m.attributes.value, 10)))
                : "urn:dvb:dash:fontdownload:2014" == y
                ? a(m)
                : "urn:mpeg:dash:urlparam:2014" == y && (p = bl(t, m));
            p && (n.eb = p), (p = wn(r, "Accessibility"));
            var k,
              I = new Map();
            for (g = (p = c(p)).next(); !g.done; g = p.next())
              if (
                ((g = (m = g.value).attributes.schemeIdUri),
                (m = m.attributes.value),
                "urn:scte:dash:cc:cea-608:2015" != g || t.g.disableText)
              )
                if ("urn:scte:dash:cc:cea-708:2015" != g || t.g.disableText)
                  "urn:mpeg:dash:role:2011" == g
                    ? null != m &&
                      (l.push(m), "captions" == m && (h = "caption"))
                    : "urn:tva:metadata:cs:AudioPurposeCS:2007" == g &&
                      ("1" == m
                        ? (k = "visually impaired")
                        : "2" == m && (k = "hard of hearing"));
                else if (((g = 1), null != m))
                  for (
                    y = (m = c(m.split(";"))).next();
                    !y.done;
                    y = m.next()
                  ) {
                    b = y.value;
                    var C = (y = void 0);
                    b.includes("=")
                      ? ((y = "svc" + (b = b.split("="))[0]),
                        (C = b[1].split(",")[0].split(":").pop()))
                      : ((y = "svc" + g), g++, (C = b)),
                      I.set(y, nr(C));
                  }
                else I.set("svc1", "und");
              else if (((g = 1), null != m))
                for (
                  b = (y = c((m = m.split(";")))).next();
                  !b.done;
                  b = y.next()
                ) {
                  C = b.value;
                  var M = (b = void 0);
                  C.includes("=")
                    ? ((b = (C = C.split("="))[0].startsWith("CC")
                        ? C[0]
                        : "CC" + C[0]),
                      (M = C[1] || "und"))
                    : ((b = "CC" + g), 2 == m.length ? (g += 2) : g++, (M = C)),
                    I.set(b, nr(M));
                }
              else I.set("CC1", "und");
            var E = Uo(
              (p = wn(r, "ContentProtection")),
              t.g.ignoreDrmInfo,
              t.g.dash.keySystemsByURI
            );
            n.Z.encrypted = 0 < p.length;
            var D = nr(n.Z.language || "und"),
              P = n.Z.label,
              R = new Map();
            if (
              ((r = wn(r, "Representation")), !t.g.ignoreSupplementalCodecs)
            ) {
              for (p = [], m = (g = c(r)).next(); !m.done; m = g.next())
                (m = Cn(
                  (y = m.value),
                  "urn:scte:dash:scte214-extensions",
                  "supplementalCodecs"
                )) &&
                  (((y = hn(y)).attributes.codecs = m.split(" ").join(",")),
                  y.attributes.id &&
                    (y.attributes.supplementalId =
                      y.attributes.id + "_supplementalCodecs"),
                  p.push(y));
              r.push.apply(r, d(p));
            }
            if (
              ((p = r
                .map(function (i) {
                  var r = (function (t, n, i, r, a, o, s, u, l, c, d, h) {
                    n.I = Sl(t, c, n.Z, null);
                    var f = n.I.id;
                    if (
                      ((t.da = Math.min(t.da, n.I.Na)),
                      (t.W = 0 < t.da),
                      !(function (e) {
                        var t = e.Ec ? 1 : 0;
                        return (
                          (t += e.Bb ? 1 : 0),
                          (t += e.Lb ? 1 : 0),
                          0 == t
                            ? e.contentType == Rt ||
                              "application" == e.contentType
                            : (1 != t && (e.Ec && (e.Bb = null), (e.Lb = null)),
                              !0)
                        );
                      })(n.I))
                    )
                      return null;
                    var p = n.$.start;
                    (n.bandwidth = In(c, "bandwidth", Nn) || 0), (n.roles = u);
                    var g = wn(c, "SupplementalProperty"),
                      m = wn(c, "EssentialProperty"),
                      v = wn(c, "ContentProtection");
                    c = null;
                    var y,
                      b,
                      w = m.find(function (e) {
                        return (
                          "urn:mpeg:dash:urlparam:2014" ==
                          e.attributes.schemeIdUri
                        );
                      });
                    (w ||
                      (w = g.find(function (e) {
                        return (
                          "urn:mpeg:dash:urlparam:2014" ==
                          e.attributes.schemeIdUri
                        );
                      }))) &&
                      (c = bl(t, w)),
                      c && (n.eb = c),
                      (w = n.I.contentType),
                      (c = w == Rt || "application" == w),
                      (w = "image" == w),
                      v.length && (n.Z.encrypted = !0);
                    try {
                      var T = void 0;
                      if (i.ne) {
                        var A = n.I.Ca,
                          k = n.eb,
                          I = ts(Mt(A(), [i.ne.Sh], k()), t.g.retryParameters);
                        T = {
                          bitsKey: 128,
                          blockCipherMode: "CBC",
                          iv: i.ne.iv,
                          firstMediaSequenceNumber: 0,
                          fetchKey: function () {
                            var n, i, r;
                            return L(function (a) {
                              if (1 == a.g) return x(a, Cl(t, I, 6), 2);
                              if (3 != a.g) {
                                if (!(n = a.h).data || 16 != n.data.byteLength)
                                  throw new Ee(2, 4, 4049);
                                return (
                                  (i = { name: "AES-CBC" }),
                                  (r = T),
                                  x(
                                    a,
                                    e.crypto.subtle.importKey(
                                      "raw",
                                      n.data,
                                      i,
                                      !0,
                                      ["decrypt"]
                                    ),
                                    3
                                  )
                                );
                              }
                              (r.cryptoKey = a.h), (T.fetchKey = void 0), S(a);
                            });
                          },
                        };
                      }
                      if (
                        ((n.I.aesKey = T),
                        (A = function (e, n, i, r) {
                          return kl(t, e, n, i, r);
                        }),
                        n.I.Ec)
                      )
                        var C = Ns(n, A, T);
                      else if (n.I.Bb) C = Fs(n, t.o, T);
                      else if (n.I.Lb)
                        C = Vs(
                          n,
                          A,
                          t.o,
                          !!t.i,
                          t.g.dash.initialSegmentLimit,
                          t.la,
                          T,
                          h,
                          !1
                        );
                      else {
                        var M = n.$.duration || 0,
                          E = n.I.Ca,
                          D = n.I.mimeType,
                          P = n.I.codecs;
                        C = {
                          Vb: function () {
                            var e = Ds(p, M, E());
                            return (
                              e.Tb(function (e) {
                                (e.mimeType = D), (e.codecs = P);
                              }),
                              Promise.resolve(e)
                            );
                          },
                        };
                      }
                    } catch (N) {
                      if ((c || w) && 4002 == N.code) return null;
                      throw N;
                    }
                    if (
                      ((h = (function (e, t, n, i) {
                        var r = Uo(e, n, i);
                        if (t.Qf)
                          (e =
                            1 == t.drmInfos.length && !t.drmInfos[0].keySystem),
                            (n = 0 == r.drmInfos.length),
                            (0 == t.drmInfos.length || (e && !n)) &&
                              (t.drmInfos = r.drmInfos),
                            (t.Qf = !1);
                        else if (
                          0 < r.drmInfos.length &&
                          ((t.drmInfos = t.drmInfos.filter(function (e) {
                            return r.drmInfos.some(function (t) {
                              return t.keySystem == e.keySystem;
                            });
                          })),
                          0 == t.drmInfos.length)
                        )
                          throw new Ee(2, 4, 4008);
                        return r.Kf || t.Kf;
                      })(v, i, t.g.ignoreDrmInfo, t.g.dash.keySystemsByURI)),
                      (h = new Set(h ? [h] : [])),
                      (v = !1),
                      g.some(function (e) {
                        return (
                          "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" ==
                            e.attributes.schemeIdUri &&
                          "JOC" == e.attributes.value
                        );
                      }) && (v = !0),
                      (g = !1),
                      c &&
                        (g =
                          u.includes("forced_subtitle") ||
                          u.includes("forced-subtitle")),
                      w &&
                        ((m = m.find(function (e) {
                          return [
                            "http://dashif.org/thumbnail_tile",
                            "http://dashif.org/guidelines/thumbnail_tile",
                          ].includes(e.attributes.schemeIdUri);
                        })) && (y = m.attributes.value),
                        !y))
                    )
                      return null;
                    (c = n.I.codecs),
                      n.profiles.includes(
                        "http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10"
                      ) &&
                        (c.includes("hvc1.2.4.L153.B0") ||
                          c.includes("hev1.2.4.L153.B0")) &&
                        (b = "PQ"),
                      (m = n.I.id ? n.ia.id + "," + n.I.id : ""),
                      t.D.length &&
                        f &&
                        t.s.set(
                          n.ia.id + "," + f,
                          (function (e) {
                            function t(e) {
                              return e
                                ? (((e = fn(e)).Ec = null),
                                  (e.Bb = null),
                                  (e.Lb = Gn(e.Lb)),
                                  e)
                                : null;
                            }
                            return (
                              (e = fn(e)),
                              (e.ia = t(e.ia)),
                              (e.Z = t(e.Z)),
                              (e.I = t(e.I)),
                              e.$ && ((e.$ = fn(e.$)), (e.$.node = null)),
                              e
                            );
                          })(n)
                        );
                    var R =
                      m && t.o.has(m)
                        ? t.o.get(m)
                        : {
                            id: t.pa++,
                            originalId: n.I.id,
                            groupId: null,
                            createSegmentIndex: function () {
                              return Promise.resolve();
                            },
                            closeSegmentIndex: function () {
                              R.segmentIndex &&
                                (R.segmentIndex.release(),
                                (R.segmentIndex = null));
                            },
                            segmentIndex: null,
                            mimeType: n.I.mimeType,
                            codecs: c,
                            frameRate: n.I.frameRate,
                            pixelAspectRatio: n.I.pixelAspectRatio,
                            bandwidth: n.bandwidth,
                            width: n.I.width,
                            height: n.I.height,
                            kind: r,
                            encrypted: 0 < i.drmInfos.length,
                            drmInfos: i.drmInfos,
                            keyIds: h,
                            language: a,
                            originalLanguage: n.Z.language,
                            label: o,
                            type: n.Z.contentType,
                            primary: s,
                            trickModeVideo: null,
                            dependencyStream: null,
                            emsgSchemeIdUris: n.I.emsgSchemeIdUris,
                            roles: u,
                            forced: g,
                            channelsCount: n.I.Id,
                            audioSamplingRate: n.I.audioSamplingRate,
                            spatialAudio: v,
                            closedCaptions: l,
                            hdr: b,
                            colorGamut: void 0,
                            videoLayout: void 0,
                            tilesLayout: y,
                            accessibilityPurpose: d,
                            external: !1,
                            fastSwitching: !1,
                            fullMimeTypes: new Set([
                              Mi(n.I.mimeType, n.I.codecs),
                            ]),
                            isAudioMuxedInVideo: !1,
                            baseOriginalId: null,
                          };
                    return (
                      (R.createSegmentIndex = function () {
                        var e;
                        return L(function (t) {
                          if (1 == t.g)
                            return R.segmentIndex
                              ? t.u(0)
                              : ((e = R), x(t, C.Vb(), 3));
                          (e.segmentIndex = t.h), S(t);
                        });
                      }),
                      m &&
                        n.wb &&
                        !t.o.has(m) &&
                        ((n = n.ia.id || ""),
                        t.B.has(n) || t.B.set(n, []),
                        t.o.set(m, R),
                        t.B.get(n).push(m)),
                      R
                    );
                  })(t, n, E, h, D, P, u, l, I, i, k, A);
                  return r &&
                    ((r.hdr = r.hdr || w),
                    (r.colorGamut = r.colorGamut || T),
                    (r.fastSwitching = v),
                    (i = i.attributes.dependencyId))
                    ? ((r.baseOriginalId = i), R.set(i, r), null)
                    : r;
                })
                .filter(function (e) {
                  return !!e;
                })),
              0 == p.length && 0 == R.size)
            ) {
              if (
                ((i = "image" == n.Z.contentType),
                t.g.dash.ignoreEmptyAdaptationSet || f || i)
              )
                return null;
              throw new Ee(2, 4, 4003);
            }
            if (!n.Z.contentType || "application" == n.Z.contentType)
              for (
                n.Z.contentType = Il(p[0].mimeType, p[0].codecs),
                  g = (f = c(p)).next();
                !g.done;
                g = f.next()
              )
                g.value.type = n.Z.contentType;
            for (
              f = n.Z.id || "__fake__" + t.pa++, m = (g = c(p)).next();
              !m.done;
              m = g.next()
            ) {
              for (
                m = m.value, b = (y = c(E.drmInfos)).next();
                !b.done;
                b = y.next()
              )
                (b = b.value).keyIds =
                  b.keyIds && m.keyIds
                    ? new Set([].concat(d(b.keyIds), d(m.keyIds)))
                    : b.keyIds || m.keyIds;
              m.groupId = f;
            }
            return (
              (r = r
                .map(function (e) {
                  return e.attributes.supplementalId || e.attributes.id;
                })
                .filter(Ji)),
              {
                id: f,
                contentType: n.Z.contentType,
                language: D,
                Si: u,
                streams: p,
                drmInfos: E.drmInfos,
                xf: i,
                li: r,
                Zg: R,
              }
            );
          }
          function bl(e, t) {
            if (
              (t = kn(
                t,
                "urn:mpeg:dash:schema:urlparam:2014",
                "UrlQueryInfo"
              )) &&
              In(t, "useMPDUrlQuery", jn, !1)
            ) {
              var n = t.attributes.queryTemplate;
              if (n)
                return function () {
                  return "$querypart$" == n
                    ? e.ca
                    : n
                        .split("&")
                        .map(function (t) {
                          if ("$querypart$" == t) return e.ca;
                          var n = /\$query:(.*?)\$/g.exec(t);
                          if (n && 2 == n.length) {
                            n = n[1];
                            var i = new we(e.ca).get(n);
                            if (i.length) return n + "=" + i[0];
                          }
                          return t;
                        })
                        .join("&");
                };
            }
            return null;
          }
          function wl(e) {
            var t, n;
            return L(function (i) {
              switch (i.g) {
                case 1:
                  return (t = 0), T(i, 2), x(i, ol(e), 4);
                case 4:
                  (t = i.h), A(i, 3);
                  break;
                case 2:
                  if (((n = k(i)), e.j)) {
                    if (e.g.raiseFatalErrorOnManifestUpdateRequestFailure)
                      return e.j.onError(n), i.return();
                    (n.severity = 1), e.j.onError(n);
                  }
                case 3:
                  if (!e.j) return i.return();
                  e.j.onManifestUpdated(), xl(e, t), S(i);
              }
            });
          }
          function xl(e, t) {
            if (!(0 > e.J)) {
              var n = e.J;
              0 <= e.g.updatePeriod && (n = e.g.updatePeriod),
                e.K.ea(Math.max(n - t, G(e.oa)));
            }
          }
          function Sl(e, t, n, i) {
            (n = n || {
              contentType: "",
              mimeType: "",
              codecs: "",
              emsgSchemeIdUris: [],
              frameRate: void 0,
              pixelAspectRatio: void 0,
              Id: null,
              audioSamplingRate: null,
              Na: 0,
              Qd: 0,
              encrypted: !1,
            }),
              (i = i || n.Ca);
            var r,
              a = t.attributes.id,
              o = t.attributes.supplementalId,
              s = wn(t, "BaseURL"),
              u = !1;
            if (e.h)
              for (var l = c(s), d = l.next(); !d.done; d = l.next()) {
                var h = d.value;
                (d = h.attributes.serviceLocation),
                  (h = Sn(h)),
                  d && h && (nu(e.h, a, d, h), (u = !0));
              }
            (u && e.h) || (r = s.map(Sn)),
              (l = t.attributes.contentType || n.contentType),
              (d = t.attributes.mimeType || n.mimeType),
              (h = Zs([t.attributes.codecs || n.codecs]).join(","));
            var f = In(t, "frameRate", On) || n.frameRate,
              p = t.attributes.sar || n.pixelAspectRatio,
              g = (function (e, t) {
                t = t.slice();
                for (var n = (e = c(e)).next(); !n.done; n = e.next())
                  (n = n.value.attributes.schemeIdUri),
                    t.includes(n) || t.push(n);
                return t;
              })(wn(t, "InbandEventStream"), n.emsgSchemeIdUris),
              m = wn(t, "AudioChannelConfiguration");
            m =
              (function (e) {
                for (var t = (e = c(e)).next(); !t.done; t = e.next()) {
                  var n = (t = t.value).attributes.schemeIdUri;
                  if (n && (t = t.attributes.value))
                    switch (n) {
                      case "urn:mpeg:dash:outputChannelPositionList:2012":
                        return t.trim().split(/ +/).length;
                      case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
                      case "urn:dts:dash:audio_channel_configuration:2012":
                        if (!(t = parseInt(t, 10))) continue;
                        return t;
                      case "tag:dolby.com,2015:dash:audio_channel_configuration:2015":
                        if (
                          ((n = [
                            2, 1, 2, 2, 2, 2, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2,
                            2,
                          ]),
                          !(t = parseInt(t, 16)))
                        )
                          continue;
                        for (var i = 0, r = 0; r < n.length; r++)
                          t & (1 << r) && (i += n[r]);
                        if (i) return i;
                        continue;
                      case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
                      case "urn:dolby:dash:audio_channel_configuration:2011":
                        if (
                          ((n = [
                            1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1,
                          ].reverse()),
                          !(t = parseInt(t, 16)))
                        )
                          continue;
                        for (r = i = 0; r < n.length; r++)
                          t & (1 << r) && (i += n[r]);
                        if (i) return i;
                        continue;
                      case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                        if (
                          ((n = [
                            0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12,
                            10, 12, 14, 12, 14,
                          ]),
                          (t = parseInt(t, 10)) && 0 < t && t < n.length)
                        )
                          return n[t];
                    }
                }
                return null;
              })(m) || n.Id;
            var v = In(t, "audioSamplingRate", _n) || n.audioSamplingRate;
            l || (l = Il(d, h));
            var y = An(t, "SegmentBase"),
              b = An(t, "SegmentTemplate"),
              w = (y && In(y, "availabilityTimeOffset", Un)) || 0,
              x = (b && In(b, "availabilityTimeOffset", Un)) || 0,
              S =
                (s && s.length && In(s[0], "availabilityTimeOffset", Un)) || 0;
            (w = n.Na + S + w + x),
              (x = null),
              (S = An(t, "SegmentSequenceProperties")) &&
                (S = An(S, "SAP")) &&
                (x = In(S, "cadence", Rn)),
              (S = t.attributes.label);
            var T = wn(t, "Label");
            return (
              T && T.length && xn((T = T[0])) && (S = xn(T)),
              {
                Ca: function () {
                  return Mt(
                    i(),
                    s.length ? (e.h && u ? iu(e.h, a) : r || []) : []
                  );
                },
                Ec: y || n.Ec,
                Bb: An(t, "SegmentList") || n.Bb,
                Lb: b || n.Lb,
                width: In(t, "width", _n) || n.width,
                height: In(t, "height", _n) || n.height,
                contentType: l,
                mimeType: d,
                codecs: h,
                frameRate: f,
                pixelAspectRatio: p,
                emsgSchemeIdUris: g,
                id: o || a,
                originalId: a,
                language: t.attributes.lang,
                Id: m,
                audioSamplingRate: v,
                Na: w,
                yd: null,
                Qd: x || n.Qd,
                label: S || null,
                encrypted: !1,
              }
            );
          }
          function Tl(e, t, n, i) {
            var r, a, o, s, u, l, c;
            return L(function (d) {
              if (1 == d.g)
                return (
                  (r = [bt(n)]),
                  (a = Mt(t(), r)),
                  ((o = ts(a, e.g.retryParameters)).method = i),
                  (s = e.j.networkingEngine.request(4, o, {
                    isPreload: e.fa(),
                  })),
                  Zo(e.S, s),
                  x(d, s.promise, 2)
                );
              if (((u = d.h), "HEAD" == i)) {
                if (!u.headers || !u.headers.date) return d.return(0);
                l = u.headers.date;
              } else l = ft(u.data);
              return (
                (c = Date.parse(l)),
                isNaN(c) ? d.return(0) : d.return(c - Date.now())
              );
            });
          }
          function Al(e, t, n, i, r) {
            for (
              var a = i.attributes.schemeIdUri || "",
                o = i.attributes.value || "",
                s = In(i, "timescale", _n) || 1,
                u = In(i, "presentationTimeOffset", _n) || 0,
                l = (i = c(wn(i, "Event"))).next();
              !l.done;
              l = i.next()
            ) {
              var d = In((l = l.value), "presentationTime", _n) || 0,
                h = In(l, "duration", _n) || 0;
              (h = (d = Math.max((d - u) / s + t, t)) + h / s),
                null != n &&
                  ((d = Math.min(d, t + n)), (h = Math.min(h, t + n))),
                h < r ||
                  ((l = {
                    schemeIdUri: a,
                    value: o,
                    startTime: d,
                    endTime: h,
                    id: l.attributes.id || "",
                    timescale: s,
                    eventElement: zn(l),
                    eventNode: Gn(l),
                  }),
                  e.j.onTimelineRegionAdded(l));
            }
          }
          function kl(e, t, n, i, r) {
            var a, o, s, u;
            return L(function (l) {
              return 1 == l.g
                ? ((a = os),
                  (o = r ? 0 : 1),
                  (s = ru(t, n, i, e.g.retryParameters)),
                  x(l, Cl(e, s, a, { type: o }), 2))
                : ((u = l.h), l.return(u.data));
            });
          }
          function Il(e, t) {
            return Gi((t = Mi(e, t))) ? Rt : e.split("/")[0];
          }
          function Cl(e, t, n, i) {
            return (
              i || (i = {}),
              (i.isPreload = e.fa()),
              (t = e.j.networkingEngine.request(n, t, i)),
              Zo(e.S, t),
              t.promise
            );
          }
          function Ml() {}
          ((i = al.prototype).configure = function (e, t) {
            var n =
              this.j &&
              e.updatePeriod != this.g.updatePeriod &&
              0 <= e.updatePeriod;
            (this.g = e),
              t && (this.fa = t),
              n && this.i && this.i.presentationTimeline.R() && this.K.Nb(),
              this.h && this.h.configure(this.g),
              this.m &&
                (this.m.ug(this.g.dash.multiTypeVariantsAllowed && Vt()),
                this.m.Ag(this.g.dash.useStreamOnceInPeriodFlattening));
          }),
            (i.start = function (e, t) {
              var n,
                i = this;
              return L(function (r) {
                if (1 == r.g)
                  return (
                    (i.ga = t.isLowLatencyMode()),
                    (i.A = [e]),
                    (i.j = t),
                    x(r, ol(i), 2)
                  );
                if (((n = r.h), i.j && xl(i, n), !i.j))
                  throw new Ee(2, 7, 7001);
                return r.return(i.i);
              });
            }),
            (i.stop = function () {
              for (
                var e = c(this.o.values()), t = e.next();
                !t.done;
                t = e.next()
              )
                (t = t.value).segmentIndex && t.segmentIndex.release();
              return (
                this.m && this.m.release(),
                (this.g = this.j = null),
                (this.A = []),
                (this.i = null),
                this.o.clear(),
                this.B.clear(),
                this.s.clear(),
                (this.l = {
                  Gd: "",
                  type: "",
                  profiles: [],
                  zb: null,
                  Na: 0,
                  Ca: null,
                  cd: 0,
                }),
                (this.m = null),
                null != this.K && (this.K.stop(), (this.K = null)),
                this.h && this.h.destroy(),
                this.F && (this.F.release(), (this.F = null)),
                this.S.destroy()
              );
            }),
            (i.update = function () {
              var e,
                t = this;
              return L(function (n) {
                return 1 == n.g
                  ? (T(n, 2), x(n, ol(t), 4))
                  : 2 != n.g
                  ? A(n, 0)
                  : ((e = k(n)),
                    t.j && e ? (t.j.onError(e), void S(n)) : n.return());
              });
            }),
            (i.onExpirationUpdated = function () {}),
            (i.onInitialVariantChosen = function (e) {
              if (this.i && this.i.presentationTimeline.R()) {
                var t = e.video || e.audio;
                if (t && t.segmentIndex) {
                  e = this.i.presentationTimeline.Gb();
                  var n = t.segmentIndex.find(e);
                  null != n &&
                    (t = t.segmentIndex.get(n)) &&
                    ((this.J = t.endTime - e), xl(this, 0));
                }
              }
            }),
            (i.banLocation = function (e) {
              this.h && this.h.banLocation(e);
            }),
            (i.setMediaElement = function (e) {
              this.G = e;
            }),
            F("shaka.dash.DashParser", al),
            Ys("application/dash+xml", function () {
              return new al();
            }),
            Ys("video/vnd.mpeg.dash.mpd", function () {
              return new al();
            }),
            F("shaka.dependencies", Ml),
            (Ml.has = function (e) {
              return Pl.has(e);
            }),
            (Ml.add = function (e, t) {
              if (!Dl[e]) throw Error(e + " is not supported");
              e == El
                ? ne("mux.js", "mux.js is no longer used in Shaka Player.")
                : Pl.set(e, function () {
                    return t;
                  });
            });
          var El = "muxjs",
            Dl = { Ti: El, ISOBoxer: "ISOBoxer" };
          Ml.Allowed = Dl;
          var Pl = new Map([
            [
              "ISOBoxer",
              function () {
                return e.ISOBoxer;
              },
            ],
          ]);
          function Ll(e) {
            (this.g = !1), (this.h = new Vo()), (this.i = e);
          }
          function Rl(e, t) {
            if (e.g) {
              if (t instanceof Ee && 7003 == t.code) throw t;
              throw new Ee(2, 7, 7003, t);
            }
          }
          function Nl(e) {
            for (
              var t = new Map(), n = c(Object.keys(e)), i = n.next();
              !i.done;
              i = n.next()
            )
              (i = i.value), t.set(i, e[i]);
            return t;
          }
          function _l(e) {
            var t = {};
            return (
              e.forEach(function (e, n) {
                t[n] = e;
              }),
              t
            );
          }
          function Ul(e) {
            var t = this;
            (this.C = e),
              (this.i = this.A = null),
              (this.fa = !1),
              (this.G = 0),
              (this.h = null),
              (this.o = new Z()),
              (this.j = new Map()),
              (this.W = []),
              (this.B = new Map()),
              (this.K = !1),
              (this.m = new Vo()),
              (this.g = null),
              (this.s = function (n) {
                2 == n.severity && t.m.reject(n), e.onError(n);
              }),
              (this.Y = new Map()),
              (this.ga = new Map()),
              (this.L = new Oe(function () {
                return (function (e) {
                  var t = e.Y,
                    n = e.ga;
                  n.clear(),
                    t.forEach(function (e, t) {
                      return n.set(t, e);
                    }),
                    (t = Array.from(n.values())),
                    t.length &&
                      t.every(function (e) {
                        return "expired" == e;
                      }) &&
                      e.s(new Ee(2, 6, 6014)),
                    e.C.kg(_l(n));
                })(t);
              })),
              (this.da = !1),
              (this.O = []),
              (this.X = !1),
              (this.J = new Oe(function () {
                !(function (e) {
                  e.j.forEach(function (t, n) {
                    var i = t.$e,
                      r = n.expiration;
                    isNaN(r) && (r = 1 / 0),
                      r != i &&
                        (e.C.onExpirationUpdated(n.sessionId, r), (t.$e = r));
                  });
                })(t);
              })),
              this.m.catch(function () {}),
              (this.l = new Ll(function () {
                return (function (e) {
                  return L(function (t) {
                    switch (t.g) {
                      case 1:
                        return (
                          e.o.release(),
                          (e.o = null),
                          e.m.reject(),
                          e.J.stop(),
                          (e.J = null),
                          e.L.stop(),
                          (e.L = null),
                          x(t, ql(e), 2)
                        );
                      case 2:
                        if (!e.i) {
                          t.u(3);
                          break;
                        }
                        return T(t, 4), x(t, e.i.setMediaKeys(null), 6);
                      case 6:
                        A(t, 5);
                        break;
                      case 4:
                        k(t);
                      case 5:
                        e.i = null;
                      case 3:
                        (e.h = null),
                          (e.A = null),
                          (e.B = new Map()),
                          (e.g = null),
                          (e.s = function () {}),
                          (e.C = null),
                          (e.ca = !1),
                          (e.F = null),
                          S(t);
                    }
                  });
                })(t);
              })),
              (this.ca = !1),
              (this.D = this.F = null),
              (this.S = function () {
                return !1;
              });
          }
          function jl(t, n, i, r) {
            (r = void 0 === r || r), (t.B = new Map());
            for (var a = (i = c(i)).next(); !a.done; a = i.next())
              t.B.set(a.value, { initData: null, initDataType: null });
            for (
              a = (i = c(t.g.persistentSessionsMetadata)).next();
              !a.done;
              a = i.next()
            )
              (a = a.value),
                t.B.set(a.sessionId, {
                  initData: a.initData,
                  initDataType: a.initDataType,
                });
            return (
              (t.da = 0 < t.B.size),
              (function (t, n, i) {
                var r, a, o, s, u, l, d, h, f, p, g, m, v, y, b, w, S, I;
                return L(function (C) {
                  if (1 == C.g) {
                    for (
                      (function (t, n) {
                        if (((t = Nl(t)), 0 != t.size)) {
                          t = (function (t) {
                            var n = void 0 === n ? "cenc" : n,
                              i = [],
                              r = [],
                              a = [];
                            t.forEach(function (e, t) {
                              var n = t;
                              22 != n.length && (n = Tt(kt(t), !1));
                              var o = e;
                              22 != o.length && (o = Tt(kt(e), !1)),
                                (e = { kty: "oct", kid: n, k: o }),
                                i.push(e),
                                r.push(e.kid),
                                a.push(t);
                            }),
                              (t = JSON.stringify({ keys: i }));
                            var o = JSON.stringify({ kids: r });
                            return (
                              (o = [
                                { initData: ke(mt(o)), initDataType: "keyids" },
                              ]),
                              {
                                keySystem: "org.w3.clearkey",
                                encryptionScheme: n,
                                licenseServerUri:
                                  "data:application/json;base64," + e.btoa(t),
                                distinctiveIdentifierRequired: !1,
                                persistentStateRequired: !1,
                                audioRobustness: "",
                                videoRobustness: "",
                                serverCertificate: null,
                                serverCertificateUri: "",
                                sessionType: "",
                                initData: o,
                                keyIds: new Set(a),
                              }
                            );
                          })(t);
                          for (var i = (n = c(n)).next(); !i.done; i = n.next())
                            (i = i.value).video && (i.video.drmInfos = [t]),
                              i.audio && (i.audio.drmInfos = [t]);
                        }
                      })(t.g.clearKeys, n),
                        !(r = n.some(function (e) {
                          return !!(
                            (e.video && e.video.drmInfos.length) ||
                            (e.audio && e.audio.drmInfos.length)
                          );
                        })) &&
                          i &&
                          ((a = Nl(t.g.servers)),
                          (function (e, t) {
                            var n = [];
                            for (
                              t.forEach(function (e, t) {
                                n.push({
                                  keySystem: t,
                                  licenseServerUri: e,
                                  distinctiveIdentifierRequired: !1,
                                  persistentStateRequired: !1,
                                  audioRobustness: "",
                                  videoRobustness: "",
                                  serverCertificate: null,
                                  serverCertificateUri: "",
                                  initData: [],
                                  keyIds: new Set(),
                                });
                              }),
                                e = c(e),
                                t = e.next();
                              !t.done;
                              t = e.next()
                            )
                              (t = t.value).video && (t.video.drmInfos = n),
                                t.audio && (t.audio.drmInfos = n);
                          })(n, a)),
                        o = new Set(),
                        s = c(n),
                        u = s.next();
                      !u.done;
                      u = s.next()
                    )
                      for (
                        l = u.value, d = Kl(l), h = c(d), f = h.next();
                        !f.done;
                        f = h.next()
                      )
                        (p = f.value), o.add(p);
                    for (g = c(o), m = g.next(); !m.done; m = g.next())
                      Yl(
                        m.value,
                        Nl(t.g.servers),
                        Nl(t.g.advanced || {}),
                        t.g.keySystemsMapping
                      );
                    for (
                      v = function (e, n) {
                        for (
                          var i = [], r = (e = c(e)).next();
                          !r.done;
                          r = e.next()
                        ) {
                          var a,
                            o =
                              (r = r.value)[n] ||
                              (t.g.advanced &&
                                t.g.advanced[r.keySystem] &&
                                t.g.advanced[r.keySystem][n]) ||
                              "";
                          if (
                            ((a = "" == o) &&
                              (a =
                                !!(a = r.keySystem) &&
                                !!a.match(/^com\.widevine\.alpha/)),
                            a &&
                              ("audioRobustness" == n
                                ? (o = [t.g.defaultAudioRobustnessForWidevine])
                                : "videoRobustness" == n &&
                                  (o = [
                                    t.g.defaultVideoRobustnessForWidevine,
                                  ])),
                            "string" == typeof o)
                          )
                            i.push(r);
                          else if (Array.isArray(o))
                            for (
                              0 === o.length && (o = [""]),
                                a = (o = c(o)).next();
                              !a.done;
                              a = o.next()
                            ) {
                              var s = {};
                              i.push(
                                Object.assign({}, r, ((s[n] = a.value), s))
                              );
                            }
                        }
                        return i;
                      },
                        y = new Set(),
                        b = c(n),
                        w = b.next();
                      !w.done;
                      w = b.next()
                    )
                      (S = w.value).video &&
                        !y.has(S.video) &&
                        ((S.video.drmInfos = v(
                          S.video.drmInfos,
                          "videoRobustness"
                        )),
                        (S.video.drmInfos = v(
                          S.video.drmInfos,
                          "audioRobustness"
                        )),
                        y.add(S.video)),
                        S.audio &&
                          !y.has(S.audio) &&
                          ((S.audio.drmInfos = v(
                            S.audio.drmInfos,
                            "videoRobustness"
                          )),
                          (S.audio.drmInfos = v(
                            S.audio.drmInfos,
                            "audioRobustness"
                          )),
                          y.add(S.audio));
                    return (
                      y.clear(),
                      x(C, pr(n, t.da, t.ca, t.g.preferredKeySystems), 2)
                    );
                  }
                  return (
                    Rl(t.l),
                    r || Object.keys(t.g.servers).length
                      ? ((I = (function (e, t) {
                          var n, i, r, a, o, s, u;
                          return L(function (l) {
                            switch (l.g) {
                              case 1:
                                if (((n = new Map()), t.length)) {
                                  (i = (function (e, t, n) {
                                    for (
                                      var i = c(t), r = i.next();
                                      !r.done;
                                      r = i.next()
                                    )
                                      for (
                                        var a = (r = c(Kl(r.value))).next();
                                        !a.done;
                                        a = r.next()
                                      )
                                        (a = a.value),
                                          n.has(a.keySystem) ||
                                            n.set(a.keySystem, []),
                                          n.get(a.keySystem).push(a);
                                    if (1 == n.size && n.has(""))
                                      throw new Ee(2, 6, 6e3);
                                    (i = e.g.preferredKeySystems),
                                      i.length ||
                                        ((r = Nl(e.g.servers)),
                                        1 == r.size &&
                                          (i = Array.from(r.keys()))),
                                      (r = c(i));
                                    var o = r.next();
                                    for (
                                      a = {};
                                      !o.done;
                                      a = { ng: void 0 }, o = r.next()
                                    ) {
                                      a.ng = o.value;
                                      for (
                                        var s = (o = c(t)).next();
                                        !s.done;
                                        s = o.next()
                                      )
                                        if (
                                          (s = s.value.decodingInfos.find(
                                            (function (e) {
                                              return function (t) {
                                                return (
                                                  t.supported &&
                                                  null != t.keySystemAccess &&
                                                  t.keySystemAccess.keySystem ==
                                                    e.ng
                                                );
                                              };
                                            })(a)
                                          ))
                                        )
                                          return s.keySystemAccess;
                                    }
                                    for (
                                      r = c([!0, !1]), a = r.next();
                                      !a.done;
                                      a = r.next()
                                    )
                                      for (
                                        a = a.value, o = c(t), s = o.next();
                                        !s.done;
                                        s = o.next()
                                      )
                                        for (
                                          var u = (s = c(
                                            s.value.decodingInfos
                                          )).next();
                                          !u.done;
                                          u = s.next()
                                        )
                                          if (
                                            (u = u.value).supported &&
                                            u.keySystemAccess
                                          ) {
                                            var l = u.keySystemAccess.keySystem;
                                            if (!i.includes(l)) {
                                              var d = n.get(l);
                                              for (
                                                !d &&
                                                  e.g.keySystemsMapping[l] &&
                                                  (d = n.get(
                                                    e.g.keySystemsMapping[l]
                                                  )),
                                                  d = (l = c(d)).next();
                                                !d.done;
                                                d = l.next()
                                              )
                                                if (
                                                  !!d.value.licenseServerUri ==
                                                  a
                                                )
                                                  return u.keySystemAccess;
                                            }
                                          }
                                    return null;
                                  })(e, t, n)),
                                    l.u(2);
                                  break;
                                }
                                return x(
                                  l,
                                  (function (e) {
                                    var t,
                                      n,
                                      i,
                                      r,
                                      a,
                                      o,
                                      s,
                                      u,
                                      l,
                                      d,
                                      h,
                                      f,
                                      p,
                                      g,
                                      m,
                                      v;
                                    return L(function (y) {
                                      switch (y.g) {
                                        case 1:
                                          if (
                                            1 == (void 0).size &&
                                            (void 0).has("")
                                          )
                                            throw new Ee(2, 6, 6e3);
                                          for (
                                            n = c((void 0).values()),
                                              i = n.next();
                                            !i.done;
                                            i = n.next()
                                          )
                                            0 ==
                                              (r = i.value).audioCapabilities
                                                .length &&
                                              delete r.audioCapabilities,
                                              0 == r.videoCapabilities.length &&
                                                delete r.videoCapabilities;
                                          (a = c(e.g.preferredKeySystems)),
                                            (o = a.next());
                                        case 2:
                                          if (o.done) {
                                            y.u(4);
                                            break;
                                          }
                                          if (
                                            ((s = o.value), !(void 0).has(s))
                                          ) {
                                            y.u(3);
                                            break;
                                          }
                                          return (
                                            (u = (void 0).get(s)),
                                            T(y, 6),
                                            x(
                                              y,
                                              navigator.requestMediaKeySystemAccess(
                                                s,
                                                [u]
                                              ),
                                              8
                                            )
                                          );
                                        case 8:
                                          return (t = y.h), y.return(t);
                                        case 6:
                                          k(y);
                                        case 7:
                                          Rl(e.l);
                                        case 3:
                                          (o = a.next()), y.u(2);
                                          break;
                                        case 4:
                                          (l = c([!0, !1])), (d = l.next());
                                        case 9:
                                          if (d.done) {
                                            y.u(11);
                                            break;
                                          }
                                          (h = d.value),
                                            (f = c((void 0).keys())),
                                            (p = f.next());
                                        case 12:
                                          if (p.done) {
                                            (d = l.next()), y.u(9);
                                            break;
                                          }
                                          if (
                                            ((g = p.value),
                                            (m = (void 0).get(g)),
                                            (v = m.drmInfos.some(function (e) {
                                              return !!e.licenseServerUri;
                                            })),
                                            v != h)
                                          ) {
                                            y.u(13);
                                            break;
                                          }
                                          return (
                                            T(y, 15),
                                            x(
                                              y,
                                              navigator.requestMediaKeySystemAccess(
                                                g,
                                                [m]
                                              ),
                                              17
                                            )
                                          );
                                        case 17:
                                          return (t = y.h), y.return(t);
                                        case 15:
                                          k(y);
                                        case 16:
                                          Rl(e.l);
                                        case 13:
                                          (p = f.next()), y.u(12);
                                          break;
                                        case 11:
                                          return y.return(t);
                                      }
                                    });
                                  })(e),
                                  3
                                );
                              case 3:
                                i = l.h;
                              case 2:
                                if (!(r = i)) {
                                  if (!navigator.requestMediaKeySystemAccess)
                                    throw new Ee(2, 6, 6020);
                                  throw new Ee(2, 6, 6001);
                                }
                                if (
                                  (Rl(e.l),
                                  T(l, 4),
                                  r.getConfiguration(),
                                  (a =
                                    e.g.keySystemsMapping[r.keySystem] ||
                                    r.keySystem),
                                  t.length)
                                ) {
                                  var d = a,
                                    h = n.get(a),
                                    f = [],
                                    p = [],
                                    g = [],
                                    m = [],
                                    v = [],
                                    y = new Set(),
                                    b = new Set();
                                  Xl(h, f, p, m, g, v, y, b);
                                  var w = e.da
                                    ? "persistent-license"
                                    : "temporary";
                                  for (
                                    d = {
                                      keySystem: d,
                                      encryptionScheme: f[0],
                                      licenseServerUri: p[0],
                                      distinctiveIdentifierRequired:
                                        h[0].distinctiveIdentifierRequired,
                                      persistentStateRequired:
                                        h[0].persistentStateRequired,
                                      sessionType: h[0].sessionType || w,
                                      audioRobustness:
                                        h[0].audioRobustness || "",
                                      videoRobustness:
                                        h[0].videoRobustness || "",
                                      serverCertificate: m[0],
                                      serverCertificateUri: g[0],
                                      initData: v,
                                      keyIds: y,
                                    },
                                      0 < b.size && (d.keySystemUris = b),
                                      b = (h = c(h)).next();
                                    !b.done;
                                    b = h.next()
                                  )
                                    (b = b.value)
                                      .distinctiveIdentifierRequired &&
                                      (d.distinctiveIdentifierRequired =
                                        b.distinctiveIdentifierRequired),
                                      b.persistentStateRequired &&
                                        (d.persistentStateRequired =
                                          b.persistentStateRequired);
                                  h = d;
                                } else (h = a), (b = (void 0).get(a)), (d = []), (f = []), (p = []), (g = []), (m = []), (v = new Set()), Xl(b.drmInfos, d, f, g, p, m, v), (h = { keySystem: h, encryptionScheme: d[0], licenseServerUri: f[0], distinctiveIdentifierRequired: "required" == b.distinctiveIdentifier, persistentStateRequired: "required" == b.persistentState, sessionType: b.sessionTypes[0] || "temporary", audioRobustness: (b.audioCapabilities ? b.audioCapabilities[0].robustness : "") || "", videoRobustness: (b.videoCapabilities ? b.videoCapabilities[0].robustness : "") || "", serverCertificate: g[0], serverCertificateUri: p[0], initData: m, keyIds: v });
                                if (((e.h = h), !e.h.licenseServerUri))
                                  throw new Ee(2, 6, 6012, e.h.keySystem);
                                return x(l, r.createMediaKeys(), 6);
                              case 6:
                                if (
                                  ((o = l.h),
                                  Rl(e.l),
                                  (e.A = o),
                                  "" == e.g.minHdcpVersion ||
                                    !("getStatusForPolicy" in e.A))
                                ) {
                                  l.u(7);
                                  break;
                                }
                                return (
                                  T(l, 8),
                                  x(
                                    l,
                                    e.A.getStatusForPolicy({
                                      minHdcpVersion: e.g.minHdcpVersion,
                                    }),
                                    10
                                  )
                                );
                              case 10:
                                if ("usable" != l.h) throw new Ee(2, 6, 6018);
                                Rl(e.l), A(l, 7, 4);
                                break;
                              case 8:
                                if ((s = k(l, 4)) instanceof Ee) throw s;
                                throw new Ee(2, 6, 6019, s.message);
                              case 7:
                                return (
                                  (e.fa = !0),
                                  x(
                                    l,
                                    (function (e) {
                                      var t, n;
                                      return L(function (i) {
                                        switch (i.g) {
                                          case 1:
                                            if (!e.A || !e.h) return i.return();
                                            if (
                                              !e.h.serverCertificateUri ||
                                              (e.h.serverCertificate &&
                                                e.h.serverCertificate.length)
                                            ) {
                                              i.u(2);
                                              break;
                                            }
                                            return (
                                              (t = ts(
                                                [e.h.serverCertificateUri],
                                                e.g.retryParameters
                                              )),
                                              T(i, 3),
                                              x(
                                                i,
                                                e.C.cc.request(5, t, {
                                                  isPreload: e.S(),
                                                }).promise,
                                                5
                                              )
                                            );
                                          case 5:
                                            (n = i.h),
                                              (e.h.serverCertificate = ke(
                                                n.data
                                              )),
                                              A(i, 4);
                                            break;
                                          case 3:
                                            throw new Ee(2, 6, 6017, k(i));
                                          case 4:
                                            if (e.l.g) return i.return();
                                          case 2:
                                            return e.h.serverCertificate &&
                                              e.h.serverCertificate.length
                                              ? (T(i, 6),
                                                x(
                                                  i,
                                                  e.A.setServerCertificate(
                                                    e.h.serverCertificate
                                                  ),
                                                  8
                                                ))
                                              : i.return();
                                          case 8:
                                            A(i, 0);
                                            break;
                                          case 6:
                                            throw new Ee(
                                              2,
                                              6,
                                              6004,
                                              k(i).message
                                            );
                                        }
                                      });
                                    })(e),
                                    11
                                  )
                                );
                              case 11:
                                Rl(e.l), A(l, 0);
                                break;
                              case 4:
                                if (
                                  ((u = k(l)),
                                  Rl(e.l, u),
                                  (e.h = null),
                                  u instanceof Ee)
                                )
                                  throw u;
                                throw new Ee(2, 6, 6002, u.message);
                            }
                          });
                        })(t, n)),
                        C.return(r ? I : I.catch(function () {})))
                      : ((t.fa = !0), C.return(Promise.resolve()))
                  );
                });
              })(t, n, r)
            );
          }
          function Ol(e) {
            var t;
            return L(function (n) {
              switch (n.g) {
                case 1:
                  if (e.i.mediaKeys) return n.return();
                  if (!e.F) {
                    n.u(2);
                    break;
                  }
                  return x(n, e.F, 3);
                case 3:
                  return Rl(e.l), n.return();
                case 2:
                  return T(n, 4), (e.F = e.i.setMediaKeys(e.A)), x(n, e.F, 6);
                case 6:
                  A(n, 5);
                  break;
                case 4:
                  (t = k(n)), e.s(new Ee(2, 6, 6003, t.message));
                case 5:
                  Rl(e.l), S(n);
              }
            });
          }
          function Bl(e, t, n) {
            if (n.length) {
              if (e.g.ignoreDuplicateInitData) {
                for (
                  var i = e.j.values(), r = (i = c(i)).next();
                  !r.done;
                  r = i.next()
                )
                  if (Te(n, r.value.initData)) return;
                var a = !1;
                if (
                  (e.B.forEach(function (e) {
                    !a && Te(n, e.initData) && (a = !0);
                  }),
                  a)
                )
                  return;
              }
              (e.K = !0),
                0 < e.j.size &&
                  Wl(e) &&
                  (e.m.resolve(),
                  (e.K = !1),
                  (e.m = new Vo()),
                  e.m.catch(function () {})),
                (function (e, t, n, i) {
                  try {
                    var r = e.A.createSession(i);
                  } catch (a) {
                    return void e.s(new Ee(2, 6, 6005, a.message));
                  }
                  e.o.H(r, "message", function (t) {
                    e.i &&
                    e.g.delayLicenseRequestUntilPlayed &&
                    e.i.paused &&
                    !e.X
                      ? e.O.push(t)
                      : Vl(e, t);
                  }),
                    e.o.H(r, "keystatuseschange", function (t) {
                      return zl(e, t);
                    }),
                    e.j.set(r, {
                      initData: n,
                      initDataType: t,
                      loaded: !1,
                      $e: 1 / 0,
                      ub: null,
                      type: i,
                    });
                  try {
                    n = e.g.initDataTransform(n, t, e.h);
                  } catch (a) {
                    return (
                      (t = a),
                      a instanceof Ee || (t = new Ee(2, 6, 6016, a)),
                      void e.s(t)
                    );
                  }
                  e.g.logLicenseExchange && Tt(n),
                    r.generateRequest(t, n).catch(function (t) {
                      if (!e.l.g) {
                        e.j.delete(r);
                        var n = t.errorCode;
                        if (n && n.systemCode) {
                          var i = n.systemCode;
                          0 > i && (i += Math.pow(2, 32)),
                            (i = "0x" + i.toString(16));
                        }
                        e.s(new Ee(2, 6, 6006, t.message, t, i));
                      }
                    });
                })(e, t, n, e.h.sessionType);
            }
          }
          function Fl(e) {
            Wl(e) && e.m.resolve();
          }
          function Hl(e, t) {
            new Oe(function () {
              (t.loaded = !0), Fl(e);
            }).ea($l);
          }
          function Vl(e, t) {
            var n, i, r, a, o, s, u, l, d, h, f, p, g, m;
            L(function (v) {
              switch (v.g) {
                case 1:
                  if (
                    ((n = t.target),
                    e.g.logLicenseExchange && Tt(t.message),
                    (i = e.j.get(n)),
                    (r = e.h.licenseServerUri),
                    (a = e.g.advanced[e.h.keySystem]),
                    "individualization-request" == t.messageType &&
                      a &&
                      a.individualizationServer &&
                      (r = a.individualizationServer),
                    ((o = ts([r], e.g.retryParameters)).body = t.message),
                    (o.method = "POST"),
                    (o.licenseRequestType = t.messageType),
                    (o.sessionId = n.sessionId),
                    (o.drmInfo = e.h),
                    i &&
                      ((o.initData = i.initData),
                      (o.initDataType = i.initDataType)),
                    a && a.headers)
                  )
                    for (s in a.headers) o.headers[s] = a.headers[s];
                  if ("org.w3.clearkey" === e.h.keySystem) {
                    var y = o,
                      b = e.h;
                    try {
                      var w = gt(y.body);
                      if (w) {
                        var I = JSON.parse(w);
                        I.type ||
                          ((I.type = b.sessionType),
                          (y.body = mt(JSON.stringify(I))));
                      }
                    } catch (C) {}
                  }
                  if (Re(e.h.keySystem))
                    if (
                      (y = pt(o.body, !0, !0)).includes("PlayReadyKeyMessage")
                    ) {
                      for (
                        w = (b = c(
                          (b = Tn(
                            (y = mn(y, "PlayReadyKeyMessage")),
                            "HttpHeader"
                          ))
                        )).next();
                        !w.done;
                        w = b.next()
                      )
                        (w = Tn((I = w.value), "name")[0]),
                          (I = Tn(I, "value")[0]),
                          (o.headers[xn(w)] = xn(I));
                      (y = Tn(y, "Challenge")[0]), (o.body = At(xn(y)));
                    } else
                      o.headers["Content-Type"] = "text/xml; charset=utf-8";
                  return (
                    (u = Date.now()),
                    T(v, 2),
                    (d = e.C.cc.request(2, o, { isPreload: e.S() })),
                    e.W.push(d),
                    x(v, d.promise, 4)
                  );
                case 4:
                  (l = v.h), rn(e.W, d), A(v, 3);
                  break;
                case 2:
                  return (
                    (h = k(v)),
                    e.l.g
                      ? v.return()
                      : ((f = new Ee(2, 6, 6007, h)),
                        1 == e.j.size
                          ? (e.s(f), i && i.ub && i.ub.reject(f))
                          : (i && i.ub && i.ub.reject(f),
                            e.j.delete(n),
                            Wl(e) && (e.m.resolve(), e.L.ea(0.1))),
                        v.return())
                  );
                case 3:
                  return e.l.g
                    ? v.return()
                    : ((e.G += (Date.now() - u) / 1e3),
                      e.g.logLicenseExchange && Tt(l.data),
                      T(v, 5),
                      x(v, n.update(l.data), 7));
                case 7:
                  A(v, 6);
                  break;
                case 5:
                  return (
                    (p = k(v)),
                    (g = new Ee(2, 6, 6008, p.message)),
                    e.s(g),
                    i && i.ub && i.ub.reject(g),
                    v.return()
                  );
                case 6:
                  if (e.l.g) return v.return();
                  (m = new Yo("drmsessionupdate")),
                    e.C.onEvent(m),
                    i && (i.ub && i.ub.resolve(), Hl(e, i)),
                    S(v);
              }
            });
          }
          function zl(e, t) {
            t = t.target;
            var n = e.j.get(t),
              i = !1;
            t.keyStatuses.forEach(function (t, r) {
              if ("string" == typeof r) {
                var a = r;
                (r = t), (t = a);
              }
              if (
                Re(e.h.keySystem) &&
                16 == r.byteLength &&
                (He() || $e() || rt("sony.hbbtv.tv.G5"))
              ) {
                var o = (a = Ce(r)).getUint32(0, !0),
                  s = a.getUint16(4, !0),
                  u = a.getUint16(6, !0);
                a.setUint32(0, o, !1),
                  a.setUint16(4, s, !1),
                  a.setUint16(6, u, !1);
              }
              "status-pending" != t && (n.loaded = !0),
                "expired" == t && (i = !0),
                (r = It(r).slice(0, 32)),
                e.Y.set(r, t);
            });
            var r = t.expiration - Date.now();
            (0 > r || (i && 1e3 > r)) && n && !n.ub && (e.j.delete(t), Gl(t)),
              Wl(e) && (e.m.resolve(), e.L.ea(Zl));
          }
          function Gl(e) {
            return L(function (t) {
              return 1 == t.g
                ? (T(t, 2),
                  x(
                    t,
                    $i(
                      Jl,
                      Promise.all([e.close().catch(function () {}), e.closed])
                    ),
                    4
                  ))
                : 2 != t.g
                ? A(t, 0)
                : (k(t), void S(t));
            });
          }
          function ql(e) {
            var t;
            return L(function (n) {
              return (
                (t = Array.from(e.j.entries())),
                e.j.clear(),
                x(
                  n,
                  Promise.all(
                    t.map(function (t) {
                      var n = (t = c(t)).next().value,
                        i = t.next().value;
                      return L(function (t) {
                        return 1 == t.g
                          ? (T(t, 2),
                            e.B.has(n.sessionId) ||
                            "persistent-license" !== i.type ||
                            e.g.persistentSessionOnlinePlayback
                              ? x(t, Gl(n), 5)
                              : x(t, n.remove(), 5))
                          : 2 != t.g
                          ? A(t, 0)
                          : (k(t), void S(t));
                      });
                    })
                  ),
                  0
                )
              );
            });
          }
          function Kl(e) {
            return (e.video ? e.video.drmInfos : []).concat(
              e.audio ? e.audio.drmInfos : []
            );
          }
          function Wl(e) {
            return (function (e, t) {
              for (var n = (e = c(e)).next(); !n.done; n = e.next())
                if (!t(n.value)) return !1;
              return !0;
            })((e = e.j.values()), function (e) {
              return e.loaded;
            });
          }
          function Xl(t, n, i, r, a, o, s, u) {
            for (
              var l = [], h = (t = c(t)).next(), f = {};
              !h.done;
              f = { ma: void 0 }, h = t.next()
            ) {
              if (
                ((f.ma = h.value),
                n.includes(f.ma.encryptionScheme) ||
                  n.push(f.ma.encryptionScheme),
                "org.w3.clearkey" == f.ma.keySystem &&
                f.ma.licenseServerUri.startsWith(
                  "data:application/json;base64,"
                )
                  ? l.includes(f.ma.licenseServerUri) ||
                    l.push(f.ma.licenseServerUri)
                  : i.includes(f.ma.licenseServerUri) ||
                    i.push(f.ma.licenseServerUri),
                a.includes(f.ma.serverCertificateUri) ||
                  a.push(f.ma.serverCertificateUri),
                f.ma.serverCertificate &&
                  (r.some(
                    (function (e) {
                      return function (t) {
                        return Te(t, e.ma.serverCertificate);
                      };
                    })(f)
                  ) ||
                    r.push(f.ma.serverCertificate)),
                f.ma.initData)
              )
                for (
                  var p = (h = c(f.ma.initData)).next(), g = {};
                  !p.done;
                  g = { Se: void 0 }, p = h.next()
                )
                  (g.Se = p.value),
                    o.some(
                      (function (e) {
                        return function (t) {
                          var n = e.Se;
                          return (
                            !(!t.keyId || t.keyId != n.keyId) ||
                            (t.initDataType == n.initDataType &&
                              Te(t.initData, n.initData))
                          );
                        };
                      })(g)
                    ) || o.push(g.Se);
              if (f.ma.keyIds)
                for (p = (h = c(f.ma.keyIds)).next(); !p.done; p = h.next())
                  s.add(p.value);
              if (f.ma.keySystemUris && u)
                for (
                  h = (f = c(f.ma.keySystemUris)).next();
                  !h.done;
                  h = f.next()
                )
                  u.add(h.value);
            }
            if (1 == l.length) i.push(l[0]);
            else if (0 < l.length) {
              for (n = [], r = (l = c(l)).next(); !r.done; r = l.next())
                (r = e.atob(
                  r.value.split("data:application/json;base64,").pop()
                )),
                  (r = JSON.parse(r)),
                  n.push.apply(n, d(r.keys));
              (l = JSON.stringify({ keys: n })),
                i.push("data:application/json;base64," + e.btoa(l));
            }
          }
          function Yl(t, n, i, r) {
            var a = t.keySystem;
            !a ||
              ("org.w3.clearkey" == a && t.licenseServerUri) ||
              (n.size && n.get(a) && ((n = n.get(a)), (t.licenseServerUri = n)),
              t.keyIds || (t.keyIds = new Set()),
              (i = i.get(a)) &&
                (t.distinctiveIdentifierRequired ||
                  (t.distinctiveIdentifierRequired =
                    i.distinctiveIdentifierRequired),
                t.persistentStateRequired ||
                  (t.persistentStateRequired = i.persistentStateRequired),
                t.serverCertificate ||
                  (t.serverCertificate = i.serverCertificate),
                i.sessionType && (t.sessionType = i.sessionType),
                t.serverCertificateUri ||
                  (t.serverCertificateUri = i.serverCertificateUri)),
              r[a] && (t.keySystem = r[a]),
              e.cast &&
                e.cast.__platform__ &&
                "com.microsoft.playready" == a &&
                (t.keySystem = "com.chromecast.playready"));
          }
          (Ll.prototype.destroy = function () {
            var e = this;
            return this.g
              ? this.h
              : ((this.g = !0),
                this.i().then(
                  function () {
                    e.h.resolve();
                  },
                  function () {
                    e.h.resolve();
                  }
                ));
          }),
            ((i = Ul.prototype).destroy = function () {
              return this.l.destroy();
            }),
            (i.configure = function (e, t) {
              (this.g = e),
                t && (this.S = t),
                this.J && this.J.ta(this.g.updateExpirationTime);
            }),
            (i.Cb = function (e) {
              var t,
                n = this;
              return L(function (i) {
                if (1 == i.g)
                  return n.i === e
                    ? i.return()
                    : n.A
                    ? ((n.i = e),
                      n.o.Ea(n.i, "play", function () {
                        for (
                          var e = c(n.O), t = e.next();
                          !t.done;
                          t = e.next()
                        )
                          Vl(n, t.value);
                        (n.X = !0), (n.O = []);
                      }),
                      n.i.remote
                        ? (n.o.H(n.i.remote, "connect", function () {
                            return ql(n);
                          }),
                          n.o.H(n.i.remote, "connecting", function () {
                            return ql(n);
                          }),
                          n.o.H(n.i.remote, "disconnect", function () {
                            return ql(n);
                          }))
                        : "webkitCurrentPlaybackTargetIsWireless" in n.i &&
                          n.o.H(
                            n.i,
                            "webkitcurrentplaybacktargetiswirelesschanged",
                            function () {
                              return ql(n);
                            }
                          ),
                      (n.D =
                        (n.h &&
                          n.h.initData.find(function (e) {
                            return 0 < e.initData.length;
                          })) ||
                        null),
                      (t = n.h.keySystem),
                      t.startsWith("com.microsoft.playready.recommendation") ||
                      "com.apple.fps" == t ||
                      !(n.D || n.B.size || n.g.parseInbandPsshEnabled)
                        ? (n.o.H(n.i, "encrypted", function (e) {
                            return (function (e, t) {
                              return L(function (n) {
                                if (1 == n.g) return x(n, Ol(e), 2);
                                Bl(e, t.initDataType, ke(t.initData)), S(n);
                              });
                            })(n, e);
                          }),
                          i.u(2))
                        : x(i, Ol(n), 2))
                    : (n.o.Ea(e, "encrypted", function () {
                        n.s(new Ee(2, 6, 6010));
                      }),
                      i.return());
                (function (e) {
                  var t, n, i, r;
                  return L(function (a) {
                    if (1 == a.g)
                      return e.B.size
                        ? (e.B.forEach(function (t, n) {
                            !(function (e, t, n) {
                              var i, r, a, o, s, u, l;
                              L(function (c) {
                                switch (c.g) {
                                  case 1:
                                    try {
                                      i =
                                        e.A.createSession("persistent-license");
                                    } catch (d) {
                                      return (
                                        (r = new Ee(2, 6, 6005, d.message)),
                                        e.s(r),
                                        c.return(Promise.reject(r))
                                      );
                                    }
                                    return (
                                      e.o.H(i, "message", function (t) {
                                        e.i &&
                                        e.g.delayLicenseRequestUntilPlayed &&
                                        e.i.paused &&
                                        !e.X
                                          ? e.O.push(t)
                                          : Vl(e, t);
                                      }),
                                      e.o.H(
                                        i,
                                        "keystatuseschange",
                                        function (t) {
                                          return zl(e, t);
                                        }
                                      ),
                                      (a = {
                                        initData: n.initData,
                                        initDataType: n.initDataType,
                                        loaded: !1,
                                        $e: 1 / 0,
                                        ub: null,
                                        type: "persistent-license",
                                      }),
                                      e.j.set(i, a),
                                      T(c, 2),
                                      x(c, i.load(t), 4)
                                    );
                                  case 4:
                                    return (
                                      (o = c.h),
                                      Rl(e.l),
                                      o ||
                                        (e.j.delete(i),
                                        (s = e.g.persistentSessionOnlinePlayback
                                          ? 1
                                          : 2),
                                        e.s(new Ee(s, 6, 6013)),
                                        (a.loaded = !0)),
                                      Hl(e, a),
                                      Fl(e),
                                      c.return(i)
                                    );
                                  case 2:
                                    (u = k(c)),
                                      Rl(e.l, u),
                                      e.j.delete(i),
                                      (l = e.g.persistentSessionOnlinePlayback
                                        ? 1
                                        : 2),
                                      e.s(new Ee(l, 6, 6005, u.message)),
                                      (a.loaded = !0),
                                      Fl(e);
                                  case 3:
                                    return c.return(Promise.resolve());
                                }
                              });
                            })(e, n, t);
                          }),
                          x(a, e.m, 3))
                        : a.u(2);
                    if (2 != a.g) {
                      if (
                        0 < ((e.h && e.h.keyIds) || new Set([])).size &&
                        (function (e) {
                          for (
                            var t = c((e.h && e.h.keyIds) || new Set([])),
                              n = t.next();
                            !n.done;
                            n = t.next()
                          )
                            if ("usable" !== e.Y.get(n.value)) return !1;
                          return !0;
                        })(e)
                      )
                        return a.return(e.m);
                      (e.K = !1), (e.m = new Vo()), e.m.catch(function () {});
                    }
                    for (
                      t = (e.h ? e.h.initData : []) || [],
                        n = c(t),
                        i = n.next();
                      !i.done;
                      i = n.next()
                    )
                      (r = i.value), Bl(e, r.initDataType, r.initData);
                    return Wl(e) && e.m.resolve(), a.return(e.m);
                  });
                })(n).catch(function () {}),
                  S(i);
              });
            }),
            (i.Me = function () {
              var e = this,
                t = this.j.keys();
              return (
                (t = (function (e, t) {
                  for (var n = [], i = (e = c(e)).next(); !i.done; i = e.next())
                    n.push(t(i.value));
                  return n;
                })(t, function (t) {
                  var n = e.j.get(t);
                  return {
                    sessionId: t.sessionId,
                    sessionType: n.type,
                    initData: n.initData,
                    initDataType: n.initDataType,
                  };
                })),
                Array.from(t)
              );
            }),
            (i.Ne = function () {
              for (
                var e = 1 / 0, t = this.j.keys(), n = (t = c(t)).next();
                !n.done;
                n = t.next()
              )
                (n = n.value),
                  isNaN(n.expiration) || (e = Math.min(e, n.expiration));
              return e;
            }),
            (i.sd = function () {
              return _l(this.ga);
            });
          var Jl = 1,
            $l = 5,
            Zl = 0.5;
          function Ql() {
            (this.g = tc),
              (this.i = new Map().set(tc, 2).set(ec, 1)),
              (this.h = 0);
          }
          var ec = 0,
            tc = 1;
          function nc(e) {
            if (!pc) {
              pc = !0;
              var t = new Uint8Array([105, 115, 111, 109]),
                n = new Uint8Array([97, 118, 99, 49]),
                i = new Uint8Array([0, 0, 0, 1]);
              (Ic = fc("ftyp", t, i, t, n)),
                (t = fc("dref", Cc)),
                (Mc = fc("dinf", t));
            }
            this.g = e;
          }
          function ic(e) {
            for (var t = [], n = c(e.g), i = n.next(); !i.done; i = n.next()) {
              var r = t,
                a = r.push,
                o = i.value;
              i = fc;
              var s = o.id + 1,
                u = o.stream.width || 0,
                l = o.stream.height || 0;
              "audio" == o.type && (l = u = 0);
              var h = o.duration * o.timescale,
                f = Math.floor(h / (gc + 1));
              switch (
                ((h = Math.floor(h % (gc + 1))),
                (s = fc(
                  "tkhd",
                  (s = new Uint8Array(
                    [
                      1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0,
                      3,
                    ].concat(
                      d(cc(s, 4)),
                      [0, 0, 0, 0],
                      d(cc(f, 4)),
                      d(cc(h, 4)),
                      [
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0,
                      ],
                      d(cc(u, 2)),
                      [0, 0],
                      d(cc(l, 2)),
                      [0, 0]
                    )
                  ))
                )),
                (u = fc),
                (f = o.duration * o.timescale),
                (l = Math.floor(f / (gc + 1))),
                (f = Math.floor(f % (gc + 1))),
                (h =
                  (((h = o.stream.language).charCodeAt(0) - 96) << 10) |
                  ((h.charCodeAt(1) - 96) << 5) |
                  (h.charCodeAt(2) - 96)),
                (l = fc(
                  "mdhd",
                  (l = new Uint8Array(
                    [
                      1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0,
                      3,
                    ].concat(
                      d(cc(o.timescale, 4)),
                      d(cc(l, 4)),
                      d(cc(f, 4)),
                      d(cc(h, 2)),
                      [0, 0]
                    )
                  ))
                )),
                (f = o),
                (h = new Uint8Array([])),
                f.type)
              ) {
                case "video":
                  h = vc;
                  break;
                case "audio":
                  h = yc;
              }
              f = fc("hdlr", h);
              e: {
                switch (o.type) {
                  case "video":
                    o = fc("minf", fc("vmhd", Tc), Mc, rc(o));
                    break e;
                  case "audio":
                    o = fc("minf", fc("smhd", Ac), Mc, rc(o));
                    break e;
                }
                o = new Uint8Array([]);
              }
              (i = i("trak", s, (o = u("mdia", l, f, o)))), a.call(r, i);
            }
            for (
              t = Ct.apply(xt, d(t)),
                n = fc,
                i = (a = e.g[0]).duration * a.timescale,
                r = Math.floor(i / (gc + 1)),
                i = Math.floor(i % (gc + 1)),
                r = fc(
                  "mvhd",
                  (r = new Uint8Array(
                    [
                      1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0,
                      3,
                    ].concat(
                      d(cc(a.timescale, 4)),
                      d(cc(r, 4)),
                      d(cc(i, 4)),
                      [
                        0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 255, 255, 255, 255,
                      ]
                    )
                  ))
                ),
                i = [],
                u = (e = c(e.g)).next();
              !u.done;
              u = e.next()
            )
              (s = (o = i).push),
                (u = fc(
                  "trex",
                  (u = new Uint8Array(
                    [0, 0, 0, 0].concat(
                      d(cc(u.value.id + 1, 4)),
                      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    )
                  ))
                )),
                s.call(o, u);
            if (
              ((e = fc("mvex", (e = Ct.apply(xt, d(i))))),
              (i = []),
              a.encrypted)
            ) {
              for (o = (a = c(a.stream.drmInfos)).next(); !o.done; o = a.next())
                if ((o = o.value).initData)
                  for (s = (o = c(o.initData)).next(); !s.done; s = o.next())
                    i.push(s.value.initData);
              a = Ct.apply(xt, d(i));
            } else a = new Uint8Array([]);
            return (
              (e = n("moov", r, t, e, a)),
              (t = new Uint8Array(Ic.byteLength + e.byteLength)).set(Ic),
              t.set(e, Ic.byteLength),
              t
            );
          }
          function rc(e) {
            var t = fc,
              n = "aac";
            e.codecs.includes("mp3")
              ? (n = "mp3")
              : e.codecs.includes("ac-3")
              ? (n = Ge() ? "ec-3" : "ac-3")
              : e.codecs.includes("ec-3")
              ? (n = "ec-3")
              : e.codecs.includes("opus") && (n = "opus");
            var i = new Uint8Array([]);
            switch (e.type) {
              case "video":
                if (e.codecs.includes("avc1")) {
                  if (
                    ((n = e.stream.width || 0),
                    (i = e.stream.height || 0),
                    0 < e.qa.byteLength)
                  )
                    var r = fc("avcC", e.qa);
                  else {
                    r = fc;
                    for (
                      var a = 7, o = [], s = [], u = 0, l = 0, c = 0, h = 0;
                      h < e.Wa.length;
                      h++
                    ) {
                      var f = dc(e.Wa[h]);
                      switch (31 & f[0]) {
                        case 7:
                          o.push(f), (a += f.length + 2);
                          break;
                        case 8:
                          s.push(f), (a += f.length + 2);
                      }
                    }
                    for (
                      0 < o.length &&
                        ((u = o[0][1]), (c = o[0][2]), (l = o[0][3])),
                        h = 0,
                        (a = new Uint8Array(a))[h++] = 1,
                        a[h++] = u,
                        a[h++] = c,
                        a[h++] = l,
                        a[h++] = 255,
                        a[h++] = 224 | o.length,
                        u = 0;
                      u < o.length;
                      u++
                    )
                      (a[h++] = (65280 & o[u].length) >> 8),
                        (a[h++] = 255 & o[u].length),
                        a.set(o[u], h),
                        (h += o[u].length);
                    for (a[h++] = s.length, o = 0; o < s.length; o++)
                      (a[h++] = (65280 & s[o].length) >> 8),
                        (a[h++] = 255 & s[o].length),
                        a.set(s[o], h),
                        (h += s[o].length);
                    r = r("avcC", a);
                  }
                  (n = new Uint8Array(
                    [
                      0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                      0, 0, 0, 0, 0,
                    ].concat(
                      d(cc(n, 2)),
                      d(cc(i, 2)),
                      [
                        0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118,
                        105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116,
                        114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 24, 17, 17,
                      ]
                    )
                  )),
                    (i = "avc1"),
                    (s = ac(e)),
                    (o = new Uint8Array([])),
                    e.encrypted &&
                      ((o = sc(0, e.stream, e.codecs)), (i = "encv")),
                    (i = fc(i, n, r, s, o));
                } else
                  e.codecs.includes("hvc1") &&
                    ((i = e.stream.width || 0),
                    (r = e.stream.height || 0),
                    (n = new Uint8Array([])),
                    0 < e.qa.byteLength && (n = fc("hvcC", e.qa)),
                    (i = new Uint8Array(
                      [
                        0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 0,
                      ].concat(
                        d(cc(i, 2)),
                        d(cc(r, 2)),
                        [
                          0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118,
                          105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116,
                          114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0,
                          0, 0, 0, 0, 0, 0, 24, 17, 17,
                        ]
                      )
                    )),
                    (r = "hvc1"),
                    (s = ac(e)),
                    (o = new Uint8Array([])),
                    e.encrypted &&
                      ((o = sc(0, e.stream, e.codecs)), (r = "encv")),
                    (i = fc(r, i, n, s, o)));
                break;
              case "audio":
                "mp3" == n
                  ? (e = fc(".mp3", oc(e)))
                  : "ac-3" == n
                  ? ((n = fc("dac3", e.ka)),
                    (i = "ac-3"),
                    (r = new Uint8Array([])),
                    e.encrypted &&
                      ((r = sc(0, e.stream, e.codecs)), (i = "enca")),
                    (e = fc(i, oc(e), n, r)))
                  : "ec-3" == n
                  ? ((n = fc("dec3", e.ka)),
                    (i = "ec-3"),
                    (r = new Uint8Array([])),
                    e.encrypted &&
                      ((r = sc(0, e.stream, e.codecs)), (i = "enca")),
                    (e = fc(i, oc(e), n, r)))
                  : "opus" == n
                  ? ((n = fc("dOps", e.ka)),
                    (i = "Opus"),
                    (r = new Uint8Array([])),
                    e.encrypted &&
                      ((r = sc(0, e.stream, e.codecs)), (i = "enca")),
                    (e = fc(i, oc(e), n, r)))
                  : (0 < e.ka.byteLength
                      ? (n = fc("esds", e.ka))
                      : ((n = fc),
                        (i = e.id + 1),
                        (r = e.stream.channelsCount || 2),
                        (o = e.stream.audioSamplingRate || 44100),
                        (u = Dt("audio", e.codecs.split(","))),
                        (s = (l = {
                          96e3: 0,
                          88200: 1,
                          64e3: 2,
                          48e3: 3,
                          44100: 4,
                          32e3: 5,
                          24e3: 6,
                          22050: 7,
                          16e3: 8,
                          12e3: 9,
                          11025: 10,
                          8e3: 11,
                          7350: 12,
                        })[o]),
                        ("mp4a.40.5" !== u && "mp4a.40.29" !== u) ||
                          (s = l[2 * o]),
                        (o = parseInt(u.split(".").pop(), 10)),
                        (n = n(
                          "esds",
                          (i = new Uint8Array(
                            [0, 0, 0, 0, 3, 25].concat(d(cc(i, 2)), [
                              0,
                              4,
                              17,
                              64,
                              21,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              5,
                              2,
                              (o << 3) | (s >>> 1),
                              (s << 7) | (r << 3),
                              6,
                              1,
                              2,
                            ])
                          ))
                        ))),
                    (i = "mp4a"),
                    (r = new Uint8Array([])),
                    e.encrypted &&
                      ((r = sc(0, e.stream, e.codecs)), (i = "enca")),
                    (e = fc(i, oc(e), n, r))),
                  (i = e);
            }
            return t(
              "stbl",
              (e = fc("stsd", kc, i)),
              fc("stts", bc),
              fc("stsc", wc),
              fc("stsz", Sc),
              fc("stco", xc)
            );
          }
          function ac(e) {
            if (!e.va && !e.wa) return new Uint8Array([]);
            var t = e.wa;
            return fc(
              "pasp",
              (e = new Uint8Array([].concat(d(cc(e.va, 4)), d(cc(t, 4)))))
            );
          }
          function oc(e) {
            return new Uint8Array(
              [
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                e.stream.channelsCount || 2,
                0,
                16,
                0,
                0,
                0,
                0,
              ].concat(d(cc(e.stream.audioSamplingRate || 44100, 2)), [0, 0])
            );
          }
          function sc(e, t, n) {
            (e = fc),
              (n = fc(
                "frma",
                (n = new Uint8Array([].concat(d(cc(hc(n.split(".")[0]), 4)))))
              ));
            var i = "cenc",
              r = t.drmInfos[0];
            r && r.encryptionScheme && (i = r.encryptionScheme),
              (i = fc(
                "schm",
                (i = new Uint8Array(
                  [0, 0, 0, 0].concat(d(cc(hc(i), 4)), [0, 1, 0, 0])
                ))
              )),
              (r = fc);
            for (
              var a = new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                ]),
                o = (t = c(t.drmInfos)).next();
              !o.done;
              o = t.next()
            )
              if ((o = o.value) && o.keyIds && o.keyIds.size)
                for (var s = (o = c(o.keyIds)).next(); !s.done; s = o.next())
                  a = dc(s.value);
            return e(
              "sinf",
              n,
              i,
              r(
                "schi",
                (t = fc(
                  "tenc",
                  (t = new Uint8Array([0, 0, 0, 0, 0, 0, 1, 8])),
                  a
                ))
              )
            );
          }
          function uc(e) {
            for (var t = [], n = (e = c(e.g)).next(); !n.done; n = e.next()) {
              n = n.value;
              var i,
                r = t.push,
                a = r.apply,
                o = fc,
                s = new Uint8Array(
                  [0, 0, 0, 0].concat(d(cc(n.data ? n.data.mb : 0, 4)))
                );
              s = fc("mfhd", s);
              var u = n.data ? n.data.Ua : [],
                l = new Uint8Array(4 + u.length);
              for (i = 0; i < u.length; i++) {
                var h = u[i].flags;
                l[i + 4] = (h.Ha << 4) | (h.Ja << 2) | h.Ia;
              }
              var f = (u = fc("sdtp", l)).length + 92;
              (l = fc),
                (i = fc(
                  "tfhd",
                  (i = new Uint8Array(
                    [0, 0, 0, 58].concat(
                      d(cc(n.id + 1, 4)),
                      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    )
                  ))
                )),
                (h = n.data ? n.data.baseMediaDecodeTime : 0);
              var p = Math.floor(h % (gc + 1));
              h = fc(
                "tfdt",
                (h = new Uint8Array(
                  [1, 0, 0, 0].concat(
                    d(cc(Math.floor(h / (gc + 1)), 4)),
                    d(cc(p, 4))
                  )
                ))
              );
              var g = f,
                m = 12 + 16 * (p = (f = n.data ? n.data.Ua : []).length),
                v = new Uint8Array(m);
              for (
                g += 8 + m,
                  v.set(
                    ["video" === n.type ? 1 : 0, 0, 15, 1].concat(
                      d(cc(p, 4)),
                      d(cc(g, 4))
                    ),
                    0
                  ),
                  g = 0;
                g < p;
                g++
              ) {
                var y = f[g];
                m = cc(y.duration, 4);
                var b = cc(y.size, 4),
                  w = y.flags;
                (y = cc(y.Qa, 4)),
                  v.set(
                    [].concat(
                      d(m),
                      d(b),
                      [
                        (w.Sa << 2) | w.Ha,
                        (w.Ja << 6) | (w.Ia << 4) | w.Ta,
                        61440 & w.Ga,
                        15 & w.Ga,
                      ],
                      d(y)
                    ),
                    12 + 16 * g
                  );
              }
              (o = o("moof", s, (u = l("traf", i, h, (f = fc("trun", v)), u)))),
                a.call(r, t, [o, lc(n)]);
            }
            return Ct.apply(xt, d(t));
          }
          function lc(e) {
            return (
              (e = (e.data ? e.data.Ua : []).map(function (e) {
                return e.data;
              })),
              fc("mdat", (e = Ct.apply(xt, d(e))))
            );
          }
          function cc(e, t) {
            var n = [];
            for (--t; 0 <= t; t--) n.push((e >> (8 * t)) & 255);
            return n;
          }
          function dc(e) {
            for (
              var t = new Uint8Array(e.length / 2), n = 0;
              n < e.length / 2;
              n += 1
            )
              t[n] = parseInt(String(e[2 * n] + e[2 * n + 1]), 16);
            return t;
          }
          function hc(e) {
            for (var t = 0, n = 0; n < e.length; n += 1)
              t |= e.charCodeAt(n) << (8 * (e.length - n - 1));
            return t;
          }
          function fc(e) {
            var t = R.apply(1, arguments),
              n = mc.get(e);
            n ||
              ((n = [
                e.charCodeAt(0),
                e.charCodeAt(1),
                e.charCodeAt(2),
                e.charCodeAt(3),
              ]),
              mc.set(e, n));
            for (var i = 8, r = t.length - 1; 0 <= r; r--) i += t[r].byteLength;
            for (
              (r = new Uint8Array(i))[0] = (i >> 24) & 255,
                r[1] = (i >> 16) & 255,
                r[2] = (i >> 8) & 255,
                r[3] = 255 & i,
                r.set(n, 4),
                n = 0,
                i = 8;
              n < t.length;
              n++
            )
              r.set(t[n], i), (i += t[n].byteLength);
            return r;
          }
          var pc = !1,
            gc = Math.pow(2, 32) - 1,
            mc = new Map(),
            vc = new Uint8Array([
              0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0,
              0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101,
              114, 0,
            ]),
            yc = new Uint8Array([
              0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0,
              0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101,
              114, 0,
            ]),
            bc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            wc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            xc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            Sc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
            Tc = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]),
            Ac = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            kc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]),
            Ic = new Uint8Array([]),
            Cc = new Uint8Array([
              0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0,
              1,
            ]),
            Mc = new Uint8Array([]);
          function Ec(e) {
            function t(e) {
              o.push(e), _a(e);
            }
            var n,
              i,
              r,
              a,
              o = [];
            if (
              (new Na()
                .box("moof", t)
                .box("traf", t)
                .N("tfhd", function (e) {
                  (n = e), (r = qa(e.reader, e.flags));
                })
                .N("trun", function (e) {
                  (i = e), (a = Xa(e.reader, e.version, e.flags));
                })
                .parse(e),
              r && 2 !== r.qg)
            ) {
              var s = n.start + Va(n) + 4 + (null !== r.Tg ? 8 : 0),
                u = Ce(e);
              if (null !== r.qg) u.setUint32(s, 2);
              else {
                Pc(e, n.start, n.size + 4);
                var l = u.getUint32(n.start + 8);
                u.setUint32(n.start + 8, 2 | l),
                  a &&
                    null !== a.xe &&
                    u.setInt32(i.start + Va(i) + 4, a.xe + 4),
                  (l = e.subarray(0, s)),
                  (u = e.subarray(s)),
                  (e = new Uint8Array(e.byteLength + 4)).set(l),
                  (l = []);
                for (var d = 3; 0 <= d; d--) l.push((2 >> (8 * d)) & 255);
                for (
                  e.set(new Uint8Array(l), s),
                    e.set(u, s + 4),
                    u = (s = c(o)).next();
                  !u.done;
                  u = s.next()
                )
                  Pc(e, (u = u.value).start, u.size + 4);
              }
            }
            return e;
          }
          function Dc(e, t, n, i, r, a) {
            var o = sc(new nc([]), e, i.name),
              s = t.subarray(i.start, i.start + i.size);
            for (
              (e = new Uint8Array(i.size + o.byteLength)).set(s, 0),
                Ce(e).setUint32(4, a),
                e.set(o, i.size),
                Pc(e, 0, e.byteLength),
                a = new Uint8Array(t.byteLength + e.byteLength),
                i = Ye() || Ve() || He() ? i.start : i.start + i.size,
                o = t.subarray(i),
                a.set(t.subarray(0, i)),
                a.set(e, i),
                a.set(o, i + e.byteLength),
                r = (t = c(r)).next();
              !r.done;
              r = t.next()
            )
              Pc(a, (r = r.value).start, r.size + e.byteLength);
            return (
              (e = Ce(a, n.start)),
              (n = Va(n)),
              (t = e.getUint32(n)),
              e.setUint32(n, t + 1),
              a
            );
          }
          function Pc(e, t, n) {
            0 != (t = (e = Ce(e, t)).getUint32(0)) &&
              (1 == t
                ? (e.setUint32(8, n >> 32), e.setUint32(12, 4294967295 & n))
                : e.setUint32(0, n));
          }
          function Lc(e) {
            return 1 == e.length && 1e-4 > e.end(0) - e.start(0);
          }
          function Rc(e) {
            return !e || Lc(e) ? null : e.length ? e.end(e.length - 1) : null;
          }
          function Nc(e, t) {
            return (
              !(!e || !e.length || Lc(e) || t > e.end(e.length - 1)) &&
              t >= e.start(0)
            );
          }
          function _c(e, t) {
            if (!e || !e.length || Lc(e)) return 0;
            for (var n = 0, i = (e = c(Uc(e))).next(); !i.done; i = e.next()) {
              var r = i.value;
              (i = r.start), (r = r.end) > t && (n += r - Math.max(i, t));
            }
            return n;
          }
          function Uc(e) {
            if (!e) return [];
            for (var t = [], n = 0; n < e.length; n++)
              t.push({ start: e.start(n), end: e.end(n) });
            return t;
          }
          function jc(e, t, n, i) {
            var r = this;
            (this.s = i),
              (this.g = e),
              (this.B = t),
              (this.h = n),
              (this.o = new Z()),
              (this.l = !1),
              (this.D = e.readyState),
              (this.F = this.C = this.j = 0),
              (this.m = (function (e) {
                if (!e.h.stallEnabled) return null;
                var t = e.h.stallSkip;
                return new Bc(new Fc(e.g), e.h.stallThreshold, function () {
                  return L(function (n) {
                    if (1 == n.g)
                      return Uc(e.g.buffered).length
                        ? t
                          ? ((e.g.currentTime += t), n.u(2))
                          : x(n, e.g.play(), 3)
                        : n.return();
                    if (2 != n.g) {
                      if (!e.g) return n.return();
                      e.g.pause(), e.g.play();
                    }
                    e.F++, e.s(new Yo("stalldetected")), S(n);
                  });
                });
              })(this)),
              (this.A = !1),
              this.o.H(e, "waiting", function () {
                return Oc(r);
              }),
              (this.i = new Oe(function () {
                Oc(r);
              }).ta(this.h.gapJumpTimerTime));
          }
          function Oc(e) {
            if (0 != e.g.readyState) {
              if (e.g.seeking) {
                if (!e.l) return;
              } else e.l = !1;
              if (
                !e.g.paused ||
                (e.g.currentTime == e.j &&
                  (e.g.autoplay || e.g.currentTime != e.j))
              ) {
                var t;
                if (
                  (e.g.readyState != e.D && (e.D = e.g.readyState), !(t = !e.m))
                ) {
                  var n = (t = e.m).j,
                    i = Hc(n),
                    r = n.g.currentTime,
                    a = Date.now() / 1e3;
                  (t.g == r && t.m == i) ||
                    ((t.l = a), (t.g = r), (t.m = i), (t.h = !1)),
                    (i = (r = a - t.l) >= t.o && i && !t.h) &&
                      (t.i && t.i(t.g, r), (t.h = !0), (t.g = n.g.currentTime)),
                    (t = !i);
                }
                t &&
                  ((t = e.g.currentTime),
                  (i = (function (e, t, n) {
                    return e &&
                      e.length &&
                      !Lc(e) &&
                      0 <=
                        (e = Uc(e).findIndex(function (e, i, r) {
                          return (
                            e.start > t && (0 == i || r[i - 1].end - t <= n)
                          );
                        }))
                      ? e
                      : null;
                  })((n = e.g.buffered), t, e.h.gapDetectionThreshold)),
                  null == i ||
                    (0 == i && !e.A) ||
                    ((r = n.start(i)),
                    (a = e.h.gapPadding) &&
                      (r = Math.ceil(100 * (r + a)) / 100),
                    r >= e.B.bb() ||
                      0.001 > r - t ||
                      (0 != i && n.end(i - 1),
                      (e.g.currentTime = r),
                      t == e.j && (e.j = r),
                      e.C++,
                      e.s(new Yo("gapjumped")))));
              }
            }
          }
          function Bc(e, t, n) {
            (this.j = e),
              (this.m = Hc(e)),
              (this.g = e.g.currentTime),
              (this.l = Date.now() / 1e3),
              (this.h = !1),
              (this.o = t),
              (this.i = n);
          }
          function Fc(e) {
            this.g = e;
          }
          function Hc(e) {
            if (e.g.paused || 0 == e.g.playbackRate || 0 == e.g.buffered.length)
              var t = !1;
            else
              e: {
                t = e.g.currentTime;
                for (
                  var n = (e = c(Uc(e.g.buffered))).next();
                  !n.done;
                  n = e.next()
                )
                  if (!(t < (n = n.value).start - 0.1 || t > n.end - 0.5)) {
                    t = !0;
                    break e;
                  }
                t = !1;
              }
            return t;
          }
          function Vc(e, t, n) {
            (this.g = e), (this.i = t), (this.h = n);
          }
          function zc(e, t) {
            return L(function (n) {
              if (1 == n.g)
                return x(
                  n,
                  dr(
                    e.h,
                    t,
                    e.g.drm.preferredKeySystems,
                    e.g.drm.keySystemsMapping
                  ),
                  2
                );
              if (
                (e.g.streaming.dontChooseCodecs ||
                  lr(
                    t,
                    e.g.preferredVideoCodecs,
                    e.g.preferredAudioCodecs,
                    e.g.preferredDecodingAttributes,
                    e.g.preferredTextFormats
                  ),
                !t.variants.some(Ar))
              )
                throw new Ee(2, 4, 4032);
              return n.return(qc(e, t));
            });
          }
          function Gc(e, t) {
            var n = e.g.restrictions;
            e = e.i;
            for (
              var i = !1, r = (t = c(t.variants)).next();
              !r.done;
              r = t.next()
            ) {
              var a = (r = r.value).allowedByApplication;
              (r.allowedByApplication = cr(r, n, e)),
                a != r.allowedByApplication && (i = !0);
            }
            return i;
          }
          function qc(e, t) {
            var n = Gc(e, t);
            if (t) {
              var i = e.h ? e.h.h : null;
              if (i && e.h.A) {
                for (
                  var r = new Set(), a = c(t.variants), o = a.next();
                  !o.done;
                  o = a.next()
                )
                  (o = o.value).audio && r.add(o.audio),
                    o.video && r.add(o.video);
                for (a = (r = c(r)).next(); !a.done; a = r.next())
                  Kc(e, i.keySystem, a.value);
              }
              Wc(e, t);
            }
            return n;
          }
          function Kc(e, t, n) {
            for (var i = (n = c(n.drmInfos)).next(); !i.done; i = n.next())
              if ((i = i.value).keySystem == t)
                for (
                  var r = (i = c(i.initData || [])).next();
                  !r.done;
                  r = i.next()
                )
                  (r = r.value), Bl(e.h, r.initDataType, r.initData);
          }
          function Wc(e, t) {
            e = e.h ? e.h.sd() : {};
            var n = Object.keys(e);
            n = n.length && "00" == n[0];
            for (
              var i = !1,
                r = !1,
                a = new Set(),
                o = new Set(),
                s = new Set(),
                u = (t = c(t.variants)).next();
              !u.done;
              u = t.next()
            )
              (u = u.value).audio && s.add(u.audio),
                u.video && s.add(u.video),
                u.allowedByApplication
                  ? u.allowedByKeySystem && (i = !0)
                  : (r = !0);
            for (t = (s = c(s)).next(); !t.done; t = s.next())
              if ((t = t.value).keyIds.size)
                for (u = (t = c(t.keyIds)).next(); !u.done; u = t.next()) {
                  u = u.value;
                  var l = e[n ? "00" : u];
                  l ? Xc.includes(l) && o.add(l) : a.add(u);
                }
            if (!i)
              throw new Ee(
                2,
                4,
                4012,
                (e = {
                  hasAppRestrictions: r,
                  missingKeys: Array.from(a),
                  restrictedKeyStatuses: Array.from(o),
                })
              );
          }
          (jc.prototype.release = function () {
            this.o && (this.o.release(), (this.o = null)),
              null != this.i && (this.i.stop(), (this.i = null)),
              this.m && (this.m.release(), (this.m = null)),
              (this.g = this.B = this.s = null);
          }),
            (jc.prototype.Jd = function () {
              (this.A = !0),
                this.i && this.i.ta(this.h.gapJumpTimerTime),
                Oc(this);
            }),
            (Bc.prototype.release = function () {
              this.i = this.j = null;
            });
          var Xc = ["output-restricted", "internal-error"];
          function Yc() {}
          function Jc(e, t) {
            var n = document.createElement("source");
            return (n.src = e), (n.type = void 0 === t ? "" : t), n;
          }
          function $c(e) {
            for (; e.firstChild; ) e.removeChild(e.firstChild);
          }
          function Zc(e, t, n, i) {
            var r = this;
            (this.g = e),
              (this.L = n),
              (this.A = null),
              (this.fa = t),
              (this.l = new Map()),
              (this.B = new Map()),
              (this.Aa = new Map()),
              (this.h = null),
              (this.Xa = !1),
              (this.K = i || null),
              (this.o = new Map()),
              (this.s = new Z()),
              (this.j = new Map()),
              (this.S = null),
              (this.J = new Vo()),
              (this.Oa = ""),
              (this.ab = !1),
              (this.xa = !0),
              (this.O = !1),
              (this.C = this.W = null),
              (this.i = Qc(this, this.J)),
              (this.za = this.F = !1),
              (this.G = new Ll(function () {
                return (function (e) {
                  var t, n, i, r, a, o, s, u, l, d, h, f, p;
                  return L(function (g) {
                    if (1 == g.g) {
                      for (
                        t = [], n = c(e.o), i = n.next();
                        !i.done;
                        i = n.next()
                      )
                        for (
                          r = i.value,
                            a = c(r),
                            o = a.next().value,
                            s = a.next().value,
                            u = s[0],
                            l = o,
                            e.o.set(l, s.slice(0, 1)),
                            u && t.push(u.p.catch(Yi)),
                            d = c(s.slice(1)),
                            h = d.next();
                          !h.done;
                          h = d.next()
                        )
                          h.value.p.reject(new Ee(2, 7, 7003, void 0));
                      return (
                        e.h && t.push(e.h.destroy()), x(g, Promise.all(t), 2)
                      );
                    }
                    for (
                      f = c(e.j.values()), p = f.next();
                      !p.done;
                      p = f.next()
                    )
                      p.value.destroy();
                    e.s && (e.s.release(), (e.s = null)),
                      e.g && e.C && e.g.removeChild(e.C),
                      e.g &&
                        e.W &&
                        (e.g.removeChild(e.W),
                        e.g.load(),
                        (e.g.disableRemotePlayback = !1)),
                      (e.g = null),
                      (e.W = null),
                      (e.C = null),
                      (e.A = null),
                      (e.i = null),
                      (e.h = null),
                      (e.fa = null),
                      e.l.clear(),
                      e.Aa.clear(),
                      e.j.clear(),
                      (e.S = null),
                      e.o.clear(),
                      (e.K = null),
                      e.da.clear(),
                      (e.L = null),
                      S(g);
                  });
                })(r);
              })),
              (this.D = !1),
              (this.X = "UNKNOWN"),
              (this.Ya = this.$a = !1),
              (this.Ma = new Vo()),
              (this.m = !1),
              (this.pa = null),
              (this.da = new Map()),
              (this.la = this.Y = this.oa = this.ca = null),
              (this.ga = new Vo()),
              this.g.remote &&
                ((this.O = "disconnected" != this.g.remote.state),
                this.s.H(this.g.remote, "connect", function () {
                  r.O = "disconnected" != r.g.remote.state;
                }),
                this.s.H(this.g.remote, "connecting", function () {
                  r.O = "disconnected" != r.g.remote.state;
                }),
                this.s.H(this.g.remote, "disconnect", function () {
                  r.O = "disconnected" != r.g.remote.state;
                }));
          }
          function Qc(t, n) {
            if (((t.xa = !0), e.ManagedMediaSource)) {
              t.C || (t.g.disableRemotePlayback = !0);
              var i = new ManagedMediaSource();
              t.s.H(i, "startstreaming", function () {
                t.xa = !0;
              }),
                t.s.H(i, "endstreaming", function () {
                  t.xa = !1;
                });
            } else i = new MediaSource();
            return (
              t.s.Ea(i, "sourceopen", function () {
                URL.revokeObjectURL(t.Oa), n.resolve();
              }),
              t.s.Ea(t.g, "playing", function () {
                t.ab = !0;
              }),
              (t.Oa = Sd(i)),
              t.g.removeAttribute("src"),
              t.W && t.g.removeChild(t.W),
              t.C && t.g.removeChild(t.C),
              (t.W = Jc(t.Oa)),
              t.g.appendChild(t.W),
              t.C && t.g.appendChild(t.C),
              t.g.load(),
              i
            );
          }
          function ed(e, t, n, i) {
            var r, a, o, s, u, l, d, h, f, p, g, m;
            return L(function (v) {
              switch (v.g) {
                case 1:
                  return (
                    (r = Nt),
                    (a = H),
                    (o = V),
                    x(
                      v,
                      (function (e, t) {
                        var n, i, r, a, o, s, u, l, d, h;
                        return L(function (f) {
                          if (1 == f.g)
                            return e.createSegmentIndex
                              ? x(f, e.createSegmentIndex(), 2)
                              : f.u(2);
                          if (!e.segmentIndex) return f.return(!1);
                          if (0 == e.segmentIndex.getNumReferences())
                            return f.return(!0);
                          for (
                            n = Nt,
                              i = new Set(),
                              r = c(e.segmentIndex),
                              a = r.next();
                            !a.done;
                            a = r.next()
                          )
                            if (
                              ((o = a.value),
                              (s = o.mimeType || e.mimeType || ""),
                              (u = o.codecs || e.codecs || ""),
                              !(
                                (s == e.mimeType && u == e.codecs) ||
                                ((l = s + ":" + u), i.has(l))
                              ))
                            )
                              if ((i.add(l), t == n.ua)) {
                                if (!Gi(Mi(s, u))) return f.return(!1);
                              } else if (
                                (t == n.ja
                                  ? (u = vr(u))
                                  : t == n.P && (u = mr(u, s)),
                                (d = Pi(e, s, u)),
                                (h = Ei(s, u)),
                                !Ht(d) && !xi(h))
                              )
                                return f.return(!1);
                          return f.return(!0);
                        });
                      })(n, t),
                      2
                    )
                  );
                case 2:
                  if (
                    (o.call(
                      a,
                      v.h,
                      "Type negotiation should happen before MediaSourceEngine.init!"
                    ),
                    t == r.P && i && (i = mr(i, n.mimeType)),
                    (s = Mi(n.mimeType, i)),
                    t == r.ua)
                  ) {
                    nd(e, s, e.D, n.external), v.u(0);
                    break;
                  }
                  if (
                    ((u = e.A.forceTransmux),
                    (!Ht(s) || (!e.D && Fi.includes(s))) && (u = !0),
                    (l = Ei(n.mimeType, i)),
                    !u)
                  ) {
                    v.u(4);
                    break;
                  }
                  if (
                    ((d = Pt(r.P, (i || "").split(","))),
                    (h = Pt(r.ja, (i || "").split(","))),
                    !d || !h)
                  ) {
                    v.u(5);
                    break;
                  }
                  return (e.m = !0), x(v, ed(e, r.P, n, d), 6);
                case 6:
                  return x(v, ed(e, r.ja, n, h), 7);
                case 7:
                  return v.return();
                case 5:
                  (f = xi(l)) &&
                    ((p = f()), e.j.set(t, p), (s = p.convertCodecs(t, l)));
                case 4:
                  (g = s + e.A.addExtraFeaturesToSourceBuffer(s)), Rl(e.G);
                  try {
                    m = e.i.addSourceBuffer(g);
                  } catch (y) {
                    throw new Ee(
                      2,
                      3,
                      3015,
                      y,
                      "The mediaSource_ status was " +
                        e.i.readyState +
                        " expected 'open'",
                      null
                    );
                  }
                  e.D && (m.mode = Td),
                    e.s.H(m, "error", function () {
                      var n = e.o.get(t)[0];
                      n.p.reject(
                        new Ee(
                          2,
                          3,
                          3014,
                          e.g.error ? e.g.error.code : 0,
                          n.uri
                        )
                      );
                    }),
                    e.s.H(m, "updateend", function () {
                      return gd(e, t);
                    }),
                    e.l.set(t, m),
                    e.B.set(t, s),
                    e.Aa.set(t, !!n.drmInfos.length),
                    S(v);
              }
            });
          }
          function td(e) {
            return e.xa && !e.O && !e.F;
          }
          function nd(e, t, n, i) {
            e.h ||
              ((e.h = new Hi(e.fa)), e.h && (e.h.A = e.A.modifyCueCallback));
            var r = e.h;
            (i = i || e.Xa),
              (e = e.X),
              "application/cea-608" == t || "application/cea-708" == t
                ? (r.i = null)
                : ((r.i = Wi.get(t)()),
                  r.i.setSequenceMode
                    ? r.i.setSequenceMode(n)
                    : ne(
                        "Text parsers w/ setSequenceMode",
                        'Text parsers should have a "setSequenceMode" method!'
                      ),
                  r.i.setManifestType
                    ? r.i.setManifestType(e)
                    : ne(
                        "Text parsers w/ setManifestType",
                        'Text parsers should have a "setManifestType" method!'
                      ),
                  (r.B = i));
          }
          function id(e) {
            return !e.F && (!e.i || "ended" == e.i.readyState);
          }
          function rd(e) {
            return !e.F && (!e.i || "closed" == e.i.readyState);
          }
          function ad(e, t) {
            return (
              e.l.size
                ? t == Rt
                  ? (e = e.h.g)
                  : (e =
                      !(e = sd(e, t)) || Lc(e)
                        ? null
                        : 1 == e.length && 0 > e.start(0)
                        ? 0
                        : e.length
                        ? e.start(0)
                        : null)
                : (e = null),
              e
            );
          }
          function od(e, t) {
            return e.l.size ? (t == Rt ? e.h.h : Rc(sd(e, t))) : null;
          }
          function sd(e, t) {
            if (e.F || e.O) return null;
            try {
              return e.l.get(t).buffered;
            } catch (n) {
              return e.l.has(t), null;
            }
          }
          function ud(e, t, n, i, r, a, o, s, u, l) {
            var h, f, p, g, m, v, y, b, w, T, A, k, I, C, M, E;
            return (
              (o = void 0 !== o && o),
              (s = void 0 !== s && s),
              (u = void 0 !== u && u),
              (l = void 0 !== l && l),
              L(function (D) {
                switch (D.g) {
                  case 1:
                    if (t != (h = Nt).ua) {
                      D.u(2);
                      break;
                    }
                    if ("HLS" != e.X) {
                      D.u(3);
                      break;
                    }
                    return x(D, e.Ma, 4);
                  case 4:
                    (f = D.h), (e.h.s = f);
                  case 3:
                    return x(
                      D,
                      (function (e, t, n, i, r) {
                        var a, o, s, u, l, d, h;
                        return L(function (f) {
                          if (1 == f.g) return x(f, Promise.resolve(), 2);
                          if (!e.i || !e.j) return f.return();
                          if (null == n || null == i)
                            return e.i.parseInit(ke(t)), f.return();
                          for (
                            a = e.B ? n : e.s,
                              o = {
                                periodStart: e.s,
                                segmentStart: n,
                                segmentEnd: i,
                                vttOffset: a,
                              },
                              s = e.i.parseMedia(ke(t), o, r, []),
                              u = c(s),
                              l = u.next();
                            !l.done;
                            l = u.next()
                          )
                            (d = l.value), e.A(d, r || null, o);
                          (h = s.filter(function (t) {
                            return t.startTime >= e.l && t.startTime < e.m;
                          })),
                            e.j.append(h),
                            null == e.g && (e.g = Math.max(n, e.l)),
                            (e.h = Math.min(i, e.m)),
                            S(f);
                        });
                      })(
                        e.h,
                        n,
                        i ? i.startTime : null,
                        i ? i.endTime : null,
                        i ? i.T()[0] : null
                      ),
                      5
                    );
                  case 5:
                    return D.return();
                  case 2:
                    if (l || !e.m) {
                      D.u(6);
                      break;
                    }
                    return x(D, ud(e, h.P, n, i, r, a, o, s, u, !0), 7);
                  case 7:
                    return x(D, ud(e, h.ja, n, i, r, a, o, s, u, !0), 8);
                  case 8:
                    return D.return();
                  case 6:
                    if (!e.l.has(t)) return D.return();
                    if (
                      ((p = e.l.get(t).timestampOffset),
                      (g = e.B.get(t)),
                      e.j.has(t) && (g = e.j.get(t).getOriginalMimeType()),
                      i &&
                        ((m = (function (e, t, n, i, r, a) {
                          var o = null,
                            s = [],
                            u = ke(n);
                          if (Fi.includes(a))
                            (t = xo(u)).length &&
                              i &&
                              ((n = t.find(function (e) {
                                return (
                                  "com.apple.streaming.transportStreamTimestamp" ===
                                  e.description
                                );
                              })) && (o = Math.round(n.data) / 1e3),
                              e.L.onMetadata(
                                [
                                  {
                                    cueTime: i.startTime,
                                    data: u,
                                    frames: t,
                                    dts: i.startTime,
                                    pts: i.startTime,
                                  },
                                ],
                                0,
                                i.endTime
                              ));
                          else if (
                            a.includes("/mp4") &&
                            i &&
                            i.ha &&
                            i.ha.timescale
                          ) {
                            var l = i.ha.timescale;
                            if (!isNaN(l)) {
                              var c =
                                  (null != r.emsgSchemeIdUris &&
                                    0 < r.emsgSchemeIdUris.length) ||
                                  e.A.dispatchAllEmsgBoxes,
                                d = 0,
                                h = !1;
                              (u = new Na()),
                                c &&
                                  u.N("emsg", function (t) {
                                    var n = r.emsgSchemeIdUris;
                                    if (0 === t.version)
                                      var a = t.reader.dc(),
                                        o = t.reader.dc(),
                                        s = t.reader.M(),
                                        u = t.reader.M(),
                                        l = t.reader.M(),
                                        c = t.reader.M(),
                                        d = i.startTime + u / s;
                                    else
                                      (s = t.reader.M()),
                                        (u =
                                          (d = t.reader.Cc() / s + i.l) -
                                          i.startTime),
                                        (l = t.reader.M()),
                                        (c = t.reader.M()),
                                        (a = t.reader.dc()),
                                        (o = t.reader.dc());
                                    (t = t.reader.Ib(
                                      t.reader.getLength() - t.reader.ra()
                                    )),
                                      ((n && n.includes(a)) ||
                                        e.A.dispatchAllEmsgBoxes) &&
                                        ("urn:mpeg:dash:event:2012" == a
                                          ? e.L.ci()
                                          : ((s = {
                                              startTime: d,
                                              endTime: (n = d + l / s),
                                              schemeIdUri: a,
                                              value: o,
                                              timescale: s,
                                              presentationTimeDelta: u,
                                              eventDuration: l,
                                              id: c,
                                              messageData: t,
                                            }),
                                            (new Yo(
                                              "emsg",
                                              (c = new Map().set("detail", s))
                                            ).cancelable = !0),
                                            e.L.ai(s),
                                            ("https://aomedia.org/emsg/ID3" ==
                                              a ||
                                              "https://developer.apple.com/streaming/emsg-id3" ==
                                                a) &&
                                              (a = xo(t)).length &&
                                              e.L.onMetadata(
                                                [
                                                  {
                                                    cueTime: d,
                                                    data: t,
                                                    frames: a,
                                                    dts: d,
                                                    pts: d,
                                                  },
                                                ],
                                                0,
                                                n
                                              )));
                                  }),
                                u
                                  .N("prft", function (t) {
                                    var n = t.reader,
                                      i = t.version;
                                    n.M(),
                                      (t =
                                        1e3 * (t = n.M()) +
                                        (n.M() / Math.pow(2, 32)) * 1e3),
                                      0 === i
                                        ? (n = n.M())
                                        : ((i = n.M()),
                                          (n = n.M()),
                                          (n = i * Math.pow(2, 32) + n)),
                                      (t = new Date(
                                        new Date(
                                          Date.UTC(1900, 0, 1, 0, 0, 0)
                                        ).getTime() + t
                                      ).getTime()),
                                      (n = new Yo(
                                        "prft",
                                        (n = new Map().set("detail", {
                                          wallClockTime: t,
                                          programStartDate: new Date(
                                            t - (n / l) * 1e3
                                          ),
                                        }))
                                      )),
                                      e.L.onEvent(n);
                                  })
                                  .box("moof", _a)
                                  .box("traf", _a)
                                  .N("tfdt", function (e) {
                                    h ||
                                      ((d =
                                        Ka(e.reader, e.version)
                                          .baseMediaDecodeTime / l),
                                      (h = !0),
                                      c || e.parser.stop());
                                  })
                                  .parse(n, !0),
                                h && 0 == i.l && (o = d);
                            }
                          } else
                            a.includes("/mp4") ||
                              a.includes("/webm") ||
                              !Co(u) ||
                              (e.da.has(t)
                                ? e.da.get(t).clearData()
                                : e.da.set(t, new To()),
                              null !=
                                (u = (s = e.da.get(t).parse(u)).getStartTime(
                                  t
                                )) && (o = u),
                              (s = s.getMetadata()));
                          return { timestamp: o, metadata: s };
                        })(e, t, n, i, r, g)),
                        (v = m.timestamp),
                        (y = m.metadata),
                        null != v &&
                          (null == e.ca &&
                            t == h.ja &&
                            ((e.ca = v),
                            (e.oa = i.startTime),
                            null != e.Y &&
                              ((b = 0),
                              e.oa == e.la && (b = e.ca - e.Y),
                              e.ga.resolve(b))),
                          null == e.Y &&
                            t == h.P &&
                            ((e.Y = v),
                            (e.la = i.startTime),
                            null != e.ca &&
                              ((w = 0),
                              e.oa == e.la && (w = e.ca - e.Y),
                              e.ga.resolve(w))),
                          (T = v),
                          (A = Fi),
                          !e.D && A.includes(e.B.get(t)) && (T = 0),
                          (k = i.startTime - T),
                          (0.001 <= Math.abs(p - k) || o || s) &&
                            (!u || 0 < k || !p) &&
                            ((p = k),
                            e.Ya &&
                              (md(
                                e,
                                t,
                                function () {
                                  return fd(e, t);
                                },
                                null
                              ),
                              md(
                                e,
                                t,
                                function () {
                                  return pd(e, t, p);
                                },
                                null
                              ))),
                          (t == h.ja || !e.l.has(h.ja)) && e.Ma.resolve(p)),
                        y.length) &&
                        e.L.onMetadata(y, p, i ? i.endTime : null),
                      a &&
                        t == h.ja &&
                        (e.h || nd(e, "application/cea-608", e.D, !1),
                        e.S || ((I = g.split(";", 1)[0]), (e.S = new Xt(I))),
                        i
                          ? (C = e.S.j(n)).length &&
                            (function (e, t, n, i, r) {
                              for (
                                var a = n + " " + i,
                                  o = new Map(),
                                  s = (t = c(t)).next();
                                !s.done;
                                s = t.next()
                              ) {
                                var u = s.value;
                                (s = u.stream),
                                  (u = u.cue),
                                  o.has(s) || o.set(s, new Map()),
                                  o.get(s).has(a) || o.get(s).set(a, []),
                                  Ki(e, u, r),
                                  u.startTime >= e.l &&
                                    u.startTime < e.m &&
                                    (o.get(s).get(a).push(u),
                                    s == e.C && e.j.append([u]));
                              }
                              for (
                                a = (r = c(o.keys())).next();
                                !a.done;
                                a = r.next()
                              )
                                for (
                                  a = a.value,
                                    e.o.has(a) || e.o.set(a, new Map()),
                                    s = (t = c(o.get(a).keys())).next();
                                  !s.done;
                                  s = t.next()
                                )
                                  (s = s.value),
                                    (u = o.get(a).get(s)),
                                    e.o.get(a).set(s, u);
                              (e.g =
                                null == e.g
                                  ? Math.max(n, e.l)
                                  : Math.min(e.g, Math.max(n, e.l))),
                                (e.h = Math.max(e.h, Math.min(i, e.m)));
                            })(e.h, C, i.startTime, i.endTime, p)
                          : e.S.init(n, s)),
                      !e.j.has(t))
                    ) {
                      D.u(9);
                      break;
                    }
                    return x(
                      D,
                      e.j.get(t).transmux(n, r, i, e.i.duration, t),
                      10
                    );
                  case 10:
                    n = D.h;
                  case 9:
                    if (
                      ((n = (function (e, t, n, i, r) {
                        if ("mp4" != Li(e.B.get(r))) return n;
                        var a = null === i,
                          o = e.Aa.get(r),
                          s = e.L.oh(),
                          u = !1;
                        i && i.ha && (u = i.ha.encrypted),
                          (i = i ? i.T()[0] : null),
                          e.A.correctEc3Enca &&
                            a &&
                            "audio" === r &&
                            (n = (function (e) {
                              e = ke(e);
                              var t = null;
                              return (
                                new Na()
                                  .box("moov", _a)
                                  .box("trak", _a)
                                  .box("mdia", _a)
                                  .box("minf", _a)
                                  .box("stbl", _a)
                                  .N("stsd", Ua)
                                  .box("enca", function (e) {
                                    return (t = e.reader.h), Oa(e);
                                  })
                                  .box("sinf", _a)
                                  .box("frma", function (e) {
                                    e.parser.stop(),
                                      "ec-3" === Ya(e.reader).codec &&
                                        t &&
                                        2 !== t.getUint16(16) &&
                                        t.setUint16(16, 2);
                                  })
                                  .parse(e),
                                e
                              );
                            })(n)),
                          (e = e.A.insertFakeEncryptionInInit && o) &&
                            ((s = Re(s)),
                            (e =
                              (Ye() && "audio" === r) ||
                              ze() ||
                              Ve() ||
                              rt("SOPOpenBrowser") ||
                              (He() && tt() && s)));
                        e &&
                          (a
                            ? (n = (function (e, t, n) {
                                function i(e) {
                                  h.push({ box: e, gg: 1701733217 });
                                }
                                function r(e) {
                                  h.push({ box: e, gg: 1701733238 });
                                }
                                function a(e) {
                                  (l = !0), e.parser.stop();
                                }
                                function o(e) {
                                  d.push(e), _a(e);
                                }
                                var s,
                                  u = (t = ke(t)),
                                  l = !1,
                                  d = [],
                                  h = [];
                                if (
                                  (new Na()
                                    .box("moov", o)
                                    .box("trak", o)
                                    .box("mdia", o)
                                    .box("minf", o)
                                    .box("stbl", o)
                                    .N("stsd", function (e) {
                                      (s = e), d.push(e), Ua(e);
                                    })
                                    .N("encv", a)
                                    .N("enca", a)
                                    .N("dvav", r)
                                    .N("dva1", r)
                                    .N("dvh1", r)
                                    .N("dvhe", r)
                                    .N("dvc1", r)
                                    .N("dvi1", r)
                                    .N("hev1", r)
                                    .N("hvc1", r)
                                    .N("avc1", r)
                                    .N("avc3", r)
                                    .N("ac-3", i)
                                    .N("ec-3", i)
                                    .N("ac-4", i)
                                    .N("Opus", i)
                                    .N("fLaC", i)
                                    .N("mp4a", i)
                                    .parse(t),
                                  l)
                                )
                                  return t;
                                if (0 == h.length || !s)
                                  throw (It(t), new Ee(2, 3, 3019, n));
                                h.reverse();
                                for (
                                  var f = (n = c(h)).next();
                                  !f.done;
                                  f = n.next()
                                )
                                  (f = f.value),
                                    (u = Dc(e, u, s, f.box, d, f.gg));
                                return He() && tt() && !Ve()
                                  ? ((e = new Uint8Array(
                                      t.byteLength + u.byteLength
                                    )).set(u),
                                    e.set(t, u.byteLength),
                                    e)
                                  : u;
                              })(t, n, i))
                            : ((t = !u) && (t = Ye() && "audio" === r),
                              t &&
                                (n = (function (e) {
                                  e = ke(e);
                                  var t = [];
                                  new Na()
                                    .box("mdat", function (e) {
                                      t.push(e);
                                    })
                                    .parse(e);
                                  for (var n = [], i = 0; i < t.length; i++) {
                                    var r = t[i - 1],
                                      a = t[i];
                                    n.push(
                                      Ec(
                                        e.subarray(
                                          r ? r.start + r.size : 0,
                                          a.start + a.size
                                        )
                                      )
                                    );
                                  }
                                  return Ct.apply(xt, d(n));
                                })(n))));
                        return (
                          a &&
                            Ge() &&
                            (n = (function (e) {
                              function t(e) {
                                i.push({ start: e.start, size: e.size }), _a(e);
                              }
                              var n = ke(e),
                                i = [];
                              return (
                                new Na()
                                  .box("moov", t)
                                  .box("trak", t)
                                  .box("mdia", t)
                                  .box("minf", t)
                                  .box("stbl", t)
                                  .box("stsd", function (e) {
                                    i.push({ start: e.start, size: e.size });
                                    for (
                                      var t = Ce(n, e.start), r = 0;
                                      r < e.size - 3;
                                      r++
                                    ) {
                                      var a = t.getUint32(r);
                                      1633889587 == a
                                        ? t.setUint32(r, 1700998451)
                                        : 1684103987 == a &&
                                          t.setUint32(r, 1684366131);
                                    }
                                  })
                                  .parse(n),
                                n
                              );
                            })(n)),
                          n
                        );
                      })(e, r, n, i, t)),
                      !i || !e.D || t == h.ua)
                    ) {
                      D.u(11);
                      break;
                    }
                    if (!o && !s) {
                      D.u(11);
                      break;
                    }
                    if (
                      ((M = i.startTime),
                      "HLS" != e.X || e.m || t != h.P || !e.l.has(h.ja))
                    ) {
                      D.u(13);
                      break;
                    }
                    return x(D, e.ga, 14);
                  case 14:
                    (E = D.h), 0.15 < Math.abs(E) && (M -= E);
                  case 13:
                    md(
                      e,
                      t,
                      function () {
                        return fd(e, t);
                      },
                      null
                    ),
                      md(
                        e,
                        t,
                        function () {
                          return pd(e, t, M);
                        },
                        null
                      );
                  case 11:
                    return x(
                      D,
                      md(
                        e,
                        t,
                        function () {
                          var i = n;
                          e.K && Ot(e.K, i, p, r), e.l.get(t).appendBuffer(i);
                        },
                        i ? i.T()[0] : null
                      ),
                      15
                    );
                  case 15:
                    S(D);
                }
              })
            );
          }
          function ld(e, t) {
            var n;
            return L(function (i) {
              return 1 == i.g
                ? t == (n = Nt).ua
                  ? e.h
                    ? x(i, e.h.remove(0, 1 / 0), 0)
                    : i.return()
                  : x(
                      i,
                      md(
                        e,
                        t,
                        function () {
                          return hd(e, t, 0, e.i.duration);
                        },
                        null
                      ),
                      4
                    )
                : e.m
                ? x(
                    i,
                    md(
                      e,
                      n.P,
                      function () {
                        return hd(e, n.P, 0, e.i.duration);
                      },
                      null
                    ),
                    0
                  )
                : i.u(0);
            });
          }
          function cd(e, t, n, i, r, a, o, s, u) {
            var l, c;
            return L(function (d) {
              return 1 == d.g
                ? t == (l = Nt).ua
                  ? (a || (e.h.s = n),
                    (function (e, t, n) {
                      (e.l = t), (e.m = n);
                    })(e.h, i, r),
                    d.return())
                  : ((c = []),
                    x(
                      d,
                      (function (e, t, n, i, r) {
                        var a, o, s, u, l, c, d, h, f, p, g, m, v, y;
                        return L(function (b) {
                          return 1 == b.g
                            ? t == (a = Nt).ua
                              ? b.return(!1)
                              : ((o = Ri(Ui(e.B.get(t)))),
                                (s = _i(e.B.get(t))),
                                (u = xd(e, t, n, i)),
                                (l = u.wf),
                                (c = u.Ai),
                                (d = u.Gf),
                                (h = u.codec),
                                (f = u.mimeType),
                                (p = !0),
                                c &&
                                  e.B.has(a.P) &&
                                  ((g = xd(e, a.P, n, i)),
                                  (m = Ri(Ui(e.B.get(a.P)))),
                                  (v = _i(e.B.get(a.P))),
                                  (p = m == g.codec && v == g.Gf),
                                  g.wf && g.wf.destroy()),
                                o === h && s === d && p
                                  ? (e.j.has(t) && !l
                                      ? (e.j.get(t).destroy(), e.j.delete(t))
                                      : !e.j.has(t) && l
                                      ? e.j.set(t, l)
                                      : l &&
                                        (e.j.has(t) &&
                                        e.j.get(t).transmux != l.transmux
                                          ? (e.j.get(t).destroy(),
                                            e.j.delete(t),
                                            e.j.set(t, l))
                                          : l.destroy()),
                                    b.return(!1))
                                  : ((y = !0),
                                    (e.m || (c && l && !e.j.has(t))) &&
                                      (y = !1),
                                    y &&
                                    "smooth" === e.A.codecSwitchingStrategy &&
                                    Vt()
                                      ? x(
                                          b,
                                          (function (e, t, n, i) {
                                            return md(
                                              e,
                                              t,
                                              function () {
                                                if (t !== Rt) {
                                                  if ((e.B.get(t), Vt())) {
                                                    e.j.has(t) &&
                                                      (e.j.get(t).destroy(),
                                                      e.j.delete(t)),
                                                      i && e.j.set(t, i);
                                                    var r =
                                                      n +
                                                      e.A.addExtraFeaturesToSourceBuffer(
                                                        n
                                                      );
                                                    e.l.get(t).changeType(r),
                                                      e.B.set(t, n);
                                                  }
                                                  gd(e, t);
                                                }
                                              },
                                              null
                                            );
                                          })(e, t, f, l),
                                          3
                                        )
                                      : (l && l.destroy(), x(b, wd(e, r), 3))))
                            : b.return(!0);
                        });
                      })(e, t, o, s, u),
                      2
                    ))
                : (d.h ||
                    (c.push(
                      md(
                        e,
                        t,
                        function () {
                          return fd(e, t);
                        },
                        null
                      )
                    ),
                    e.m &&
                      c.push(
                        md(
                          e,
                          l.P,
                          function () {
                            return fd(e, l.P);
                          },
                          null
                        )
                      )),
                  a ||
                    (c.push(
                      md(
                        e,
                        t,
                        function () {
                          return pd(e, t, n);
                        },
                        null
                      )
                    ),
                    e.m &&
                      c.push(
                        md(
                          e,
                          l.P,
                          function () {
                            return pd(e, l.P, n);
                          },
                          null
                        )
                      )),
                  (0 == i && 1 / 0 == r) ||
                    (c.push(
                      md(
                        e,
                        t,
                        function () {
                          var n = e.l.get(t);
                          (n.appendWindowStart = 0),
                            (n.appendWindowEnd = r),
                            (n.appendWindowStart = i),
                            gd(e, t);
                        },
                        null
                      )
                    ),
                    e.m &&
                      c.push(
                        md(
                          e,
                          l.P,
                          function () {
                            var t = l.P,
                              n = e.l.get(t);
                            (n.appendWindowStart = 0),
                              (n.appendWindowEnd = r),
                              (n.appendWindowStart = i),
                              gd(e, t);
                          },
                          null
                        )
                      )),
                  c.length ? x(d, Promise.all(c), 0) : d.u(0));
            });
          }
          function dd(e) {
            L(function (t) {
              return e.G.g || e.g.error || e.O || e.F || id(e) || rd(e)
                ? t.return()
                : x(
                    t,
                    vd(e, function () {
                      id(e) || rd(e) || e.i.clearLiveSeekableRange();
                    }),
                    0
                  );
            });
          }
          function hd(e, t, n, i) {
            i <= n ? gd(e, t) : e.l.get(t).remove(n, i);
          }
          function fd(e, t) {
            var n = e.l.get(t),
              i = n.appendWindowStart,
              r = n.appendWindowEnd;
            n.abort(),
              (n.appendWindowStart = i),
              (n.appendWindowEnd = r),
              gd(e, t);
          }
          function pd(e, t, n) {
            0 > n && (n += 0.001);
            var i = !0;
            "HLS" == e.X && (i = !(i = od(e, t)) || 0.15 < Math.abs(i - n)),
              i && (e.l.get(t).timestampOffset = n),
              gd(e, t);
          }
          function gd(e, t) {
            if (e.F || e.G.g) {
              var n = e.o.get(t);
              n &&
                n.length &&
                ((n = n[0]) && n.p && n.p.resolve(), e.o.set(t, []));
            } else (n = e.o.get(t)[0]) && (n.p.resolve(), yd(e, t));
          }
          function md(e, t, n, i) {
            return (
              Rl(e.G),
              (n = { start: n, p: new Vo(), uri: i }),
              e.o.get(t).push(n),
              1 == e.o.get(t).length && bd(e, t),
              n.p
            );
          }
          function vd(e, t) {
            var n, i, r, a, o, s, u, l, d, h, f;
            return L(function (p) {
              switch (p.g) {
                case 1:
                  for (
                    Rl(e.G),
                      n = [],
                      i = Array.from(e.l.keys()),
                      r = c(i),
                      a = r.next(),
                      o = {};
                    !a.done;
                    o = { ready: void 0 }, a = r.next()
                  )
                    (s = a.value),
                      (o.ready = new Vo()),
                      (u = {
                        start: (function (e) {
                          return function () {
                            return e.ready.resolve();
                          };
                        })(o),
                        p: o.ready,
                        uri: null,
                      }),
                      (l = e.o.get(s)).push(u),
                      n.push(o.ready),
                      1 == l.length && u.start();
                  return T(p, 2), x(p, Promise.all(n), 4);
                case 4:
                  A(p, 3);
                  break;
                case 2:
                  throw k(p);
                case 3:
                  return T(p, 5, 6), x(p, t(), 6);
                case 6:
                  for (I(p), d = c(i), h = d.next(); !h.done; h = d.next())
                    (f = h.value), yd(e, f);
                  C(p, 0);
                  break;
                case 5:
                  throw new Ee(
                    2,
                    3,
                    3015,
                    k(p),
                    e.g.error || "No error in the media element",
                    null
                  );
              }
            });
          }
          function yd(e, t) {
            e.o.get(t).shift(), bd(e, t);
          }
          function bd(e, t) {
            var n = e.o.get(t)[0];
            if (n)
              try {
                n.start();
              } catch (i) {
                "QuotaExceededError" == i.name
                  ? n.p.reject(new Ee(2, 3, 3017, t))
                  : td(e)
                  ? n.p.reject(
                      new Ee(
                        2,
                        3,
                        3015,
                        i,
                        e.g.error || "No error in the media element",
                        n.uri
                      )
                    )
                  : n.p.reject(new Ee(2, 3, 3024, t)),
                  yd(e, t);
              }
          }
          function wd(e, t) {
            return vd(e, function () {
              return (function (e, t) {
                var n, i, r, a, o, s, u, l, d, h, f, p, g, m, v, y, b, w, S;
                return L(function (T) {
                  switch (T.g) {
                    case 1:
                      if (e.F) return T.return();
                      for (
                        n = Nt,
                          e.F = !0,
                          e.m = !1,
                          i = e.g.currentTime,
                          r = e.g.autoplay,
                          e.g.paused || (e.za = !0),
                          e.ab && (e.g.autoplay = !1),
                          T.l = 0,
                          T.j = 2,
                          e.s.qb(),
                          a = c(e.j.values()),
                          o = a.next();
                        !o.done;
                        o = a.next()
                      )
                        o.value.destroy();
                      for (
                        s = c(e.l.values()), u = s.next();
                        !u.done;
                        u = s.next()
                      ) {
                        l = u.value;
                        try {
                          e.i.removeSourceBuffer(l);
                        } catch (A) {}
                      }
                      return (
                        e.j.clear(),
                        e.l.clear(),
                        (d = e.i.duration),
                        (e.J = new Vo()),
                        (e.i = Qc(e, e.J)),
                        x(T, e.J, 4)
                      );
                    case 4:
                      !isNaN(d) && d
                        ? (e.i.duration = d)
                        : !isNaN(e.pa) && e.pa && (e.i.duration = e.pa),
                        (h = new Vo()),
                        (f = e.i.sourceBuffers),
                        (p = t.size),
                        (g = 0),
                        (m = function () {
                          ++g === p &&
                            (h.resolve(), e.s.sb(f, "addsourcebuffer", m));
                        }),
                        e.s.H(f, "addsourcebuffer", m),
                        (v = c(t.keys())),
                        (y = v.next());
                    case 5:
                      return y.done
                        ? ((S = t.get(n.P)) &&
                            S.isAudioMuxedInVideo &&
                            (e.m = !0),
                          e.m && !e.o.has(n.P) && e.o.set(n.P, []),
                          (e.g.currentTime = i),
                          x(T, h, 2))
                        : ((b = y.value),
                          (w = t.get(b)),
                          x(T, ed(e, b, w, w.codecs), 6));
                    case 6:
                      (y = v.next()), T.u(5);
                      break;
                    case 2:
                      I(T),
                        (e.F = !1),
                        Rl(e.G),
                        e.s.Ea(e.g, "canplaythrough", function () {
                          e.G.g ||
                            ((e.g.autoplay = r),
                            e.za && ((e.za = !1), e.g.play()));
                        }),
                        C(T, 0);
                  }
                });
              })(e, t);
            });
          }
          function xd(e, t, n, i) {
            var r = !1,
              a = Pt("audio", (i || "").split(",")),
              o = Pt("video", (i || "").split(",")),
              s = o;
            "audio" == t && (s = a), s || (s = i), (i = Mi(n, s));
            var u = e.A.forceTransmux;
            if (
              ((!Ht(i) || (!e.D && Fi.includes(i))) && (u = !0),
              u && (n = xi((e = Ei(n, s)))))
            ) {
              var l = n();
              a && o && (r = !0), (i = l.convertCodecs(t, e));
            }
            return (
              (t = Ri(Ui(i))),
              { wf: l, Ai: r, Gf: _i(i), codec: t, mimeType: i }
            );
          }
          F("shaka.util.Dom", Yc),
            (Yc.removeAllChildren = $c),
            ((i = Zc.prototype).destroy = function () {
              return this.G.destroy();
            }),
            (i.init = function (e, t, n, i) {
              (t = void 0 !== t && t),
                (n = void 0 === n ? "UNKNOWN" : n),
                (i = void 0 !== i && i);
              var r,
                a,
                o,
                s,
                u,
                l,
                d = this;
              return L(function (h) {
                switch (h.g) {
                  case 1:
                    return (r = Nt), x(h, d.J, 2);
                  case 2:
                    if (!id(d) && !rd(d)) {
                      h.u(3);
                      break;
                    }
                    return (
                      W(
                        "Expected MediaSource to be open during init(); reopening the media source."
                      ),
                      (d.J = new Vo()),
                      (d.i = Qc(d, d.J)),
                      x(h, d.J, 3)
                    );
                  case 3:
                    (d.D = t),
                      (d.X = n),
                      (d.$a = i),
                      (d.Ya = !d.D && "HLS" == d.X && !d.$a),
                      d.da.clear(),
                      (d.ca = null),
                      (d.oa = null),
                      (d.Y = null),
                      (d.la = null),
                      (d.ga = new Vo()),
                      (a = c(e.keys())),
                      (o = a.next());
                  case 5:
                    if (o.done) {
                      h.u(7);
                      break;
                    }
                    return (
                      (s = o.value),
                      (u = e.get(s)),
                      x(h, ed(d, s, u, u.codecs), 8)
                    );
                  case 8:
                    d.m
                      ? (d.o.set(r.P, []), d.o.set(r.ja, []))
                      : d.o.set(s, []),
                      (o = a.next()),
                      h.u(5);
                    break;
                  case 7:
                    (l = e.get(r.P)) && l.isAudioMuxedInVideo && (d.m = !0),
                      S(h);
                }
              });
            }),
            (i.configure = function (e) {
              (this.A = e), this.h && (this.h.A = e.modifyCueCallback);
            }),
            (i.hb = function () {
              var e = {
                total: this.F ? [] : Uc(this.g.buffered),
                audio: Uc(sd(this, "audio")),
                video: Uc(sd(this, "video")),
                text: [],
              };
              if (this.h) {
                var t = this.h.g,
                  n = this.h.h;
                null != t && null != n && e.text.push({ start: t, end: n });
              }
              return e;
            }),
            (i.remove = function (e, t, n) {
              var i,
                r = this;
              return L(function (a) {
                return 1 == a.g
                  ? e == (i = Nt).ua
                    ? x(a, r.h.remove(t, n), 0)
                    : n > t
                    ? x(
                        a,
                        md(
                          r,
                          e,
                          function () {
                            return hd(r, e, t, n);
                          },
                          null
                        ),
                        5
                      )
                    : a.u(0)
                  : r.m
                  ? x(
                      a,
                      md(
                        r,
                        i.P,
                        function () {
                          return hd(r, i.P, t, n);
                        },
                        null
                      ),
                      0
                    )
                  : a.u(0);
              });
            }),
            (i.flush = function (e) {
              var t,
                n = this;
              return L(function (i) {
                return 1 == i.g
                  ? e == (t = Nt).ua
                    ? i.return()
                    : x(
                        i,
                        md(
                          n,
                          e,
                          function () {
                            (n.g.currentTime -= 0.001), gd(n, e);
                          },
                          null
                        ),
                        2
                      )
                  : n.m
                  ? x(
                      i,
                      md(
                        n,
                        t.P,
                        function () {
                          var e = t.P;
                          (n.g.currentTime -= 0.001), gd(n, e);
                        },
                        null
                      ),
                      0
                    )
                  : i.u(0);
              });
            }),
            (i.endOfStream = function (e) {
              var t = this;
              return L(function (n) {
                return x(
                  n,
                  vd(t, function () {
                    id(t) ||
                      rd(t) ||
                      (e ? t.i.endOfStream(e) : t.i.endOfStream());
                  }),
                  0
                );
              });
            }),
            (i.nb = function (e) {
              var t = this;
              return L(function (n) {
                return x(
                  n,
                  vd(t, function () {
                    if (e < t.i.duration)
                      for (
                        var n = c(t.l.keys()), i = n.next();
                        !i.done;
                        i = n.next()
                      ) {
                        i = i.value;
                        var r = {
                          start: function () {},
                          p: new Vo(),
                          uri: null,
                        };
                        t.o.get(i).unshift(r);
                      }
                    (t.i.duration = e), (t.pa = e);
                  }),
                  0
                );
              });
            }),
            (i.getDuration = function () {
              return this.i.duration;
            });
          var Sd = e.URL.createObjectURL,
            Td = "sequence";
          function Ad(e) {
            var t = this;
            (this.g = e),
              (this.j = !1),
              (this.i = this.g.ud()),
              (this.h = new Oe(function () {
                t.g.fg(0.25 * t.i);
              }));
          }
          function kd(e) {
            e.h.stop();
            var t = e.j ? 0 : e.i;
            if (0 <= t)
              try {
                return void (e.g.ud() != t && e.g.nf(t));
              } catch (n) {}
            e.h.ta(0.25), 0 != e.g.ud() && e.g.nf(0);
          }
          function Id(e, t, n, i) {
            t == HTMLMediaElement.HAVE_NOTHING || e.readyState >= t
              ? i()
              : ((t = Cd.value().get(t)), n.Ea(e, t, i));
          }
          (Ad.prototype.release = function () {
            this.set(this.Wb()),
              this.h && (this.h.stop(), (this.h = null)),
              (this.g = null);
          }),
            (Ad.prototype.set = function (e) {
              (this.i = e), kd(this);
            }),
            (Ad.prototype.Wb = function () {
              return this.g.Wb();
            });
          var Cd = new Pe(function () {
            return new Map([
              [HTMLMediaElement.HAVE_METADATA, "loadedmetadata"],
              [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"],
              [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"],
              [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"],
            ]);
          });
          function Md(e, t, n, i) {
            var r = this;
            (this.g = e),
              (this.m = t),
              (this.s = n),
              (this.l = null),
              (this.j = function () {
                return null == r.l && (r.l = i()), r.l;
              }),
              (this.o = !1),
              (this.h = new Z()),
              (this.i = new Rd(e)),
              Id(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function () {
                Pd(r, r.j());
              });
          }
          function Ed(e) {
            return e.o ? e.g.currentTime : e.j();
          }
          function Dd(e, t) {
            0 < e.g.readyState
              ? Nd(e.i, t)
              : Id(e.g, HTMLMediaElement.HAVE_METADATA, e.h, function () {
                  Pd(e, e.j());
                });
          }
          function Pd(e, t) {
            0.001 > Math.abs(e.g.currentTime - t)
              ? Ld(e)
              : (e.h.Ea(e.g, "seeking", function () {
                  Ld(e);
                }),
                Nd(
                  e.i,
                  e.g.currentTime && 0 != e.g.currentTime ? e.g.currentTime : t
                ));
          }
          function Ld(e) {
            (e.o = !0),
              e.h.H(e.g, "seeking", function () {
                return e.m();
              }),
              e.s(e.g.currentTime);
          }
          function Rd(e) {
            var t = this;
            (this.g = e),
              (this.m = 10),
              (this.j = this.l = this.i = 0),
              (this.h = new Oe(function () {
                0 >= t.i || t.g.currentTime != t.l || t.g.currentTime === t.j
                  ? t.h.stop()
                  : ((t.g.currentTime = t.j), t.i--);
              }));
          }
          function Nd(e, t) {
            (e.l = e.g.currentTime),
              (e.j = t),
              (e.i = e.m),
              (e.g.currentTime = t),
              e.h.ta(0.1);
          }
          function _d(e) {
            (this.h = e), (this.j = !1), (this.g = null), (this.i = new Z());
          }
          function Ud(e, t, n, i, r, a) {
            var o = this;
            (this.i = e),
              (this.g = t.presentationTimeline),
              (this.l = n),
              (this.s = r),
              (this.o = null),
              (this.j = new jc(e, t.presentationTimeline, n, a)),
              (this.h = new Md(
                e,
                function () {
                  e: {
                    var e = o.j;
                    (e.l = !0),
                      (e.A = !1),
                      e.i && e.i.ta(e.h.gapJumpTimerTime),
                      Oc(e);
                    var t = Ed(o.h);
                    if (((e = Od(o, t)), !zt() && 0.001 < Math.abs(e - t))) {
                      if (((t = !1), !We() || (We() && nt()))) t = !0;
                      else {
                        var n = Date.now() / 1e3,
                          i = We() && it() ? 3 : 1;
                        (!o.o || o.o < n - i) && ((o.o = n), (t = !0));
                      }
                      if (t) {
                        Dd(o.h, e), (e = void 0);
                        break e;
                      }
                    }
                    o.s(), (e = void 0);
                  }
                  return e;
                },
                function (e) {
                  var t = o.j;
                  t.g.seeking && !t.l && ((t.l = !0), (t.j = e)),
                    t.i && t.i.ta(t.h.gapJumpTimerTime),
                    Oc(t);
                },
                function () {
                  var e = i;
                  return (
                    null == e
                      ? (e = 1 / 0 > o.g.getDuration() ? o.g.pb() : o.g.bb())
                      : 0 > e && (e = o.g.bb() + e),
                    jd(o, Bd(o, e))
                  );
                }
              )),
              (this.m = new Oe(function () {
                if (0 != o.i.readyState && !o.i.paused) {
                  var e = Ed(o.h),
                    t = o.g.pb(),
                    n = o.g.bb();
                  3 > n - t && (t = n - 3),
                    e < t && ((e = Od(o, e)), (o.i.currentTime = e));
                }
              }));
          }
          function jd(e, t) {
            var n = e.g.getDuration();
            return t >= n ? n - e.l.durationBackoff : t;
          }
          function Od(e, t) {
            var n = e.l.rebufferingGoal,
              i = e.l.safeSeekOffset,
              r = e.g.pb(),
              a = e.g.bb(),
              o = e.g.getDuration();
            3 > a - r && (r = a - 3);
            var s = e.g.Oc(n),
              u = e.g.Oc(i);
            return (
              (n = e.g.Oc(n + i)),
              t >= o
                ? jd(e, t)
                : t > a
                ? a - e.l.safeSeekEndOffset
                : t < r
                ? Nc(e.i.buffered, u)
                  ? u
                  : n
                : t >= s || Nc(e.i.buffered, t)
                ? t
                : n
            );
          }
          function Bd(e, t) {
            var n = e.g.pb();
            return t < n ? n : t > (e = e.g.bb()) ? e : t;
          }
          function Fd(e) {
            var t = this;
            (this.j = e),
              (this.h = new Z()),
              (this.g = new Set()),
              (this.i = new Oe(function () {
                Hd(t, !1);
              }).Nb()),
              e.paused || this.i.ta(0.25),
              this.h.H(e, "playing", function () {
                t.i.Nb().ta(0.25);
              }),
              this.h.H(e, "pause", function () {
                t.i.stop();
              });
          }
          function Hd(e, t) {
            for (
              var n = e.j.currentTime, i = (e = c(e.g)).next();
              !i.done;
              i = e.next()
            )
              i.value.j(n, t);
          }
          function Vd(e) {
            Jo.call(this), (this.g = new Map()), (this.h = e);
          }
          function zd(e, t, n) {
            return !!(
              (e = e.h()[n]) &&
              0 < e.length &&
              ((n = e[e.length - 1].end), t >= e[0].start && t < n)
            );
          }
          function Gd(e) {
            Jo.call(this), (this.h = new Map()), (this.i = e), (this.g = null);
          }
          function qd(e, t) {
            var n =
              t.schemeIdUri +
              "_" +
              t.id +
              "_" +
              t.startTime.toFixed(1) +
              "_" +
              t.endTime.toFixed(1);
            e.h.has(n) ||
              (e.h.set(n, t),
              (t = new Yo("regionadd", new Map([["region", t]]))),
              e.dispatchEvent(t),
              (function (e) {
                e.g ||
                  (e.g = new Oe(function () {
                    for (
                      var t = e.i(), n = c(e.h), i = n.next();
                      !i.done;
                      i = n.next()
                    ) {
                      var r = c(i.value);
                      (i = r.next().value),
                        (r = r.next().value).endTime < t.start &&
                          (e.h.delete(i),
                          (i = new Yo(
                            "regionremove",
                            new Map([["region", r]])
                          )),
                          e.dispatchEvent(i));
                    }
                    !e.h.size && e.g && (e.g.stop(), (e.g = null));
                  }).ta(2));
              })(e));
          }
          function Kd(e, t, n, i) {
            (this.m = e),
              (this.i = t),
              (this.l = n),
              (this.h = new Map()),
              (this.j = new Map()),
              (this.g = null),
              (this.o = i);
          }
          function Wd(e, t) {
            e.l = t;
            for (var n = (e = c(e.h.values())).next(); !n.done; n = e.next())
              n.value.g = t;
          }
          function Xd(e, t, n) {
            if (((n = void 0 !== n && n), !e.i.segmentIndex))
              return Promise.resolve();
            if ((e.g || (e.g = e.i.segmentIndex.ob(t, !0, e.o)), !e.g))
              return Promise.resolve();
            for (
              n && e.g.next(), t = [];
              e.h.size < e.m && (n = e.g.next().value);

            ) {
              var i = !0;
              n.isPreload() && null != n.endByte && (i = !1),
                2 == n.Pc() && (i = !1),
                n.Xb(!1) && (i = !1),
                i && n.ha && t.push(Yd(e, n.ha)),
                i &&
                  !e.h.has(n) &&
                  ((i = new th(e.l)), t.push(nh(i, n, e.i)), e.h.set(n, i));
            }
            return Zd(e), Promise.all(t);
          }
          function Yd(e, t) {
            if (
              !e.i.segmentIndex ||
              t.Xb() ||
              Array.from(e.j.keys()).some(function (e) {
                return ms(e, t);
              })
            )
              return Promise.resolve();
            var n = new th(e.l),
              i = nh(n, t, e.i);
            return e.j.set(t, n), i;
          }
          function Jd(e, t) {
            for (var n = (t = c(t.keys())).next(); !n.done; n = t.next())
              (n = n.value) && eh(e, n);
          }
          function $d(e) {
            Jd(e, e.h), Jd(e, e.j), (e.g = null);
          }
          function Zd(e) {
            for (
              var t = Array.from(e.h.keys()),
                n = c(e.j.keys()),
                i = n.next(),
                r = {};
              !i.done;
              r = { Te: void 0 }, i = n.next()
            )
              (r.Te = i.value),
                t.some(
                  (function (e) {
                    return function (t) {
                      return ms(t.ha, e.Te);
                    };
                  })(r)
                ) || eh(e, r.Te);
          }
          function Qd(e, t) {
            e.m = t;
            for (var n = Array.from(e.h.keys()); n.length > t; ) {
              var i = n.pop();
              i && eh(e, i);
            }
            Zd(e);
          }
          function eh(e, t) {
            var n = e.h;
            t instanceof gs && (n = e.j),
              (e = n.get(t)),
              n.delete(t),
              e && e.abort();
          }
          function th(e) {
            (this.g = e), (this.ad = this.tf = null);
          }
          function nh(e, t, n) {
            var i = new Uint8Array(0);
            return (
              (e.ad = e.g(t, n, function (t) {
                return L(function (n) {
                  if (1 == n.g)
                    return (
                      (i = 0 < i.byteLength ? Ct(i, t) : t),
                      e.tf ? x(n, e.tf(i), 3) : n.u(0)
                    );
                  (i = new Uint8Array(0)), S(n);
                });
              })),
              e.ad.promise.catch(function (e) {
                return e instanceof Ee && 7001 == e.code
                  ? Promise.resolve()
                  : Promise.reject(e);
              })
            );
          }
          function ih(e, t) {
            var n = this;
            (this.g = t),
              (this.j = e),
              (this.h = null),
              (this.K = new Map()),
              (this.C = 1),
              (this.s = this.l = null),
              (this.S = 0),
              (this.i = new Map()),
              (this.J = !1),
              (this.W = null),
              (this.B = !1),
              (this.m = new Ll(function () {
                return (function (e) {
                  var t, n, i, r, a, o;
                  return L(function (s) {
                    if (1 == s.g) {
                      for (
                        e.A && e.A.stop(),
                          e.A = null,
                          e.G && e.G.stop(),
                          e.G = null,
                          t = [],
                          n = c(e.i.values()),
                          i = n.next();
                        !i.done;
                        i = n.next()
                      )
                        wh((r = i.value)),
                          t.push(xh(r)),
                          r.V && ($d(r.V), (r.V = null));
                      for (
                        a = c(e.o.values()), o = a.next();
                        !o.done;
                        o = a.next()
                      )
                        $d(o.value);
                      return x(s, Promise.all(t), 2);
                    }
                    e.i.clear(),
                      e.o.clear(),
                      (e.g = null),
                      (e.j = null),
                      (e.h = null),
                      (e.F = null),
                      S(s);
                  });
                })(n);
              })),
              (this.L = Date.now() / 1e3),
              (this.o = new Map()),
              (this.O = { projection: null, hfov: null }),
              (this.Y = 0),
              (this.X = 1 / 0),
              (this.D = null),
              (this.A = new Oe(function () {
                if (n.j && n.g)
                  if (n.j.presentationTimeline.R()) {
                    var e = n.j.presentationTimeline.pb(),
                      t = n.j.presentationTimeline.bb();
                    1 < t - e
                      ? (function (e, t, n) {
                          L(function (i) {
                            return e.G.g ||
                              e.g.error ||
                              e.O ||
                              e.F ||
                              id(e) ||
                              rd(e)
                              ? i.return()
                              : x(
                                  i,
                                  vd(e, function () {
                                    id(e) ||
                                      rd(e) ||
                                      e.i.setLiveSeekableRange(t, n);
                                  }),
                                  0
                                );
                          });
                        })(n.g.U, e, t)
                      : dd(n.g.U);
                  } else dd(n.g.U), n.A && n.A.stop();
                else n.A && n.A.stop();
              })),
              (this.F = null),
              (this.G = new Oe(function () {
                var e = n.g.video;
                !e.ended && n.F && ((e.currentTime = n.F), (n.F = null));
              }));
          }
          function rh(e, t) {
            for (
              var n = 0 > e.g.Ra(), i = c(e.i.values()), r = i.next();
              !r.done;
              r = i.next()
            )
              (r = r.value).ba && r.ba.Fc(n), r.V && r.V.Fc(n);
            for (r = (i = c(e.o.values())).next(); !r.done; r = i.next())
              r.value.Fc(n);
            (n = e.i.get("video")) &&
              (i = n.stream) &&
              (t
                ? (t = i.trickModeVideo) &&
                  !n.Jb &&
                  (sh(e, t, !1, 0, !1), (n.Jb = i))
                : (t = n.Jb) && ((n.Jb = null), sh(e, t, !0, 0, !1)));
          }
          function ah(e, t, n, i, r, a) {
            (n = void 0 !== n && n),
              (i = void 0 === i ? 0 : i),
              (r = void 0 !== r && r),
              (a = void 0 !== a && a),
              (e.l = t),
              e.J &&
                (t.video && sh(e, t.video, n, i, r, a),
                t.audio && sh(e, t.audio, n, i, r, a));
          }
          function oh(e, t) {
            L(function (n) {
              if (1 == n.g)
                return (
                  (e.D = null),
                  (e.s = t),
                  e.J
                    ? t.segmentIndex
                      ? n.u(2)
                      : x(n, t.createSegmentIndex(), 2)
                    : n.return()
                );
              sh(e, t, !0, 0, !1), S(n);
            });
          }
          function sh(e, t, n, i, r, a) {
            var o = e.i.get(t.type);
            o || t.type != Rt
              ? o &&
                (o.Jb &&
                  (t.trickModeVideo
                    ? ((o.Jb = t), (t = t.trickModeVideo))
                    : (o.Jb = null)),
                o.stream != t || r) &&
                (e.o.has(t)
                  ? (o.V = e.o.get(t))
                  : o.V &&
                    (function (e, t) {
                      t && t !== e.i && ($d(e), (e.i = t));
                    })(o.V, t),
                t.type == Rt &&
                  ((r = Mi(t.mimeType, t.codecs)),
                  nd(e.g.U, r, e.j.sequenceMode, t.external)),
                !e.o.has(o.stream) &&
                  o.stream.closeSegmentIndex &&
                  (o.sa
                    ? ((r = "(" + o.type + ":" + o.stream.id + ")"),
                      e.K.has(r) || e.K.set(r, o.stream.closeSegmentIndex))
                    : o.stream.closeSegmentIndex()),
                (r = o.stream.isAudioMuxedInVideo != t.isAudioMuxedInVideo),
                (o.stream = t),
                (o.ba = null),
                (o.me = !!a),
                t.dependencyStream
                  ? (o.Mc = lh(e, t.dependencyStream))
                  : (o.Mc = null),
                r
                  ? Th(e, !0, !1)
                  : (n
                      ? o.Qb
                        ? (o.de = !0)
                        : o.sa
                        ? ((o.Ob = !0), (o.nd = i), (o.de = !0))
                        : (wh(o),
                          yh(e, o, !0, i).catch(function (t) {
                            e.g && e.g.onError(t);
                          }))
                      : o.sa || o.Va || bh(e, o, 0),
                    (function (e, t) {
                      var n, i;
                      return L(function (r) {
                        if (1 == r.g)
                          return t.cb
                            ? ((n = t.stream),
                              (i = t.cb),
                              n.segmentIndex
                                ? r.u(2)
                                : x(r, n.createSegmentIndex(), 2))
                            : r.return();
                        if (t.cb != i || t.stream != n) return r.return();
                        var a = e.g.pc(),
                          o = od(e.g.U, t.type),
                          s = t.stream.segmentIndex.find(
                            t.na ? t.na.endTime : a
                          ),
                          u = null == s ? null : t.stream.segmentIndex.get(s);
                        (s = u && u.endByte ? u.endByte - u.startByte : null),
                          u &&
                            !s &&
                            (s =
                              ((u.endTime - u.getStartTime()) *
                                (t.stream.bandwidth || 0)) /
                              8),
                          s
                            ? ((u = u.ha) &&
                                (s +=
                                  (u.endByte
                                    ? u.endByte - u.startByte
                                    : null) || 0),
                              (a =
                                (8 * s) / (u = e.g.getBandwidthEstimate()) <
                                  (o || 0) - a - e.h.rebufferingGoal ||
                                t.cb.h.g > s))
                            : (a = !1),
                          a && t.cb.abort(),
                          S(r);
                      });
                    })(e, o).catch(function (t) {
                      e.g && e.g.onError(t);
                    })))
              : (function (e, t) {
                  var n, i, r, a, o;
                  L(function (s) {
                    switch (s.g) {
                      case 1:
                        return (
                          (n = Nt),
                          e.S++,
                          (i = e.S),
                          T(s, 2),
                          x(s, ld(e.g.U, n.ua), 4)
                        );
                      case 4:
                        A(s, 3);
                        break;
                      case 2:
                        (r = k(s)), e.g && e.g.onError(r);
                      case 3:
                        (a = Mi(t.mimeType, t.codecs)),
                          nd(e.g.U, a, e.j.sequenceMode, t.external),
                          (e.g.U.fa.isTextVisible() || e.h.alwaysStreamText) &&
                            e.S == i &&
                            ((o = lh(e, t)), e.i.set(n.ua, o), bh(e, o, 0)),
                          S(s);
                    }
                  });
                })(e, t);
          }
          function uh(e, t) {
            t.Qb ||
              t.Ob ||
              (t.sa
                ? ((t.Ob = !0), (t.nd = 0))
                : null == ad(e.g.U, t.type)
                ? null == t.Va && bh(e, t, 0)
                : (wh(t),
                  yh(e, t, !1, 0).catch(function (t) {
                    e.g && e.g.onError(t);
                  })));
          }
          function lh(e, t) {
            var n = {
              stream: t,
              type: t.type,
              ba: null,
              V: ch(e, t),
              na: null,
              ib: null,
              Cd: null,
              bc: null,
              ac: null,
              zd: null,
              Bd: null,
              Jb: null,
              endOfStream: !1,
              sa: !1,
              Va: null,
              Ob: !1,
              nd: 0,
              de: !1,
              Qb: !1,
              fc: !0,
              me: !1,
              ff: !1,
              Qc: !1,
              cb: null,
              Mc: null,
            };
            return t.dependencyStream && (n.Mc = lh(e, t.dependencyStream)), n;
          }
          function ch(e, t) {
            if (
              ("video" === t.type && e.h.disableVideoPrefetch) ||
              ("audio" === t.type && e.h.disableAudioPrefetch) ||
              (t.type === Rt &&
                ("application/cea-608" == t.mimeType ||
                  "application/cea-708" == t.mimeType)) ||
              (t.type === Rt && e.h.disableTextPrefetch)
            )
              return null;
            if (e.o.has(t)) return e.o.get(t);
            var n = e.i.get(t.type);
            return (n = n && n.V) && t === n.i
              ? n
              : 0 < e.h.segmentPrefetchLimit
              ? new Kd(
                  e.h.segmentPrefetchLimit,
                  t,
                  function (t, n, i) {
                    return vh(t, n, i || null, e.h.retryParameters, e.g.cc);
                  },
                  0 > e.g.Ra()
                )
              : null;
          }
          function dh(t, n) {
            var i, r, a, o, s, u;
            return L(function (l) {
              switch (l.g) {
                case 1:
                  if ((Rl(t.m), n.sa || null == n.Va || n.Qb))
                    return l.return();
                  if (((n.Va = null), !n.Ob)) {
                    l.u(2);
                    break;
                  }
                  return x(l, yh(t, n, n.de, n.nd), 3);
                case 3:
                  return l.return();
                case 2:
                  if (
                    ((function (e, t) {
                      for (
                        var n = c(e.K.entries()), i = n.next();
                        !i.done;
                        i = n.next()
                      ) {
                        var r = c(i.value);
                        (i = r.next().value),
                          (r = r.next().value),
                          i.includes(t.type) && (r(), e.K.delete(i));
                      }
                    })(t, n),
                    n.stream.segmentIndex)
                  ) {
                    l.u(4);
                    break;
                  }
                  return (
                    (i = n.stream),
                    T(l, 5),
                    x(l, n.stream.createSegmentIndex(), 7)
                  );
                case 7:
                  A(l, 6);
                  break;
                case 5:
                  return (r = k(l)), x(l, Sh(t, n, r), 8);
                case 8:
                  return l.return();
                case 6:
                  if (i != n.stream)
                    return (
                      i.closeSegmentIndex && i.closeSegmentIndex(),
                      n.sa || n.Va || bh(t, n, 0),
                      l.return()
                    );
                case 4:
                  T(l, 9),
                    (a = (function (t, n) {
                      if (gh(n))
                        return (
                          (function (e, t) {
                            var n = od(e, "video") || 0;
                            qi(e.h, t, n);
                          })(t.g.U, n.stream.originalId || ""),
                          null
                        );
                      if (
                        (n.type == Rt &&
                          (function (e) {
                            e.h && qi(e.h, "", 0);
                          })(t.g.U),
                        n.stream.isAudioMuxedInVideo)
                      )
                        return null;
                      var i =
                        t.h.updateIntervalSeconds /
                        Math.max(1, Math.abs(t.g.Ra()));
                      if (!td(t.g.U) && n.type != Rt) return i / 2;
                      var r = t.g.pc();
                      if ("audio" === n.type)
                        for (
                          var a = c(t.o.keys()), o = a.next();
                          !o.done;
                          o = a.next()
                        )
                          (o = t.o.get(o.value)).Ba(r, !0), Xd(o, r);
                      a = n.na ? n.na.endTime : r;
                      var s = (function (e, t, n) {
                          return t == Rt
                            ? null == (e = e.h).h || e.h < n
                              ? 0
                              : e.h - Math.max(n, e.g)
                            : _c((e = sd(e, t)), n);
                        })(t.g.U, n.type, r),
                        u = Math.max(
                          1,
                          Math.max(t.h.rebufferingGoal, t.h.bufferingGoal) * t.C
                        ),
                        l = t.j.presentationTimeline.getDuration() - a;
                      if (((o = od(t.g.U, n.type)), 1e-6 > l && o))
                        return (
                          (n.endOfStream = !0),
                          "video" == n.type &&
                            (t = t.i.get(Rt)) &&
                            gh(t) &&
                            (t.endOfStream = !0),
                          null
                        );
                      if (((n.endOfStream = !1), s >= u)) return i / 2;
                      if (
                        ((u = !n.ba),
                        (o = (function (e, t, n, i) {
                          if (t.ba)
                            return (
                              (n = t.ba.current()) &&
                                t.na &&
                                0.001 >
                                  Math.abs(t.na.startTime - n.startTime) &&
                                (n = t.ba.next().value),
                              n
                            );
                          if (t.na || i)
                            return (
                              (n = t.na ? t.na.endTime : i),
                              (e = 0 > e.g.Ra()),
                              t.stream.segmentIndex &&
                                (t.ba = t.stream.segmentIndex.ob(n, !1, e)),
                              t.ba && t.ba.next().value
                            );
                          i = e.j.sequenceMode
                            ? 0
                            : e.h.inaccurateManifestTolerance;
                          var r = Math.max(n - i, 0);
                          e = 0 > e.g.Ra();
                          var a = null;
                          return (
                            i &&
                              (t.stream.segmentIndex &&
                                (t.ba = t.stream.segmentIndex.ob(r, !1, e)),
                              (a = t.ba && t.ba.next().value)),
                            a ||
                              (t.stream.segmentIndex &&
                                (t.ba = t.stream.segmentIndex.ob(n, !1, e)),
                              (a = t.ba && t.ba.next().value)),
                            a
                          );
                        })(t, n, r, o)),
                        !o)
                      )
                        return i;
                      (s = !1),
                        u && n.me && ((s = !0), (n.me = !1)),
                        (u = 1 / 0);
                      for (
                        var d = (l = c((l = Array.from(t.i.values())))).next();
                        !d.done;
                        d = l.next()
                      )
                        gh((d = d.value)) ||
                          (d.ba && !d.ba.current()) ||
                          (u = Math.min(u, d.na ? d.na.endTime : r));
                      return a >= u + t.j.presentationTimeline.h
                        ? i
                        : (("keep" !== t.h.crossBoundaryStrategy &&
                            (function (e, t, n) {
                              if (t.type === Rt) return !1;
                              var i = t.ib;
                              if (!i) return !1;
                              n = n.ha;
                              var r = i.g !== n.g;
                              if (
                                ("reset_to_encrypted" ===
                                  e.h.crossBoundaryStrategy &&
                                  (i.encrypted || n.encrypted || (r = !1),
                                  i.encrypted &&
                                    (e.h.crossBoundaryStrategy = "keep")),
                                "RESET_ON_ENCRYPTION_CHANGE" ===
                                  e.h.crossBoundaryStrategy &&
                                  i.encrypted == n.encrypted &&
                                  (r = !1),
                                r && t.fc)
                              ) {
                                var a = e.g.video,
                                  o = a.paused;
                                Th(e, !0).then(function () {
                                  e.g.onEvent(new Yo("boundarycrossed")),
                                    o || a.play();
                                });
                              }
                              return r;
                            })(t, n, o)) ||
                            (n.V &&
                              n.ba &&
                              !t.o.has(n.stream) &&
                              (n.V.Ba(o.startTime + 0.001),
                              Xd(n.V, o.startTime).catch(function () {})),
                            (function (t, n, i, r, a) {
                              var o,
                                s,
                                u,
                                l,
                                c,
                                d,
                                h,
                                f,
                                p,
                                g,
                                m,
                                v,
                                y,
                                b,
                                w,
                                I;
                              return L(function (C) {
                                switch (C.g) {
                                  case 1:
                                    if (
                                      ((o = Nt),
                                      (s = n.stream),
                                      (u = n.ba),
                                      (n.sa = !0),
                                      T(C, 2),
                                      2 == r.Pc())
                                    )
                                      throw new Ee(1, 1, 1011);
                                    return x(
                                      C,
                                      (function (e, t, n, i) {
                                        var r,
                                          a,
                                          o,
                                          s,
                                          u,
                                          l,
                                          c,
                                          d,
                                          h,
                                          f,
                                          p,
                                          g,
                                          m,
                                          v,
                                          y,
                                          b;
                                        return L(function (w) {
                                          switch (w.g) {
                                            case 1:
                                              if (
                                                ((r = Nt),
                                                (a = null == t.na),
                                                (o = []),
                                                (s = Math.max(
                                                  0,
                                                  Math.max(n.F, e.Y) - 0.1
                                                )),
                                                (u = Math.min(n.D, e.X) + 0.01),
                                                (l =
                                                  n.codecs || t.stream.codecs),
                                                (c = Ni(l)),
                                                (d = _i(
                                                  n.mimeType ||
                                                    t.stream.mimeType
                                                )),
                                                (h = n.l) == t.Cd &&
                                                  s == t.bc &&
                                                  u == t.ac &&
                                                  c == t.zd &&
                                                  d == t.Bd)
                                              ) {
                                                w.u(2);
                                                break;
                                              }
                                              if (
                                                ((f =
                                                  t.zd &&
                                                  t.Bd &&
                                                  (function (e, t, n, i) {
                                                    if (t == Rt) var r = !1;
                                                    else {
                                                      r = Ri(Ui(e.B.get(t)));
                                                      var a = _i(e.B.get(t)),
                                                        o = Mi(n, i),
                                                        s = e.A.forceTransmux;
                                                      (!Ht(o) ||
                                                        (!e.D &&
                                                          Fi.includes(o))) &&
                                                        (s = !0),
                                                        (n = Ei(n, i)),
                                                        s &&
                                                          (s = xi(n)) &&
                                                          ((o = (s =
                                                            s()).convertCodecs(
                                                            t,
                                                            n
                                                          )),
                                                          s.destroy()),
                                                        (t = Ri(Ui(o))),
                                                        (o = _i(o)),
                                                        (r =
                                                          r !== t || a !== o);
                                                    }
                                                    return (
                                                      !!r &&
                                                      ("smooth" !==
                                                        e.A
                                                          .codecSwitchingStrategy ||
                                                        !Vt() ||
                                                        e.m)
                                                    );
                                                  })(e.g.U, t.type, d, l)),
                                                !f)
                                              ) {
                                                w.u(3);
                                                break;
                                              }
                                              if (
                                                ((p = null),
                                                t.type === r.ja
                                                  ? (p = e.i.get(r.P))
                                                  : t.type === r.P &&
                                                    (p = e.i.get(r.ja)),
                                                !p)
                                              ) {
                                                w.u(3);
                                                break;
                                              }
                                              return x(
                                                w,
                                                xh(p).catch(function () {}),
                                                5
                                              );
                                            case 5:
                                              (p.ib = null),
                                                (p.bc = null),
                                                (p.ac = null),
                                                uh(e, p);
                                            case 3:
                                              return x(
                                                w,
                                                hh(e, t, h, s, u, n, c, d),
                                                2
                                              );
                                            case 2:
                                              return (
                                                ms(n.ha, t.ib) ||
                                                  ((t.ib = n.ha),
                                                  n.j &&
                                                    n.ha &&
                                                    ((g = mh(e, t, n.ha)),
                                                    (m = function () {
                                                      var a, o, s, u, l, c;
                                                      return L(function (d) {
                                                        switch (d.g) {
                                                          case 1:
                                                            return (
                                                              T(d, 2),
                                                              x(d, g, 4)
                                                            );
                                                          case 4:
                                                            return (
                                                              (a = d.h),
                                                              Rl(e.m),
                                                              (o = null),
                                                              (s = new Map()),
                                                              (u = {
                                                                projection:
                                                                  null,
                                                                hfov: null,
                                                              }),
                                                              new Na()
                                                                .box("moov", _a)
                                                                .box("trak", _a)
                                                                .box("mdia", _a)
                                                                .N(
                                                                  "mdhd",
                                                                  function (e) {
                                                                    o = Wa(
                                                                      e.reader,
                                                                      e.version
                                                                    ).timescale;
                                                                  }
                                                                )
                                                                .box(
                                                                  "hdlr",
                                                                  function (e) {
                                                                    switch (
                                                                      ((e =
                                                                        e.reader).skip(
                                                                        8
                                                                      ),
                                                                      e.dc())
                                                                    ) {
                                                                      case "soun":
                                                                        s.set(
                                                                          r.P,
                                                                          o
                                                                        );
                                                                        break;
                                                                      case "vide":
                                                                        s.set(
                                                                          r.ja,
                                                                          o
                                                                        );
                                                                    }
                                                                    o = null;
                                                                  }
                                                                )
                                                                .box("minf", _a)
                                                                .box("stbl", _a)
                                                                .N("stsd", Ua)
                                                                .box("encv", ja)
                                                                .box("avc1", ja)
                                                                .box("avc3", ja)
                                                                .box("hev1", ja)
                                                                .box("hvc1", ja)
                                                                .box("dvav", ja)
                                                                .box("dva1", ja)
                                                                .box("dvh1", ja)
                                                                .box("dvhe", ja)
                                                                .box("dvc1", ja)
                                                                .box("dvi1", ja)
                                                                .box("vexu", _a)
                                                                .box("proj", _a)
                                                                .N(
                                                                  "prji",
                                                                  function (e) {
                                                                    (e =
                                                                      e.reader.dc()),
                                                                      (u.projection =
                                                                        e);
                                                                  }
                                                                )
                                                                .box(
                                                                  "hfov",
                                                                  function (e) {
                                                                    (e =
                                                                      e.reader.M() /
                                                                      1e3),
                                                                      (u.hfov =
                                                                        e);
                                                                  }
                                                                )
                                                                .parse(a),
                                                              t.type === r.ja &&
                                                                (function (
                                                                  e,
                                                                  t
                                                                ) {
                                                                  if (
                                                                    e.O
                                                                      .projection !=
                                                                      t.projection ||
                                                                    e.O.hfov !=
                                                                      t.hfov
                                                                  ) {
                                                                    if (
                                                                      null !=
                                                                        t.projection ||
                                                                      null !=
                                                                        t.hfov
                                                                    ) {
                                                                      var n =
                                                                        new Map().set(
                                                                          "detail",
                                                                          t
                                                                        );
                                                                      n =
                                                                        new Yo(
                                                                          "spatialvideoinfo",
                                                                          n
                                                                        );
                                                                    } else
                                                                      n =
                                                                        new Yo(
                                                                          "nospatialvideoinfo"
                                                                        );
                                                                    (n.cancelable =
                                                                      !0),
                                                                      e.g.onEvent(
                                                                        n
                                                                      ),
                                                                      (e.O = t);
                                                                  }
                                                                })(e, u),
                                                              s.has(t.type)
                                                                ? (n.ha.timescale =
                                                                    s.get(
                                                                      t.type
                                                                    ))
                                                                : null != o &&
                                                                  (n.ha.timescale =
                                                                    o),
                                                              (l =
                                                                t.stream
                                                                  .closedCaptions &&
                                                                0 <
                                                                  t.stream
                                                                    .closedCaptions
                                                                    .size),
                                                              x(
                                                                d,
                                                                e.g.Hf(
                                                                  t.type,
                                                                  a
                                                                ),
                                                                5
                                                              )
                                                            );
                                                          case 5:
                                                            return x(
                                                              d,
                                                              ud(
                                                                e.g.U,
                                                                t.type,
                                                                a,
                                                                null,
                                                                t.stream,
                                                                l,
                                                                t.fc,
                                                                i
                                                              ),
                                                              6
                                                            );
                                                          case 6:
                                                            A(d, 0);
                                                            break;
                                                          case 2:
                                                            throw (
                                                              ((c = k(d)),
                                                              (t.ib = null),
                                                              c)
                                                            );
                                                        }
                                                      });
                                                    }),
                                                    (v = n.startTime),
                                                    a &&
                                                      null !=
                                                        (y = od(
                                                          e.g.U,
                                                          t.type
                                                        )) &&
                                                      (v = y),
                                                    e.g.bi(v, n.ha),
                                                    o.push(m()))),
                                                (b = t.na ? t.na.h : -1),
                                                n.h != b &&
                                                  o.push(
                                                    (function (e, t, n) {
                                                      var i, r;
                                                      return L(function (a) {
                                                        return 1 == a.g
                                                          ? t == (i = Nt).ua
                                                            ? a.return()
                                                            : (t == i.ja &&
                                                                (e.Ma =
                                                                  new Vo()),
                                                              !e.D ||
                                                              ((r = od(e, t)) &&
                                                                0.1 >
                                                                  Math.abs(
                                                                    r - n
                                                                  ))
                                                                ? a.return()
                                                                : (md(
                                                                    e,
                                                                    t,
                                                                    function () {
                                                                      return fd(
                                                                        e,
                                                                        t
                                                                      );
                                                                    },
                                                                    null
                                                                  ),
                                                                  e.m &&
                                                                    md(
                                                                      e,
                                                                      i.P,
                                                                      function () {
                                                                        return fd(
                                                                          e,
                                                                          i.P
                                                                        );
                                                                      },
                                                                      null
                                                                    ),
                                                                  x(
                                                                    a,
                                                                    md(
                                                                      e,
                                                                      t,
                                                                      function () {
                                                                        return pd(
                                                                          e,
                                                                          t,
                                                                          n
                                                                        );
                                                                      },
                                                                      null
                                                                    ),
                                                                    2
                                                                  )))
                                                          : e.m
                                                          ? x(
                                                              a,
                                                              md(
                                                                e,
                                                                i.P,
                                                                function () {
                                                                  return pd(
                                                                    e,
                                                                    i.P,
                                                                    n
                                                                  );
                                                                },
                                                                null
                                                              ),
                                                              0
                                                            )
                                                          : a.u(0);
                                                      });
                                                    })(
                                                      e.g.U,
                                                      t.type,
                                                      n.startTime
                                                    )
                                                  ),
                                                x(w, Promise.all(o), 0)
                                              );
                                          }
                                        });
                                      })(t, n, r, a),
                                      4
                                    );
                                  case 4:
                                    return (
                                      Rl(t.m),
                                      t.B
                                        ? C.return()
                                        : ((l =
                                            "video/mp4" == s.mimeType ||
                                            "audio/mp4" == s.mimeType),
                                          (c = e.ReadableStream),
                                          t.h.lowLatencyMode &&
                                          t.j.isLowLatency &&
                                          c &&
                                          l &&
                                          ("HLS" != t.j.type || r.A)
                                            ? ((h = new Uint8Array(0)),
                                              (p = f = !1),
                                              (m = function (e) {
                                                var o, u, l;
                                                return L(function (c) {
                                                  switch (c.g) {
                                                    case 1:
                                                      if (f) return c.return();
                                                      if (
                                                        ((p = !0), Rl(t.m), t.B)
                                                      )
                                                        return c.return();
                                                      if (
                                                        (T(c, 2),
                                                        (h = (function (e, t) {
                                                          var n =
                                                            new Uint8Array(
                                                              e.length +
                                                                t.length
                                                            );
                                                          return (
                                                            n.set(e),
                                                            n.set(t, e.length),
                                                            n
                                                          );
                                                        })(h, e)),
                                                        (o = !1),
                                                        (u = 0),
                                                        new Na()
                                                          .box(
                                                            "mdat",
                                                            function (e) {
                                                              (u =
                                                                e.size +
                                                                e.start),
                                                                (o = !0);
                                                            }
                                                          )
                                                          .parse(h, !1, !0),
                                                        !o)
                                                      ) {
                                                        c.u(4);
                                                        break;
                                                      }
                                                      return (
                                                        (l = h.subarray(0, u)),
                                                        (h = h.subarray(u)),
                                                        x(
                                                          c,
                                                          fh(
                                                            t,
                                                            n,
                                                            i,
                                                            s,
                                                            r,
                                                            l,
                                                            !0,
                                                            a
                                                          ),
                                                          5
                                                        )
                                                      );
                                                    case 5:
                                                      n.V &&
                                                        n.ba &&
                                                        Xd(
                                                          n.V,
                                                          r.startTime,
                                                          !0
                                                        );
                                                    case 4:
                                                      A(c, 0);
                                                      break;
                                                    case 2:
                                                      (g = k(c)), S(c);
                                                  }
                                                });
                                              }),
                                              x(C, mh(t, n, r, m), 9))
                                            : x(C, mh(t, n, r), 7))
                                    );
                                  case 7:
                                    return (
                                      (d = C.h),
                                      Rl(t.m),
                                      t.B
                                        ? C.return()
                                        : (Rl(t.m),
                                          n.Ob
                                            ? ((n.sa = !1),
                                              bh(t, n, 0),
                                              C.return())
                                            : x(
                                                C,
                                                fh(t, n, i, s, r, d, !1, a),
                                                6
                                              ))
                                    );
                                  case 9:
                                    if (((v = C.h), g)) throw g;
                                    if (p) {
                                      C.u(10);
                                      break;
                                    }
                                    return (
                                      (f = !0),
                                      Rl(t.m),
                                      t.B
                                        ? C.return()
                                        : n.Ob
                                        ? ((n.sa = !1), bh(t, n, 0), C.return())
                                        : x(C, fh(t, n, i, s, r, v, !1, a), 10)
                                    );
                                  case 10:
                                    n.V && n.ba && Xd(n.V, r.startTime, !0);
                                  case 6:
                                    if ((Rl(t.m), t.B)) return C.return();
                                    (n.na = r),
                                      u.next(),
                                      (n.sa = !1),
                                      (n.ff = !1),
                                      (y = t.g.U.hb()),
                                      (b = y[n.type]),
                                      JSON.stringify(b),
                                      n.Ob ||
                                        ((w = null),
                                        n.type === o.ja
                                          ? (w = t.i.get(o.P))
                                          : n.type === o.P &&
                                            (w = t.i.get(o.ja)),
                                        w && w.type == o.P
                                          ? t.g.Jd(
                                              r,
                                              n.stream,
                                              w.stream.isAudioMuxedInVideo
                                            )
                                          : t.g.Jd(
                                              r,
                                              n.stream,
                                              n.stream.codecs.includes(",")
                                            )),
                                      bh(t, n, 0),
                                      A(C, 0);
                                    break;
                                  case 2:
                                    if (((I = k(C)), Rl(t.m, I), t.B))
                                      return C.return();
                                    if (((n.sa = !1), 7001 == I.code))
                                      (n.sa = !1), wh(n), bh(t, n, 0), C.u(0);
                                    else {
                                      if (
                                        n.type != o.ua ||
                                        !t.h.ignoreTextStreamFailures
                                      )
                                        return 3017 == I.code
                                          ? x(
                                              C,
                                              (function (e, t, n) {
                                                var i, r, a, o;
                                                return L(function (s) {
                                                  if (1 == s.g) {
                                                    if (
                                                      ((i = Array.from(
                                                        e.i.values()
                                                      )),
                                                      i.some(function (e) {
                                                        return e != t && e.ff;
                                                      }))
                                                    )
                                                      return s.u(2);
                                                    if (
                                                      ((r =
                                                        0 ===
                                                          e.h.maxDisabledTime &&
                                                        1011 == n.code
                                                          ? 1
                                                          : e.h
                                                              .maxDisabledTime),
                                                      e.g.disableStream(
                                                        t.stream,
                                                        r
                                                      ))
                                                    )
                                                      return s.return();
                                                    if (
                                                      e.h
                                                        .avoidEvictionOnQuotaExceededError
                                                    )
                                                      return (
                                                        bh(e, t, 4), s.return()
                                                      );
                                                    if (
                                                      20 <
                                                      (a = Math.round(
                                                        100 * e.C
                                                      ))
                                                    )
                                                      e.C -= 0.2;
                                                    else {
                                                      if (!(4 < a))
                                                        return (
                                                          (t.Qc = !0),
                                                          (e.B = !0),
                                                          e.g.onError(n),
                                                          s.return()
                                                        );
                                                      e.C -= 0.04;
                                                    }
                                                    return (
                                                      (t.ff = !0),
                                                      (o = e.g.pc()),
                                                      x(s, ph(e, t, o), 2)
                                                    );
                                                  }
                                                  bh(e, t, 4), S(s);
                                                });
                                              })(t, n, I),
                                              0
                                            )
                                          : ((n.Qc = !0),
                                            1 == I.category &&
                                              n.V &&
                                              eh(n.V, r),
                                            (I.severity = 2),
                                            x(C, Sh(t, n, I), 0));
                                      t.i.delete(o.ua), C.u(0);
                                    }
                                }
                              });
                            })(t, n, r, o, s).catch(function () {}),
                            n.Mc &&
                              (function (e, t, n) {
                                var i, r, a, o, s, u, l, c;
                                L(function (d) {
                                  switch (d.g) {
                                    case 1:
                                      if (
                                        ((i = t.stream),
                                        !(a =
                                          (r = i.segmentIndex.ob(n)) &&
                                          r.next().value))
                                      ) {
                                        d.u(0);
                                        break;
                                      }
                                      if (!(o = a.ha) || ms(o, t.ib)) {
                                        d.u(3);
                                        break;
                                      }
                                      return (
                                        (t.ib = o),
                                        T(d, 4),
                                        x(d, mh(e, t, o), 6)
                                      );
                                    case 6:
                                      s = d.h;
                                      var h = e.g.U;
                                      h.K && Ot(h.K, s, 0, i), A(d, 3);
                                      break;
                                    case 4:
                                      throw ((u = k(d)), (t.ib = null), u);
                                    case 3:
                                      if (t.na && t.na == a) {
                                        d.u(0);
                                        break;
                                      }
                                      return (
                                        (t.na = a),
                                        T(d, 8),
                                        x(d, mh(e, t, a), 10)
                                      );
                                    case 10:
                                      (l = d.h),
                                        (h = e.g.U).K && Ot(h.K, l, 0, i),
                                        A(d, 0);
                                      break;
                                    case 8:
                                      throw ((c = k(d)), (t.na = null), c);
                                  }
                                });
                              })(t, n.Mc, r)),
                          null);
                    })(t, n)),
                    null != a && (bh(t, n, a), (n.Qc = !1)),
                    A(l, 10);
                  break;
                case 9:
                  return (o = k(l)), x(l, Sh(t, n, o), 11);
                case 11:
                  return l.return();
                case 10:
                  if (
                    ((s = Array.from(t.i.values())),
                    !t.J ||
                      !s.every(function (e) {
                        return e.endOfStream;
                      }))
                  ) {
                    l.u(0);
                    break;
                  }
                  return x(l, t.g.U.endOfStream(), 13);
                case 13:
                  Rl(t.m),
                    0 != (u = t.g.U.getDuration()) &&
                      u < t.j.presentationTimeline.getDuration() &&
                      t.j.presentationTimeline.nb(u),
                    S(l);
              }
            });
          }
          function hh(e, t, n, i, r, a, o, s) {
            var u, l, c, d;
            return L(function (h) {
              if (1 == h.g)
                return (
                  (u = Nt),
                  (l = new Map()),
                  e.l.audio && l.set(u.P, e.l.audio),
                  e.l.video && l.set(u.ja, e.l.video),
                  T(h, 2),
                  (t.bc = i),
                  (t.ac = r),
                  o && (t.zd = o),
                  s && (t.Bd = s),
                  (t.Cd = n),
                  (c = e.j.sequenceMode || "HLS" == e.j.type),
                  x(
                    h,
                    cd(
                      e.g.U,
                      t.type,
                      n,
                      i,
                      r,
                      c,
                      a.mimeType || t.stream.mimeType,
                      a.codecs || t.stream.codecs,
                      l
                    ),
                    4
                  )
                );
              if (2 != h.g) return A(h, 0);
              throw (
                ((d = k(h)),
                (t.bc = null),
                (t.ac = null),
                (t.zd = null),
                (t.Bd = null),
                (t.Cd = null),
                d)
              );
            });
          }
          function fh(e, t, n, i, r, a, o, s) {
            var u, l, c, d, h, f;
            return (
              (o = void 0 !== o && o),
              (s = void 0 !== s && s),
              L(function (p) {
                switch (p.g) {
                  case 1:
                    return (
                      (u = i.closedCaptions && 0 < i.closedCaptions.size),
                      e.h.shouldFixTimestampOffset &&
                        ((c =
                          "video/mp4" == i.mimeType ||
                          "audio/mp4" == i.mimeType),
                        (d = null),
                        r.ha && (d = r.ha.timescale),
                        (h =
                          c && d && "video" === i.type && "DASH" == e.j.type) &&
                          (l = new Na()),
                        h &&
                          l
                            .box("moof", _a)
                            .box("traf", _a)
                            .N("tfdt", function (n) {
                              var i, a, o, s, u;
                              return L(function (l) {
                                return (
                                  (i = Ka(n.reader, n.version)),
                                  (a = i.baseMediaDecodeTime)
                                    ? ((o = -a / d),
                                      (Number(t.Cd) || 0) < o
                                        ? ((s = t.bc),
                                          (u = t.ac),
                                          x(l, hh(e, t, o, s, u, r), 0))
                                        : l.u(0))
                                    : l.return()
                                );
                              });
                            }),
                        h && l.parse(a, !1, o)),
                      x(p, ph(e, t, n), 2)
                    );
                  case 2:
                    return (
                      Rl(e.m),
                      (f = t.fc),
                      (t.fc = !1),
                      x(p, e.g.Hf(t.type, a), 3)
                    );
                  case 3:
                    return x(p, ud(e.g.U, t.type, a, r, i, u, f, s, o), 4);
                  case 4:
                    Rl(e.m), S(p);
                }
              })
            );
          }
          function ph(e, t, n) {
            var i, r, a, o, s, u, l, c;
            return L(function (d) {
              return 1 == d.g
                ? ((i = t.stream.segmentIndex) instanceof Ls &&
                    i.Ba(e.j.presentationTimeline.xb()),
                  (r = Math.max(
                    e.h.bufferBehind * e.C,
                    e.j.presentationTimeline.h
                  )),
                  null == (a = ad(e.g.U, t.type))
                    ? (e.D == t && (e.D = null), d.return())
                    : ((o = n - a),
                      (s = e.h.evictionGoal),
                      (u = e.j.presentationTimeline.pb()),
                      (l = e.j.presentationTimeline.bb()),
                      (c = o - r),
                      l - u > s && (c = Math.max(o - r, u - s - a)),
                      c <= s
                        ? d.return()
                        : x(d, e.g.U.remove(t.type, a, a + c), 2)))
                : 4 != d.g
                ? (Rl(e.m), e.D ? x(d, ph(e, e.D, n), 4) : d.u(0))
                : (Rl(e.m), void S(d));
            });
          }
          function gh(e) {
            return (
              e &&
              e.type == Rt &&
              ("application/cea-608" == e.stream.mimeType ||
                "application/cea-708" == e.stream.mimeType)
            );
          }
          function mh(t, n, i, r) {
            var a, o, s, u, l;
            return L(function (c) {
              switch (c.g) {
                case 1:
                  if ((a = i.Xb())) return c.return(a);
                  if (((o = null), n.V)) {
                    var d = n.V,
                      h = d.h;
                    i instanceof gs && (h = d.j),
                      h.has(i)
                        ? ((d = h.get(i)), r && (d.tf = r), (o = d.ad))
                        : (o = null);
                  }
                  return (
                    o ||
                      (o = vh(
                        i,
                        n.stream,
                        r || null,
                        t.h.retryParameters,
                        t.g.cc
                      )),
                    (s = 0),
                    n.ba && (s = n.ba.h),
                    (n.cb = o),
                    x(c, o.promise, 2)
                  );
                case 2:
                  if (((u = c.h), (n.cb = null), (l = u.data), !i.aesKey)) {
                    c.u(3);
                    break;
                  }
                  return x(
                    c,
                    (function (t, n, i) {
                      var r, a, o, s, u;
                      return L(function (l) {
                        if (1 == l.g)
                          return (r = n).cryptoKey
                            ? l.u(2)
                            : x(l, r.fetchKey(), 3);
                        if (!(a = r.iv))
                          for (
                            a = ke(new ArrayBuffer(16)),
                              o = r.firstMediaSequenceNumber + i,
                              s = a.byteLength - 1;
                            0 <= s;
                            s--
                          )
                            (a[s] = 255 & o), (o >>= 8);
                        return (
                          (u =
                            "CBC" == n.blockCipherMode
                              ? { name: "AES-CBC", iv: a }
                              : { name: "AES-CTR", counter: a, length: 64 }),
                          l.return(e.crypto.subtle.decrypt(u, r.cryptoKey, t))
                        );
                      });
                    })(l, i.aesKey, s),
                    4
                  );
                case 4:
                  l = c.h;
                case 3:
                  return c.return(l);
              }
            });
          }
          function vh(e, t, n, i, r, a) {
            a = void 0 !== a && a;
            var o = e instanceof vs ? e : void 0,
              s = o ? 1 : 0;
            return (
              ((e = ru(e.T(), e.startByte, e.endByte, i, n)).contentType =
                t.type),
              r.request(os, e, { type: s, stream: t, segment: o, isPreload: a })
            );
          }
          function yh(e, t, n, i) {
            var r, a;
            return L(function (o) {
              return 1 == o.g
                ? ((t.Ob = !1),
                  (t.de = !1),
                  (t.nd = 0),
                  (t.Qb = !0),
                  (t.na = null),
                  (t.ba = null),
                  t.V && !e.o.has(t.stream) && $d(t.V),
                  i
                    ? ((r = e.g.pc()),
                      (a = e.g.U.getDuration()),
                      x(o, e.g.U.remove(t.type, r + i, a), 3))
                    : x(o, ld(e.g.U, t.type), 4))
                : 3 != o.g
                ? (Rl(e.m), n ? x(o, e.g.U.flush(t.type), 3) : o.u(3))
                : (Rl(e.m),
                  (t.Qb = !1),
                  (t.endOfStream = !1),
                  t.sa || t.Va || bh(e, t, 0),
                  void S(o));
            });
          }
          function bh(e, t, n) {
            var i = t.type;
            (i != Rt || e.i.has(i)) &&
              (t.Va = new je(function () {
                var n;
                return L(function (i) {
                  return 1 == i.g
                    ? (T(i, 2), x(i, dh(e, t), 4))
                    : 2 != i.g
                    ? A(i, 0)
                    : ((n = k(i)), e.g && e.g.onError(n), void S(i));
                });
              }).ea(n));
          }
          function wh(e) {
            null != e.Va && (e.Va.stop(), (e.Va = null));
          }
          function xh(e) {
            return L(function (t) {
              return e.cb ? x(t, e.cb.abort(), 0) : t.u(0);
            });
          }
          function Sh(e, t, n) {
            var i;
            return L(function (r) {
              if (1 == r.g)
                return 3024 == n.code
                  ? ((t.sa = !1), wh(t), bh(e, t, 0), r.return())
                  : x(r, Ho(e.W), 2);
              if ((Rl(e.m), 1 === n.category && 1003 != n.code)) {
                if (t.Jb) return rh(e, !1), r.return();
                (i =
                  0 === e.h.maxDisabledTime && 1011 == n.code
                    ? 1
                    : e.h.maxDisabledTime),
                  (n.handled = e.g.disableStream(t.stream, i)),
                  n.handled && (n.severity = 1);
              }
              (n.handled && 1011 == n.code) || e.g.onError(n),
                n.handled || e.h.failureCallback(n),
                S(r);
            });
          }
          function Th(e, t, n) {
            var i, r, a, o, s, u;
            return (
              (t = void 0 !== t && t),
              (n = void 0 === n || n),
              L(function (l) {
                if (1 == l.g) {
                  if (
                    ((i = Date.now() / 1e3),
                    (r = e.h.minTimeBetweenRecoveries),
                    !t)
                  ) {
                    if (!e.h.allowMediaSourceRecoveries || i - e.L < r)
                      return l.return(!1);
                    e.L = i;
                  }
                  return (
                    (a = Nt),
                    (o = e.i.get(a.P)) &&
                      ((o.ib = null),
                      (o.bc = null),
                      (o.ac = null),
                      n && uh(e, o),
                      xh(o).catch(function () {}),
                      o.ba && o.ba.gf()),
                    (s = e.i.get(a.ja)) &&
                      ((s.ib = null),
                      (s.bc = null),
                      (s.ac = null),
                      n && uh(e, s),
                      xh(s).catch(function () {}),
                      s.ba && s.ba.gf()),
                    (u = new Map()),
                    e.l.audio && u.set(a.P, e.l.audio),
                    e.l.video && u.set(a.ja, e.l.video),
                    x(l, wd(e.g.U, u), 2)
                  );
                }
                return (
                  !s || s.Qb || s.sa || s.Va || bh(e, s, 0),
                  !o || o.Qb || o.sa || o.Va || bh(e, o, 0),
                  l.return(!0)
                );
              })
            );
          }
          function Ah(e) {
            if ("keep" !== e.h.crossBoundaryStrategy) {
              e.G.stop();
              var t = e.g.pc(),
                n = e.i.get("video") || e.i.get("audio");
              n &&
                (n = n.ib) &&
                null !== n.g &&
                (0 > (t = n.g - t) || 1 < t || ((e.F = n.g + 0.01), e.G.ea(t)));
            }
          }
          function kh() {
            (this.g = null), (this.h = []);
          }
          function Ih(e, t) {
            var n = 0;
            e.g && e.g.state == t && (n += e.g.duration);
            for (var i = (e = c(e.h)).next(); !i.done; i = e.next())
              n += (i = i.value).state == t ? i.duration : 0;
            return n;
          }
          function Ch() {
            (this.i = this.h = null), (this.g = []);
          }
          function Mh(e, t, n) {
            e.i != t &&
              ((e.i = t),
              e.g.push({
                timestamp: Date.now() / 1e3,
                id: t.id,
                type: "text",
                fromAdaptation: n,
                bandwidth: null,
              }));
          }
          function Eh() {
            (this.Pb =
              this.cg =
              this.s =
              this.A =
              this.J =
              this.B =
              this.o =
              this.j =
              this.G =
              this.C =
              this.i =
              this.W =
              this.X =
              this.L =
              this.O =
              this.S =
              this.l =
              this.m =
                NaN),
              (this.K = 0),
              (this.D = this.F = NaN),
              (this.g = new kh()),
              (this.h = new Ch());
          }
          function Dh(e, t, n, i) {
            Jo.call(this),
              (this.S = e),
              (this.ca = t),
              (this.Ma = i.networkingEngine),
              (this.B = n),
              (this.o = null),
              (this.za = 0),
              (this.$a = i.od),
              (this.D = i.Th),
              (this.ab = i.Uh),
              (this.g = i.config),
              (this.l = this.F = this.h = null),
              (this.pa = !1),
              (this.G = i.gi),
              (this.xa = !1),
              (this.i = null),
              (this.la = !1),
              (this.j = this.C = null),
              (this.fa = !1),
              (this.O = new Map()),
              (this.Aa = !1),
              (this.Oa = i.fi),
              (this.da = new Eh()),
              (this.oa = new Vo()),
              (this.m = new Vo()),
              (this.W = null),
              (this.s = !1),
              (this.ga = i.Rg),
              (this.Y = this.K = null),
              (this.Ya = i.Qg),
              (this.X = !1),
              (this.L = []),
              (this.J = []),
              (this.A = !0);
          }
          function Ph(e, t, n) {
            (e = t ? e.J : e.L) ? e.push(n) : n();
          }
          function Lh(e, t) {
            if (((e.W = t), (e.X = !0), e.L))
              for (var n = (t = c(e.L)).next(); !n.done; n = t.next())
                (n = n.value)();
            e.L = null;
          }
          function Rh(e) {
            if (e.s) throw new Ee(2, 7, 7003);
          }
          function Nh(e, t) {
            e.dispatchEvent(new Yo("onstatechange", new Map().set("state", t)));
          }
          function _h(e, t) {
            var n, i, r, a;
            return L(function (o) {
              switch (o.g) {
                case 1:
                  if (!e.h || e.i) return o.return();
                  if (
                    (Nh(e, "drm-engine"),
                    (e.za = Date.now() / 1e3),
                    (e.i = e.$a()),
                    (e.D.h = e.i),
                    e.i.configure(e.g.drm, function () {
                      return e.A;
                    }),
                    !Gc(e.D, e.h))
                  ) {
                    o.u(2);
                    break;
                  }
                  return (
                    (n = new Yo("trackschanged", void 0)),
                    x(o, Promise.resolve(), 3)
                  );
                case 3:
                  Rh(e), e.dispatchEvent(n);
                case 2:
                  return (
                    (i = kr(e.h.variants)),
                    (r = !0),
                    e.h &&
                      e.h.presentationTimeline &&
                      "HLS" != e.h.type &&
                      (r = e.h.presentationTimeline.R()),
                    x(o, jl(e.i, i, e.h.offlineSessionIds, r), 4)
                  );
                case 4:
                  if ((Rh(e), !t)) {
                    o.u(5);
                    break;
                  }
                  return x(o, e.i.Cb(t), 6);
                case 6:
                  Rh(e);
                case 5:
                  return x(o, zc(e.D, e.h), 7);
                case 7:
                  if (!o.h) {
                    o.u(0);
                    break;
                  }
                  return (
                    (a = new Yo("trackschanged", void 0)),
                    x(o, Promise.resolve(), 9)
                  );
                case 9:
                  e.dispatchEvent(a), S(o);
              }
            });
          }
          function Uh(e, t, n) {
            var i, r, a, o, s;
            return L(function (u) {
              return 1 == u.g
                ? ((i = e.g.streaming.segmentPrefetchLimit || 2),
                  (r = new Kd(
                    i,
                    t,
                    function (t, n, i) {
                      return vh(
                        t,
                        n,
                        i || null,
                        e.g.streaming.retryParameters,
                        e.Ma,
                        e.A
                      );
                    },
                    !1
                  )),
                  e.O.set(t.id, r),
                  t.segmentIndex ? u.u(2) : x(u, t.createSegmentIndex(), 2))
                : ((a = e.B || 0),
                  (o = t.segmentIndex.ob(a)),
                  (s = null),
                  o && ((s = o.current()) || (s = o.next().value)),
                  s || (s = t.segmentIndex.g[0] || null),
                  s
                    ? n
                      ? s.ha
                        ? x(u, Yd(r, s.ha), 0)
                        : u.u(0)
                      : x(u, Xd(r, s.startTime), 0)
                    : u.u(0));
            });
          }
          function jh(e, t) {
            Jo.call(this);
            var n = this;
            (this.i = e),
              (this.l = t),
              (this.g = new Map()),
              (this.m = [
                {
                  jc: null,
                  ic: Fh,
                  $b: function (e, t) {
                    return Oh(n, "enter", e, t);
                  },
                },
                {
                  jc: Bh,
                  ic: Fh,
                  $b: function (e, t) {
                    return Oh(n, "enter", e, t);
                  },
                },
                {
                  jc: Hh,
                  ic: Fh,
                  $b: function (e, t) {
                    return Oh(n, "enter", e, t);
                  },
                },
                {
                  jc: Fh,
                  ic: Bh,
                  $b: function (e, t) {
                    return Oh(n, "exit", e, t);
                  },
                },
                {
                  jc: Fh,
                  ic: Hh,
                  $b: function (e, t) {
                    return Oh(n, "exit", e, t);
                  },
                },
                {
                  jc: Bh,
                  ic: Hh,
                  $b: function (e, t) {
                    t
                      ? Oh(n, "skip", e, t)
                      : (Oh(n, "enter", e, t), Oh(n, "exit", e, t));
                  },
                },
                {
                  jc: Hh,
                  ic: Bh,
                  $b: function (e, t) {
                    return Oh(n, "skip", e, t);
                  },
                },
              ]),
              (this.h = new Z()),
              this.h.H(this.i, "regionremove", function (e) {
                n.g.delete(e.region);
              });
          }
          function Oh(e, t, n, i) {
            (t = new Yo(
              t,
              new Map([
                ["region", n],
                ["seeking", i],
              ])
            )),
              e.dispatchEvent(t);
          }
          (Md.prototype.release = function () {
            this.h && (this.h.release(), (this.h = null)),
              null != this.i && (this.i.release(), (this.i = null)),
              (this.m = function () {}),
              (this.g = null);
          }),
            (Rd.prototype.release = function () {
              this.h && (this.h.stop(), (this.h = null)), (this.g = null);
            }),
            ((i = _d.prototype).ready = function () {
              var e = this;
              Id(
                this.h,
                HTMLMediaElement.HAVE_CURRENT_DATA,
                this.i,
                function () {
                  !(function () {
                    if (null == e.g || (0 == e.g && 1 / 0 != e.h.duration))
                      e.j = !0;
                    else {
                      var t = e.h.currentTime,
                        n = e.g;
                      0 > e.g && (n = Math.max(0, t + e.g)),
                        t != n
                          ? (e.i.Ea(e.h, "seeking", function () {
                              e.j = !0;
                            }),
                            (e.h.currentTime = n))
                          : (e.j = !0);
                    }
                  })();
                }
              );
            }),
            (i.release = function () {
              this.i && (this.i.release(), (this.i = null)), (this.h = null);
            }),
            (i.le = function (e) {
              this.g = this.j ? this.g : e;
            }),
            (i.kd = function () {
              return (this.j ? this.h.currentTime : this.g) || 0;
            }),
            (i.Df = function () {
              return 0;
            }),
            (i.Cf = function () {
              return 0;
            }),
            (i.hg = function () {}),
            ((i = Ud.prototype).ready = function () {
              this.m.ta(0.25);
            }),
            (i.release = function () {
              this.h && (this.h.release(), (this.h = null)),
                this.j && (this.j.release(), (this.j = null)),
                this.m && (this.m.stop(), (this.m = null)),
                (this.i = this.h = this.g = this.l = null),
                (this.s = function () {});
            }),
            (i.le = function (e) {
              Dd(this.h, e);
            }),
            (i.kd = function () {
              var e = Ed(this.h);
              return 0 < this.i.readyState && !this.i.paused ? Bd(this, e) : e;
            }),
            (i.Df = function () {
              return this.j.F;
            }),
            (i.Cf = function () {
              return this.j.C;
            }),
            (i.hg = function () {
              this.j.Jd();
            }),
            (Fd.prototype.release = function () {
              this.h && (this.h.release(), (this.h = null)), this.i.stop();
              for (var e = c(this.g), t = e.next(); !t.done; t = e.next())
                t.value.release();
              this.g.clear();
            }),
            v(Vd, Jo),
            (Vd.prototype.release = function () {
              this.g.clear(), Jo.prototype.release.call(this);
            }),
            (Vd.prototype.j = function (e) {
              for (
                var t = c(this.g.values()), n = t.next();
                !n.done;
                n = t.next()
              ) {
                var i = (n = n.value).we;
                e: {
                  for (var r = n.ed, a = r.length - 1; 0 <= a; a--) {
                    var o = r[a];
                    if (o.position <= e) {
                      r = o.We;
                      break e;
                    }
                  }
                  r = null;
                }
                (a =
                  r &&
                  !(
                    i === r ||
                    (i &&
                      r &&
                      i.bandwidth == r.bandwidth &&
                      i.audioSamplingRate == r.audioSamplingRate &&
                      i.codecs == r.codecs &&
                      i.contentType == r.contentType &&
                      i.frameRate == r.frameRate &&
                      i.height == r.height &&
                      i.mimeType == r.mimeType &&
                      i.channelsCount == r.channelsCount &&
                      i.pixelAspectRatio == r.pixelAspectRatio &&
                      i.width == r.width)
                  )),
                  (o = r && i && r.label && i.label && i.label !== r.label);
                var s =
                  r &&
                  i &&
                  r.language &&
                  i.language &&
                  i.language !== r.language;
                (i = r && i && r.roles && i.roles && !an(i.roles, r.roles)),
                  (o || s || i) &&
                    zd(this, e, r.contentType) &&
                    ((n.we = r),
                    (i = new Yo(
                      "audiotrackchange",
                      new Map([
                        ["quality", r],
                        ["position", e],
                      ])
                    )),
                    this.dispatchEvent(i)),
                  a &&
                    zd(this, e, r.contentType) &&
                    ((n.we = r),
                    JSON.stringify(r),
                    (n = new Yo(
                      "qualitychange",
                      new Map([
                        ["quality", r],
                        ["position", e],
                      ])
                    )),
                    this.dispatchEvent(n));
              }
            }),
            v(Gd, Jo),
            (Gd.prototype.release = function () {
              this.h.clear(),
                this.g && (this.g.stop(), (this.g = null)),
                Jo.prototype.release.call(this);
            }),
            (Kd.prototype.Ba = function (e, t) {
              t = void 0 !== t && t;
              for (
                var n = c(this.h.keys()), i = n.next();
                !i.done;
                i = n.next()
              )
                e > (i = i.value).endTime && eh(this, i);
              t && Zd(this);
            }),
            (Kd.prototype.Fc = function (e) {
              (this.o = e), this.g && this.g.Fc(e);
            }),
            (th.prototype.abort = function () {
              this.ad && this.ad.abort();
            }),
            ((i = ih.prototype).destroy = function () {
              return this.m.destroy();
            }),
            (i.configure = function (e) {
              if (
                ((this.h = e),
                (this.W = new Fo(
                  {
                    maxAttempts: Math.max(e.retryParameters.maxAttempts, 2),
                    baseDelay: e.retryParameters.baseDelay,
                    backoffFactor: e.retryParameters.backoffFactor,
                    fuzzFactor: e.retryParameters.fuzzFactor,
                    timeout: 0,
                    stallTimeout: 0,
                    connectionTimeout: 0,
                  },
                  !0
                )),
                e.disableAudioPrefetch)
              ) {
                var t = this.i.get("audio");
                t && t.V && ($d(t.V), (t.V = null));
                for (
                  var n = (t = c(this.o.keys())).next();
                  !n.done;
                  n = t.next()
                )
                  (n = n.value), $d(this.o.get(n)), this.o.delete(n);
              }
              for (
                e.disableTextPrefetch &&
                  (t = this.i.get(Rt)) &&
                  t.V &&
                  ($d(t.V), (t.V = null)),
                  e.disableVideoPrefetch &&
                    (t = this.i.get("video")) &&
                    t.V &&
                    ($d(t.V), (t.V = null)),
                  n = (t = c(this.i.keys())).next();
                !n.done;
                n = t.next()
              )
                (n = this.i.get(n.value)).V
                  ? (Qd(n.V, e.segmentPrefetchLimit),
                    0 < e.segmentPrefetchLimit || ($d(n.V), (n.V = null)))
                  : 0 < e.segmentPrefetchLimit && (n.V = ch(this, n.stream));
              e.disableAudioPrefetch ||
                (function (e) {
                  for (
                    var t = e.h.segmentPrefetchLimit,
                      n = e.h.prefetchAudioLanguages,
                      i = c(e.j.variants),
                      r = i.next(),
                      a = {};
                    !r.done;
                    a = { fb: void 0 }, r = i.next()
                  )
                    if (((a.fb = r.value), a.fb.audio))
                      if (e.o.has(a.fb.audio)) {
                        if (
                          (Qd((r = e.o.get(a.fb.audio)), t),
                          !(
                            0 < t &&
                            n.some(
                              (function (e) {
                                return function (t) {
                                  return Qi(e.fb.audio.language, t);
                                };
                              })(a)
                            )
                          ))
                        ) {
                          var o = e.i.get(a.fb.audio.type);
                          r !== (o && o.V) && $d(r), e.o.delete(a.fb.audio);
                        }
                      } else
                        0 >= t ||
                          !n.some(
                            (function (e) {
                              return function (t) {
                                return Qi(e.fb.audio.language, t);
                              };
                            })(a)
                          ) ||
                          !(r = ch(e, a.fb.audio)) ||
                          (a.fb.audio.segmentIndex ||
                            a.fb.audio.createSegmentIndex(),
                          e.o.set(a.fb.audio, r));
                })(this);
            }),
            (i.start = function (e) {
              var t = this;
              return L(function (n) {
                if (1 == n.g)
                  return x(
                    n,
                    (function (e, t) {
                      var n, i, r, a, o, s, u, l, d;
                      return L(function (h) {
                        if (1 == h.g) {
                          if (((n = Nt), !e.l)) throw new Ee(2, 5, 5006);
                          return (
                            (i = new Map()),
                            (r = new Set()),
                            e.l.audio &&
                              (i.set(n.P, e.l.audio), r.add(e.l.audio)),
                            e.l.video &&
                              (i.set(n.ja, e.l.video), r.add(e.l.video)),
                            e.s && (i.set(n.ua, e.s), r.add(e.s)),
                            x(
                              h,
                              e.g.U.init(
                                i,
                                e.j.sequenceMode,
                                e.j.type,
                                e.j.ignoreManifestTimestampsInSegmentsMode
                              ),
                              2
                            )
                          );
                        }
                        for (
                          Rl(e.m),
                            e.updateDuration(),
                            a = c(i.keys()),
                            o = a.next();
                          !o.done;
                          o = a.next()
                        )
                          (s = o.value),
                            (u = i.get(s)),
                            e.i.has(s) ||
                              ((l = lh(e, u)),
                              t.has(u.id) &&
                                (Wd((d = t.get(u.id)), function (t, n, i) {
                                  return vh(
                                    t,
                                    n,
                                    i || null,
                                    e.h.retryParameters,
                                    e.g.cc
                                  );
                                }),
                                (l.V = d)),
                              e.i.set(s, l),
                              bh(e, l, 0));
                        S(h);
                      });
                    })(t, e || new Map()),
                    2
                  );
                Rl(t.m), (t.J = !0), S(n);
              });
            }),
            (i.fc = function () {
              if (this.g) {
                for (
                  var e = this.g.pc(), t = c(this.i.keys()), n = t.next();
                  !n.done;
                  n = t.next()
                ) {
                  var i = n.value;
                  n = this.i.get(i);
                  var r = this.g.U;
                  if (
                    (i == Rt
                      ? (r =
                          null != (r = r.h).g &&
                          null != r.h &&
                          e >= r.g &&
                          e < r.h)
                      : (r = Nc((r = sd(r, i)), e)),
                    !r)
                  ) {
                    if (
                      ((this.L = 0), n.V && (n.V.g = null), "audio" === n.type)
                    )
                      for (
                        var a = (r = c(this.o.values())).next();
                        !a.done;
                        a = r.next()
                      )
                        a.value.g = null;
                    (n.ba = null),
                      (null != od(this.g.U, i) || n.sa) && uh(this, n),
                      n.cb && (n.cb.abort(), (n.cb = null)),
                      i === Rt && (i = this.g.U).S && i.S.h(),
                      (n.fc = !0);
                  }
                }
                "keep" !== this.h.crossBoundaryStrategy && Ah(this);
              }
            }),
            (i.updateDuration = function () {
              var e = zt(),
                t = this.j.presentationTimeline.getDuration();
              1 / 0 > t
                ? (e && (this.A && this.A.stop(), dd(this.g.U)), this.g.U.nb(t))
                : e
                ? (this.A && this.A.ta(0.5), this.g.U.nb(1 / 0))
                : this.g.U.nb(Math.pow(2, 32));
            }),
            v(Dh, Jo),
            ((i = Dh.prototype).getStartTime = function () {
              return this.B;
            }),
            (i.qd = function () {
              return this.S;
            }),
            (i.Oe = function () {
              return this.h;
            }),
            (i.getStats = function () {
              return this.da;
            }),
            (i.xh = function () {
              return this.K ? yr(this.K) : null;
            }),
            (i.wh = function () {
              return this.Y ? br(this.Y) : null;
            }),
            (i.start = function () {
              var t,
                n = this;
              L(function (i) {
                switch (i.g) {
                  case 1:
                    return x(i, Promise.resolve(), 2);
                  case 2:
                    return (
                      T(i, 3),
                      x(
                        i,
                        (function (e) {
                          var t, n, i, r, a, o, s, u, l;
                          return L(function (d) {
                            switch (d.g) {
                              case 1:
                                if (
                                  (Nh(e, "manifest-parser"),
                                  e.l ||
                                    ((e.F = (function (e, t) {
                                      if (t) {
                                        var n = Js.get(t.toLowerCase());
                                        if (n) return n;
                                      }
                                      throw new Ee(2, 4, 4e3, e, t);
                                    })(e.S, e.ca)),
                                    (e.l = e.F()),
                                    e.l.configure(e.g.manifest, function () {
                                      return e.A;
                                    })),
                                  (t = Date.now() / 1e3),
                                  Nh(e, "manifest"),
                                  e.h)
                                ) {
                                  d.u(2);
                                  break;
                                }
                                return x(d, e.l.start(e.S, e.ab), 3);
                              case 3:
                                if (((e.h = d.h), 1 != e.h.variants.length)) {
                                  d.u(2);
                                  break;
                                }
                                for (
                                  n = [],
                                    i = e.h.variants[0],
                                    r = c([i.video, i.audio]),
                                    a = r.next();
                                  !a.done;
                                  a = r.next()
                                )
                                  (o = a.value) &&
                                    !o.segmentIndex &&
                                    n.push(o.createSegmentIndex());
                                if (!(0 < n.length)) {
                                  d.u(2);
                                  break;
                                }
                                return x(d, Promise.all(n), 2);
                              case 2:
                                return (
                                  e.oa.resolve(),
                                  (s = new Yo("manifestparsed", void 0)),
                                  x(d, Promise.resolve(), 7)
                                );
                              case 7:
                                if (
                                  (e.dispatchEvent(s), 0 == e.h.variants.length)
                                )
                                  throw new Ee(2, 4, 4036);
                                !(function (e) {
                                  function t(e) {
                                    return (
                                      (e.video && e.audio) ||
                                      (e.video && e.video.codecs.includes(","))
                                    );
                                  }
                                  e.variants.some(t) &&
                                    (e.variants = e.variants.filter(t));
                                })(e.h),
                                  (u = Date.now() / 1e3),
                                  (l = u - t),
                                  (e.da.G = l),
                                  S(d);
                            }
                          });
                        })(n),
                        5
                      )
                    );
                  case 5:
                    if ((Rh(n), "webkit" === e.shakaMediaKeysPolyfill)) {
                      i.u(6);
                      break;
                    }
                    return x(i, _h(n), 7);
                  case 7:
                    Rh(n);
                  case 6:
                    return x(
                      i,
                      (function (e) {
                        var t, n, i, r, a, o, s;
                        return L(function (u) {
                          return (
                            e.o ||
                              ((e.o = e.g.adaptationSetCriteriaFactory()),
                              e.o.configure({
                                language: e.g.preferredAudioLanguage,
                                role: e.g.preferredVariantRole,
                                channelCount: e.g.preferredAudioChannelCount,
                                sc: e.g.preferredVideoHdrLevel,
                                spatialAudio: e.g.preferSpatialAudio,
                                videoLayout: e.g.preferredVideoLayout,
                                kc: e.g.preferredAudioLabel,
                                Gc: e.g.preferredVideoLabel,
                                codecSwitchingStrategy:
                                  e.g.mediaSource.codecSwitchingStrategy,
                                audioCodec: "",
                              })),
                            e.Ya &&
                              ((t = e.g.abrFactory),
                              (e.C = t),
                              (e.j = t()),
                              e.j.configure(e.g.abr)),
                            e.ga
                              ? ((n = e.h.presentationTimeline.R()),
                                (i = kr(e.h.variants)),
                                (r = e.o.create(i)),
                                e.j.configure(e.g.abr),
                                e.j.setVariants(Array.from(r.values())),
                                (a = e.j.chooseVariant())
                                  ? ((o = []),
                                    (e.K = a),
                                    a.video && o.push(Uh(e, a.video, n)),
                                    a.audio && o.push(Uh(e, a.audio, n)),
                                    (s =
                                      Ir(
                                        e.h.textStreams,
                                        e.g.preferredTextLanguage,
                                        e.g.preferredTextRole,
                                        e.g.preferForcedSubs
                                      )[0] || null) &&
                                      Dr(a.audio, s, e.g) &&
                                      (o.push(Uh(e, s, n)), (e.Y = s)),
                                    x(u, Promise.all(o), 0))
                                  : u.u(0))
                              : u.u(0)
                          );
                        });
                      })(n),
                      8
                    );
                  case 8:
                    if ((Rh(n), !n.ga || !n.i)) {
                      i.u(9);
                      break;
                    }
                    return x(
                      i,
                      (function (e) {
                        return L(function (t) {
                          return 1 == t.g
                            ? e.K
                              ? x(t, e.m, 3)
                              : t.u(0)
                            : x(
                                t,
                                Promise.all(
                                  e.W.map(function (e) {
                                    return e.promise;
                                  })
                                ),
                                0
                              );
                        });
                      })(n.i),
                      10
                    );
                  case 10:
                    Rh(n);
                  case 9:
                    n.m.resolve(), A(i, 0);
                    break;
                  case 3:
                    ((t = k(i)) instanceof Ee &&
                      (7001 == t.code || 7003 == t.code)) ||
                      n.m.reject(t),
                      S(i);
                }
              });
            }),
            (i.dispatchEvent = function (e) {
              return this.W
                ? this.W.dispatchEvent(e)
                : Jo.prototype.dispatchEvent.call(this, e);
            }),
            (i.onError = function (e) {
              2 === e.severity && (this.m.reject(e), this.destroy());
              var t = new Map().set("detail", e);
              (t = new Yo("error", t)),
                this.dispatchEvent(t),
                t.defaultPrevented && (e.handled = !0);
            }),
            (i.configure = function (e, t) {
              (e = Xu(e, t)), el(this.g, e);
            }),
            (i.getConfiguration = function () {
              return hn(this.g);
            }),
            (i.Gi = function () {
              return this.m;
            }),
            (i.destroy = function () {
              var e,
                t,
                n = this;
              return L(function (i) {
                switch (i.g) {
                  case 1:
                    if (((n.s = !0), !n.l || n.pa)) {
                      i.u(2);
                      break;
                    }
                    return x(i, n.l.stop(), 2);
                  case 2:
                    if (!n.j || n.fa) {
                      i.u(4);
                      break;
                    }
                    return x(i, n.j.stop(), 4);
                  case 4:
                    if ((n.G && !n.xa && n.G.release(), !n.i || n.la)) {
                      i.u(6);
                      break;
                    }
                    return x(i, n.i.destroy(), 6);
                  case 6:
                    if (0 < n.O.size && !n.Aa)
                      for (
                        e = c(n.O.values()), t = e.next();
                        !t.done;
                        t = e.next()
                      )
                        $d(t.value);
                    S(i);
                }
              });
            }),
            F("shaka.media.PreloadManager", Dh),
            (Dh.prototype.destroy = Dh.prototype.destroy),
            (Dh.prototype.waitForFinish = Dh.prototype.Gi),
            (Dh.prototype.getPrefetchedTextTrack = Dh.prototype.wh),
            (Dh.prototype.getPrefetchedVariantTrack = Dh.prototype.xh),
            v(jh, Jo),
            (jh.prototype.release = function () {
              (this.i = null),
                this.g.clear(),
                this.h.release(),
                (this.h = null),
                Jo.prototype.release.call(this);
            }),
            (jh.prototype.j = function (e, t) {
              if (!this.l || 0 != e) {
                this.l = !1;
                for (
                  var n = c(this.i.h.values()), i = n.next();
                  !i.done;
                  i = n.next()
                ) {
                  i = i.value;
                  var r = this.g.get(i),
                    a = e < i.startTime ? Bh : e > i.endTime ? Hh : Fh;
                  this.g.set(i, a);
                  for (var o = c(this.m), s = o.next(); !s.done; s = o.next())
                    (s = s.value).jc == r && s.ic == a && s.$b(i, t);
                }
              }
            });
          var Bh = 1,
            Fh = 2,
            Hh = 3;
          function Vh(e) {
            return Lo(e);
          }
          var zh = new Map()
            .set("com.microsoft.playready", Vh)
            .set("com.microsoft.playready.recommendation", Vh)
            .set("com.microsoft.playready.software", Vh)
            .set("com.microsoft.playready.hardware", Vh);
          function Gh() {
            var e = this;
            (this.h = this.g = null),
              (this.l = []),
              (this.j = null),
              (this.s = 1),
              (this.i = null),
              (this.C = new z(5)),
              (this.o = new Oe(function () {
                !(function (e) {
                  var t;
                  L(function (n) {
                    switch (n.g) {
                      case 1:
                        return T(n, 2), x(n, qh(e), 4);
                      case 4:
                        A(n, 3);
                        break;
                      case 2:
                        (t = k(n)), e.h && ((t.severity = 1), e.h.onError(t));
                      case 3:
                        if (!e.h) return n.return();
                        S(n);
                    }
                  });
                })(e);
              })),
              (this.B = new $o()),
              (this.m = new Map()),
              (this.A = function () {
                return !1;
              });
          }
          function qh(e) {
            var t, n, i, r, a, o, s;
            return L(function (u) {
              if (1 == u.g)
                return (
                  (t = ts(e.l, e.g.retryParameters)),
                  (n = e.h.networkingEngine),
                  (i = Date.now()),
                  (r = n.request(0, t, { type: 5, isPreload: e.A() })),
                  Zo(e.B, r),
                  x(u, r.promise, 2)
                );
              if (((a = u.h), !e.h)) return u.return();
              a.uri && !e.l.includes(a.uri) && e.l.unshift(a.uri);
              var l = a.uri,
                h = a.data,
                f = e.g.mss.manifestPreprocessor;
              if (f != tl) {
                if (
                  (ne(
                    "manifest.mss.manifestPreprocessor configuration",
                    "Please Use manifest.mss.manifestPreprocessorTXml instead."
                  ),
                  !(h = il(h, "SmoothStreamingMedia")))
                )
                  throw new Ee(2, 4, 4046, l);
                f(h), (h = mt(h.outerHTML));
              }
              var p = gn(h, "SmoothStreamingMedia");
              if (!p) throw new Ee(2, 4, 4046, l);
              if (
                ((l = e.g.mss.manifestPreprocessorTXml) != nl && l(p),
                e.i || (e.i = new $s(null, 0)),
                (l = In(p, "IsLive", jn, !1)))
              )
                throw new Ee(2, 4, 4047);
              e.i.Sd(!l),
                (f = In(p, "TimeScale", _n, 1e7)),
                (h = In(p, "DVRWindowLength", _n)),
                l && (0 === h || isNaN(h)) && (h = 1 / 0);
              var g,
                m = In(p, "CanSeek", jn, !1);
              for (
                0 === h && m && (h = 1 / 0),
                  m = null,
                  h && 0 < h && (m = h / f),
                  l &&
                    !isNaN(e.g.availabilityWindowOverride) &&
                    (m = e.g.availabilityWindowOverride),
                  null == m && (m = 1 / 0),
                  e.i.pf(m),
                  h = In(p, "Duration", _n, 1 / 0),
                  l || e.i.nb(h / f),
                  l = {
                    variants: [],
                    textStreams: [],
                    timescale: f,
                    duration: h / f,
                  },
                  m = wn(p, "Protection"),
                  f = e.g.mss.keySystemsBySystemId,
                  h = [],
                  g = (m = c(m)).next();
                !g.done;
                g = m.next()
              )
                h = h.concat(wn(g.value, "ProtectionHeader"));
              if (h.length) {
                for (m = [], g = 0; g < h.length; g++) {
                  var v = h[g],
                    y = v.attributes.SystemID.toLowerCase(),
                    b = f[y];
                  if (b) {
                    var w;
                    e: {
                      if ((w = Po(v)))
                        for (
                          var T = (w = c(Tn(w, "DATA"))).next();
                          !T.done;
                          T = w.next()
                        )
                          if ((T = An(T.value, "KID"))) {
                            (w = At(xn(T))),
                              (w = It(
                                (w = new Uint8Array(
                                  [
                                    w[3],
                                    w[2],
                                    w[1],
                                    w[0],
                                    w[5],
                                    w[4],
                                    w[7],
                                    w[6],
                                  ].concat(d(w.slice(8)))
                                ))
                              ));
                            break e;
                          }
                      w = null;
                    }
                    (y = Et(
                      b,
                      "cenc",
                      (y = [
                        {
                          initData: _o(
                            (T = At(xn(v))),
                            (y = kt(y.replace(/-/g, ""))),
                            new Set(),
                            0
                          ),
                          initDataType: "cenc",
                          keyId: w,
                        },
                      ])
                    )),
                      w && y.keyIds.add(w),
                      (b = zh.get(b)) && (y.licenseServerUri = b(v)),
                      m.push(y);
                  }
                }
                f = m;
              } else f = [];
              for (
                g = f,
                  m = [],
                  f = [],
                  h = [],
                  v = (p = c((p = wn(p, "StreamIndex")))).next();
                !v.done;
                v = p.next()
              ) {
                (b = wn((v = v.value), "QualityLevel")),
                  (y = l.timescale),
                  (w = l.duration),
                  (T = wn(v, "c"));
                for (var A = [], k = 0, I = 0; I < T.length; ++I) {
                  var C = T[I],
                    M = T[I + 1],
                    E = In(C, "t", _n),
                    D = In(C, "d", _n);
                  if (((C = In(C, "r", Rn)), !D)) break;
                  if (((E = null != E ? E : k), (C = C || 0) && C--, 0 > C))
                    if (M) {
                      if (null == (M = In(M, "t", _n))) break;
                      if (E >= M) break;
                      C = Math.ceil((M - E) / D) - 1;
                    } else {
                      if (1 / 0 == w) break;
                      if (E / y >= w) break;
                      C = Math.ceil((w * y - E) / D) - 1;
                    }
                  for (M = 0; M <= C; ++M)
                    (k = E + D),
                      A.push({ start: E / y, end: k / y, zf: E }),
                      (E = k);
                }
                for (y = A, w = (b = c(b)).next(); !w.done; w = b.next())
                  (w = Kh(e, v, w.value, y, g, l)) &&
                    ("audio" != w.type || e.g.disableAudio
                      ? "video" != w.type || e.g.disableVideo
                        ? w.type != Rt || e.g.disableText || h.push(w)
                        : f.push(w)
                      : m.push(w));
              }
              for (
                p = [], g = (m = c(0 < m.length ? m : [null])).next();
                !g.done;
                g = m.next()
              )
                for (
                  g = g.value, A = (v = c(0 < f.length ? f : [null])).next();
                  !A.done;
                  A = v.next()
                )
                  (y = (b = p).push),
                    (w = e),
                    (T = g),
                    (A = A.value),
                    (I = 0),
                    T && T.bandwidth && 0 < T.bandwidth && (I += T.bandwidth),
                    A && A.bandwidth && 0 < A.bandwidth && (I += A.bandwidth),
                    (w = {
                      id: w.s++,
                      language: T ? T.language : "und",
                      disabledUntilTime: 0,
                      primary: (!!T && T.primary) || (!!A && A.primary),
                      audio: T,
                      video: A,
                      bandwidth: I,
                      allowedByApplication: !0,
                      allowedByKeySystem: !0,
                      decodingInfos: [],
                    }),
                    y.call(b, w);
              (l.variants = p),
                (l.textStreams = h),
                e.j
                  ? ((e.j.variants = l.variants),
                    (e.j.textStreams = l.textStreams),
                    e.h.filter(e.j))
                  : ((e.j = {
                      presentationTimeline: e.i,
                      variants: l.variants,
                      textStreams: l.textStreams,
                      imageStreams: [],
                      offlineSessionIds: [],
                      sequenceMode: e.g.mss.sequenceMode,
                      ignoreManifestTimestampsInSegmentsMode: !1,
                      type: "MSS",
                      serviceDescription: null,
                      nextUrl: null,
                      periodCount: 1,
                      gapCount: 0,
                      isLowLatency: !1,
                      startTime: null,
                    }),
                    e.i.Ve()),
                Promise.resolve(),
                (o = Date.now()),
                (s = (o - i) / 1e3),
                e.C.sample(1, s),
                S(u);
            });
          }
          function Kh(e, t, n, i, r, a) {
            var o = t.attributes.Type;
            if ("audio" !== o && "video" !== o && "text" !== o)
              return X("Ignoring unrecognized type:", o), null;
            var s = t.attributes.Language,
              u = e.s++,
              l = In(n, "Bitrate", Nn),
              d = In(n, "MaxWidth", Nn),
              h = In(n, "MaxHeight", Nn),
              f = In(n, "Channels", Nn),
              p = In(n, "SamplingRate", Nn),
              g = a.duration;
            i.length && (g = i[i.length - 1].end - i[0].start);
            var m = e.i.getDuration();
            e.i.nb(Math.min(g, m));
            var v = {
              id: u,
              originalId: t.attributes.Name || String(u),
              groupId: null,
              createSegmentIndex: function () {
                return Promise.resolve();
              },
              closeSegmentIndex: function () {
                return Promise.resolve();
              },
              segmentIndex: null,
              mimeType: "",
              codecs: "",
              frameRate: void 0,
              pixelAspectRatio: void 0,
              bandwidth: l || 0,
              width: d || void 0,
              height: h || void 0,
              kind: "",
              encrypted: 0 < r.length,
              drmInfos: r,
              keyIds: new Set(),
              language: nr(s || "und"),
              originalLanguage: s,
              label: "",
              type: "",
              primary: !1,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: [],
              roles: [],
              forced: !1,
              channelsCount: f,
              audioSamplingRate: p,
              spatialAudio: !1,
              closedCaptions: null,
              hdr: void 0,
              colorGamut: void 0,
              videoLayout: void 0,
              tilesLayout: void 0,
              matchedStreams: [],
              mssPrivateData: {
                duration: g,
                timescale: a.timescale,
                codecPrivateData: null,
              },
              accessibilityPurpose: null,
              external: !1,
              fastSwitching: !1,
              fullMimeTypes: new Set(),
              isAudioMuxedInVideo: !1,
              baseOriginalId: null,
            };
            if (
              ((r = t.attributes.Subtype) &&
                ((r = Xh.get(r)) && v.roles.push(r),
                "main" === r && (v.primary = !0)),
              (null !== (r = n.attributes.FourCC) && "" !== r) ||
                (r = t.attributes.FourCC),
              !r)
            )
              if ("audio" === o) r = "AAC";
              else if ("video" === o)
                return (
                  X(
                    'FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'
                  ),
                  null
                );
            if (!Wh.includes(r.toUpperCase()))
              return X("Codec not supported:", r), null;
            switch (
              ((n = (function (e, t, n, i) {
                if ((e = e.attributes.CodecPrivateData)) return e;
                if ("audio" !== t) return null;
                (t = i.channelsCount || 2), (e = i.audioSamplingRate || 44100);
                var r = {
                  96e3: 0,
                  88200: 1,
                  64e3: 2,
                  48e3: 3,
                  44100: 4,
                  32e3: 5,
                  24e3: 6,
                  22050: 7,
                  16e3: 8,
                  12e3: 9,
                  11025: 10,
                  8e3: 11,
                  7350: 12,
                };
                return (
                  (i = r[e]),
                  "AACH" === n
                    ? ((n = new Uint8Array(4)),
                      (e = r[2 * e]),
                      (n[0] = 40 | (i >> 1)),
                      (n[1] = (i << 7) | (t << 3) | (e >> 1)),
                      (n[2] = (e << 7) | 8),
                      (n[3] = 0),
                      (t = new Uint16Array(2)),
                      (t[0] = (n[0] << 8) + n[1]),
                      (t[1] = (n[2] << 8) + n[3]),
                      t[0].toString(16) + t[1].toString(16))
                    : ((n = new Uint8Array(2)),
                      (n[0] = 16 | (i >> 1)),
                      (n[1] = (i << 7) | (t << 3)),
                      (t = new Uint16Array(1)),
                      (t[0] = (n[0] << 8) + n[1]),
                      t[0].toString(16))
                );
              })(n, o, r, v)),
              (v.mssPrivateData.codecPrivateData = n),
              o)
            ) {
              case "audio":
                if (!n)
                  return (
                    X("Quality unsupported without CodecPrivateData", o), null
                  );
                (v.type = "audio"),
                  (v.mimeType = "mss/audio/mp4"),
                  (v.codecs = (function (e, t) {
                    var n = 0;
                    return (
                      "AACH" === e && (n = 5),
                      t
                        ? 0 === n &&
                          (n = (248 & parseInt(t.substr(0, 2), 16)) >> 3)
                        : ((n = 2), "AACH" === e && (n = 5)),
                      "mp4a.40." + n
                    );
                  })(r, n));
                break;
              case "video":
                if (!n)
                  return (
                    X("Quality unsupported without CodecPrivateData", o), null
                  );
                (v.type = "video"),
                  (v.mimeType = "mss/video/mp4"),
                  (v.codecs = (function (e) {
                    var t = /00000001[0-9]7/.exec(e);
                    return t.length && e
                      ? "avc1." + e.substr(e.indexOf(t[0]) + 10, 6)
                      : "";
                  })(n));
                break;
              case "text":
                (v.type = Rt),
                  (v.mimeType = "application/mp4"),
                  ("TTML" === r || "DFXP" === r) && (v.codecs = "stpp");
            }
            return (
              v.fullMimeTypes.add(Mi(v.mimeType, v.codecs)),
              (v.createSegmentIndex = function () {
                if (v.segmentIndex) return Promise.resolve();
                if (e.m.has(v.id)) var n = e.m.get(v.id);
                else
                  (n = []),
                    "video" == v.type &&
                      (n = v.mssPrivateData.codecPrivateData
                        .split("00000001")
                        .slice(1)),
                    (n = ic(
                      new nc([
                        (n = {
                          id: v.id,
                          type: v.type,
                          codecs: v.codecs,
                          encrypted: v.encrypted,
                          timescale: v.mssPrivateData.timescale,
                          duration: v.mssPrivateData.duration,
                          Wa: n,
                          ka: new Uint8Array([]),
                          qa: new Uint8Array([]),
                          va: 0,
                          wa: 0,
                          data: null,
                          stream: v,
                        }),
                      ])
                    )),
                    e.m.set(v.id, n);
                return (
                  (n = (function (e, t, n, i, r) {
                    var a = i.attributes.Url.replace(
                      "{bitrate}",
                      String(n.bandwidth)
                    );
                    i = [];
                    for (
                      var o = (r = c(r)).next(), s = {};
                      !o.done;
                      s = { Ud: void 0 }, o = r.next()
                    )
                      (s.Ud = o.value),
                        i.push(
                          new vs(
                            s.Ud.start,
                            s.Ud.end,
                            (function (t) {
                              return function () {
                                return Mt(e.l, [
                                  a.replace("{start time}", String(t.Ud.zf)),
                                ]);
                              };
                            })(s),
                            0,
                            null,
                            t,
                            0,
                            0,
                            n.mssPrivateData.duration
                          )
                        );
                    return i;
                  })(
                    e,
                    new gs(
                      function () {
                        return [];
                      },
                      0,
                      null,
                      (function (e) {
                        var t = {
                          bandwidth: e.bandwidth || 0,
                          audioSamplingRate: null,
                          codecs: e.codecs,
                          contentType: e.type,
                          frameRate: null,
                          height: null,
                          mimeType: e.mimeType,
                          channelsCount: null,
                          pixelAspectRatio: null,
                          width: null,
                          label: null,
                          roles: e.roles,
                          language: null,
                        };
                        return (
                          "video" == e.type &&
                            ((t.frameRate = e.frameRate || null),
                            (t.height = e.height || null),
                            (t.pixelAspectRatio = e.pixelAspectRatio || null),
                            (t.width = e.width || null)),
                          "audio" == e.type &&
                            ((t.audioSamplingRate = e.audioSamplingRate),
                            (t.channelsCount = e.channelsCount),
                            (t.label = e.label || null),
                            (t.language = e.language)),
                          t
                        );
                      })(v),
                      v.mssPrivateData.timescale,
                      n,
                      null,
                      v.encrypted
                    ),
                    v,
                    t,
                    i
                  )),
                  (v.segmentIndex = new Es(n)),
                  Promise.resolve()
                );
              }),
              (v.closeSegmentIndex = function () {
                v.segmentIndex &&
                  (v.segmentIndex.release(), (v.segmentIndex = null));
              }),
              v
            );
          }
          ((i = Gh.prototype).configure = function (e, t) {
            (this.g = e), t && (this.A = t);
          }),
            (i.start = function (e, t) {
              var n = this;
              return L(function (i) {
                if (1 == i.g) return (n.l = [e]), (n.h = t), x(i, qh(n), 2);
                if (!n.h) throw new Ee(2, 7, 7001);
                return i.return(n.j);
              });
            }),
            (i.stop = function () {
              return (
                (this.g = this.h = null),
                (this.l = []),
                (this.j = null),
                null != this.o && (this.o.stop(), (this.o = null)),
                this.m.clear(),
                this.B.destroy()
              );
            }),
            (i.update = function () {
              var e,
                t = this;
              return L(function (n) {
                return 1 == n.g
                  ? (T(n, 2), x(n, qh(t), 4))
                  : 2 != n.g
                  ? A(n, 0)
                  : ((e = k(n)),
                    t.h && e ? (t.h.onError(e), void S(n)) : n.return());
              });
            }),
            (i.onExpirationUpdated = function () {}),
            (i.onInitialVariantChosen = function () {}),
            (i.banLocation = function () {}),
            (i.setMediaElement = function () {}),
            F("shaka.mss.MssParser", Gh);
          var Wh = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),
            Xh = new Map()
              .set("CAPT", "main")
              .set("SUBT", "alternate")
              .set("DESC", "main");
          function Yh(e, t, n, i, r, a, o) {
            if ((200 <= n && 299 >= n && 202 != n) || 304 == n)
              return {
                uri: r || i,
                originalUri: i,
                data: t,
                status: n,
                headers: e,
                fromCache: !!e["x-shaka-from-cache"],
                originalRequest: a,
              };
            a = null;
            try {
              a = gt(t);
            } catch (s) {}
            throw new Ee(
              401 == n || 403 == n ? 2 : 1,
              1,
              1001,
              i,
              n,
              a,
              e,
              o,
              r || i
            );
          }
          function Jh() {}
          function $h(e, t, n, i, r, a) {
            var o = new rf();
            Nl(t.headers).forEach(function (e, t) {
              o.append(t, e);
            });
            var s = new tf(),
              u = { If: !1, Gg: !1 };
            if (
              ((e = (function (e, t, n, i, r, a, o, s, u) {
                var l, c, d, h, f, p, g, m, v, y, b, w, I;
                return L(function (C) {
                  switch (C.g) {
                    case 1:
                      return (
                        (l = ef),
                        (c = nf),
                        (h = new ArrayBuffer(0)),
                        (p = f = 0),
                        (g = Date.now()),
                        T(C, 2),
                        x(C, l(e, i), 4)
                      );
                    case 4:
                      if (((d = C.h), o(Zh(d.headers)), "HEAD" == i.method)) {
                        C.u(5);
                        break;
                      }
                      return (
                        (v = (m = d.headers.get("Content-Length"))
                          ? parseInt(m, 10)
                          : 0),
                        d.body
                          ? ((y = d.clone().body.getReader()),
                            new c({
                              start: function (e) {
                                function t() {
                                  var n, i, r, o;
                                  return L(function (l) {
                                    switch (l.g) {
                                      case 1:
                                        return T(l, 2), x(l, y.read(), 4);
                                      case 4:
                                        (n = l.h), A(l, 3);
                                        break;
                                      case 2:
                                        return k(l), l.return();
                                      case 3:
                                        if (n.done) {
                                          l.u(5);
                                          break;
                                        }
                                        if (((f += n.value.byteLength), !s)) {
                                          l.u(5);
                                          break;
                                        }
                                        return x(l, s(n.value), 5);
                                      case 5:
                                        (i = Date.now()),
                                          (r = f - p),
                                          ((100 < i - g && r >= u) || n.done) &&
                                            ((o = n.done ? 0 : v - f),
                                            a(i - g, r, o),
                                            (p = f),
                                            (g = i)),
                                          n.done
                                            ? e.close()
                                            : (e.enqueue(n.value), t()),
                                          S(l);
                                    }
                                  });
                                }
                                t();
                              },
                            }),
                            x(C, d.arrayBuffer(), 8))
                          : x(C, d.arrayBuffer(), 9)
                      );
                    case 8:
                      (h = C.h), C.u(5);
                      break;
                    case 9:
                      (h = C.h), (b = Date.now()), a(b - g, h.byteLength, 0);
                    case 5:
                      A(C, 3);
                      break;
                    case 2:
                      if (((w = k(C)), r.If)) throw new Ee(1, 1, 7001, e, n);
                      if (r.Gg) throw new Ee(1, 1, 1003, e, n);
                      throw new Ee(1, 1, 1002, e, w, n);
                    case 3:
                      return (
                        (I = Zh(d.headers)),
                        C.return(Yh(I, h, d.status, e, d.url, t, n))
                      );
                  }
                });
              })(
                e,
                t,
                n,
                {
                  body: t.body || void 0,
                  headers: o,
                  method: t.method,
                  signal: s.signal,
                  credentials: t.allowCrossSiteCredentials ? "include" : void 0,
                },
                u,
                i,
                r,
                t.streamDataCallback,
                a.minBytesForProgressEvents || 0
              )),
              (e = new zo(e, function () {
                return (u.If = !0), s.abort(), Promise.resolve();
              })),
              (t = t.retryParameters.timeout))
            ) {
              var l = new Oe(function () {
                (u.Gg = !0), s.abort();
              });
              l.ea(t / 1e3),
                e.finally(function () {
                  l.stop();
                });
            }
            return e;
          }
          function Zh(e) {
            var t = {};
            return (
              e.forEach(function (e, n) {
                t[n.trim()] = e;
              }),
              t
            );
          }
          function Qh() {
            if (!e.ReadableStream) return !1;
            try {
              new ReadableStream({});
            } catch (ly) {
              return !1;
            }
            return (
              !!e.Response &&
              !!new Response("").body &&
              !(!e.fetch || "polyfill" in e.fetch || !e.AbortController)
            );
          }
          Ys("application/vnd.ms-sstr+xml", function () {
            return new Gh();
          }),
            F("shaka.net.HttpFetchPlugin", Jh),
            (Jh.isSupported = Qh),
            (Jh.parse = $h);
          var ef = e.fetch,
            tf = e.AbortController,
            nf = e.ReadableStream,
            rf = e.Headers;
          function af() {}
          function of(e, t, n, i, r, a) {
            var o = new uf(),
              s = Date.now(),
              u = 0;
            return new zo(
              new Promise(function (l, c) {
                o.open(t.method, e, !0),
                  (o.responseType = "arraybuffer"),
                  (o.timeout = t.retryParameters.timeout),
                  (o.withCredentials = t.allowCrossSiteCredentials),
                  (o.onabort = function () {
                    c(new Ee(1, 1, 7001, e, n));
                  });
                var d = !1;
                for (var h in ((o.onreadystatechange = function () {
                  if (2 == o.readyState && !d) {
                    var e = sf(o);
                    r(e), (d = !0);
                  }
                }),
                (o.onload = function (r) {
                  var a = sf(o),
                    d = o.response;
                  try {
                    i(Date.now() - s, r.loaded - u, 0);
                    var h = Yh(a, d, o.status, e, o.responseURL, t, n);
                    l(h);
                  } catch (f) {
                    c(f);
                  }
                }),
                (o.onerror = function (t) {
                  c(new Ee(1, 1, 1002, e, t, n));
                }),
                (o.ontimeout = function () {
                  c(new Ee(1, 1, 1003, e, n));
                }),
                (o.onprogress = function (e) {
                  var t = Date.now(),
                    n = a.minBytesForProgressEvents || 0,
                    r = e.loaded - u;
                  ((100 < t - s && r >= n) ||
                    (e.lengthComputable && e.loaded == e.total)) &&
                    (i(t - s, r, 4 == o.readyState ? 0 : e.total - e.loaded),
                    (u = e.loaded),
                    (s = t));
                }),
                t.headers))
                  o.setRequestHeader(h.toLowerCase(), t.headers[h]);
                o.send(t.body);
              }),
              function () {
                return o.abort(), Promise.resolve();
              }
            );
          }
          function sf(e) {
            var t = e.getAllResponseHeaders().trim().split("\r\n");
            e = {};
            for (var n = (t = c(t)).next(); !n.done; n = t.next())
              e[(n = n.value.split(": "))[0].toLowerCase()] = n
                .slice(1)
                .join(": ");
            return e;
          }
          Qh() &&
            (es("http", $h, 2, !0),
            es("https", $h, 2, !0),
            es("blob", $h, 2, !0)),
            F("shaka.net.HttpXHRPlugin", af),
            (af.parse = of);
          var uf = e.XMLHttpRequest;
          function lf(e, t, n) {
            var i, r, a, o, s, u, l;
            return L(function (c) {
              switch (c.g) {
                case 1:
                  var d = new se(e).jb.split("/").pop().split(".");
                  return (
                    (i = 1 == d.length ? "" : d.pop().toLowerCase()),
                    (r = cf.get(i))
                      ? c.return(r)
                      : ((a = 0),
                        (o = ts([e], n)),
                        T(c, 2),
                        (o.method = "HEAD"),
                        x(c, t.request(a, o).promise, 4))
                  );
                case 4:
                  (s = c.h), (r = s.headers["content-type"]), A(c, 3);
                  break;
                case 2:
                  if (!(u = k(c)) || (1002 != u.code && 1001 != u.code)) {
                    c.u(3);
                    break;
                  }
                  return (o.method = "GET"), x(c, t.request(a, o).promise, 6);
                case 6:
                  (l = c.h), (r = l.headers["content-type"]);
                case 3:
                  return c.return(r ? r.toLowerCase().split(";").shift() : "");
              }
            });
          }
          es("http", of, 1, !0), es("https", of, 1, !0), es("blob", of, 1, !0);
          var cf = new Map()
            .set("mp4", "video/mp4")
            .set("m4v", "video/mp4")
            .set("m4a", "audio/mp4")
            .set("webm", "video/webm")
            .set("weba", "audio/webm")
            .set("mkv", "video/webm")
            .set("ts", "video/mp2t")
            .set("ogv", "video/ogg")
            .set("ogg", "audio/ogg")
            .set("mpg", "video/mpeg")
            .set("mpeg", "video/mpeg")
            .set("mov", "video/quicktime")
            .set("m3u8", "application/x-mpegurl")
            .set("mpd", "application/dash+xml")
            .set("ism", "application/vnd.ms-sstr+xml")
            .set("mp3", "audio/mpeg")
            .set("aac", "audio/aac")
            .set("flac", "audio/flac")
            .set("wav", "audio/wav")
            .set("sbv", "text/x-subviewer")
            .set("srt", "text/srt")
            .set("vtt", "text/vtt")
            .set("webvtt", "text/vtt")
            .set("ttml", "application/ttml+xml")
            .set("lrc", "application/x-subtitle-lrc")
            .set("ssa", "text/x-ssa")
            .set("ass", "text/x-ssa")
            .set("jpeg", "image/jpeg")
            .set("jpg", "image/jpeg")
            .set("png", "image/png")
            .set("svg", "image/svg+xml")
            .set("webp", "image/webp")
            .set("avif", "image/avif")
            .set("html", "text/html")
            .set("htm", "text/html");
          function df(e, t) {
            if (e.lineBreak) return "\n";
            if (e.nestedCues.length)
              return e.nestedCues
                .map(function (t) {
                  return df(t, e);
                })
                .join("");
            if (!e.payload) return e.payload;
            var n = [],
              i = e.fontWeight >= fi,
              r = e.fontStyle == gi,
              a = e.textDecoration.includes(vi);
            return (
              i && n.push(["b"]),
              r && n.push(["i"]),
              a && n.push(["u"]),
              "" == (r = e.color) && t && (r = t.color),
              (i = ""),
              (r = hf(r)) && (i += "." + r),
              "" == (r = e.backgroundColor) && t && (r = t.backgroundColor),
              (t = hf(r)) && (i += ".bg_" + t),
              i && n.push(["c", i]),
              n.reduceRight(function (e, t) {
                var n = c(t);
                return (
                  "<" +
                  (t = n.next().value) +
                  (void 0 === (n = n.next().value) ? "" : n) +
                  ">" +
                  e +
                  "</" +
                  t +
                  ">"
                );
              }, e.payload)
            );
          }
          function hf(e) {
            var t = (e = e.toLowerCase())
              .replace(/\s/g, "")
              .match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
            switch (
              (t
                ? (e =
                    "#" +
                    (256 | parseInt(t[1], 10)).toString(16).slice(1) +
                    (256 | parseInt(t[2], 10)).toString(16).slice(1) +
                    (256 | parseInt(t[3], 10)).toString(16).slice(1))
                : e.startsWith("#") && 7 < e.length && (e = e.slice(0, 7)),
              e)
            ) {
              case "white":
              case "#fff":
              case "#ffffff":
                return "white";
              case "lime":
              case "#0f0":
              case "#00ff00":
                return "lime";
              case "cyan":
              case "#0ff":
              case "#00ffff":
                return "cyan";
              case "red":
              case "#f00":
              case "#ff0000":
                return "red";
              case "yellow":
              case "#ff0":
              case "#ffff00":
                return "yellow";
              case "magenta":
              case "#f0f":
              case "#ff00ff":
                return "magenta";
              case "blue":
              case "#00f":
              case "#0000ff":
                return "blue";
              case "black":
              case "#000":
              case "#000000":
                return "black";
            }
            return null;
          }
          function ff(e, t) {
            for (var n = [], i = (e = c(pf(e))).next(); !i.done; i = e.next())
              if ((i = i.value).isContainer)
                n.push.apply(n, d(ff(i.nestedCues, i)));
              else {
                var r = i.clone();
                (r.nestedCues = []), (r.payload = df(i, t)), n.push(r);
              }
            return n;
          }
          function pf(e) {
            for (
              var t = [], n = (e = c(e)).next(), i = {};
              !n.done;
              i = { te: void 0 }, n = e.next()
            )
              (i.te = n.value),
                t.some(
                  (function (e) {
                    return function (t) {
                      return Yn(e.te, t);
                    };
                  })(i)
                ) || t.push(i.te);
            return t;
          }
          function gf(e) {
            function t(e) {
              for (var t = 5381, n = e.length; n; )
                t = (33 * t) ^ e.charCodeAt(--n);
              return (t >>> 0).toString();
            }
            if (e.startTime >= e.endTime) return null;
            var n = new VTTCue(e.startTime, e.endTime, e.payload);
            (n.id =
              t(e.startTime.toString()) +
              t(e.endTime.toString()) +
              t(e.payload)),
              (n.lineAlign = e.lineAlign),
              (n.positionAlign = e.positionAlign),
              e.size && (n.size = e.size);
            try {
              n.align = e.textAlign;
            } catch (i) {}
            return (
              "center" == e.textAlign &&
                "center" != n.align &&
                (n.align = "middle"),
              "vertical-lr" == e.writingMode
                ? (n.vertical = "lr")
                : "vertical-rl" == e.writingMode && (n.vertical = "rl"),
              1 == e.lineInterpretation && (n.snapToLines = !1),
              null != e.line && (n.line = e.line),
              null != e.position && (n.position = e.position),
              n
            );
          }
          function mf(e, t) {
            for (
              this.h = e,
                this.i = t,
                this.g = null,
                t = (e = c(Array.from(this.h.textTracks))).next();
              !t.done;
              t = e.next()
            )
              "metadata" !== (t = t.value).kind &&
                "chapters" !== t.kind &&
                ((t.mode = "disabled"), t.label == this.i && (this.g = t));
            this.g && (this.g.mode = "hidden");
          }
          function vf(e) {
            e.h &&
              !e.g &&
              ((e.g = e.h.addTextTrack("subtitles", e.i)),
              (e.g.mode = "hidden"));
          }
          function yf(e, t) {
            var n = e.mode;
            e.mode = "showing" == n ? "showing" : "hidden";
            for (
              var i = c(Array.from(e.cues)), r = i.next();
              !r.done;
              r = i.next()
            )
              (r = r.value) && t(r) && e.removeCue(r);
            e.mode = n;
          }
          function bf() {}
          function wf(t, n) {
            var i = this;
            document.fullscreenEnabled ||
              X(
                "Using UITextDisplayer in a browser without Fullscreen API support causes subtitles to not be rendered in fullscreen"
              ),
              (this.A = !1),
              (this.h = []),
              (this.j = t),
              (this.C = n),
              (this.s = this.m = null),
              (this.g = document.createElement("div")),
              this.g.classList.add("shaka-text-container"),
              (this.g.style.textAlign = "center"),
              (this.g.style.display = "flex"),
              (this.g.style.flexDirection = "column"),
              (this.g.style.alignItems = "center"),
              (this.g.style.justifyContent = "flex-end"),
              this.C.appendChild(this.g),
              (this.o = new Oe(function () {
                i.j.paused || Af(i);
              })),
              xf(this),
              (this.l = new Map()),
              (this.i = new Z()),
              this.i.H(document, "fullscreenchange", function () {
                Af(i, !0);
              }),
              this.i.H(this.j, "seeking", function () {
                Af(i, !0);
              }),
              this.i.H(this.j, "ratechange", function () {
                xf(i);
              }),
              this.i.H(this.j, "resize", function () {
                var e = i.j,
                  t = e.videoWidth;
                (e = e.videoHeight), (i.m = t && e ? t / e : null);
              }),
              (this.B = null),
              "ResizeObserver" in e &&
                ((this.B = new ResizeObserver(function () {
                  Af(i, !0);
                })),
                this.B.observe(this.g)),
              (this.D = new Map());
          }
          function xf(e) {
            e.o &&
              (e.h.length
                ? e.o.ta(
                    (e.s ? e.s.captionsUpdatePeriod : 0.25) /
                      Math.max(1, Math.abs(e.j.playbackRate))
                  )
                : e.o.stop());
          }
          function Sf(e, t) {
            for (; null != t; ) {
              if (t == e.g) return !0;
              t = t.parentElement;
            }
            return !1;
          }
          function Tf(e, t, n, i, r) {
            for (
              var a = !1, o = [], s = [], u = (t = c(t)).next();
              !u.done;
              u = t.next()
            ) {
              (u = u.value), r.push(u);
              var l = e.l.get(u),
                d = u.startTime <= i && u.endTime > i,
                h = l ? l.Kg : null;
              l &&
                (o.push(l.ve),
                l.ec && o.push(l.ec),
                d || ((a = !0), e.l.delete(u), (l = null))),
                d &&
                  (s.push(u),
                  l
                    ? Sf(e, h) || (a = !0)
                    : (kf(e, u, r), (h = (l = e.l.get(u)).Kg), (a = !0))),
                0 < u.nestedCues.length && h && Tf(e, u.nestedCues, h, i, r),
                r.pop();
            }
            if (a) {
              for (r = (i = c(o)).next(); !r.done; r = i.next())
                (r = r.value).parentElement && r.parentElement.removeChild(r);
              for (
                s.sort(function (e, t) {
                  return e.startTime != t.startTime
                    ? e.startTime - t.startTime
                    : e.endTime - t.endTime;
                }),
                  i = (s = c(s)).next();
                !i.done;
                i = s.next()
              )
                (i = e.l.get(i.value)).ec
                  ? (i.ec.contains(n) && i.ec.removeChild(n),
                    n.appendChild(i.ec),
                    i.ec.appendChild(i.ve))
                  : n.appendChild(i.ve);
            }
          }
          function Af(e, t) {
            if (e.g) {
              var n = e.j.currentTime;
              if (!e.A || (void 0 !== t && t)) {
                for (
                  var i = (t = c(e.D.values())).next();
                  !i.done;
                  i = t.next()
                )
                  $c(i.value);
                $c(e.g), e.l.clear(), e.D.clear();
              }
              e.A && Tf(e, e.h, e.g, n, []);
            }
          }
          function kf(e, t, n) {
            var i = 1 < n.length,
              r = i ? "span" : "div";
            t.lineBreak && (r = "br"),
              t.rubyTag && (r = t.rubyTag),
              (i = !i && 0 < t.nestedCues.length);
            var a = document.createElement(r);
            if (
              ("br" != r &&
                (function (e, t, n, i, r) {
                  var a = t.style,
                    o = 0 == n.nestedCues.length,
                    s = 1 < i.length;
                  a.whiteSpace = "pre-wrap";
                  var u = n.payload.replace(/\s+$/g, function (e) {
                    return "".repeat(e.length);
                  });
                  if (
                    ((a.webkitTextStrokeColor = n.textStrokeColor),
                    (a.webkitTextStrokeWidth = n.textStrokeWidth),
                    (a.color = n.color),
                    (a.direction = n.direction),
                    (a.opacity = n.opacity),
                    (a.paddingLeft = If(n.linePadding, n, e.C)),
                    (a.paddingRight = If(n.linePadding, n, e.C)),
                    (a.textCombineUpright = n.textCombineUpright),
                    (a.textShadow = n.textShadow),
                    n.backgroundImage)
                  )
                    (a.backgroundImage = "url('" + n.backgroundImage + "')"),
                      (a.backgroundRepeat = "no-repeat"),
                      (a.backgroundSize = "contain"),
                      (a.backgroundPosition = "center"),
                      n.backgroundColor &&
                        (a.backgroundColor = n.backgroundColor),
                      (a.width = "100%"),
                      (a.height = "100%");
                  else {
                    if (n.nestedCues.length) var l = t;
                    else (l = document.createElement("span")), t.appendChild(l);
                    n.border && (l.style.border = n.border),
                      r ||
                        ((t = (function (e, t) {
                          for (var n = e.length - 1; 0 <= n; n--) {
                            var i = t(e[n]);
                            if (i || 0 === i) return i;
                          }
                          return null;
                        })(i, function (e) {
                          return e.backgroundColor;
                        }))
                          ? (l.style.backgroundColor = t)
                          : u &&
                            (l.style.backgroundColor = "rgba(0, 0, 0, 0.8)")),
                      u && (l.textContent = u);
                  }
                  s && !i[i.length - 1].isContainer
                    ? (a.display = "inline")
                    : ((a.display = "flex"),
                      (a.flexDirection = "column"),
                      (a.alignItems = "center"),
                      "left" == n.textAlign || "start" == n.textAlign
                        ? ((a.width = "100%"), (a.alignItems = "start"))
                        : ("right" != n.textAlign && "end" != n.textAlign) ||
                          ((a.width = "100%"), (a.alignItems = "end")),
                      (a.justifyContent =
                        "before" == n.displayAlign
                          ? "flex-start"
                          : "center" == n.displayAlign
                          ? "center"
                          : "flex-end"));
                  o || (a.margin = "0"),
                    (a.fontFamily = n.fontFamily),
                    (a.fontWeight = n.fontWeight.toString()),
                    (a.fontStyle = n.fontStyle),
                    (a.letterSpacing = n.letterSpacing),
                    (a.fontSize = If(
                      n.fontSize,
                      n,
                      e.C,
                      e.s ? e.s.fontScaleFactor : 1
                    )),
                    (i = n.line),
                    null != i &&
                      ((o = n.lineInterpretation),
                      o == si &&
                        ((o = 1),
                        (s = 16),
                        e.m && 1 > e.m && (s = 32),
                        (i = 0 > i ? 100 + (i / s) * 100 : (i / s) * 100)),
                      1 == o &&
                        ((a.position = "absolute"),
                        n.writingMode == oi
                          ? ((a.width = "100%"),
                            n.lineAlign == ui
                              ? (a.top = i + "%")
                              : "end" == n.lineAlign &&
                                (a.bottom = 100 - i + "%"))
                          : "vertical-lr" == n.writingMode
                          ? ((a.height = "100%"),
                            n.lineAlign == ui
                              ? (a.left = i + "%")
                              : "end" == n.lineAlign &&
                                (a.right = 100 - i + "%"))
                          : ((a.height = "100%"),
                            n.lineAlign == ui
                              ? (a.right = i + "%")
                              : "end" == n.lineAlign &&
                                (a.left = 100 - i + "%")))),
                    (a.lineHeight = n.lineHeight),
                    (e = (function (e) {
                      var t = e.direction,
                        n = e.positionAlign;
                      return (
                        (e = e.textAlign),
                        n !== ei
                          ? n
                          : "left" === e ||
                            ("start" === e && t === ai) ||
                            ("end" === e && "rtl" === t)
                          ? "line-left"
                          : "right" === e ||
                            ("start" === e && "rtl" === t) ||
                            ("end" === e && t === ai)
                          ? "line-right"
                          : "center"
                      );
                    })(n)),
                    "line-left" == e
                      ? ((a.cssFloat = "left"),
                        null !== n.position &&
                          ((a.position = "absolute"),
                          n.writingMode == oi
                            ? ((a.left = n.position + "%"), (a.width = "auto"))
                            : (a.top = n.position + "%")))
                      : "line-right" == e
                      ? ((a.cssFloat = "right"),
                        null !== n.position &&
                          ((a.position = "absolute"),
                          n.writingMode == oi
                            ? ((a.right = 100 - n.position + "%"),
                              (a.width = "auto"))
                            : (a.bottom = n.position + "%")))
                      : null !== n.position &&
                        50 != n.position &&
                        ((a.position = "absolute"),
                        n.writingMode == oi
                          ? ((a.left = n.position + "%"), (a.width = "auto"))
                          : (a.top = n.position + "%")),
                    (a.textAlign = n.textAlign),
                    (a.textDecoration = n.textDecoration.join(" ")),
                    (a.writingMode = n.writingMode),
                    ("writingMode" in document.documentElement.style &&
                      a.writingMode == n.writingMode) ||
                      (a.webkitWritingMode = n.writingMode),
                    n.size &&
                      (n.writingMode == oi
                        ? (a.width = n.size + "%")
                        : (a.height = n.size + "%"));
                })(e, a, t, n, i),
              (n = null),
              t.region && t.region.id)
            ) {
              var o = t.region,
                s = e.m === 4 / 3 ? 2.5 : 1.9;
              if (
                ((n =
                  o.id +
                  "_" +
                  o.width +
                  "x" +
                  o.height +
                  (o.heightUnits == en ? "%" : "px") +
                  "-" +
                  o.viewportAnchorX +
                  "x" +
                  o.viewportAnchorY +
                  (o.viewportAnchorUnits == en ? "%" : "px")),
                e.D.has(n))
              )
                n = e.D.get(n);
              else {
                r = document.createElement("span");
                var u = o.heightUnits == en ? "%" : "px",
                  l = o.widthUnits == en ? "%" : "px",
                  c = o.viewportAnchorUnits == en ? "%" : "px";
                (r.id = "shaka-text-region---" + n),
                  r.classList.add("shaka-text-region"),
                  (r.style.position = "absolute");
                var d = o.height,
                  h = o.width;
                2 === o.heightUnits && ((d = 5.33 * o.height), (u = "%")),
                  2 === o.widthUnits && ((h = o.width * s), (l = "%")),
                  (r.style.height = d + u),
                  (r.style.width = h + l),
                  2 === o.viewportAnchorUnits
                    ? ((s = (o.viewportAnchorY / 75) * 100),
                      (u =
                        (o.viewportAnchorX / (e.m === 4 / 3 ? 160 : 210)) *
                        100),
                      (s -= (o.regionAnchorY * d) / 100),
                      (u -= (o.regionAnchorX * h) / 100),
                      (r.style.top = s + "%"),
                      (r.style.left = u + "%"))
                    : ((r.style.top =
                        o.viewportAnchorY - (o.regionAnchorY * d) / 100 + c),
                      (r.style.left =
                        o.viewportAnchorX - (o.regionAnchorX * h) / 100 + c)),
                  0 !== o.heightUnits &&
                    0 !== o.widthUnits &&
                    0 !== o.viewportAnchorUnits &&
                    ((o = Math.max(
                      0,
                      Math.min(
                        100 - (parseInt(r.style.width.slice(0, -1), 10) || 0),
                        parseInt(r.style.left.slice(0, -1), 10) || 0
                      )
                    )),
                    (r.style.top =
                      Math.max(
                        0,
                        Math.min(
                          100 -
                            (parseInt(r.style.height.slice(0, -1), 10) || 0),
                          parseInt(r.style.top.slice(0, -1), 10) || 0
                        )
                      ) + "%"),
                    (r.style.left = o + "%")),
                  (r.style.display = "flex"),
                  (r.style.flexDirection = "column"),
                  (r.style.alignItems = "center"),
                  (r.style.justifyContent =
                    "before" == t.displayAlign
                      ? "flex-start"
                      : "center" == t.displayAlign
                      ? "center"
                      : "flex-end"),
                  e.D.set(n, r),
                  (n = r);
              }
            }
            (r = a),
              i &&
                ((r = document.createElement("span")).classList.add(
                  "shaka-text-wrapper"
                ),
                (r.style.backgroundColor = t.backgroundColor),
                (r.style.lineHeight = "normal"),
                a.appendChild(r)),
              e.l.set(t, { ve: a, Kg: r, ec: n });
          }
          function If(e, t, n, i) {
            i = void 0 === i ? 1 : i;
            var r = (r = new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))
              ? { value: Number(r[1]), unit: r[2] }
              : null;
            if (!r) return e;
            switch (((e = r.unit), (i *= r.value), e)) {
              case "%":
                return (
                  ((i / 100) * n.clientHeight) / t.cellResolution.rows + "px"
                );
              case "c":
                return (n.clientHeight * i) / t.cellResolution.rows + "px";
              default:
                return i + e;
            }
          }
          function Cf(e, t) {
            (this.h = e),
              (this.g = t),
              (this.i = void 0),
              (this.s = !1),
              (this.D = !0),
              (this.l = this.B = !1),
              (this.o = this.m = void 0),
              (this.A = 0),
              (this.F = !1),
              (this.C = new Z()),
              (this.j = null);
          }
          function Mf(t) {
            return (
              t.g.sessionId || (t.g.sessionId = e.crypto.randomUUID()),
              {
                v: t.g.version,
                sf: t.i,
                sid: t.g.sessionId,
                cid: t.g.contentId,
                mtp: t.h.getBandwidthEstimate() / 1e3,
              }
            );
          }
          function Ef(e, t, n) {
            n = void 0 === n ? {} : n;
            var i = void 0 === i ? e.g.useHeaders : i;
            if (e.g.enabled) {
              Object.assign(n, Mf(e)), (n.pr = e.h.Ra());
              var r = n.ot === _f || n.ot === Uf;
              if (
                (e.B && r && ((n.bs = !0), (n.su = !0), (e.B = !1)),
                null == n.su && (n.su = e.D),
                n.v === Ff &&
                  (e.h.R() && (n.ltc = e.h.td()),
                  null !=
                    (r = !e.F && e.o && e.m ? e.o - (e.A || e.m) : void 0) &&
                    ((n.msd = r), (e.F = !0))),
                (e = (function (e, t) {
                  var n = e.g.includeKeys;
                  return n.length
                    ? Object.keys(t).reduce(function (e, i) {
                        return n.includes(i) && (e[i] = t[i]), e;
                      }, {})
                    : t;
                })(e, n)),
                i)
              )
                (i = (function (e) {
                  for (
                    var t = Object.keys(e),
                      n = {},
                      i = ["Object", "Request", "Session", "Status"],
                      r = [{}, {}, {}, {}],
                      a = {
                        br: 0,
                        d: 0,
                        ot: 0,
                        tb: 0,
                        bl: 1,
                        dl: 1,
                        mtp: 1,
                        nor: 1,
                        nrr: 1,
                        su: 1,
                        ltc: 1,
                        cid: 2,
                        pr: 2,
                        sf: 2,
                        sid: 2,
                        st: 2,
                        v: 2,
                        msd: 2,
                        bs: 3,
                        rtp: 3,
                      },
                      o = (t = c(t)).next();
                    !o.done;
                    o = t.next()
                  )
                    (o = o.value), (r[null != a[o] ? a[o] : 1][o] = e[o]);
                  for (e = 0; e < r.length; e++)
                    (a = Pf(r[e])) && (n["CMCD-" + i[e]] = a);
                  return n;
                })(e)),
                  Object.keys(i).length && Object.assign(t.headers, i);
              else {
                var a = Pf(e);
                a &&
                  (t.uris = t.uris.map(function (e) {
                    return Lf(e, a);
                  }));
              }
            }
          }
          function Df(e, t) {
            if (!(t = e.h.hb()[t]).length) return 0;
            var n = e.h.getCurrentTime();
            return (e = t.find(function (e) {
              return e.start <= n && e.end >= n;
            }))
              ? 1e3 * (e.end - n)
              : 0;
          }
          function Pf(e) {
            function t(e) {
              return 100 * n(e / 100);
            }
            function n(e) {
              return Math.round(e);
            }
            for (
              var i,
                r = [],
                a = {
                  br: n,
                  d: n,
                  bl: t,
                  dl: t,
                  mtp: t,
                  nor: function (e) {
                    return encodeURIComponent(e);
                  },
                  rtp: t,
                  tb: n,
                },
                o = Object.keys(e || {}).sort(),
                s = (o = c(o)).next();
              !s.done;
              s = o.next()
            ) {
              var u = e[(s = s.value)];
              if (
                !((i = u),
                Number.isNaN(i) ||
                  null == i ||
                  "" === i ||
                  !1 === i ||
                  ("v" === s && 1 === u) ||
                  ("pr" == s && 1 === u))
              ) {
                var l = a[s];
                l && (u = l(u));
                var d;
                (d =
                  "string" === (l = typeof u) &&
                  "ot" !== s &&
                  "sf" !== s &&
                  "st" !== s
                    ? s + "=" + JSON.stringify(u)
                    : "boolean" === l
                    ? s
                    : "symbol" === l
                    ? s + "=" + u.description
                    : s + "=" + u),
                  r.push(d);
              }
            }
            return r.join(",");
          }
          function Lf(e, t) {
            return !t || e.includes("offline:")
              ? e
              : ((e = new se(e)).g.set("CMCD", t), e.toString());
          }
          ((i = mf.prototype).configure = function () {}),
            (i.remove = function (e, t) {
              return (
                !!this.g &&
                (yf(this.g, function (n) {
                  return n.startTime < t && n.endTime > e;
                }),
                !0)
              );
            }),
            (i.append = function (e) {
              if (this.g) {
                var t = ff(e),
                  n = [];
                e = this.g.cues ? Array.from(this.g.cues) : [];
                for (
                  var i = (t = c(t)).next(), r = {};
                  !i.done;
                  r = { uc: void 0 }, i = t.next()
                )
                  (r.uc = i.value),
                    !e.some(
                      (function (e) {
                        return function (t) {
                          return (
                            t.startTime == e.uc.startTime &&
                            t.endTime == e.uc.endTime &&
                            t.text == e.uc.payload
                          );
                        };
                      })(r)
                    ) &&
                      r.uc.payload &&
                      (i = gf(r.uc)) &&
                      n.push(i);
                for (
                  t = (e = c(
                    (e = n.slice().sort(function (e, t) {
                      return e.startTime != t.startTime
                        ? e.startTime - t.startTime
                        : e.endTime != t.endTime
                        ? e.endTime - t.startTime
                        : ("line" in VTTCue.prototype)
                        ? n.indexOf(t) - n.indexOf(e)
                        : n.indexOf(e) - n.indexOf(t);
                    }))
                  )).next();
                  !t.done;
                  t = e.next()
                )
                  this.g.addCue(t.value);
              }
            }),
            (i.destroy = function () {
              return (
                this.g &&
                  (yf(this.g, function () {
                    return !0;
                  }),
                  (this.g.mode = "disabled")),
                (this.g = this.h = null),
                Promise.resolve()
              );
            }),
            (i.isTextVisible = function () {
              return !!this.g && "showing" == this.g.mode;
            }),
            (i.setTextVisibility = function (e) {
              e && !this.g && vf(this),
                this.g && (this.g.mode = e ? "showing" : "hidden");
            }),
            (i.setTextLanguage = function () {}),
            (i.enableTextDisplayer = function () {
              vf(this);
            }),
            F("shaka.text.SimpleTextDisplayer", mf),
            (mf.prototype.enableTextDisplayer =
              mf.prototype.enableTextDisplayer),
            (mf.prototype.setTextLanguage = mf.prototype.setTextLanguage),
            (mf.prototype.setTextVisibility = mf.prototype.setTextVisibility),
            (mf.prototype.isTextVisible = mf.prototype.isTextVisible),
            (mf.prototype.destroy = mf.prototype.destroy),
            (mf.prototype.append = mf.prototype.append),
            (mf.prototype.remove = mf.prototype.remove),
            (mf.prototype.configure = mf.prototype.configure),
            ((i = bf.prototype).configure = function () {}),
            (i.remove = function () {}),
            (i.append = function () {}),
            (i.destroy = function () {}),
            (i.isTextVisible = function () {
              return !1;
            }),
            (i.setTextVisibility = function () {}),
            (i.setTextLanguage = function () {}),
            (i.enableTextDisplayer = function () {}),
            F("shaka.text.StubTextDisplayer", bf),
            (bf.prototype.enableTextDisplayer =
              bf.prototype.enableTextDisplayer),
            (bf.prototype.setTextLanguage = bf.prototype.setTextLanguage),
            (bf.prototype.setTextVisibility = bf.prototype.setTextVisibility),
            (bf.prototype.isTextVisible = bf.prototype.isTextVisible),
            (bf.prototype.destroy = bf.prototype.destroy),
            (bf.prototype.append = bf.prototype.append),
            (bf.prototype.remove = bf.prototype.remove),
            (bf.prototype.configure = bf.prototype.configure),
            ((i = wf.prototype).configure = function (e) {
              (this.s = e), xf(this), Af(this, !0);
            }),
            (i.append = function (e) {
              for (
                var t = [].concat(d(this.h)), n = (e = c(pf(e))).next(), i = {};
                !n.done;
                i = { ue: void 0 }, n = e.next()
              )
                (i.ue = n.value),
                  t.some(
                    (function (e) {
                      return function (t) {
                        return Yn(t, e.ue);
                      };
                    })(i)
                  ) || this.h.push(i.ue);
              this.h.length && xf(this), Af(this);
            }),
            (i.destroy = function () {
              return this.g
                ? (this.C.removeChild(this.g),
                  (this.g = null),
                  (this.A = !1),
                  (this.h = []),
                  this.o && (this.o.stop(), (this.o = null)),
                  this.l.clear(),
                  this.i && (this.i.release(), (this.i = null)),
                  this.B && (this.B.disconnect(), (this.B = null)),
                  Promise.resolve())
                : Promise.resolve();
            }),
            (i.remove = function (e, t) {
              if (!this.g) return !1;
              var n = this.h.length;
              return (
                (this.h = this.h.filter(function (n) {
                  return n.startTime < e || n.endTime >= t;
                })),
                Af(this, n > this.h.length),
                this.h.length || xf(this),
                !0
              );
            }),
            (i.isTextVisible = function () {
              return this.A;
            }),
            (i.setTextVisibility = function (e) {
              (this.A = e), Af(this, !0);
            }),
            (i.setTextLanguage = function (e) {
              e && "und" != e
                ? this.g.setAttribute("lang", e)
                : this.g.setAttribute("lang", "");
            }),
            (i.enableTextDisplayer = function () {}),
            F("shaka.text.UITextDisplayer", wf),
            (wf.prototype.enableTextDisplayer =
              wf.prototype.enableTextDisplayer),
            (wf.prototype.setTextLanguage = wf.prototype.setTextLanguage),
            (wf.prototype.setTextVisibility = wf.prototype.setTextVisibility),
            (wf.prototype.isTextVisible = wf.prototype.isTextVisible),
            (wf.prototype.remove = wf.prototype.remove),
            (wf.prototype.destroy = wf.prototype.destroy),
            (wf.prototype.append = wf.prototype.append),
            (wf.prototype.configure = wf.prototype.configure),
            F("shaka.text.WebVttGenerator", function () {}),
            (Cf.prototype.setMediaElement = function (e) {
              (this.j = e),
                (function (e) {
                  e.C.Ea(e.j, "play", function () {
                    e.m || (e.m = Date.now());
                  }),
                    e.C.Ea(e.j, "playing", function () {
                      e.o || (e.o = Date.now());
                    });
                })(this);
            }),
            (Cf.prototype.configure = function (e) {
              this.g = e;
            });
          var Rf = "m",
            Nf = "a",
            _f = "v",
            Uf = "av",
            jf = "i",
            Of = "c",
            Bf = "tt",
            Ff = 2,
            Hf = "d",
            Vf = "ld",
            zf = "h",
            Gf = "lh";
          function qf(e) {
            (this.h = e), (this.g = null);
          }
          function Kf(e) {
            return (
              !e ||
              ("false" !== e.toLowerCase() &&
                (/^[-0-9]/.test(e) ? parseInt(e, 10) : e.replace(/["]+/g, "")))
            );
          }
          F("shaka.util.CmcdManager.StreamingFormat", {
            DASH: Hf,
            Li: Vf,
            HLS: zf,
            Mi: Gf,
            Oi: "s",
            OTHER: "o",
          }),
            ((i = qf.prototype).configure = function (e) {
              this.h = e;
            }),
            (i.Uf = function () {
              return this.h.enabled &&
                this.h.applyMaximumSuggestedBitrate &&
                this.g &&
                this.g.has(Xf)
                ? 1e3 * this.g.get(Xf)
                : null;
            }),
            (i.Sf = function () {
              return this.h.enabled && this.g && this.g.has(Wf)
                ? 1e3 * this.g.get(Wf)
                : null;
            }),
            (i.zh = function () {
              return this.h.enabled && this.g && this.g.has(Yf)
                ? this.g.get(Yf)
                : null;
            }),
            (i.Ah = function () {
              return this.h.enabled && this.g && this.g.has(Jf)
                ? this.g.get(Jf)
                : null;
            }),
            (i.getBandwidthEstimate = function (e) {
              var t = this.Sf();
              if (!t) return e;
              var n = this.h.estimatedThroughputWeightRatio;
              return 0 < n && 1 >= n ? e * (1 - n) + t * n : e;
            }),
            F("shaka.util.CmsdManager", qf),
            (qf.prototype.getBandwidthEstimate =
              qf.prototype.getBandwidthEstimate),
            (qf.prototype.getRoundTripTime = qf.prototype.Ah),
            (qf.prototype.getResponseDelay = qf.prototype.zh),
            (qf.prototype.getEstimatedThroughput = qf.prototype.Sf),
            (qf.prototype.getMaxBitrate = qf.prototype.Uf);
          var Wf = "etp",
            Xf = "mb",
            Yf = "rd",
            Jf = "rtt";
          function $f() {
            (this.g = null), (this.h = []);
          }
          function Zf(e, t) {
            return L(function (n) {
              if (1 == n.g)
                return e.g
                  ? x(
                      n,
                      new Promise(function (t) {
                        return e.h.push(t);
                      }),
                      2
                    )
                  : n.u(2);
              (e.g = t), S(n);
            });
          }
          function Qf(t, n, i) {
            (n = void 0 === n ? null : n), Jo.call(this);
            var r = this;
            (this.m = tg),
              (this.h = null),
              (this.Nd = n),
              (this.oa = !1),
              (this.ce = new Z()),
              (this.Wc = new Z()),
              (this.l = new Z()),
              (this.ab = new Z()),
              (this.rc = new Z()),
              (this.F = this.J = this.C = this.D = null),
              (this.ge = 0),
              (this.da = new $f()),
              (this.ca =
                this.mc =
                this.X =
                this.i =
                this.nc =
                this.G =
                this.j =
                this.Uc =
                this.S =
                this.Bf =
                this.ga =
                this.L =
                this.Oa =
                this.Aa =
                this.Vc =
                this.O =
                this.pa =
                this.K =
                this.Ya =
                  null),
              (this.xa = !1),
              (this.Ma = this.o = null),
              (this.fe = 1e9),
              (this.ae = []),
              (this.dd = []),
              (this.he = -1),
              (this.g = Cp(this)),
              (this.ie = {
                streaming: {
                  inaccurateManifestTolerance: 0,
                  segmentPrefetchLimit: 2,
                  updateIntervalSeconds: 0.1,
                  maxDisabledTime: 1,
                  retryParameters: { baseDelay: 100 },
                },
                manifest: {
                  dash: { autoCorrectDrift: !1 },
                  retryParameters: { baseDelay: 100 },
                },
                drm: { retryParameters: { baseDelay: 100 } },
              }),
              (this.W = null),
              (this.jd = -1),
              (this.$a = null),
              (this.la = { width: 1 / 0, height: 1 / 0 }),
              (this.Md = new Vc(this.g, this.la, null)),
              (this.Vd = []),
              (this.A = null),
              (this.Y = this.g.adaptationSetCriteriaFactory()),
              this.Y.configure({
                language: this.g.preferredAudioLanguage,
                role: this.g.preferredVariantRole,
                channelCount: this.g.preferredAudioChannelCount,
                sc: this.g.preferredVideoHdrLevel,
                spatialAudio: this.g.preferSpatialAudio,
                videoLayout: this.g.preferredVideoLayout,
                kc: this.g.preferredAudioLabel,
                Gc: this.g.preferredVideoLabel,
                codecSwitchingStrategy:
                  this.g.mediaSource.codecSwitchingStrategy,
                audioCodec: "",
              }),
              (this.tc = this.g.preferredTextLanguage),
              (this.bd = this.g.preferredTextRole),
              (this.$c = this.g.preferForcedSubs),
              (this.Yc = []),
              i && i(this),
              (this.L = (function (e) {
                return new Cf(
                  {
                    getBandwidthEstimate: function () {
                      return e.o ? e.o.getBandwidthEstimate() : NaN;
                    },
                    hb: function () {
                      return e.hb();
                    },
                    getCurrentTime: function () {
                      return e.h ? e.h.currentTime : 0;
                    },
                    Ra: function () {
                      return e.Ra();
                    },
                    Pe: function () {
                      return e.Pe();
                    },
                    yb: function () {
                      return e.yb();
                    },
                    R: function () {
                      return e.R();
                    },
                    td: function () {
                      return e.td();
                    },
                  },
                  e.g.cmcd
                );
              })(this)),
              (this.ga = new qf(this.g.cmsd)),
              (this.D = fp(this)),
              this.D.lf(this.g.streaming.forceHTTP),
              this.D.mf(this.g.streaming.forceHTTPS),
              (this.D.o = this.g.streaming.minBytesForProgressEvents),
              (this.xc = this.fa = this.B = null),
              (this.ke = !1),
              (this.je = new Oe(function () {
                return L(function (e) {
                  return 1 == e.g
                    ? r.fa
                      ? x(e, r.Cb(r.xc, !0), 3)
                      : e.u(0)
                    : 4 != e.g
                    ? x(e, r.load(r.fa), 4)
                    : (r.ke ? r.xc.pause() : r.xc.play(),
                      (r.fa = null),
                      (r.ke = !1),
                      void S(e));
                });
              })),
              og &&
                ((this.B = og()),
                this.B.configure(this.g.ads),
                this.rc.H(this.B, "ad-content-pause-requested", function (e) {
                  var t;
                  return L(function (n) {
                    if (1 == n.g)
                      return (
                        r.je.stop(),
                        r.fa
                          ? n.u(0)
                          : ((r.xc = r.h),
                            (r.ke = r.vc()),
                            (t = e.saveLivePosition || !1),
                            x(n, r.Nf(!0, t), 3))
                      );
                    (r.fa = n.h), S(n);
                  });
                }),
                this.rc.H(this.B, "ad-content-resume-requested", function (e) {
                  if (((e = e.offset || 0), r.fa)) {
                    var t = r.fa;
                    t.B && e && (t.B += e);
                  }
                  r.je.ea(0.1);
                }),
                this.rc.H(this.B, "ad-content-attach-requested", function () {
                  return L(function (e) {
                    return r.h || !r.xc ? e.u(0) : x(e, r.Cb(r.xc, !0), 0);
                  });
                })),
              this.ce.H(e, "online", function () {
                qp(r), r.hf();
              }),
              (this.Td = new Oe(function () {
                for (
                  var e = Date.now() / 1e3,
                    t = !1,
                    n = !0,
                    i = c(r.i.variants),
                    a = i.next();
                  !a.done;
                  a = i.next()
                )
                  0 < (a = a.value).disabledUntilTime &&
                    a.disabledUntilTime <= e &&
                    ((a.disabledUntilTime = 0), (t = !0)),
                    0 < a.disabledUntilTime && (n = !1);
                n && r.Td.stop(), t && Np(r, !1, void 0, !1, !1);
              })),
              (this.za = null),
              t &&
                (ne(
                  "Player w/ mediaElement",
                  "Please migrate from initializing Player with a mediaElement; use the attach method instead."
                ),
                this.Cb(t, !0)),
              (this.s = null);
          }
          function ep(e) {
            null != e.S && (Bt(e.S), e.S.release(), (e.S = null));
          }
          function tp(e, t) {
            return new Yo(e, t);
          }
          function np(e, t) {
            e.dispatchEvent(tp("onstatechange", new Map().set("state", t)));
          }
          function ip(e, t) {
            var n;
            return L(function (i) {
              return 1 == i.g
                ? ((n = ++e.ge), x(i, Zf(e.da, t), 2))
                : n != e.ge
                ? (e.da.release(), i.return(!0))
                : i.return(!1);
            });
          }
          function rp(e, t) {
            var n, i;
            return (
              (t = void 0 !== t && t),
              L(function (r) {
                if (1 == r.g)
                  return (
                    (n = null),
                    e.i && e.G && e.nc && e.X
                      ? ((i = e.h.currentTime),
                        e.R() && !t && (i = null),
                        x(r, op(e, e.X, i, e.mc, !0, !1, !1), 3))
                      : r.u(2)
                  );
                if (2 != r.g) {
                  (n = r.h),
                    e.Vd.push(n),
                    e.G && e.G.setMediaElement && e.G.setMediaElement(null);
                  var a = n,
                    o = e.G,
                    s = e.nc;
                  (a.h = e.i),
                    (a.l = o),
                    (a.F = s),
                    (a = n),
                    (o = e.Ma),
                    (a.j = e.o),
                    (a.C = o),
                    (n.o = e.Y),
                    n.start(),
                    (e.i = null),
                    (e.G = null),
                    (e.nc = null),
                    (e.o = null),
                    (e.Ma = null);
                }
                return r.return(n);
              })
            );
          }
          function ap(e, t, n, i, r) {
            var a, o, s;
            return (
              (r = void 0 !== r && r),
              L(function (u) {
                return 1 == u.g
                  ? i
                    ? u.u(2)
                    : x(u, sp(e, t), 3)
                  : (2 != u.g && (i = u.h),
                    (function (e, t) {
                      if (!Be()) return !0;
                      if (t) {
                        if ("" == (e.h || ot()).canPlayType(t)) return !1;
                        if (!Be() || !Js.has(t)) return !0;
                        if (ji(t))
                          return Ye() &&
                            (e.g.drm.servers["com.apple.fps"] ||
                              e.g.drm.servers["com.apple.fps.1_0"])
                            ? e.g.streaming.useNativeHlsForFairPlay
                            : e.g.streaming.preferNativeHls;
                        if (
                          "application/dash+xml" === t ||
                          "video/vnd.mpeg.dash.mpd" === t
                        )
                          return e.g.streaming.preferNativeDash;
                      }
                      return !1;
                    })(e, i)
                      ? u.return(null)
                      : ((a = !1),
                        (o = !0),
                        r &&
                          (e.o && e.Ma == e.g.abrFactory && (o = !1),
                          e.h && "AUDIO" === e.h.nodeName && (a = !0)),
                        (s = op(e, t, n, i || null, !r, a, o)),
                        (s = r
                          ? s.then(function (e) {
                              return (e.A = !1), e;
                            })
                          : s.then(function (t) {
                              return e.Vd.push(t), t;
                            })),
                        u.return(s)));
              })
            );
          }
          function op(e, t, n, i, r, a, o) {
            var s, u, l, d, h, f, p, g, m, v, y, b;
            return (
              (r = void 0 === r || r),
              (a = void 0 !== a && a),
              (o = void 0 === o || o),
              L(function (w) {
                return 1 == w.g
                  ? ((s = null),
                    (u = hn(e.g)),
                    a && (u.manifest.disableVideo = !0),
                    (l = function () {
                      return s.X && s.s ? null : s;
                    }),
                    (d = function () {
                      return l() ? l().getConfiguration() : e.g;
                    }),
                    1 / 0 != e.la.width ||
                    1 / 0 != e.la.height ||
                    e.g.ignoreHardwareResolution
                      ? w.u(2)
                      : x(w, ut(), 3))
                  : (2 != w.g &&
                      ((h = w.h),
                      (e.la.width = h.width),
                      (e.la.height = h.height)),
                    (f = new Vc(u, e.la, null)),
                    (p = {
                      networkingEngine: e.D,
                      filter: function (e) {
                        var t;
                        return L(function (n) {
                          return 1 == n.g
                            ? x(n, zc(f, e), 2)
                            : 4 != n.g
                            ? n.h
                              ? ((t = tp("trackschanged")),
                                x(n, Promise.resolve(), 4))
                              : n.u(0)
                            : (s.dispatchEvent(t), void S(n));
                        });
                      },
                      makeTextStreamsForClosedCaptions: function (t) {
                        return (function (e, t) {
                          for (
                            var n = new Set(),
                              i = c(t.textStreams),
                              r = i.next();
                            !r.done;
                            r = i.next()
                          )
                            ("application/cea-608" != (r = r.value).mimeType &&
                              "application/cea-708" != r.mimeType) ||
                              n.add(r.originalId);
                          for (
                            i = c(t.variants), r = i.next();
                            !r.done;
                            r = i.next()
                          )
                            if ((r = r.value.video) && r.closedCaptions)
                              for (
                                var a = c(r.closedCaptions.keys()),
                                  o = a.next();
                                !o.done;
                                o = a.next()
                              )
                                if (((o = o.value), !n.has(o))) {
                                  var s = o.startsWith("CC")
                                      ? "application/cea-608"
                                      : "application/cea-708",
                                    u = new Ls(),
                                    l = r.closedCaptions.get(o);
                                  (s = {
                                    id: e.fe++,
                                    originalId: o,
                                    groupId: null,
                                    createSegmentIndex: function () {
                                      return Promise.resolve();
                                    },
                                    segmentIndex: u,
                                    mimeType: s,
                                    codecs: "",
                                    kind: "caption",
                                    encrypted: !1,
                                    drmInfos: [],
                                    keyIds: new Set(),
                                    language: l,
                                    originalLanguage: l,
                                    label: null,
                                    type: Rt,
                                    primary: !1,
                                    trickModeVideo: null,
                                    dependencyStream: null,
                                    emsgSchemeIdUris: null,
                                    roles: r.roles,
                                    forced: !1,
                                    channelsCount: null,
                                    audioSamplingRate: null,
                                    spatialAudio: !1,
                                    closedCaptions: null,
                                    accessibilityPurpose: null,
                                    external: !1,
                                    fastSwitching: !1,
                                    fullMimeTypes: new Set([Mi(s, "")]),
                                    isAudioMuxedInVideo: !1,
                                    baseOriginalId: null,
                                  }),
                                    t.textStreams.push(s),
                                    n.add(o);
                                }
                        })(e, t);
                      },
                      onTimelineRegionAdded: function (e) {
                        qd(s.G, e);
                      },
                      onEvent: function (e) {
                        return s.dispatchEvent(e);
                      },
                      onError: function (e) {
                        return s.onError(e);
                      },
                      isLowLatencyMode: function () {
                        return d().streaming.lowLatencyMode;
                      },
                      updateDuration: function () {
                        e.j && s.X && e.j.updateDuration();
                      },
                      newDrmInfo: function (e) {
                        var t = s.i,
                          n = t ? t.h : null;
                        n && t.A && Kc(f, n.keySystem, e);
                      },
                      onManifestUpdated: function () {
                        var t = new Map().set("isLive", e.R());
                        s.dispatchEvent(tp("manifestupdated", t)),
                          Ph(s, !1, function () {
                            e.B && e.B.onManifestUpdated(e.R());
                          });
                      },
                      getBandwidthEstimate: function () {
                        return e.o.getBandwidthEstimate();
                      },
                      onMetadata: function (t, n, i, r) {
                        var a = t;
                        "com.apple.hls.interstitial" == t &&
                          ((a = "com.apple.quicktime.HLS"),
                          (t = { startTime: n, endTime: i, values: r }),
                          e.B) &&
                          e.B.onHLSInterstitialMetadata(e, e.h, t),
                          (t = (r = c(r)).next());
                        for (
                          var o = {};
                          !t.done;
                          o = { df: void 0 }, t = r.next()
                        )
                          (o.df = t.value),
                            "ID" != o.df.name &&
                              Ph(
                                s,
                                !1,
                                (function (t) {
                                  return function () {
                                    hp(e, n, i, a, t.df);
                                  };
                                })(o)
                              );
                      },
                      disableStream: function (t) {
                        return e.disableStream(
                          t,
                          e.g.streaming.maxDisabledTime
                        );
                      },
                      addFont: function (t, n) {
                        return e.addFont(t, n);
                      },
                    }),
                    (g = new Gd(function () {
                      return e.La();
                    })).addEventListener("regionadd", function (t) {
                      var n = t.region;
                      Wp(e, "timelineregionadded", n, s),
                        Ph(s, !1, function () {
                          e.B &&
                            (e.B.onDashTimedMetadata(n),
                            e.B.onDASHInterstitialMetadata(e, e.h, n));
                        });
                    }),
                    (m = null),
                    u.streaming.observeQualityChanges &&
                      ((m = new Vd(function () {
                        return e.hb();
                      })).addEventListener("qualitychange", function (t) {
                        Xp(e, t.quality, t.position);
                      }),
                      m.addEventListener("audiotrackchange", function (t) {
                        Xp(e, t.quality, t.position, !0);
                      })),
                    (v = !0),
                    (y = {
                      cc: e.D,
                      onError: function (e) {
                        return s.onError(e);
                      },
                      kg: function (t) {
                        Ph(s, !0, function () {
                          if (e.C) {
                            var n = t,
                              i = tp("keystatuschanged");
                            e.dispatchEvent(i);
                            var r = Object.keys(n);
                            1 == r.length &&
                              "" == r[0] &&
                              ((r = ["00"]), (n = { "00": n[""] })),
                              (i = 1 == r.length && "00" == r[0]);
                            var a = !1;
                            if (r.length) {
                              r = e.keySystem();
                              for (
                                var o = Nl(e.g.drm.clearKeys),
                                  s = c(e.i.variants),
                                  u = s.next();
                                !u.done;
                                u = s.next()
                              ) {
                                var l = [];
                                (u = u.value).audio && l.push(u.audio),
                                  u.video && l.push(u.video);
                                for (
                                  var d = (l = c(l)).next();
                                  !d.done;
                                  d = l.next()
                                ) {
                                  var h = d.value;
                                  if (
                                    ((d = u.allowedByKeySystem), h.keyIds.size)
                                  )
                                    if (h.drmInfos.length && !o.size) {
                                      for (
                                        var f = (h = c(h.drmInfos)).next();
                                        !f.done;
                                        f = h.next()
                                      )
                                        if (
                                          (f = f.value).keyIds.size &&
                                          f.keySystem == r
                                        ) {
                                          u.allowedByKeySystem = !0;
                                          for (
                                            var p = (f = c(f.keyIds)).next();
                                            !p.done;
                                            p = f.next()
                                          )
                                            (p = p.value),
                                              ((p = n[i ? "00" : p]) ||
                                                e.C.D) &&
                                                (u.allowedByKeySystem =
                                                  u.allowedByKeySystem &&
                                                  !!p &&
                                                  !Xc.includes(p));
                                        }
                                    } else
                                      for (
                                        u.allowedByKeySystem = !0,
                                          f = (h = c(h.keyIds)).next();
                                        !f.done;
                                        f = h.next()
                                      )
                                        (f = f.value),
                                          ((f = n[i ? "00" : f]) || e.C.D) &&
                                            (u.allowedByKeySystem =
                                              u.allowedByKeySystem &&
                                              !!f &&
                                              !Xc.includes(f));
                                  d != u.allowedByKeySystem && (a = !0);
                                }
                              }
                            }
                            (a && (jp(e), !Rp(e))) ||
                              ((n = e.j.l) && !n.allowedByKeySystem && Np(e));
                          }
                        });
                      },
                      onExpirationUpdated: function (e, t) {
                        var n = tp("expirationupdated");
                        s.dispatchEvent(n),
                          (n = s.l) &&
                            n.onExpirationUpdated &&
                            n.onExpirationUpdated(e, t);
                      },
                      onEvent: function (t) {
                        s.dispatchEvent(t),
                          "drmsessionupdate" == t.type &&
                            v &&
                            ((v = !1),
                            (t = Date.now() / 1e3 - s.za),
                            ((e.A || s.getStats()).j = t),
                            e.S && Bt(e.S));
                      },
                    }),
                    (b = fp(e, l)),
                    (function (e, t) {
                      for (var n = c(e.g), i = n.next(); !i.done; i = n.next())
                        t.g.add(i.value);
                      for (n = (e = c(e.h)).next(); !n.done; n = e.next())
                        t.h.add(n.value);
                    })(e.D, b),
                    (s = new Dh(t, i, n, {
                      config: u,
                      Uh: p,
                      gi: g,
                      fi: m,
                      od: function () {
                        return e.od(y);
                      },
                      Th: f,
                      networkingEngine: b,
                      Rg: r,
                      Qg: o,
                    })),
                    w.return(s));
              })
            );
          }
          function sp(e, t) {
            var n, i;
            return L(function (r) {
              return 1 == r.g
                ? ((n = e.g.manifest.retryParameters), x(r, lf(t, e.D, n), 2))
                : ("application/x-mpegurl" == (i = r.h) &&
                    Ye() &&
                    (i = "application/vnd.apple.mpegurl"),
                  r.return(i));
            });
          }
          function up(e) {
            var t = e.g.textDisplayFactory;
            t !== e.ee &&
              ((e.s = t()),
              e.s.configure
                ? e.s.configure(e.g.textDisplayer)
                : ne(
                    "Text displayer w/ configure",
                    'Text displayer should have a "configure" method!'
                  ),
              (e.ee = t),
              e.s.setTextVisibility(e.oa));
          }
          function lp(e) {
            var t, n, i;
            return L(function (r) {
              if (1 == r.g)
                return (
                  np(e, "media-source"),
                  e.h.removeAttribute("src"),
                  $c(e.h),
                  up(e),
                  (t = (function (e, t, n, i) {
                    return new Zc(e, t, n, i);
                  })(
                    e.h,
                    e.s,
                    {
                      oh: function () {
                        return e.keySystem();
                      },
                      onMetadata: function (t, n, i) {
                        for (var r = (t = c(t)).next(); !r.done; r = t.next())
                          if (
                            (r = r.value).data &&
                            "number" == typeof r.cueTime &&
                            r.frames
                          ) {
                            var a = r.cueTime + n,
                              o = i;
                            o && a > o && (o = a);
                            for (
                              var s = c(r.frames), u = s.next();
                              !u.done;
                              u = s.next()
                            )
                              hp(e, a, o, "org.id3", u.value);
                            e.B && e.B.onHlsTimedMetadata(r, a);
                          }
                      },
                      ai: function (t) {
                        e.Oa &&
                          qd(e.Oa, {
                            schemeIdUri: t.schemeIdUri,
                            startTime: t.startTime,
                            endTime: t.endTime,
                            id: String(t.id),
                            emsg: t,
                          });
                      },
                      onEvent: function (t) {
                        return e.dispatchEvent(t);
                      },
                      ci: function () {
                        e.G && e.G.update && e.G.update();
                      },
                    },
                    e.S
                  )),
                  t.configure(e.g.mediaSource),
                  (n = e.g.manifest),
                  (i = n.segmentRelativeVttTiming),
                  (t.Xa = i),
                  x(r, t.J, 2)
                );
              (e.J = t), S(r);
            });
          }
          function cp(e, t, n) {
            function i() {
              return Dp(e);
            }
            e.l.H(t, "playing", i),
              e.l.H(t, "pause", i),
              e.l.H(t, "ended", i),
              e.l.H(t, "ratechange", function () {
                var t = e.h.playbackRate;
                0 != t &&
                  (e.K &&
                    (e.K.set(t),
                    e.m == ng && e.o.playbackRateChanged(t),
                    Ep(e, t)),
                  (t = tp("ratechange")),
                  e.dispatchEvent(t));
              }),
              t.remote &&
                (e.l.H(t.remote, "connect", function () {
                  return jp(e);
                }),
                e.l.H(t.remote, "connecting", function () {
                  return jp(e);
                }),
                e.l.H(t.remote, "disconnect", function () {
                  return L(function (n) {
                    if (1 == n.g)
                      return e.j && "disconnected" == t.remote.state
                        ? x(n, Th(e.j), 2)
                        : n.u(2);
                    jp(e), S(n);
                  });
                })),
              t.audioTracks &&
                (e.l.H(t.audioTracks, "addtrack", function () {
                  return jp(e);
                }),
                e.l.H(t.audioTracks, "removetrack", function () {
                  return jp(e);
                }),
                e.l.H(t.audioTracks, "change", function () {
                  return jp(e);
                })),
              t.textTracks &&
                (e.l.H(t.textTracks, "addtrack", function (t) {
                  if (t.track)
                    switch (((t = t.track), t.kind)) {
                      case "metadata":
                        !(function (e, t) {
                          if ("metadata" == t.kind) {
                            (t.mode = "hidden"),
                              e.l.H(t, "cuechange", function () {
                                if (t.activeCues)
                                  for (
                                    var n = c(t.activeCues), i = n.next();
                                    !i.done;
                                    i = n.next()
                                  )
                                    (i = i.value),
                                      hp(
                                        e,
                                        i.startTime,
                                        i.endTime,
                                        i.type,
                                        i.value
                                      ),
                                      e.B && e.B.onCueMetadataChange(i.value);
                                if (t.cues) {
                                  n = [];
                                  for (
                                    var r = (i = c(t.cues)).next(), a = {};
                                    !r.done;
                                    a = { Eb: void 0 }, r = i.next()
                                  )
                                    (a.Eb = r.value),
                                      "com.apple.quicktime.HLS" == a.Eb.type &&
                                        null != a.Eb.startTime &&
                                        ((r = n.find(
                                          (function (e) {
                                            return function (t) {
                                              return (
                                                t.startTime == e.Eb.startTime &&
                                                t.endTime == e.Eb.endTime
                                              );
                                            };
                                          })(a)
                                        )),
                                        r ||
                                          ((r = {
                                            startTime: a.Eb.startTime,
                                            endTime: a.Eb.endTime,
                                            values: [],
                                          }),
                                          n.push(r)),
                                        r.values.push(a.Eb.value));
                                  for (
                                    i = (n = c(n)).next();
                                    !i.done;
                                    i = n.next()
                                  )
                                    (i = i.value).values.some(function (e) {
                                      return (
                                        "X-ASSET-URI" == e.key ||
                                        "X-ASSET-LIST" == e.key
                                      );
                                    }) &&
                                      e.B &&
                                      (i.values.push({
                                        key: "CUE",
                                        description: "",
                                        data:
                                          0 != i.startTime || e.R()
                                            ? "ONCE"
                                            : "ONCE,PRE",
                                        mimeType: null,
                                        pictureType: null,
                                      }),
                                      e.B.onHLSInterstitialMetadata(e, e.h, i));
                                }
                              });
                            var n = new Oe(function () {
                              for (
                                var t = (function (e) {
                                    return Array.from(e.h.textTracks).filter(
                                      function (e) {
                                        return "metadata" == e.kind;
                                      }
                                    );
                                  })(e),
                                  n = (t = c(t)).next();
                                !n.done;
                                n = t.next()
                              )
                                n.value.mode = "hidden";
                            })
                              .Nb()
                              .ea(0.5);
                            e.Yc.push(function () {
                              n.stop();
                            });
                          }
                        })(e, t);
                        break;
                      case "chapters":
                        !(function (e, t) {
                          if (t && "chapters" == t.kind) {
                            t.mode = "hidden";
                            var n = new Oe(function () {
                              t.mode = "hidden";
                            })
                              .Nb()
                              .ea(0.5);
                            e.Yc.push(function () {
                              n.stop();
                            });
                          }
                        })(e, t);
                        break;
                      default:
                        jp(e);
                    }
                }),
                e.l.H(t.textTracks, "removetrack", function () {
                  return jp(e);
                }),
                e.l.H(t.textTracks, "change", function () {
                  return jp(e);
                }),
                "keep" !== e.g.streaming.crossBoundaryStrategy &&
                  (e.l.H(t, "waiting", function () {
                    e.j && Ah(e.j);
                  }),
                  e.l.H(t, "timeupdate", function () {
                    e.j && Ah(e.j);
                  }))),
              "none" != t.preload &&
                e.l.Ea(t, "loadedmetadata", function () {
                  e.A.C = Date.now() / 1e3 - n;
                });
          }
          function dp(e, t) {
            (t = new Map()
              .set("startTime", t.startTime)
              .set("endTime", t.endTime)
              .set("metadataType", t.schemeIdUri)
              .set("payload", t.payload)),
              e.dispatchEvent(tp("metadata", t));
          }
          function hp(e, t, n, i, r) {
            e.Aa &&
              (((t = {
                schemeIdUri: i,
                startTime: t,
                endTime: n || 1 / 0,
                id: "",
                payload: r,
              }).id = JSON.stringify(t)),
              qd(e.Aa, t));
          }
          function fp(e, t) {
            function n(n) {
              t() ? t().dispatchEvent(n) : e.dispatchEvent(n);
            }
            function i(e) {
              t() ? Ph(t(), !0, e) : e();
            }
            return (
              t ||
                (t = function () {
                  return null;
                }),
              new Qo(
                function (n, i, r, a) {
                  var o = t() ? t().j : e.o;
                  o && o.segmentDownloaded(n, i, r, a);
                },
                function (t, r, a) {
                  n(
                    tp(
                      "downloadheadersreceived",
                      (r = new Map()
                        .set("headers", t)
                        .set("request", r)
                        .set("requestType", a))
                    )
                  ),
                    i(function () {
                      if (e.ga) {
                        var n = e.ga;
                        if (n.h.enabled) {
                          var i = t["cmsd-static"];
                          if (i)
                            try {
                              var r = new Map(),
                                a = i.split(",");
                              for (i = 0; i < a.length; i++) {
                                var o = a[i].split("=");
                                r.set(o[0], Kf(o[1]));
                              }
                            } catch (d) {}
                          if ((r = t["cmsd-dynamic"])) {
                            try {
                              var s = new Map(),
                                u = r.split(";");
                              for (r = 1; r < u.length; r++) {
                                var l = u[r].split("=");
                                s.set(l[0], Kf(l[1]));
                              }
                              var c = s;
                            } catch (d) {
                              c = null;
                            }
                            c && (n.g = c);
                          }
                        }
                      }
                    });
                },
                function (e, t) {
                  n(
                    tp(
                      "downloadcompleted",
                      (e = new Map().set("request", e).set("response", t))
                    )
                  );
                },
                function (e, t, i, r) {
                  n(
                    tp(
                      "downloadfailed",
                      (e = new Map()
                        .set("request", e)
                        .set("error", t)
                        .set("httpResponseCode", i)
                        .set("aborted", r))
                    )
                  );
                },
                function (t, n, r) {
                  i(function () {
                    var i = e.L,
                      a = r;
                    if (((a = void 0 === a ? {} : a), i.g.enabled))
                      if ("HEAD" === n.method) Ef(i, n);
                      else
                        switch (t) {
                          case 0:
                            try {
                              if (i.g.enabled) {
                                if (a.type) {
                                  e: {
                                    switch (a.type) {
                                      case 4:
                                        var o = i.l ? Vf : Hf;
                                        break e;
                                      case 3:
                                      case 2:
                                        o = i.l ? Gf : zf;
                                        break e;
                                      case 5:
                                        o = "s";
                                        break e;
                                    }
                                    o = void 0;
                                  }
                                  i.i = o;
                                }
                                Ef(i, n, { ot: Rf, su: !i.s });
                              }
                            } catch (M) {
                              Y(
                                "CMCD_MANIFEST_ERROR",
                                "Could not generate manifest CMCD data.",
                                M
                              );
                            }
                            break;
                          case os:
                            try {
                              if (i.g.enabled) {
                                var s = a.segment;
                                (o = 0), s && (o = s.endTime - s.startTime);
                                var u = { d: 1e3 * o, st: i.h.R() ? "l" : "v" };
                                u.ot = (function (e) {
                                  if (0 === e.type) return jf;
                                  if ((e = e.stream)) {
                                    var t = e.type;
                                    if ("video" == t)
                                      return e.codecs && e.codecs.includes(",")
                                        ? Uf
                                        : _f;
                                    if ("audio" == t) return Nf;
                                    if ("text" == t)
                                      return "application/mp4" === e.mimeType
                                        ? Bf
                                        : Of;
                                  }
                                })(a);
                                var l =
                                    u.ot === _f ||
                                    u.ot === Nf ||
                                    u.ot === Uf ||
                                    u.ot === Bf,
                                  d = a.stream;
                                if (d) {
                                  var h = i.h.Ra();
                                  if (
                                    l &&
                                    ((u.bl = (function (e, t) {
                                      if (!(t = e.h.hb()[t]).length) return NaN;
                                      var n = e.h.getCurrentTime();
                                      return (e = t.find(function (e) {
                                        return e.start <= n && e.end >= n;
                                      }))
                                        ? 1e3 * (e.end - n)
                                        : NaN;
                                    })(i, d.type)),
                                    u.ot !== Bf)
                                  ) {
                                    var f = Df(i, d.type);
                                    u.dl = h ? f / Math.abs(h) : f;
                                  }
                                  if (
                                    (d.bandwidth && (u.br = d.bandwidth / 1e3),
                                    d.segmentIndex && s)
                                  ) {
                                    var p = d.segmentIndex.ob(
                                      s.endTime,
                                      !0,
                                      0 > h
                                    );
                                    if (p) {
                                      var g = p.next().value;
                                      if (g && g != s) {
                                        if (!an(s.T(), g.T())) {
                                          var m = g.T()[0],
                                            v = n.uris[0],
                                            y = new URL(m),
                                            b = new URL(v);
                                          if (y.origin !== b.origin) var w = m;
                                          else {
                                            for (
                                              var x = y.pathname
                                                  .split("/")
                                                  .slice(1),
                                                S = b.pathname
                                                  .split("/")
                                                  .slice(1, -1);
                                              x[0] === S[0];

                                            )
                                              x.shift(), S.shift();
                                            for (; S.length; )
                                              S.shift(), x.unshift("..");
                                            w = x.join("/");
                                          }
                                          u.nor = w;
                                        }
                                        if (
                                          (g.startByte || g.endByte) &&
                                          (s.startByte != g.startByte ||
                                            s.endByte != g.endByte)
                                        ) {
                                          var T = g.startByte + "-";
                                          g.endByte && (T += g.endByte),
                                            (u.nrr = T);
                                        }
                                      }
                                    }
                                    var A = i.h.Ra() || 1,
                                      k = Df(i, d.type) || 500,
                                      I = d.bandwidth,
                                      C = I
                                        ? ((I * (s.endTime - s.startTime)) /
                                            1e3 /
                                            (k / A / 1e3)) *
                                          i.g.rtpSafetyFactor
                                        : NaN;
                                    isNaN(C) || (u.rtp = C);
                                  }
                                }
                                l &&
                                  u.ot !== Bf &&
                                  (u.tb =
                                    (function (e, t) {
                                      var n = e.h.yb();
                                      if (!n.length) return NaN;
                                      e = n[0];
                                      for (
                                        var i = (n = c(n)).next();
                                        !i.done;
                                        i = n.next()
                                      )
                                        "variant" === (i = i.value).type &&
                                          i.bandwidth > e.bandwidth &&
                                          (e = i);
                                      switch (t) {
                                        case _f:
                                          return e.videoBandwidth || NaN;
                                        case Nf:
                                          return e.audioBandwidth || NaN;
                                        default:
                                          return e.bandwidth;
                                      }
                                    })(i, u.ot) / 1e3),
                                  Ef(i, n, u);
                              }
                            } catch (M) {
                              Y(
                                "CMCD_SEGMENT_ERROR",
                                "Could not generate segment CMCD data.",
                                M
                              );
                            }
                            break;
                          case 2:
                          case 5:
                          case 6:
                            Ef(i, n, { ot: "k" });
                            break;
                          case 4:
                            Ef(i, n, { ot: "o" });
                        }
                  });
                },
                function (n, i, r, a) {
                  (n = t() ? t().l : e.G) && n.banLocation && n.banLocation(a);
                },
                function (n, i) {
                  if (i.data) {
                    i = i.data.byteLength;
                    var r = t() ? t().getStats() : e.A;
                    r &&
                      ((r.Pb = isNaN(r.Pb) ? i : r.Pb + i),
                      0 === n && (r.cg = i));
                  }
                }
              )
            );
          }
          function pp(e, t, n) {
            (e.O = new Ql()),
              (e.O.g = ec),
              gp(e),
              Mp(e),
              (e.pa = new Oe(function () {
                mp(e);
              })),
              e.g.streaming.rebufferingGoal && e.pa.ta(0.25),
              e.l.H(t, "waiting", function () {
                return mp(e);
              }),
              e.l.H(t, "canplaythrough", function () {
                return mp(e);
              }),
              e.l.H(t, "playing", function () {
                return mp(e);
              }),
              e.l.H(t, "seeked", function () {
                return mp(e);
              }),
              n &&
                (e.l.H(t, "stalled", function () {
                  return mp(e);
                }),
                e.l.H(t, "progress", function () {
                  return mp(e);
                }),
                e.l.H(t, "timeupdate", function () {
                  return mp(e);
                }));
          }
          function gp(e) {
            var t = e.g.streaming.rebufferingGoal;
            e.O.i.set(tc, Math.min(0.5, t / 2)).set(ec, t);
          }
          function mp(e) {
            switch (e.m) {
              case ig:
                if (e.vc()) var t = !0;
                else {
                  var n = Rc(e.h.buffered);
                  t = null != n && n >= e.h.duration - 1;
                }
                break;
              case ng:
                e: if (e.vc() || id(e.J)) t = !0;
                else {
                  if (e.i.presentationTimeline.R()) {
                    n = e.i.presentationTimeline.Gb();
                    var i = Rc(e.h.buffered);
                    if (null != i && i >= n) {
                      t = !0;
                      break e;
                    }
                  }
                  t = !1;
                }
                break;
              default:
                t = !1;
            }
            i = _c(e.h.buffered, e.h.currentTime);
            var r = t,
              a = (n = e.O).i.get(n.g);
            (t = n.g),
              (i = r || (i >= a && 0 < i) ? tc : ec),
              (n.g = i),
              (t = t != i) && i === tc && (n.h = Date.now()),
              t && Mp(e);
          }
          function vp(e) {
            if (((e.Md = new Vc(e.g, e.la, e.C)), e.G)) {
              var t = hn(e.g.manifest);
              e.h && "AUDIO" === e.h.nodeName && (t.disableVideo = !0),
                e.G.configure(t);
            }
            if ((e.C && e.C.configure(e.g.drm), e.j)) {
              e.j.configure(e.g.streaming);
              try {
                e.m != eg && qc(e.Md, e.i) && jp(e);
              } catch (r) {
                Kp(e, r);
              }
              e.o && Rp(e),
                !(t = e.j.l) ||
                  (t.allowedByApplication && t.allowedByKeySystem) ||
                  Np(e);
            }
            if (
              (e.D &&
                (e.D.lf(e.g.streaming.forceHTTP),
                e.D.mf(e.g.streaming.forceHTTPS),
                (e.D.o = e.g.streaming.minBytesForProgressEvents)),
              e.J &&
                (e.J.configure(e.g.mediaSource),
                (e.J.Xa = e.g.manifest.segmentRelativeVttTiming)),
              e.s)
            )
              if (((t = e.g.textDisplayFactory), e.ee != t)) {
                var n = e.s;
                if (
                  ((e.s = t()),
                  e.s.configure
                    ? e.s.configure(e.g.textDisplayer)
                    : ne(
                        "Text displayer w/ configure",
                        'Text displayer should have a "configure" method!'
                      ),
                  e.s.setTextLanguage ||
                    ne(
                      "Text displayer w/ setTextLanguage",
                      'Text displayer should have a "setTextLanguage" method!'
                    ),
                  e.s.setTextVisibility(n.isTextVisible()),
                  n.destroy(),
                  e.J)
                ) {
                  n = e.J;
                  var i = e.s;
                  (n.fa = i), n.h && (n.h.j = i);
                }
                (e.ee = t),
                  e.j &&
                    (n = (t = e.j).i.get(Rt)) &&
                    sh(t, n.stream, !0, 0, !0);
              } else e.s.configure && e.s.configure(e.g.textDisplayer);
            e.o &&
              (e.o.configure(e.g.abr),
              e.g.abr.enabled ? e.o.enable() : e.o.disable(),
              zp(e)),
              e.O && gp(e),
              e.pa &&
                (e.g.streaming.rebufferingGoal ? e.pa.ta(0.25) : e.pa.stop()),
              e.i &&
                Jp(
                  e.i.presentationTimeline,
                  e.g.playRangeStart,
                  e.g.playRangeEnd
                ),
              e.B && e.B.configure(e.g.ads),
              e.L && e.L.configure(e.g.cmcd),
              e.ga && e.ga.configure(e.g.cmsd);
          }
          function yp(e) {
            return e && (e = /(\d+)x(\d+)/.exec(e))
              ? { Rb: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
              : null;
          }
          function bp(e, t) {
            var n, i;
            return L(function (r) {
              return 1 == r.g
                ? e.m != ng && e.m != ig
                  ? r.return(null)
                  : ((n = e.ae),
                    e.i && (n = e.i.imageStreams),
                    (i = n[0])
                      ? (null != t &&
                          (i = n.find(function (e) {
                            return e.id == t;
                          })),
                        i
                          ? i.segmentIndex
                            ? r.u(2)
                            : x(r, i.createSegmentIndex(), 2)
                          : r.return(null))
                      : r.return(null))
                : r.return(i);
            });
          }
          function wp(e, t, n, i) {
            var r = t.width || 0,
              a = t.height || 0,
              o = r / i.Rb,
              s = a / i.rows,
              u = i.Rb * i.rows,
              l = e.i - e.startTime;
            l = e.C || l / u;
            var c = e.startTime,
              d = 0,
              h = 0;
            return (
              1 < u &&
                ((h = Math.floor((n - e.startTime) / l)),
                (c = e.startTime + h * l),
                (d = (h % i.Rb) * o),
                (h = Math.floor(h / i.Rb) * s)),
              (i = !1),
              (n = e.thumbnailSprite) &&
                ((i = !0),
                (s = n.height),
                (d = n.positionX),
                (h = n.positionY),
                (o = n.width)),
              {
                segment: e,
                imageHeight: a,
                imageWidth: r,
                height: s,
                positionX: d,
                positionY: h,
                startTime: c,
                duration: l,
                uris: e.T(),
                startByte: e.qc(),
                endByte: e.oc(),
                width: o,
                sprite: i,
                mimeType: e.mimeType || t.mimeType,
                codecs: e.codecs || t.codecs,
              }
            );
          }
          function xp(e, t) {
            e.l.H(t, "cuechange", function () {
              e.s.remove(
                0,
                Math.max(0, e.h.currentTime - e.g.streaming.bufferBehind)
              );
              for (
                var n = {
                    periodStart: 0,
                    segmentStart: 0,
                    segmentEnd: e.h.duration,
                    vttOffset: 0,
                  },
                  i = [],
                  r = Array.from(t.activeCues || []),
                  a = (r = c(r)).next();
                !a.done;
                a = r.next()
              ) {
                if (1 / 0 === (a = a.value).endTime || a.endTime < a.startTime)
                  a = null;
                else {
                  var o = new Wn(a.startTime, a.endTime, a.text);
                  (o.line = "number" == typeof a.line ? a.line : null),
                    a.lineAlign && (o.lineAlign = a.lineAlign),
                    (o.lineInterpretation = a.snapToLines ? si : 1),
                    (o.position =
                      "number" == typeof a.position ? a.position : null),
                    a.positionAlign && (o.positionAlign = a.positionAlign),
                    (o.size = a.size),
                    (o.textAlign = a.align),
                    "lr" === a.vertical
                      ? (o.writingMode = "vertical-lr")
                      : "rl" === a.vertical && (o.writingMode = "vertical-rl"),
                    a.region &&
                      ((o.region.id = a.region.id),
                      (o.region.height = a.region.lines),
                      (o.region.heightUnits = 2),
                      (o.region.regionAnchorX = a.region.regionAnchorX),
                      (o.region.regionAnchorY = a.region.regionAnchorY),
                      (o.region.scroll = a.region.scroll),
                      (o.region.viewportAnchorX = a.region.viewportAnchorX),
                      (o.region.viewportAnchorY = a.region.viewportAnchorY),
                      (o.region.viewportAnchorUnits = en),
                      (o.region.width = a.region.width),
                      (o.region.widthUnits = en)),
                    Jn(o),
                    (a = o);
                }
                a &&
                  ((o = e.g.mediaSource.modifyCueCallback) && o(a, null, n),
                  i.push(a));
              }
              e.s.append(i);
            }),
              (t.mode = document.pictureInPictureElement
                ? "showing"
                : "hidden");
          }
          function Sp(e) {
            return Array.from(e.h.textTracks).filter(function (e) {
              return (
                "metadata" != e.kind &&
                "chapters" != e.kind &&
                "Shaka Player TextTrack" != e.label
              );
            });
          }
          function Tp(e) {
            return Array.from(e.h.textTracks).find(function (e) {
              return "Shaka Player TextTrack" == e.label;
            });
          }
          function Ap(e, t) {
            var n;
            return L(function (i) {
              switch (i.g) {
                case 1:
                  return (
                    T(i, 2), x(i, lf(t, e.D, e.g.streaming.retryParameters), 4)
                  );
                case 4:
                  (n = i.h), A(i, 3);
                  break;
                case 2:
                  k(i);
                case 3:
                  if (n) return i.return(n);
                  throw new Ee(1, 2, 2011, t);
              }
            });
          }
          function kp(e, t, n, i) {
            var r, a, o;
            return L(function (s) {
              if (1 == s.g) {
                (r = os), ((a = ts([t], i)).method = "GET");
                var u = e.L;
                try {
                  u.g.enabled && Ef(u, a, { ot: Of, su: !0 });
                } catch (l) {
                  Y("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", l);
                }
                return x(s, n.request(r, a).promise, 2);
              }
              return (o = s.h), s.return(o.data);
            });
          }
          function Ip(e, t, n, i) {
            var r = zi(n);
            if (r)
              return (
                (n = r()),
                (e = {
                  periodStart: 0,
                  segmentStart: 0,
                  segmentEnd: e.h.duration,
                  vttOffset: 0,
                }),
                (t = ke(t)),
                (function (e, t) {
                  function n(e) {
                    for (
                      var n = e, i = c(t), r = i.next();
                      !r.done;
                      r = i.next()
                    )
                      (r = r.value).end &&
                        r.start < e &&
                        (n += r.end - r.start);
                    return (
                      (10 > (e = Math.floor(n / 3600)) ? "0" : "") +
                      e +
                      ":" +
                      (10 > (i = Math.floor((n / 60) % 60)) ? "0" : "") +
                      i +
                      ":" +
                      (10 > (r = Math.floor(n % 60)) ? "0" : "") +
                      r +
                      "." +
                      (100 > (n = Math.floor((1e3 * n) % 1e3))
                        ? 10 > n
                          ? "00"
                          : "0"
                        : "") +
                      n
                    );
                  }
                  var i = ff(e);
                  e = "WEBVTT\n\n";
                  for (var r = (i = c(i)).next(); !r.done; r = i.next())
                    (e +=
                      n((r = r.value).startTime) +
                      " --\x3e " +
                      n(r.endTime) +
                      (function (e) {
                        var t = [];
                        switch (e.textAlign) {
                          case "left":
                            t.push("align:left");
                            break;
                          case "right":
                            t.push("align:right");
                            break;
                          case ti:
                            t.push("align:middle");
                            break;
                          case "start":
                            t.push("align:start");
                            break;
                          case "end":
                            t.push("align:end");
                        }
                        switch (e.writingMode) {
                          case "vertical-lr":
                            t.push("vertical:lr");
                            break;
                          case "vertical-rl":
                            t.push("vertical:rl");
                        }
                        return t.length ? " " + t.join(" ") : "";
                      })(r) +
                      "\n"),
                      (e += r.payload + "\n\n");
                  return e;
                })((t = n.parseMedia(t, e, null, [])), i)
              );
            throw new Ee(2, 2, 2014, n);
          }
          function Cp(e) {
            var t = Zu();
            return (
              (t.streaming.failureCallback = function (t) {
                if (e.R()) {
                  var n = null;
                  1001 == t.code || 1002 == t.code
                    ? ((n = 1), e.g.streaming.lowLatencyMode && (n = 0.1))
                    : 1003 == t.code && (n = 0.1),
                    null != n && ((t.severity = 1), e.hf(n));
                }
              }),
              (t.textDisplayFactory = function () {
                return !e.Nd || (Ye() && !document.fullscreenEnabled)
                  ? "addTextTrack" in e.h
                    ? new mf(e.h, "Shaka Player TextTrack")
                    : new bf()
                  : new wf(e.h, e.Nd);
              }),
              t
            );
          }
          function Mp(e) {
            var t = e.Zf();
            if (e.A && e.O && e.F) {
              if (0 == e.g.streaming.rebufferingGoal) {
                var n = e.K;
                (n.j = !1), kd(n);
              } else ((n = e.K).j = t), kd(n);
              if (
                (e.L &&
                  ((n = e.L),
                  t || n.s || (n.s = !0),
                  n.s && t && (n.B = !0),
                  (n.D = t)),
                Dp(e),
                (n = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts),
                e.g.streaming.liveSync.dynamicTargetLatency.enabled &&
                  t &&
                  e.jd < n)
              ) {
                n = e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
                var i = e.g.streaming.liveSync.targetLatencyTolerance,
                  r =
                    e.g.streaming.liveSync.dynamicTargetLatency
                      .rebufferIncrement;
                e.W && (e.W = Math.min(e.W + ++e.jd * r, n - i));
              }
            }
            (t = new Map().set("buffering", t)),
              e.dispatchEvent(tp("buffering", t));
          }
          function Ep(e, t) {
            e.ab.qb(),
              e.ab.H(e.h, "timeupdate", function () {
                var n = e.h.currentTime,
                  i = e.La(),
                  r = e.R() ? e.g.streaming.safeSeekOffset : 0;
                0 < t
                  ? Math.floor(n) >= Math.floor(i.end) && e.Hc()
                  : Math.floor(n) <= Math.floor(i.start + r) && e.Hc();
              });
          }
          function Dp(e) {
            if (e.A && e.O) {
              var t = e.A.g,
                n = "playing";
              e.O.g == ec
                ? (n = "buffering")
                : e.vc()
                ? (n = "ended")
                : e.h.paused && (n = "paused");
              var i = n;
              if (null == t.g)
                (t.g = { timestamp: Date.now() / 1e3, state: i, duration: 0 }),
                  (t = !0);
              else {
                var r = Date.now() / 1e3;
                (t.g.duration = r - t.g.timestamp),
                  t.g.state == i
                    ? (t = !1)
                    : (t.h.push(t.g),
                      (t.g = { timestamp: r, state: i, duration: 0 }),
                      (t = !0));
              }
              t &&
                ((n = new Map().set("newstate", n)),
                e.dispatchEvent(tp("statechanged", n)));
            }
          }
          function Pp(e) {
            var t = e.h.playbackRate,
              n = e.R();
            if (e.g.streaming.vodDynamicPlaybackRate && !n) {
              var i = e.g.streaming.vodDynamicPlaybackRateLowBufferRate,
                r = e.Rf();
              r <= e.g.streaming.vodDynamicPlaybackRateBufferRatio
                ? t != i && e.gd(i, !1)
                : 1 == r && t !== e.K.Wb() && e.Hc();
            }
            if (
              n &&
              ((n = e.La()),
              Number.isFinite(n.end) &&
                !(e.h.currentTime < n.start || e.h.paused))
            ) {
              (i = e.g.streaming.liveSync.targetLatencyTolerance),
                (r = e.g.streaming.liveSync.dynamicTargetLatency.enabled);
              var a =
                e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
              if (e.g.streaming.liveSync && e.g.streaming.liveSync.enabled)
                var o = e.g.streaming.liveSync.targetLatency,
                  s = o + i,
                  u = Math.max(0, o - i),
                  l = e.g.streaming.liveSync.maxPlaybackRate,
                  c = e.g.streaming.liveSync.minPlaybackRate;
              else
                e.i &&
                  e.i.serviceDescription &&
                  ((o = e.i.serviceDescription.targetLatency),
                  null != e.i.serviceDescription.targetLatency
                    ? (s = e.i.serviceDescription.targetLatency + i)
                    : null != e.i.serviceDescription.maxLatency &&
                      (s = e.i.serviceDescription.maxLatency),
                  null != e.i.serviceDescription.targetLatency
                    ? (u = Math.max(
                        0,
                        e.i.serviceDescription.targetLatency - i
                      ))
                    : null != e.i.serviceDescription.minLatency &&
                      (u = e.i.serviceDescription.minLatency),
                  (l =
                    e.i.serviceDescription.maxPlaybackRate ||
                    e.g.streaming.liveSync.maxPlaybackRate),
                  (c =
                    e.i.serviceDescription.minPlaybackRate ||
                    e.g.streaming.liveSync.minPlaybackRate));
              e.W || "number" != typeof o || (e.W = o);
              var d = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
              r &&
                e.$a &&
                null !== e.W &&
                "number" == typeof o &&
                e.jd < d &&
                Date.now() - e.$a > 1e3 * a &&
                ((a = e.g.streaming.liveSync.dynamicTargetLatency.minLatency),
                (e.W = Math.max(e.W - (o - a) / 2, a + i)),
                (e.$a = Date.now())),
                r && null !== e.W && ((s = e.W + i), (u = e.W - i)),
                (o = n.end - e.h.currentTime),
                (i = 0),
                e.m == ig &&
                  0 < (r = e.h.buffered).length &&
                  ((i = r.end(r.length - 1)), (i = Math.max(l, i - n.end))),
                (n = e.g.streaming.liveSync.panicMode),
                (r = 1e3 * e.g.streaming.liveSync.panicThreshold),
                (a = Date.now() - e.O.h),
                n && !c && (c = e.g.streaming.liveSync.minPlaybackRate),
                n && c && a <= r
                  ? t != c && e.gd(c, !1)
                  : null != s && l && o - i > s
                  ? (t != l && e.gd(l, !1), (e.$a = null))
                  : null != u && c && o - i < u
                  ? (t != c && e.gd(c, !1), (e.$a = null))
                  : t !== e.K.Wb() && (e.Hc(), (e.$a = Date.now()));
            }
          }
          function Lp(e) {
            if (e.h) {
              var t = function (t, n) {
                  var i = void 0 === i ? Number.EPSILON : i;
                  if (t === n) i = !0;
                  else {
                    var r = Math.abs(t - n);
                    i =
                      r <= i ||
                      (i !== Number.EPSILON &&
                        Math.abs(r - i) <= Number.EPSILON);
                  }
                  return !!((i || n > t) && e.he < t) && ((e.he = t), !0);
                },
                n = e.La();
              if (
                ((n = 0 < (n = n.end - n.start) ? e.h.currentTime / n : 0),
                !isNaN(n))
              ) {
                if (t(0, (n *= 100))) var i = tp("started");
                else
                  t(25, n)
                    ? (i = tp("firstquartile"))
                    : t(50, n)
                    ? (i = tp("midpoint"))
                    : t(75, n)
                    ? (i = tp("thirdquartile"))
                    : (t(100, n) && (i = tp("complete")),
                      e.g &&
                        1 / 0 != e.g.playRangeEnd &&
                        e.vc() &&
                        e.h.pause());
                i && e.dispatchEvent(i);
              }
            }
          }
          function Rp(e) {
            try {
              Wc(e.Md, e.i);
            } catch (n) {
              return Kp(e, n), !1;
            }
            var t = kr(e.i.variants);
            return (
              (t = e.Y.create(t)), e.o.setVariants(Array.from(t.values())), !0
            );
          }
          function Np(e, t, n, i, r) {
            var a;
            (t = void 0 === t || t),
              (n = void 0 === n ? 0 : n),
              (i = void 0 !== i && i),
              (r = void 0 === r || r),
              (a = Rp(e) ? e.o.chooseVariant() : null) && _p(e, a, r, t, n, i);
          }
          function _p(e, t, n, i, r, a) {
            a = void 0 !== a && a;
            var o = e.j.l;
            if (t == o) i && ah(e.j, t, i, r, !0);
            else {
              var s = e.A.h;
              if (
                (s.h != t &&
                  ((s.h = t),
                  s.g.push({
                    timestamp: Date.now() / 1e3,
                    id: t.id,
                    type: "variant",
                    fromAdaptation: n,
                    bandwidth: t.bandwidth,
                  })),
                ah(e.j, t, i, r, a, n),
                (i = null),
                o && (i = yr(o)),
                ((o = yr(t)).active = !0),
                e.S && ((r = e.S), (t = t.video)))
              ) {
                switch (
                  (t.dependencyStream && (t = t.dependencyStream),
                  (a = 0),
                  (s = -1),
                  t.mimeType)
                ) {
                  case "video/webm":
                    a = 1;
                    break;
                  case "video/mp4":
                    a = 2;
                }
                switch (e.Tf()) {
                  case "DASH":
                    s = 1;
                    break;
                  case "HLS":
                    s = 0;
                }
                r.g &&
                  (r.g.setLevelSwitching(t.id, !0),
                  r.g.setContainerFormat(a),
                  r.j || r.g.setStreamingFormat(s));
              }
              n
                ? $p(
                    e,
                    (n = tp(
                      "adaptation",
                      (n = new Map().set("oldTrack", i).set("newTrack", o))
                    ))
                  )
                : Op(e, i, o),
                Bp(e, i, o);
            }
          }
          function Up(e, t) {
            var n = Array.from(e.h.audioTracks).find(function (e) {
              return e.enabled;
            });
            (t.enabled = !0),
              n &&
                (t.id !== n.id && (n.enabled = !1),
                Op(e, (n = Sr(n)), (t = Sr(t))),
                Bp(e, n, t));
          }
          function jp(e) {
            $p(e, tp("trackschanged")), Fp(e);
          }
          function Op(e, t, n) {
            $p(
              e,
              (t = tp(
                "variantchanged",
                (t = new Map().set("oldTrack", t).set("newTrack", n))
              ))
            );
          }
          function Bp(e, t, n) {
            var i = !1;
            (t && t.audioId == n.audioId && t.audioGroupId == n.audioGroupId) ||
              (i = !0),
              i && Fp(e);
          }
          function Fp(e) {
            $p(e, tp("audiotrackschanged"));
          }
          function Hp(e) {
            $p(e, tp("textchanged"));
          }
          function Vp(e) {
            $p(e, tp("texttrackvisibility"));
          }
          function zp(e) {
            e.g.abr.enabled || qp(e),
              $p(
                e,
                tp(
                  "abrstatuschanged",
                  new Map().set("newStatus", e.g.abr.enabled)
                )
              );
          }
          function Gp(e) {
            var t = e.Yb().find(function (e) {
              return e.active;
            });
            t && e.s && e.s.setTextLanguage && e.s.setTextLanguage(t.language);
          }
          function qp(e, t) {
            if (((t = void 0 === t || t), e.m == ng)) {
              e.Td.stop();
              for (var n = c(e.i.variants), i = n.next(); !i.done; i = n.next())
                i.value.disabledUntilTime = 0;
              t && Rp(e);
            }
          }
          function Kp(e, t) {
            var n, i, r, a;
            return L(function (o) {
              switch (o.g) {
                case 1:
                  if (e.m == eg) return o.return();
                  if (
                    (1 === t.severity && e.A.K++,
                    (n = !0),
                    !(e.xa && e.i && e.j) ||
                      (3016 != t.code &&
                        3014 != t.code &&
                        3015 != t.code &&
                        3018 != t.code))
                  ) {
                    o.u(2);
                    break;
                  }
                  return Ye() && 3016 == t.code
                    ? o.return()
                    : (T(o, 3), x(o, Th(e.j), 5));
                case 5:
                  (i = o.h),
                    (n = !i),
                    i && ((r = tp("mediasourcerecovered")), e.dispatchEvent(r)),
                    A(o, 2);
                  break;
                case 3:
                  k(o), (n = !0);
                case 2:
                  if (!n) return o.return();
                  2 === t.severity && qp(e, !1),
                    (a = tp("error", new Map().set("detail", t))),
                    e.dispatchEvent(a),
                    a.defaultPrevented && (t.handled = !0),
                    S(o);
              }
            });
          }
          function Wp(e, t, n, i) {
            (i = void 0 === i ? e : i),
              (e = new Map().set("detail", {
                schemeIdUri: n.schemeIdUri,
                value: n.value,
                startTime: n.startTime,
                endTime: n.endTime,
                id: n.id,
                timescale: n.timescale,
                eventElement: n.eventElement,
                eventNode: n.eventNode,
              })),
              i.dispatchEvent(tp(t, e));
          }
          function Xp(e, t, n, i) {
            (i = void 0 !== i && i),
              (t = new Map()
                .set("mediaQuality", {
                  bandwidth: t.bandwidth,
                  audioSamplingRate: t.audioSamplingRate,
                  codecs: t.codecs,
                  contentType: t.contentType,
                  frameRate: t.frameRate,
                  height: t.height,
                  mimeType: t.mimeType,
                  channelsCount: t.channelsCount,
                  pixelAspectRatio: t.pixelAspectRatio,
                  width: t.width,
                  label: t.label,
                  roles: t.roles,
                  language: t.language,
                })
                .set("position", n)),
              e.dispatchEvent(
                tp(i ? "audiotrackchanged" : "mediaqualitychanged", t)
              );
          }
          function Yp(e, t) {
            if (((t = void 0 === t || t), !e.h.error))
              return t ? new Ee(2, 3, 3016) : null;
            var n = e.h.error.code;
            return t || 1 != n
              ? ((t = e.h.error.msExtendedCode) &&
                  (0 > t && (t += Math.pow(2, 32)), (t = t.toString(16))),
                new Ee(2, 3, 3016, n, t, e.h.error.message))
              : null;
          }
          function Jp(e, t, n) {
            0 < t && (e.R() || e.Bg(t)),
              n < (t = e.getDuration()) && (e.R() || e.nb(n));
          }
          function $p(e, t) {
            L(function (n) {
              if (1 == n.g) return x(n, Promise.resolve(), 2);
              e.m != eg && e.dispatchEvent(t), S(n);
            });
          }
          function Zp(e) {
            for (
              var t = new Set(), n = (e = c(e)).next();
              !n.done;
              n = e.next()
            )
              (n = n.value).language ? t.add(nr(n.language)) : t.add("und");
            return t;
          }
          function Qp(e) {
            for (
              var t = new Map(), n = new Map(), i = (e = c(e)).next();
              !i.done;
              i = e.next()
            ) {
              var r = "und",
                a = [];
              (i = i.value).language && (r = nr(i.language)),
                ((a = "variant" == i.type ? i.audioRoles : i.roles) &&
                  a.length) ||
                  (a = [""]),
                t.has(r) || t.set(r, new Set());
              for (var o = (a = c(a)).next(); !o.done; o = a.next())
                (o = o.value),
                  t.get(r).add(o),
                  i.label &&
                    (n.has(r) || n.set(r, new Map()), n.get(r).set(o, i.label));
            }
            var s = [];
            return (
              t.forEach(function (e, t) {
                for (var i = (e = c(e)).next(); !i.done; i = e.next()) {
                  i = i.value;
                  var r = null;
                  n.has(t) && n.get(t).has(i) && (r = n.get(t).get(i)),
                    s.push({ language: t, role: i, label: r });
                }
              }),
              s
            );
          }
          ($f.prototype.release = function () {
            0 < this.h.length ? this.h.shift()() : (this.g = null);
          }),
            v(Qf, Jo),
            ((i = Qf.prototype).destroy = function () {
              var e,
                t = this;
              return L(function (n) {
                switch (n.g) {
                  case 1:
                    return t.m == eg
                      ? n.return()
                      : (ep(t), (e = t.detach()), (t.m = eg), x(n, e, 2));
                  case 2:
                    return x(n, t.Mf(), 3);
                  case 3:
                    if (
                      (t.ce && (t.ce.release(), (t.ce = null)),
                      t.Wc && (t.Wc.release(), (t.Wc = null)),
                      t.l && (t.l.release(), (t.l = null)),
                      t.ab && (t.ab.release(), (t.ab = null)),
                      t.rc && (t.rc.release(), (t.rc = null)),
                      (t.Ma = null),
                      (t.g = null),
                      (t.A = null),
                      (t.Nd = null),
                      (t.L = null),
                      (t.ga = null),
                      !t.D)
                    ) {
                      n.u(4);
                      break;
                    }
                    return x(n, t.D.destroy(), 5);
                  case 5:
                    t.D = null;
                  case 4:
                    t.o && (t.o.release(), (t.o = null)),
                      Jo.prototype.release.call(t),
                      S(n);
                }
              });
            }),
            (i.Cb = function (e, t) {
              t = void 0 === t || t;
              var n,
                i,
                r,
                a = this;
              return L(function (o) {
                switch (o.g) {
                  case 1:
                    if (a.m == eg) throw new Ee(2, 7, 7e3);
                    if (((n = a.h && a.h == e), !a.h || a.h == e)) {
                      o.u(2);
                      break;
                    }
                    return x(o, a.detach(), 2);
                  case 2:
                    return x(o, ip(a, "attach"), 4);
                  case 4:
                    if (o.h) return o.return();
                    if (
                      (T(o, 5, 6),
                      n ||
                        (np(a, "attach"),
                        (i = function () {
                          var e = Yp(a, !1);
                          e && Kp(a, e);
                        }),
                        a.Wc.H(e, "error", i),
                        (a.h = e),
                        a.L && a.L.setMediaElement(e)),
                      !t || !Be() || a.J)
                    ) {
                      o.u(6);
                      break;
                    }
                    return x(o, lp(a), 6);
                  case 6:
                    I(o), a.da.release(), C(o, 0);
                    break;
                  case 5:
                    return (r = k(o)), x(o, a.detach(), 10);
                  case 10:
                    throw r;
                }
              });
            }),
            (i.Sg = function (e) {
              this.Bf = e;
            }),
            (i.detach = function (e) {
              e = void 0 !== e && e;
              var t = this;
              return L(function (n) {
                if (1 == n.g) {
                  if (t.m == eg) throw new Ee(2, 7, 7e3);
                  return x(n, t.hd(!1, e), 2);
                }
                if (3 != n.g) return x(n, ip(t, "detach"), 3);
                if (n.h) return n.return();
                try {
                  t.h && (t.Wc.qb(), (t.h = null)),
                    np(t, "detach"),
                    t.B && !e && t.B.release();
                } finally {
                  t.da.release();
                }
                S(n);
              });
            }),
            (i.hd = function (t, n) {
              (t = void 0 === t || t), (n = void 0 !== n && n);
              var i,
                r,
                a,
                o,
                s,
                u,
                l,
                d,
                h,
                f,
                p = this;
              return L(function (g) {
                switch (g.g) {
                  case 1:
                    return p.m != eg && (p.m = tg), x(g, ip(p, "unload"), 2);
                  case 2:
                    return g.h
                      ? g.return()
                      : ((g.l = 0),
                        (g.j = 3),
                        (p.xa = !1),
                        np(p, "unload"),
                        ep(p),
                        (i = p.Yc.map(function (e) {
                          return e();
                        })),
                        (p.Yc = []),
                        x(g, Promise.all(i), 5));
                  case 5:
                    if (
                      (p.dispatchEvent(tp("unloading")),
                      p.Vc && (p.Vc.release(), (p.Vc = null)),
                      p.Aa && (p.Aa.release(), (p.Aa = null)),
                      p.Oa && (p.Oa.release(), (p.Oa = null)),
                      p.h && (p.l.qb(), p.ab.qb()),
                      p.Td.stop(),
                      p.Ya && (p.Ya.release(), (p.Ya = null)),
                      p.pa && (p.pa.stop(), (p.pa = null)),
                      !p.G)
                    ) {
                      g.u(6);
                      break;
                    }
                    return x(g, p.G.stop(), 7);
                  case 7:
                    (p.G = null), (p.nc = null);
                  case 6:
                    if (!p.o) {
                      g.u(8);
                      break;
                    }
                    return x(g, p.o.stop(), 8);
                  case 8:
                    if (!p.j) {
                      g.u(10);
                      break;
                    }
                    return x(g, p.j.destroy(), 11);
                  case 11:
                    p.j = null;
                  case 10:
                    if (
                      (p.K && (p.K.release(), (p.K = null)),
                      p.F && (p.F.release(), (p.F = null)),
                      "webkit" !== e.shakaMediaKeysPolyfill || !p.C)
                    ) {
                      g.u(12);
                      break;
                    }
                    return x(g, p.C.destroy(), 13);
                  case 13:
                    p.C = null;
                  case 12:
                    if (!p.J) {
                      g.u(14);
                      break;
                    }
                    return x(g, p.J.destroy(), 15);
                  case 15:
                    p.J = null;
                  case 14:
                    if (
                      (p.B && !n && p.B.onAssetUnload(),
                      p.fa && !n && (p.fa.destroy(), (p.fa = null)),
                      n || p.je.stop(),
                      p.L &&
                        (function (e) {
                          (e.s = !1),
                            (e.D = !0),
                            (e.B = !1),
                            (e.l = !1),
                            (e.m = 0),
                            (e.o = 0),
                            (e.A = 0),
                            (e.F = !1),
                            (e.j = null),
                            e.C.qb();
                        })(p.L),
                      p.ga && (p.ga.g = null),
                      !p.s)
                    ) {
                      g.u(16);
                      break;
                    }
                    return x(g, p.s.destroy(), 17);
                  case 17:
                    p.s = null;
                  case 16:
                    if (
                      (p.h &&
                        ($c(p.h),
                        p.h.src && (p.h.removeAttribute("src"), p.h.load())),
                      !p.C)
                    ) {
                      g.u(18);
                      break;
                    }
                    return x(g, p.C.destroy(), 19);
                  case 19:
                    p.C = null;
                  case 18:
                    if (
                      (p.za &&
                        p.X != p.za.qd() &&
                        (p.za.s || p.za.destroy(), (p.za = null)),
                      (p.X = null),
                      (p.mc = null),
                      (p.O = null),
                      p.i)
                    ) {
                      for (
                        r = c(p.i.variants), a = r.next();
                        !a.done;
                        a = r.next()
                      )
                        for (
                          o = a.value, s = c([o.audio, o.video]), u = s.next();
                          !u.done;
                          u = s.next()
                        )
                          (l = u.value) &&
                            l.segmentIndex &&
                            l.segmentIndex.release();
                      for (
                        d = c(p.i.textStreams), h = d.next();
                        !h.done;
                        h = d.next()
                      )
                        (f = h.value).segmentIndex && f.segmentIndex.release();
                    }
                    p.g &&
                      p.g.streaming.clearDecodingCache &&
                      (Pr.clear(), Ue.clear()),
                      (p.i = null),
                      (p.A = new Eh()),
                      (p.ee = null),
                      (p.$a = null),
                      (p.W = null),
                      (p.jd = -1),
                      (p.ae = []),
                      (p.dd = []),
                      (p.he = -1),
                      p.D && p.D.Jf(),
                      Mp(p);
                  case 3:
                    I(g), p.da.release(), C(g, 4);
                    break;
                  case 4:
                    if (t && Be() && !p.J && p.h) return x(g, lp(p), 0);
                    g.u(0);
                }
              });
            }),
            (i.Fi = function (e) {
              this.ca = e;
            }),
            (i.load = function (t, n, i) {
              n = void 0 === n ? null : n;
              var r,
                a,
                o,
                s,
                u,
                l,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b = this;
              return L(function (w) {
                switch (w.g) {
                  case 1:
                    if (b.m == eg) throw new Ee(2, 7, 7e3);
                    if (((r = null), (a = ""), t instanceof Dh)) {
                      if (t.s) throw new Ee(2, 7, 7006);
                      a = (r = t).qd() || "";
                    } else a = t || "";
                    return x(w, Zf(b.da, "load"), 2);
                  case 2:
                    if ((b.da.release(), !b.h)) throw new Ee(2, 7, 7002);
                    if (!b.X) {
                      w.u(3);
                      break;
                    }
                    return (b.X = a), x(w, b.hd(!1), 3);
                  case 3:
                    if (
                      ((o = ++b.ge),
                      (s = function () {
                        return L(function (e) {
                          if (1 == e.g)
                            return b.ge == o
                              ? e.u(0)
                              : r
                              ? x(e, r.destroy(), 3)
                              : e.u(3);
                          throw new Ee(2, 7, 7e3);
                        });
                      }),
                      (u = function (e, t) {
                        return L(function (n) {
                          switch (n.g) {
                            case 1:
                              return (n.l = 0), (n.j = 2), x(n, Zf(b.da, t), 4);
                            case 4:
                              return x(n, s(), 5);
                            case 5:
                              return x(n, e(), 6);
                            case 6:
                              return x(n, s(), 7);
                            case 7:
                              r && b.g && (r.g = b.g);
                            case 2:
                              I(n), b.da.release(), C(n, 0);
                          }
                        });
                      }),
                      T(w, 5, 6),
                      null == n && r && (n = r.getStartTime()),
                      (b.ca = n),
                      (b.xa = !1),
                      b.dispatchEvent(tp("loading")),
                      r)
                    ) {
                      (i = r.ca), w.u(8);
                      break;
                    }
                    if (i) {
                      w.u(8);
                      break;
                    }
                    return x(
                      w,
                      u(function () {
                        return L(function (e) {
                          if (1 == e.g) return x(e, sp(b, a), 2);
                          (i = e.h), S(e);
                        });
                      }, "guessMimeType_"),
                      8
                    );
                  case 8:
                    if (((l = !!r), r)) {
                      Lh(r, b), (b.A = r.getStats()), w.u(11);
                      break;
                    }
                    return x(w, ap(b, a, n, i, !0), 12);
                  case 12:
                    (r = w.h)
                      ? ((r.A = !1),
                        Lh(r, b),
                        (b.A = r.getStats()),
                        r.start(),
                        r.m.catch(function () {}))
                      : (b.A = new Eh());
                  case 11:
                    return (
                      (d = !r),
                      (h = Date.now() / 1e3),
                      (b.A = r ? r.getStats() : new Eh()),
                      (b.X = a),
                      (b.mc = i || null),
                      Mp(b),
                      (f = function () {
                        var e = b.hb(),
                          t = { start: 0, end: 0 };
                        if (e.total.length) {
                          t.start = 1 / 0;
                          for (
                            var n = (e = c(e.total)).next();
                            !n.done;
                            n = e.next()
                          )
                            (n = n.value).start < t.start &&
                              (t.start = n.start),
                              n.end > t.end && (t.end = n.end);
                        }
                        return t;
                      }),
                      (b.Aa = new Gd(f)),
                      d
                        ? x(
                            w,
                            u(function () {
                              return L(function (e) {
                                return x(
                                  e,
                                  (function (e, t) {
                                    var n, i, r, a, o;
                                    return L(function (s) {
                                      return 1 == s.g
                                        ? ((n = Nt),
                                          (i = Date.now() / 1e3),
                                          (r = !0),
                                          (e.C = e.od({
                                            cc: e.D,
                                            onError: function (t) {
                                              Kp(e, t);
                                            },
                                            kg: function () {},
                                            onExpirationUpdated: function () {
                                              var t = tp("expirationupdated");
                                              e.dispatchEvent(t);
                                            },
                                            onEvent: function (t) {
                                              e.dispatchEvent(t),
                                                "drmsessionupdate" == t.type &&
                                                  r &&
                                                  ((r = !1),
                                                  (e.A.j =
                                                    Date.now() / 1e3 - i));
                                            },
                                          })),
                                          e.C.configure(e.g.drm),
                                          (a = {
                                            id: 0,
                                            language: "und",
                                            disabledUntilTime: 0,
                                            primary: !1,
                                            audio: null,
                                            video: null,
                                            bandwidth: 100,
                                            allowedByApplication: !0,
                                            allowedByKeySystem: !0,
                                            decodingInfos: [],
                                          }),
                                          (o = {
                                            id: 0,
                                            originalId: null,
                                            groupId: null,
                                            createSegmentIndex: function () {
                                              return Promise.resolve();
                                            },
                                            segmentIndex: null,
                                            mimeType: t ? _i(t) : "",
                                            codecs: t ? Ui(t) : "",
                                            encrypted: !0,
                                            drmInfos: [],
                                            keyIds: new Set(),
                                            language: "und",
                                            originalLanguage: null,
                                            label: null,
                                            type: n.ja,
                                            primary: !1,
                                            trickModeVideo: null,
                                            dependencyStream: null,
                                            emsgSchemeIdUris: null,
                                            roles: [],
                                            forced: !1,
                                            channelsCount: null,
                                            audioSamplingRate: null,
                                            spatialAudio: !1,
                                            closedCaptions: null,
                                            accessibilityPurpose: null,
                                            external: !1,
                                            fastSwitching: !1,
                                            fullMimeTypes: new Set(),
                                            isAudioMuxedInVideo: !1,
                                            baseOriginalId: null,
                                          }).fullMimeTypes.add(
                                            Mi(o.mimeType, o.codecs)
                                          ),
                                          t.startsWith("audio/")
                                            ? ((o.type = n.P), (a.audio = o))
                                            : (a.video = o),
                                          (e.C.ca = !0),
                                          x(s, jl(e.C, [a], []), 2))
                                        : x(s, e.C.Cb(e.h), 0);
                                    });
                                  })(b, i),
                                  0
                                );
                              });
                            }, "initializeSrcEqualsDrmInner_"),
                            23
                          )
                        : ((b.Oa = new Gd(f)),
                          x(
                            w,
                            u(function () {
                              return L(function (e) {
                                if (1 == e.g)
                                  return x(e, Promise.race([r.oa, r.m]), 2);
                                b.nc = r.F;
                                var t = r;
                                (t.pa = !0), (b.G = t.l), (b.i = r.Oe()), S(e);
                              });
                            }, "waitForFinish"),
                            15
                          ))
                    );
                  case 15:
                    if (b.J) {
                      w.u(16);
                      break;
                    }
                    return x(
                      w,
                      u(function () {
                        return L(function (e) {
                          return x(e, lp(b), 0);
                        });
                      }, "initializeMediaSourceEngineInner_"),
                      16
                    );
                  case 16:
                    return (
                      b.i &&
                        b.i.textStreams.length &&
                        (b.s.enableTextDisplayer
                          ? b.s.enableTextDisplayer()
                          : ne(
                              "Text displayer w/ enableTextDisplayer",
                              'Text displayer should have a "enableTextDisplayer" method!'
                            )),
                      x(
                        w,
                        u(function () {
                          return L(function (e) {
                            return x(e, r.m, 0);
                          });
                        }, "waitForFinish"),
                        18
                      )
                    );
                  case 18:
                    if (
                      ((b.g = r.getConfiguration()),
                      (b.Md = r.D),
                      b.G &&
                        b.G.setMediaElement &&
                        b.h &&
                        b.G.setMediaElement(b.h),
                      (b.Vc = (function (e) {
                        return (e.xa = !0), e.G;
                      })(r)),
                      (b.Uc = r.Oa),
                      (p = r.o) && (b.Y = p),
                      l &&
                        b.h &&
                        "AUDIO" === b.h.nodeName &&
                        ((function (e) {
                          for (
                            var t = c(e.i.variants), n = t.next();
                            !n.done;
                            n = t.next()
                          )
                            (n = n.value).video &&
                              (n.video.closeSegmentIndex(), (n.video = null)),
                              (n.bandwidth =
                                n.audio && n.audio.bandwidth
                                  ? n.audio.bandwidth
                                  : 0);
                          e.i.variants = e.i.variants.filter(function (e) {
                            return e.audio;
                          });
                        })(b),
                        b.configure("manifest.disableVideo", !0)),
                      r.i)
                    ) {
                      w.u(19);
                      break;
                    }
                    return x(
                      w,
                      u(function () {
                        return L(function (e) {
                          return x(e, _h(r, b.h), 0);
                        });
                      }, "drmEngine_.init"),
                      19
                    );
                  case 19:
                    return (
                      (b.C = (function (e) {
                        return (e.la = !0), e.i;
                      })(r)),
                      x(
                        w,
                        u(function () {
                          return L(function (e) {
                            return x(e, b.C.Cb(b.h), 0);
                          });
                        }, "drmEngine_.attach"),
                        21
                      )
                    );
                  case 21:
                    return (
                      !(g = r.C) ||
                        (b.Ma && b.Ma == g) ||
                        ((b.o = (function (e) {
                          return (e.fa = !0), e.j;
                        })(r)),
                        (b.Ma = r.C),
                        "function" != typeof b.o.setMediaElement &&
                          (ne(
                            "AbrManager w/o setMediaElement",
                            "Please use an AbrManager with setMediaElement function."
                          ),
                          (b.o.setMediaElement = function () {})),
                        "function" != typeof b.o.setCmsdManager &&
                          (ne(
                            "AbrManager w/o setCmsdManager",
                            "Please use an AbrManager with setCmsdManager function."
                          ),
                          (b.o.setCmsdManager = function () {})),
                        "function" != typeof b.o.trySuggestStreams &&
                          (ne(
                            "AbrManager w/o trySuggestStreams",
                            "Please use an AbrManager with trySuggestStreams function."
                          ),
                          (b.o.trySuggestStreams = function () {}))),
                      (m = (function (e) {
                        return (e.Aa = !0), e.O;
                      })(r)),
                      (v = r.K),
                      x(
                        w,
                        u(function () {
                          return L(function (e) {
                            return x(
                              e,
                              (function (e, t, n, i) {
                                var r,
                                  a,
                                  o,
                                  s,
                                  u,
                                  l,
                                  d,
                                  h,
                                  f,
                                  p,
                                  g,
                                  m,
                                  v,
                                  y,
                                  b,
                                  w,
                                  T,
                                  A,
                                  k,
                                  I,
                                  C,
                                  M,
                                  E,
                                  D,
                                  P;
                                return L(function (R) {
                                  switch (R.g) {
                                    case 1:
                                      for (
                                        np(e, "load"),
                                          r = e.h,
                                          e.K = new Ad({
                                            ud: function () {
                                              return r.playbackRate;
                                            },
                                            Wb: function () {
                                              return r.defaultPlaybackRate;
                                            },
                                            nf: function (e) {
                                              r.playbackRate = e;
                                            },
                                            fg: function (e) {
                                              r.currentTime += e;
                                            },
                                          }),
                                          cp(e, r, t),
                                          a = !1,
                                          o = c(e.i.variants),
                                          s = o.next();
                                        !s.done;
                                        s = o.next()
                                      )
                                        (u = s.value),
                                          (l =
                                            u.video &&
                                            u.video.dependencyStream) &&
                                            (a = Ft(l));
                                      !(function (e, t, n) {
                                        n || t.lcevc.enabled
                                          ? (ep(e),
                                            null == e.S &&
                                              ((e.S = new jt(
                                                e.h,
                                                e.Bf,
                                                t.lcevc,
                                                n
                                              )),
                                              e.J && (e.J.K = e.S)))
                                          : ep(e);
                                      })(e, e.g, a),
                                        (e.tc = e.g.preferredTextLanguage),
                                        (e.bd = e.g.preferredTextRole),
                                        (e.$c = e.g.preferForcedSubs),
                                        Jp(
                                          e.i.presentationTimeline,
                                          e.g.playRangeStart,
                                          e.g.playRangeEnd
                                        ),
                                        e.o.init(function (t, n, i) {
                                          e.i &&
                                            e.j &&
                                            t != e.j.l &&
                                            _p(
                                              e,
                                              t,
                                              !0,
                                              void 0 !== n && n,
                                              void 0 === i ? 0 : i
                                            );
                                        }),
                                        e.o.setMediaElement(r),
                                        e.o.setCmsdManager(e.ga),
                                        (e.j = (function (e) {
                                          return new ih(e.i, {
                                            pc: function () {
                                              return e.F ? e.F.kd() : 0;
                                            },
                                            getBandwidthEstimate: function () {
                                              return e.o.getBandwidthEstimate();
                                            },
                                            Ra: function () {
                                              return e.Ra();
                                            },
                                            video: e.h,
                                            U: e.J,
                                            cc: e.D,
                                            onError: function (t) {
                                              return Kp(e, t);
                                            },
                                            onEvent: function (t) {
                                              return e.dispatchEvent(t);
                                            },
                                            Jd: function (t, n, i) {
                                              var r = t.startTime;
                                              if (
                                                ((t = t.endTime),
                                                (n = n.type) != Rt)
                                              ) {
                                                if (e.F) {
                                                  e.F.hg();
                                                  var a = ad(e.J, n);
                                                  !e.R() &&
                                                    e.h.paused &&
                                                    !e.h.seeking &&
                                                    null != a &&
                                                    0 < a &&
                                                    e.F.kd() < a &&
                                                    e.F.le(a);
                                                }
                                                mp(e);
                                              }
                                              (i = new Map()
                                                .set("start", r)
                                                .set("end", t)
                                                .set("contentType", n)
                                                .set("isMuxed", i)),
                                                e.dispatchEvent(
                                                  tp("segmentappended", i)
                                                );
                                            },
                                            bi: function (t, n) {
                                              (n = n.We) &&
                                                e.Uc &&
                                                (function (e, t, n) {
                                                  var i = (function (e, t) {
                                                    var n = e.g.get(t);
                                                    return (
                                                      n ||
                                                        ((n = {
                                                          ed: [],
                                                          we: null,
                                                          contentType: t,
                                                        }),
                                                        e.g.set(t, n)),
                                                      n
                                                    );
                                                  })(e, t.contentType);
                                                  !(function (e, t) {
                                                    if (
                                                      (e =
                                                        e.h()[t.contentType]) &&
                                                      0 < e.length
                                                    ) {
                                                      var n = e[0].start,
                                                        i = e[e.length - 1].end,
                                                        r = t.ed;
                                                      t.ed = r.filter(function (
                                                        e,
                                                        t
                                                      ) {
                                                        return !(
                                                          (e.position <= n &&
                                                            t + 1 < r.length &&
                                                            r[t + 1].position <=
                                                              n) ||
                                                          e.position >= i
                                                        );
                                                      });
                                                    } else t.ed = [];
                                                  })(e, i),
                                                    (e = {
                                                      We: t,
                                                      position: n,
                                                    }),
                                                    0 <=
                                                    (t = (i = i.ed).findIndex(
                                                      function (e) {
                                                        return e.position >= n;
                                                      }
                                                    ))
                                                      ? i.splice(
                                                          t,
                                                          i[t].position == n
                                                            ? 1
                                                            : 0,
                                                          e
                                                        )
                                                      : i.push(e);
                                                })(e.Uc, n, t);
                                            },
                                            Hf: function (t, n) {
                                              var i = e.C;
                                              if (
                                                i.g.parseInbandPsshEnabled &&
                                                !i.D &&
                                                ["audio", "video"].includes(t)
                                              ) {
                                                (t = new No(ke(n))), (n = 0);
                                                for (
                                                  var r = c(t.data),
                                                    a = r.next();
                                                  !a.done;
                                                  a = r.next()
                                                )
                                                  n += a.value.length;
                                                if (0 == n)
                                                  i = Promise.resolve();
                                                else {
                                                  for (
                                                    n = new Uint8Array(n),
                                                      r = 0,
                                                      a = (t = c(
                                                        t.data
                                                      )).next();
                                                    !a.done;
                                                    a = t.next()
                                                  )
                                                    (a = a.value),
                                                      n.set(a, r),
                                                      (r += a.length);
                                                  Bl(i, "cenc", n), (i = i.m);
                                                }
                                              } else i = Promise.resolve();
                                              return i;
                                            },
                                            disableStream: function (t, n) {
                                              return e.disableStream(t, n);
                                            },
                                          });
                                        })(e)),
                                        e.j.configure(e.g.streaming),
                                        (e.m = ng),
                                        e.dispatchEvent(tp("streaming")),
                                        (d = n);
                                    case 2:
                                      for (
                                        (f = e.j.l) ||
                                          d ||
                                          (d = Rp(e)
                                            ? e.o.chooseVariant()
                                            : null),
                                          p = [],
                                          g = c([(h = f || d).video, h.audio]),
                                          m = g.next();
                                        !m.done;
                                        m = g.next()
                                      )
                                        (v = m.value) &&
                                          !v.segmentIndex &&
                                          (p.push(v.createSegmentIndex()),
                                          v.dependencyStream &&
                                            p.push(
                                              v.dependencyStream.createSegmentIndex()
                                            ));
                                      if (!(0 < p.length)) {
                                        R.u(4);
                                        break;
                                      }
                                      return x(R, Promise.all(p), 4);
                                    case 4:
                                      if (!h || 0 != h.disabledUntilTime) {
                                        R.u(2);
                                        break;
                                      }
                                      if (
                                        (e.G &&
                                          e.G.onInitialVariantChosen &&
                                          e.G.onInitialVariantChosen(h),
                                        e.i.isLowLatency &&
                                          (e.g.streaming.lowLatencyMode
                                            ? e.configure(e.ie)
                                            : X(
                                                "Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."
                                              )),
                                        e.L &&
                                          ((function (e, t) {
                                            (e.l = t),
                                              e.l
                                                ? e.i == Hf
                                                  ? (e.i = Vf)
                                                  : e.i == zf && (e.i = Gf)
                                                : e.i == Vf
                                                ? (e.i = Hf)
                                                : e.i == Gf && (e.i = zf);
                                          })(
                                            e.L,
                                            e.i.isLowLatency &&
                                              e.g.streaming.lowLatencyMode
                                          ),
                                          (function (e, t) {
                                            if (
                                              e.g &&
                                              e.g.enabled &&
                                              e.g.version == Ff &&
                                              e.j &&
                                              e.j.autoplay
                                            ) {
                                              var n = e.j.play();
                                              n &&
                                                n
                                                  .then(function () {
                                                    e.A = t;
                                                  })
                                                  .catch(function () {
                                                    e.A = 0;
                                                  });
                                            }
                                          })(e.L, 1e3 * t)),
                                        Jp(
                                          e.i.presentationTimeline,
                                          e.g.playRangeStart,
                                          e.g.playRangeEnd
                                        ),
                                        (function (e, t, n) {
                                          e.j.presentationTimeline.R() ||
                                            ((e.Y = t), (e.X = n));
                                        })(
                                          e.j,
                                          e.g.playRangeStart,
                                          e.g.playRangeEnd
                                        ),
                                        (y = function (t) {
                                          (e.F = (function (e, t) {
                                            return new Ud(
                                              e.h,
                                              e.i,
                                              e.g.streaming,
                                              t,
                                              function () {
                                                e.Ya && Hd(e.Ya, !0),
                                                  e.j && e.j.fc(),
                                                  e.O && mp(e);
                                              },
                                              function (t) {
                                                return e.dispatchEvent(t);
                                              }
                                            );
                                          })(e, t)),
                                            (e.Ya = (function (e, t) {
                                              var n = e.R() || 0 < t;
                                              (t = new jh(e.Vc, n)),
                                                t.addEventListener(
                                                  "enter",
                                                  function (t) {
                                                    Wp(
                                                      e,
                                                      "timelineregionenter",
                                                      t.region
                                                    );
                                                  }
                                                ),
                                                t.addEventListener(
                                                  "exit",
                                                  function (t) {
                                                    Wp(
                                                      e,
                                                      "timelineregionexit",
                                                      t.region
                                                    );
                                                  }
                                                ),
                                                t.addEventListener(
                                                  "skip",
                                                  function (t) {
                                                    var n = t.region;
                                                    t.seeking ||
                                                      (Wp(
                                                        e,
                                                        "timelineregionenter",
                                                        n
                                                      ),
                                                      Wp(
                                                        e,
                                                        "timelineregionexit",
                                                        n
                                                      ));
                                                  }
                                                );
                                              var i = new jh(e.Aa, n);
                                              i.addEventListener(
                                                "enter",
                                                function (t) {
                                                  dp(e, t.region);
                                                }
                                              ),
                                                (n = new jh(e.Oa, n)),
                                                n.addEventListener(
                                                  "enter",
                                                  function (t) {
                                                    (t = new Map().set(
                                                      "detail",
                                                      t.region.emsg
                                                    )),
                                                      e.dispatchEvent(
                                                        tp("emsg", t)
                                                      );
                                                  }
                                                );
                                              var r = new Fd(e.h);
                                              return (
                                                r.g.add(t),
                                                r.g.add(i),
                                                r.g.add(n),
                                                e.Uc && r.g.add(e.Uc),
                                                r
                                              );
                                            })(e, t)),
                                            pp(e, r, !1);
                                        }),
                                        e.g.streaming.startAtSegmentBoundary ||
                                          (null == (b = e.ca) &&
                                            e.i.startTime &&
                                            (b = e.i.startTime),
                                          y(b)),
                                        f)
                                      ) {
                                        R.u(7);
                                        break;
                                      }
                                      if (
                                        !e.g.streaming.startAtSegmentBoundary
                                      ) {
                                        R.u(8);
                                        break;
                                      }
                                      return (
                                        (w = e.i.presentationTimeline),
                                        (T = e.ca || e.h.currentTime),
                                        null == e.ca &&
                                          e.i.startTime &&
                                          (T = e.i.startTime),
                                        (A = w.pb()),
                                        (k = w.bb()),
                                        T < A ? (T = A) : T > k && (T = k),
                                        x(
                                          R,
                                          (function (e, t) {
                                            var n, i, r, a, o;
                                            return L(function (s) {
                                              return 1 == s.g
                                                ? ((n = e.audio),
                                                  (i = e.video),
                                                  (r = function (e, t) {
                                                    var n, i, r;
                                                    return L(function (a) {
                                                      return 1 == a.g
                                                        ? e
                                                          ? e.segmentIndex
                                                            ? a.u(2)
                                                            : x(
                                                                a,
                                                                e.createSegmentIndex(),
                                                                2
                                                              )
                                                          : a.return(null)
                                                        : (i = (n =
                                                            e.segmentIndex.ob(
                                                              t
                                                            ))
                                                            ? n.next().value
                                                            : null)
                                                        ? ((r = i.startTime),
                                                          a.return(r))
                                                        : a.return(null);
                                                    });
                                                  }),
                                                  x(s, r(n, t), 2))
                                                : 3 != s.g
                                                ? ((a = s.h), x(s, r(i, t), 3))
                                                : null != (o = s.h) && null != a
                                                ? s.return(Math.max(o, a))
                                                : null != o
                                                ? s.return(o)
                                                : null != a
                                                ? s.return(a)
                                                : s.return(t);
                                            });
                                          })(d, T),
                                          9
                                        )
                                      );
                                    case 9:
                                      (I = R.h), y(I);
                                    case 8:
                                      _p(e, d, !0, !1, 0);
                                    case 7:
                                      return (
                                        e.F.ready(),
                                        e.Yb().find(function (e) {
                                          return e.active;
                                        }) ||
                                          ((C =
                                            Ir(
                                              e.i.textStreams,
                                              e.tc,
                                              e.bd,
                                              e.$c
                                            )[0] || null) && Mh(e.A.h, C, !0),
                                          d &&
                                            (C
                                              ? (Dr(d.audio, C, e.g) &&
                                                  (e.oa = !0),
                                                e.oa &&
                                                  e.s.setTextVisibility(!0))
                                              : ((e.oa = !1),
                                                e.s.setTextVisibility(!1)),
                                            Vp(e)),
                                          C &&
                                            (e.g.streaming.alwaysStreamText ||
                                              e.Ue()) &&
                                            (oh(e.j, C), Gp(e))),
                                        x(R, e.j.start(i), 10)
                                      );
                                    case 10:
                                      e.g.abr.enabled && (e.o.enable(), zp(e)),
                                        jp(e),
                                        Rp(e),
                                        e.i.variants.some(function (e) {
                                          return e.primary;
                                        }),
                                        (((M = e.R()) &&
                                          ((e.g.streaming.liveSync &&
                                            e.g.streaming.liveSync.enabled) ||
                                            e.i.serviceDescription ||
                                            e.g.streaming.liveSync
                                              .panicMode)) ||
                                          e.g.streaming
                                            .vodDynamicPlaybackRate) &&
                                          ((E = function () {
                                            return Pp(e);
                                          }),
                                          e.l.H(r, "timeupdate", E)),
                                        M ||
                                          ((D = function () {
                                            return Lp(e);
                                          }),
                                          e.l.H(r, "timeupdate", D),
                                          Lp(e),
                                          e.i.nextUrl &&
                                            (0 <
                                              e.g.streaming
                                                .preloadNextUrlWindow &&
                                              ((P = function () {
                                                var t;
                                                return L(function (n) {
                                                  if (1 == n.g)
                                                    return (
                                                      (t =
                                                        e.La().end -
                                                        e.h.currentTime),
                                                      !isNaN(t) &&
                                                      t <=
                                                        e.g.streaming
                                                          .preloadNextUrlWindow
                                                        ? (e.l.sb(
                                                            r,
                                                            "timeupdate",
                                                            P
                                                          ),
                                                          x(
                                                            n,
                                                            e.preload(
                                                              e.i.nextUrl
                                                            ),
                                                            4
                                                          ))
                                                        : n.u(0)
                                                    );
                                                  (e.za = n.h), S(n);
                                                });
                                              }),
                                              e.l.H(r, "timeupdate", P)),
                                            e.l.H(r, "ended", function () {
                                              e.load(e.za || e.i.nextUrl);
                                            }))),
                                        e.B && e.B.onManifestUpdated(M),
                                        (e.xa = !0),
                                        S(R);
                                  }
                                });
                              })(b, h, v, m),
                              0
                            );
                          });
                        }, "loadInner_"),
                        22
                      )
                    );
                  case 22:
                    !(function (e) {
                      if (e.J)
                        for (
                          var t = c(e.J), n = t.next();
                          !n.done;
                          n = t.next()
                        )
                          (n = n.value)();
                      e.J = null;
                    })(r),
                      b.mc &&
                        Ye() &&
                        ji(b.mc) &&
                        (function (t, n, i) {
                          t.g &&
                            e.ManagedMediaSource &&
                            t.i &&
                            (t.C && t.g.removeChild(t.C),
                            (t.C = Jc(n, i)),
                            t.g.appendChild(t.C),
                            (t.g.disableRemotePlayback = !1));
                        })(b.J, b.X, b.mc),
                      w.u(14);
                    break;
                  case 23:
                    return x(
                      w,
                      u(function () {
                        return L(function (e) {
                          return x(
                            e,
                            (function (e, t, n) {
                              var i, r, a, o, s, u, l, d, h, f, p, g;
                              return L(function (m) {
                                switch (m.g) {
                                  case 1:
                                    if (
                                      (np(e, "src-equals"),
                                      (i = e.h),
                                      (e.F = new _d(i)),
                                      (r = !1),
                                      e.Yc.push(function () {
                                        r = !0;
                                      }),
                                      null != e.ca && e.F.le(e.ca),
                                      (e.Ya = (function (e, t) {
                                        (t = new jh(e.Aa, 0 < t)),
                                          t.addEventListener(
                                            "enter",
                                            function (t) {
                                              dp(e, t.region);
                                            }
                                          );
                                        var n = new Fd(e.h);
                                        return n.g.add(t), n;
                                      })(e, e.ca || 0)),
                                      (e.K = new Ad({
                                        ud: function () {
                                          return i.playbackRate;
                                        },
                                        Wb: function () {
                                          return i.defaultPlaybackRate;
                                        },
                                        nf: function (e) {
                                          i.playbackRate = e;
                                        },
                                        fg: function (e) {
                                          i.currentTime += e;
                                        },
                                      })),
                                      pp(e, i, !0),
                                      i.textTracks &&
                                        (up(e),
                                        (a = function () {
                                          var t = Sp(e).find(function (e) {
                                            return "disabled" !== e.mode;
                                          });
                                          t && (t.mode = "showing"),
                                            (t = Tp(e)) && (t.mode = "hidden");
                                        }),
                                        (o = function () {
                                          var t = Sp(e).find(function (e) {
                                            return "disabled" !== e.mode;
                                          });
                                          t && (t.mode = "hidden"), (t = Tp(e));
                                          var n = e.s.isTextVisible();
                                          t && n && (t.mode = "showing");
                                        }),
                                        e.l.H(
                                          i,
                                          "enterpictureinpicture",
                                          function () {
                                            return a();
                                          }
                                        ),
                                        e.l.H(
                                          i,
                                          "leavepictureinpicture",
                                          function () {
                                            return o();
                                          }
                                        ),
                                        i.remote
                                          ? (e.l.H(
                                              i.remote,
                                              "connect",
                                              function () {
                                                return o();
                                              }
                                            ),
                                            e.l.H(
                                              i.remote,
                                              "connecting",
                                              function () {
                                                return o();
                                              }
                                            ),
                                            e.l.H(
                                              i.remote,
                                              "disconnect",
                                              function () {
                                                return o();
                                              }
                                            ))
                                          : "webkitCurrentPlaybackTargetIsWireless" in
                                              i &&
                                            e.l.H(
                                              i,
                                              "webkitcurrentplaybacktargetiswirelesschanged",
                                              function () {
                                                return o();
                                              }
                                            ),
                                        (s = i).webkitSupportsFullscreen &&
                                          e.l.H(
                                            s,
                                            "webkitpresentationmodechanged",
                                            function () {
                                              "inline" !=
                                              s.webkitPresentationMode
                                                ? a()
                                                : o();
                                            }
                                          )),
                                      cp(e, i, t),
                                      (u = (function (e, t, n) {
                                        try {
                                          if (!e.g.enabled) return t;
                                          var i = Mf(e);
                                          e: {
                                            switch (n.toLowerCase()) {
                                              case "audio/mp4":
                                              case "audio/webm":
                                              case "audio/ogg":
                                              case "audio/mpeg":
                                              case "audio/aac":
                                              case "audio/flac":
                                              case "audio/wav":
                                                var r = Nf;
                                                break e;
                                              case "video/webm":
                                              case "video/mp4":
                                              case "video/mpeg":
                                              case "video/mp2t":
                                                r = Uf;
                                                break e;
                                              case "application/x-mpegurl":
                                              case "application/vnd.apple.mpegurl":
                                              case "application/dash+xml":
                                              case "video/vnd.mpeg.dash.mpd":
                                              case "application/vnd.ms-sstr+xml":
                                                r = Rf;
                                                break e;
                                            }
                                            r = void 0;
                                          }
                                          return (
                                            (i.ot = r),
                                            (i.su = !0),
                                            Lf(t, Pf(i))
                                          );
                                        } catch (o) {
                                          return (
                                            Y(
                                              "CMCD_SRC_ERROR",
                                              "Could not generate src CMCD data.",
                                              o
                                            ),
                                            t
                                          );
                                        }
                                      })(e.L, e.X, n)),
                                      !u.includes("#t=") &&
                                        (0 < e.g.playRangeStart ||
                                          isFinite(e.g.playRangeEnd)) &&
                                        ((u += "#t="),
                                        0 < e.g.playRangeStart &&
                                          (u += e.g.playRangeStart),
                                        isFinite(e.g.playRangeEnd) &&
                                          (u += "," + e.g.playRangeEnd)),
                                      !e.J)
                                    ) {
                                      m.u(2);
                                      break;
                                    }
                                    return x(m, e.J.destroy(), 3);
                                  case 3:
                                    e.J = null;
                                  case 2:
                                    return (
                                      $c(i),
                                      (i.src = u),
                                      (ze() || qe()) && i.load(),
                                      "none" != i.preload &&
                                        !i.autoplay &&
                                        ji(n) &&
                                        Ye() &&
                                        i.load(),
                                      (e.m = ig),
                                      e.dispatchEvent(tp("streaming")),
                                      (l = new Vo()),
                                      Id(
                                        i,
                                        HTMLMediaElement.HAVE_METADATA,
                                        e.l,
                                        function () {
                                          e.F.ready(), l.resolve();
                                        }
                                      ),
                                      (d = function () {
                                        return new Promise(function (t) {
                                          var n = new Oe(t);
                                          e.l.H(
                                            i.textTracks,
                                            "change",
                                            function () {
                                              return n.ea(0.5);
                                            }
                                          ),
                                            n.ea(0.5);
                                        });
                                      }),
                                      Id(
                                        i,
                                        HTMLMediaElement.HAVE_CURRENT_DATA,
                                        e.l,
                                        function () {
                                          var t, n, i, a, o;
                                          return L(function (s) {
                                            if (1 == s.g) return x(s, d(), 2);
                                            if (r) return s.return();
                                            for (
                                              (function (e) {
                                                var t =
                                                  e.g.preferredAudioLanguage;
                                                "" != t &&
                                                  e.rg(
                                                    t,
                                                    e.g.preferredVariantRole
                                                  );
                                              })(e),
                                                (t = Sp(e)).some(function (e) {
                                                  return "showing" === e.mode;
                                                }) &&
                                                  ((e.oa = !0),
                                                  e.s.setTextVisibility(!0)),
                                                t.length &&
                                                  (e.s.enableTextDisplayer
                                                    ? e.s.enableTextDisplayer()
                                                    : ne(
                                                        "Text displayer w/ enableTextDisplayer",
                                                        'Text displayer should have a "enableTextDisplayer" method!'
                                                      )),
                                                n = !1,
                                                i = c(t),
                                                a = i.next();
                                              !a.done;
                                              a = i.next()
                                            )
                                              "disabled" !==
                                                (o = a.value).mode &&
                                                (n
                                                  ? ((o.mode = "disabled"),
                                                    X(
                                                      "Found more than one enabled text track, disabling it",
                                                      o
                                                    ))
                                                  : (xp(e, o), (n = !0)));
                                            !(function (e) {
                                              var t = e.g.preferredTextLanguage;
                                              "" != t &&
                                                e.sg(
                                                  t,
                                                  e.g.preferredTextRole,
                                                  e.g.preferForcedSubs
                                                );
                                            })(e),
                                              S(s);
                                          });
                                        }
                                      ),
                                      i.error
                                        ? l.reject(Yp(e))
                                        : "none" == i.preload &&
                                          (X(
                                            'With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'
                                          ),
                                          l.resolve()),
                                      e.l.Ea(i, "error", function () {
                                        l.reject(Yp(e));
                                      }),
                                      x(m, $i(e.g.streaming.loadTimeout, l), 4)
                                    );
                                  case 4:
                                    (((h = e.R()) &&
                                      ((e.g.streaming.liveSync &&
                                        e.g.streaming.liveSync.enabled) ||
                                        e.g.streaming.liveSync.panicMode)) ||
                                      e.g.streaming.vodDynamicPlaybackRate) &&
                                      ((f = function () {
                                        return Pp(e);
                                      }),
                                      e.l.H(i, "timeupdate", f)),
                                      h ||
                                        ((p = function () {
                                          return Lp(e);
                                        }),
                                        e.l.H(i, "timeupdate", p),
                                        Lp(e)),
                                      e.B &&
                                        (e.B.onManifestUpdated(h),
                                        h &&
                                          ((g = e.La().end),
                                          e.l.H(i, "progress", function () {
                                            var t = e.La().end;
                                            g != t &&
                                              (e.B.onManifestUpdated(e.R()),
                                              (g = t));
                                          }))),
                                      (e.xa = !0),
                                      S(m);
                                }
                              });
                            })(b, h, i),
                            0
                          );
                        });
                      }, "srcEqualsInner_"),
                      14
                    );
                  case 14:
                    b.dispatchEvent(tp("loaded"));
                  case 6:
                    if ((I(w), !r)) {
                      w.u(25);
                      break;
                    }
                    return x(w, r.destroy(), 25);
                  case 25:
                    (b.za = null), C(w, 0);
                    break;
                  case 5:
                    if (!(y = k(w)) || 7e3 == y.code) {
                      w.u(27);
                      break;
                    }
                    return x(w, b.hd(!1), 27);
                  case 27:
                    throw y;
                }
              });
            }),
            (i.Bi = function (e, t) {
              (e = void 0 === e || e), (t = void 0 !== t && t);
              var n,
                i = this;
              return L(function (r) {
                return 1 == r.g
                  ? x(r, rp(i), 2)
                  : 3 != r.g
                  ? ((n = r.h), x(r, i.hd(e, t), 3))
                  : r.return(n);
              });
            }),
            (i.Nf = function (e, t) {
              (e = void 0 !== e && e), (t = void 0 !== t && t);
              var n,
                i = this;
              return L(function (r) {
                return 1 == r.g
                  ? x(r, rp(i, t), 2)
                  : 3 != r.g
                  ? ((n = r.h), x(r, i.detach(e), 3))
                  : r.return(n);
              });
            }),
            (i.preload = function (e, t, n) {
              t = void 0 === t ? null : t;
              var i,
                r = this;
              return L(function (a) {
                return 1 == a.g
                  ? x(a, ap(r, e, t, n), 2)
                  : ((i = a.h) ? i.start() : Kp(r, new Ee(2, 7, 7005)),
                    a.return(i));
              });
            }),
            (i.Mf = function () {
              var e,
                t,
                n,
                i,
                r = this;
              return L(function (a) {
                for (e = [], t = c(r.Vd), n = t.next(); !n.done; n = t.next())
                  (i = n.value).s || e.push(i.destroy());
                return (r.Vd = []), x(a, Promise.all(e), 0);
              });
            }),
            (i.ki = function () {
              for (var e = this.da; e.g; ) e.release();
            }),
            (i.od = function (e) {
              return new Ul(e);
            }),
            (i.configure = function (e, t) {
              if (
                (2 == arguments.length &&
                  "string" == typeof e &&
                  (e = Xu(e, t)),
                e.streaming &&
                  "forceTransmuxTS" in e.streaming &&
                  (ne(
                    "streaming.forceTransmuxTS configuration",
                    "Please Use mediaSource.forceTransmux instead."
                  ),
                  (e.mediaSource.mediaSource = e.streaming.forceTransmuxTS),
                  delete e.streaming.forceTransmuxTS),
                e.streaming &&
                  "forceTransmux" in e.streaming &&
                  (ne(
                    "streaming.forceTransmux configuration",
                    "Please Use mediaSource.forceTransmux instead."
                  ),
                  (e.mediaSource.mediaSource = e.streaming.forceTransmux),
                  delete e.streaming.forceTransmux),
                e.streaming &&
                  "useNativeHlsOnSafari" in e.streaming &&
                  (ne(
                    "streaming.useNativeHlsOnSafari configuration",
                    "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."
                  ),
                  (e.streaming.preferNativeHls =
                    e.streaming.useNativeHlsOnSafari && Ye()),
                  delete e.streaming.useNativeHlsOnSafari),
                e.streaming && "boolean" == typeof e.streaming.liveSync)
              ) {
                ne(
                  "streaming.liveSync",
                  "Please Use streaming.liveSync.enabled instead."
                );
                var n = e.streaming.liveSync;
                (e.streaming.liveSync = {}), (e.streaming.liveSync.enabled = n);
              }
              if (
                e.streaming &&
                (!e.streaming.liveSync ||
                  !("targetLatency" in e.streaming.liveSync)) &&
                ("liveSyncMinLatency" in e.streaming ||
                  "liveSyncMaxLatency" in e.streaming)
              ) {
                n = e.streaming.liveSyncMinLatency || 0;
                var i = Math.abs((e.streaming.liveSyncMaxLatency || 1) - n) / 2;
                (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatency = n + i),
                  (e.streaming.liveSync.targetLatencyTolerance = i);
              }
              if (
                (e.streaming &&
                  "liveSyncMaxLatency" in e.streaming &&
                  (ne(
                    "streaming.liveSyncMaxLatency",
                    "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"
                  ),
                  delete e.streaming.liveSyncMaxLatency),
                e.streaming &&
                  "liveSyncMinLatency" in e.streaming &&
                  (ne(
                    "streaming.liveSyncMinLatency",
                    "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"
                  ),
                  delete e.streaming.liveSyncMinLatency),
                e.streaming &&
                  "liveSyncTargetLatency" in e.streaming &&
                  (ne(
                    "streaming.liveSyncTargetLatency",
                    "Please Use streaming.liveSync.targetLatency instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatency =
                    e.streaming.liveSyncTargetLatency),
                  delete e.streaming.liveSyncTargetLatency),
                e.streaming &&
                  "liveSyncTargetLatencyTolerance" in e.streaming &&
                  (ne(
                    "streaming.liveSyncTargetLatencyTolerance",
                    "Please Use streaming.liveSync.targetLatencyTolerance instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatencyTolerance =
                    e.streaming.liveSyncTargetLatencyTolerance),
                  delete e.streaming.liveSyncTargetLatencyTolerance),
                e.streaming &&
                  "liveSyncPlaybackRate" in e.streaming &&
                  (ne(
                    "streaming.liveSyncPlaybackRate",
                    "Please Use streaming.liveSync.maxPlaybackRate instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.maxPlaybackRate =
                    e.streaming.liveSyncPlaybackRate),
                  delete e.streaming.liveSyncPlaybackRate),
                e.streaming &&
                  "liveSyncMinPlaybackRate" in e.streaming &&
                  (ne(
                    "streaming.liveSyncMinPlaybackRate",
                    "Please Use streaming.liveSync.minPlaybackRate instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.minPlaybackRate =
                    e.streaming.liveSyncMinPlaybackRate),
                  delete e.streaming.liveSyncMinPlaybackRate),
                e.streaming &&
                  "liveSyncPanicMode" in e.streaming &&
                  (ne(
                    "streaming.liveSyncPanicMode",
                    "Please Use streaming.liveSync.panicMode instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.panicMode =
                    e.streaming.liveSyncPanicMode),
                  delete e.streaming.liveSyncPanicMode),
                e.streaming &&
                  "liveSyncPanicThreshold" in e.streaming &&
                  (ne(
                    "streaming.liveSyncPanicThreshold",
                    "Please Use streaming.liveSync.panicThreshold instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.panicThreshold =
                    e.streaming.liveSyncPanicThreshold),
                  delete e.streaming.liveSyncPanicThreshold),
                e.mediaSource && "sourceBufferExtraFeatures" in e.mediaSource)
              ) {
                ne(
                  "mediaSource.sourceBufferExtraFeatures configuration",
                  "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead."
                );
                var r = e.mediaSource.sourceBufferExtraFeatures;
                (e.mediaSource.addExtraFeaturesToSourceBuffer = function () {
                  return r;
                }),
                  delete e.mediaSource.sourceBufferExtraFeatures;
              }
              if (
                (e.manifest &&
                  e.manifest.hls &&
                  "useSafariBehaviorForLive" in e.manifest.hls &&
                  (ne(
                    "manifest.hls.useSafariBehaviorForLive configuration",
                    "Please Use liveSync config to keep on live Edge instead."
                  ),
                  delete e.manifest.hls.useSafariBehaviorForLive),
                e.streaming &&
                  "parsePrftBox" in e.streaming &&
                  (ne(
                    "streaming.parsePrftBox configuration",
                    "Now fired without needing a configuration."
                  ),
                  delete e.streaming.parsePrftBox),
                e.manifest &&
                  e.manifest.dash &&
                  "enableAudioGroups" in e.manifest.dash &&
                  (ne(
                    "manifest.dash.enableAudioGroups configuration",
                    "It is now enabled by default and cannot be disabled."
                  ),
                  delete e.manifest.dash.enableAudioGroups),
                e.streaming &&
                  "dispatchAllEmsgBoxes" in e.streaming &&
                  (ne(
                    "streaming.dispatchAllEmsgBoxes configuration",
                    "Please Use mediaSource.dispatchAllEmsgBoxes instead."
                  ),
                  (e.mediaSource.dispatchAllEmsgBoxes =
                    e.streaming.dispatchAllEmsgBoxes),
                  delete e.streaming.dispatchAllEmsgBoxes),
                e.streaming &&
                  "autoLowLatencyMode" in e.streaming &&
                  (ne(
                    "streaming.autoLowLatencyMode configuration",
                    "Please Use streaming.lowLatencyMode instead."
                  ),
                  (e.streaming.lowLatencyMode = e.streaming.autoLowLatencyMode),
                  delete e.streaming.autoLowLatencyMode),
                e.manifest &&
                  e.manifest.dash &&
                  "ignoreSupplementalCodecs" in e.manifest.dash &&
                  (ne(
                    "manifest.dash.ignoreSupplementalCodecs configuration",
                    "Please Use manifest.ignoreSupplementalCodecs instead."
                  ),
                  (e.manifest.ignoreSupplementalCodecs =
                    e.manifest.dash.ignoreSupplementalCodecs),
                  delete e.manifest.dash.ignoreSupplementalCodecs),
                e.manifest &&
                  e.manifest.hls &&
                  "ignoreSupplementalCodecs" in e.manifest.hls &&
                  (ne(
                    "manifest.hls.ignoreSupplementalCodecs configuration",
                    "Please Use manifest.ignoreSupplementalCodecs instead."
                  ),
                  (e.manifest.ignoreSupplementalCodecs =
                    e.manifest.hls.ignoreSupplementalCodecs),
                  delete e.manifest.hls.ignoreSupplementalCodecs),
                e.manifest &&
                  e.manifest.dash &&
                  "updatePeriod" in e.manifest.dash &&
                  (ne(
                    "manifest.dash.updatePeriod configuration",
                    "Please Use manifest.updatePeriod instead."
                  ),
                  (e.manifest.updatePeriod = e.manifest.dash.updatePeriod),
                  delete e.manifest.dash.updatePeriod),
                e.manifest &&
                  e.manifest.hls &&
                  "updatePeriod" in e.manifest.hls &&
                  (ne(
                    "manifest.hls.updatePeriod configuration",
                    "Please Use manifest.updatePeriod instead."
                  ),
                  (e.manifest.updatePeriod = e.manifest.hls.updatePeriod),
                  delete e.manifest.hls.updatePeriod),
                e.manifest &&
                  e.manifest.dash &&
                  "ignoreDrmInfo" in e.manifest.dash &&
                  (ne(
                    "manifest.dash.ignoreDrmInfo configuration",
                    "Please Use manifest.ignoreDrmInfo instead."
                  ),
                  (e.manifest.ignoreDrmInfo = e.manifest.dash.ignoreDrmInfo),
                  delete e.manifest.dash.ignoreDrmInfo),
                e.drm && e.drm.advanced)
              ) {
                for (var a in ((n = !1), e.drm.advanced)) {
                  var o = e.drm.advanced[a];
                  (i = o.videoRobustness),
                    (o = o.audioRobustness),
                    "videoRobustness" in e.drm.advanced[a] &&
                      !Array.isArray(e.drm.advanced[a].videoRobustness) &&
                      ((e.drm.advanced[a].videoRobustness = [i]), (n = !0)),
                    "audioRobustness" in e.drm.advanced[a] &&
                      !Array.isArray(e.drm.advanced[a].audioRobustness) &&
                      ((e.drm.advanced[a].audioRobustness = [o]), (n = !0));
                }
                n &&
                  ne(
                    "AdvancedDrmConfiguration's videoRobustness and audioRobustness",
                    "These properties are no longer strings but array of strings, please update your usage of these properties."
                  );
              }
              return (
                e.streaming &&
                  "crossBoundaryStrategy" in e.streaming &&
                  "keep" != e.streaming.crossBoundaryStrategy &&
                  (e.streaming.inaccurateManifestTolerance = 0),
                (a = el(this.g, e, Cp(this))),
                vp(this),
                a
              );
            }),
            (i.Xg = function (e) {
              this.ie = e;
            }),
            (i.getConfiguration = function () {
              var e = Cp(this);
              return el(e, this.g, Cp(this)), e;
            }),
            (i.hh = function () {
              return this.ie;
            }),
            (i.uh = function () {
              return el(Cp(this), this.g, Cp(this)), Ju(this.g, Cp(this));
            }),
            (i.Rf = function () {
              if (this.h) {
                var e = this.h.buffered.length;
                e = e ? this.h.buffered.end(e - 1) : 0;
                var t = this.getConfiguration().streaming.bufferingGoal;
                if (e >= (t = Math.min(this.h.currentTime + t, this.La().end)))
                  return 1;
                if (!(e <= this.h.currentTime) && e < t)
                  return (e - this.h.currentTime) / (t - this.h.currentTime);
              }
              return 0;
            }),
            (i.mi = function () {
              for (var e in this.g) delete this.g[e];
              el(this.g, Cp(this), Cp(this)), vp(this);
            }),
            (i.ph = function () {
              return this.m;
            }),
            (i.Tf = function () {
              return this.i ? this.i.type : null;
            }),
            (i.th = function () {
              return this.h;
            }),
            (i.Pe = function () {
              return this.D;
            }),
            (i.qd = function () {
              return this.X;
            }),
            (i.$g = function () {
              return this.B ? this.B : null;
            }),
            (i.R = function () {
              return this.i && !this.Ka()
                ? this.i.presentationTimeline.R()
                : !(!this.h || !this.h.src) && 1 / 0 == this.h.duration;
            }),
            (i.wc = function () {
              return !!this.i && this.i.presentationTimeline.wc();
            }),
            (i.Mh = function () {
              if (this.i && !this.Ka()) {
                var e = this.i.variants;
                return !!e.length && !e[0].video;
              }
              return (
                !(!this.h || !this.h.src) &&
                (this.h.videoTracks
                  ? 0 == this.h.videoTracks.length
                  : 0 == this.h.videoHeight)
              );
            }),
            (i.La = function () {
              if (this.i && !this.Ka()) {
                if (!this.xa && "HLS" == this.i.type)
                  return { start: 0, end: 0 };
                var e = this.i.presentationTimeline;
                return { start: e.pb(), end: e.bb() };
              }
              if (this.h && this.h.src && (e = this.h.seekable) && e.length) {
                var t = this.g ? this.g.playRangeStart : 0;
                t = Math.max(e.start(0), t);
                var n = this.g ? this.g.playRangeEnd : 1 / 0;
                return {
                  start: t,
                  end: (e = Math.min(e.end(e.length - 1), n)),
                };
              }
              return { start: 0, end: 0 };
            }),
            (i.Jh = function () {
              this.R() && (this.h.currentTime = this.La().end);
            }),
            (i.Nh = function () {
              return this.xa;
            }),
            (i.keySystem = function () {
              var e = this.drmInfo();
              return e ? e.keySystem : "";
            }),
            (i.drmInfo = function () {
              return this.C ? this.C.h : null;
            }),
            (i.Ne = function () {
              return this.C ? this.C.Ne() : 1 / 0;
            }),
            (i.Me = function () {
              return this.C ? this.C.Me() : [];
            }),
            (i.sd = function () {
              return this.C ? this.C.sd() : {};
            }),
            (i.Zf = function () {
              return this.O ? this.O.g == ec : !!this.X;
            }),
            (i.Ra = function () {
              return this.h ? (this.K ? this.K.i : 1) : 0;
            }),
            (i.gd = function (e, t) {
              (t = void 0 === t || t),
                0 == e
                  ? X("A trick play rate of 0 is unsupported!")
                  : (this.K.set(e),
                    this.m == ng &&
                      (this.o.playbackRateChanged(e),
                      rh(this.j, t && 1 < Math.abs(e))),
                    Ep(this, e));
            }),
            (i.Hc = function () {
              var e = this.K.Wb();
              this.m == ig && this.K.set(e),
                this.m == ng &&
                  (this.K.set(e),
                  this.o.playbackRateChanged(e),
                  rh(this.j, !1)),
                this.ab.qb();
            }),
            (i.yb = function () {
              if (this.i && !this.Ka()) {
                for (
                  var e = this.j ? this.j.l : null,
                    t = [],
                    n = 0,
                    i = c(this.i.variants),
                    r = i.next();
                  !r.done;
                  r = i.next()
                )
                  if (Ar((r = r.value))) {
                    var a = yr(r);
                    (a.active = r == e),
                      a.active ||
                        1 == n ||
                        null == e ||
                        r.video != e.video ||
                        r.audio != e.audio ||
                        (a.active = !0),
                      a.active && n++,
                      t.push(a);
                  }
                return t;
              }
              return this.h && this.h.audioTracks
                ? Array.from(this.h.audioTracks).map(function (e) {
                    return Sr(e);
                  })
                : [];
            }),
            (i.Yb = function () {
              if (this.i && !this.Ka()) {
                for (
                  var e = this.j ? this.j.s : null,
                    t = [],
                    n = c(this.i.textStreams),
                    i = n.next();
                  !i.done;
                  i = n.next()
                ) {
                  var r = br((i = i.value));
                  (r.active = i == e), t.push(r);
                }
                return t;
              }
              return this.h && this.h.src && this.h.textTracks
                ? Sp(this).map(function (e) {
                    var t = Tr(e);
                    return (
                      (t.active = "disabled" != e.mode),
                      (t.type = "text"),
                      (t.originalTextId = e.id),
                      "captions" == e.kind && (t.mimeType = "unknown"),
                      "subtitles" == e.kind && (t.mimeType = "text/vtt"),
                      e.kind && (t.roles = [e.kind]),
                      "forced" == e.kind && (t.forced = !0),
                      t
                    );
                  })
                : [];
            }),
            (i.mh = function () {
              var e = this.ae;
              return (
                this.i && (e = this.i.imageStreams),
                e.map(function (e) {
                  return wr(e);
                })
              );
            }),
            (i.ah = function (e) {
              var t,
                n,
                i = this;
              return L(function (r) {
                return 1 == r.g
                  ? x(r, bp(i, e), 2)
                  : (t = r.h)
                  ? ((n = []),
                    t.segmentIndex.Tb(function (e) {
                      var i = yp(e.tilesLayout || t.tilesLayout);
                      if (i)
                        for (
                          var r = i.rows * i.Rb, a = e.i - e.startTime, o = 0;
                          o < r;
                          o++
                        ) {
                          var s = wp(e, t, e.startTime + (a * o) / r, i);
                          n.push(s);
                        }
                    }),
                    t.closeSegmentIndex && t.closeSegmentIndex(),
                    r.return(n))
                  : r.return(null);
              });
            }),
            (i.Eh = function (e, t) {
              var n,
                i,
                r,
                a,
                o = this;
              return L(function (s) {
                return 1 == s.g
                  ? x(s, bp(o, e), 2)
                  : (n = s.h)
                  ? null == (i = n.segmentIndex.find(t))
                    ? s.return(null)
                    : ((r = n.segmentIndex.get(i)),
                      (a = yp(r.tilesLayout || n.tilesLayout))
                        ? s.return(wp(r, n, t, a))
                        : s.return(null))
                  : s.return(null);
              });
            }),
            (i.tg = function (e) {
              var t,
                n = this;
              (this.i &&
                this.F &&
                ((t = n.i.textStreams.find(function (t) {
                  return t.id == e.id;
                })) &&
                  t != n.j.s &&
                  (Mh(n.A.h, t, !1),
                  oh(n.j, t),
                  Hp(n),
                  Gp(n),
                  (n.tc = t.language)),
                !this.Ka())) ||
                (function () {
                  if (n.h && n.h.textTracks) {
                    var t = Sp(n),
                      i = t.find(function (e) {
                        return "disabled" !== e.mode;
                      });
                    (t = t.find(function (t) {
                      return xr(t) === e.id;
                    })) &&
                      (i !== t &&
                        (i &&
                          ((i.mode = "disabled"),
                          n.l.sb(i, "cuechange"),
                          n.s.remove(0, 1 / 0)),
                        t && xp(n, t)),
                      Hp(n),
                      Gp(n));
                  }
                })();
            }),
            (i.Rd = function (e, t, n) {
              var i = this;
              (t = void 0 !== t && t),
                (n = void 0 === n ? 0 : n),
                (this.i &&
                  this.F &&
                  ((function () {
                    var r = i.i.variants.find(function (t) {
                      return t.id == e.id;
                    });
                    if (r && Ar(r)) {
                      var a = i.j.l;
                      i.g.abr.enabled &&
                        (a.video != r.video ||
                          (a.audio &&
                            r.audio &&
                            a.audio.language == r.audio.language &&
                            a.audio.channelsCount == r.audio.channelsCount &&
                            a.audio.label == r.audio.label)) &&
                        X(
                          "Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."
                        ),
                        i.Ka()
                          ? _p(i, r, !1, !1, 0)
                          : _p(i, r, !1, t || !1, n || 0),
                        i.Y.configure({
                          language: r.language,
                          role:
                            (r.audio && r.audio.roles && r.audio.roles[0]) ||
                            "",
                          channelCount:
                            r.audio && r.audio.channelsCount
                              ? r.audio.channelsCount
                              : 0,
                          sc: r.video && r.video.hdr ? r.video.hdr : "",
                          spatialAudio:
                            !(!r.audio || !r.audio.spatialAudio) &&
                            r.audio.spatialAudio,
                          videoLayout:
                            r.video && r.video.videoLayout
                              ? r.video.videoLayout
                              : "",
                          kc: r.audio && r.audio.label ? r.audio.label : "",
                          Gc: "",
                          codecSwitchingStrategy:
                            i.g.mediaSource.codecSwitchingStrategy,
                          audioCodec:
                            r.audio && r.audio.codecs ? r.audio.codecs : "",
                        }),
                        Rp(i);
                    }
                  })(),
                  !this.Ka())) ||
                  (function () {
                    if (i.h && i.h.audioTracks)
                      for (
                        var t = Array.from(i.h.audioTracks),
                          n = (t = c(t)).next();
                        !n.done;
                        n = t.next()
                      )
                        if (xr((n = n.value)) == e.id) {
                          Up(i, n);
                          break;
                        }
                  })();
            }),
            (i.si = function (e, t) {
              t = void 0 === t ? 0 : t;
              var n = this.yb();
              if (n.length) {
                var i = n.find(function (e) {
                  return e.active;
                });
                i &&
                  (n = n.find(function (t) {
                    return (
                      t.videoId === i.videoId &&
                      t.language == e.language &&
                      t.label == e.label &&
                      t.audioMimeType == e.mimeType &&
                      t.audioCodec == e.codecs &&
                      t.primary == e.primary &&
                      an(t.audioRoles, e.roles) &&
                      t.accessibilityPurpose == e.accessibilityPurpose &&
                      t.channelsCount == e.channelsCount &&
                      t.audioSamplingRate == e.audioSamplingRate &&
                      t.spatialAudio == e.spatialAudio
                    );
                  })) &&
                  !n.active &&
                  this.Rd(n, !0, t);
              }
            }),
            (i.getAudioTracks = function () {
              var e = this.yb();
              if (!e.length) return [];
              var t = e.find(function (e) {
                return e.active;
              });
              if (!t) return [];
              var n = e;
              if (
                (this.m == ng &&
                  (n = e.filter(function (e) {
                    return (
                      e.originalVideoId === t.originalVideoId && e.audioCodec
                    );
                  })),
                !n.length)
              )
                return [];
              e = new Map();
              for (var i = (n = c(n)).next(); !i.done; i = n.next()) {
                var r = (i = i.value).originalAudioId;
                r || null == i.audioId || (r = String(i.audioId)),
                  r &&
                    e.set(r, {
                      active: i.active,
                      language: i.language,
                      label: i.label,
                      mimeType: i.audioMimeType,
                      codecs: i.audioCodec,
                      primary: i.primary,
                      roles: i.audioRoles || [],
                      accessibilityPurpose: i.accessibilityPurpose,
                      channelsCount: i.channelsCount,
                      audioSamplingRate: i.audioSamplingRate,
                      spatialAudio: i.spatialAudio,
                      originalLanguage: i.originalLanguage,
                    });
              }
              return Array.from(e.values());
            }),
            (i.dh = function () {
              return Qp(this.yb());
            }),
            (i.Ch = function () {
              return Qp(this.Yb());
            }),
            (i.bh = function () {
              return Array.from(Zp(this.yb()));
            }),
            (i.Bh = function () {
              return Array.from(Zp(this.Yb()));
            }),
            (i.rg = function (e, t, n, i, r, a, o) {
              var s = this;
              (n = void 0 === n ? 0 : n),
                (i = void 0 === i ? 0 : i),
                (r = void 0 === r ? "" : r),
                (a = void 0 !== a && a),
                (o = void 0 === o ? "" : o),
                (this.i &&
                  this.F &&
                  ((function () {
                    function u(e, t) {
                      return e.video || t.video
                        ? e.video && t.video
                          ? Math.abs(
                              (e.video.height || 0) - (t.video.height || 0)
                            ) +
                            Math.abs(
                              (e.video.width || 0) - (t.video.width || 0)
                            )
                          : 1 / 0
                        : 0;
                    }
                    (s.Y = s.g.adaptationSetCriteriaFactory()),
                      s.Y.configure({
                        language: e,
                        role: t || "",
                        channelCount: n || 0,
                        sc: "",
                        spatialAudio: a || !1,
                        videoLayout: "",
                        kc: o || "",
                        Gc: "",
                        codecSwitchingStrategy:
                          s.g.mediaSource.codecSwitchingStrategy,
                        audioCodec: r || "",
                      });
                    for (
                      var l = s.j.l,
                        d = s.Y.create(s.i.variants),
                        h = null,
                        f = (d = c(d.values())).next();
                      !f.done;
                      f = d.next()
                    )
                      Ar((f = f.value)) && (!h || u(h, l) > u(f, l)) && (h = f);
                    h != l && (h ? ((l = yr(h)), s.Rd(l, !0, i || 0)) : Np(s));
                  })(),
                  !this.Ka())) ||
                  (function () {
                    if (s.h && s.h.audioTracks) {
                      var n = Ir(s.yb(), e, t || "", !1)[0];
                      n && s.Rd(n);
                    }
                  })();
            }),
            (i.sg = function (e, t, n) {
              var i,
                r = this;
              ((n = void 0 !== n && n),
              this.i &&
                this.F &&
                ((function () {
                  (r.tc = e), (r.bd = t || ""), (r.$c = n || !1);
                  var i = Ir(r.i.textStreams, r.tc, r.bd, r.$c)[0] || null;
                  i &&
                    i != r.j.s &&
                    (Mh(r.A.h, i, !1),
                    r.g.streaming.alwaysStreamText || r.Ue()) &&
                    (oh(r.j, i), Hp(r), Gp(r));
                })(),
                !this.Ka())) ||
                ((i = Ir(r.Yb(), e, t || "", n || !1)[0]) && r.tg(i));
            }),
            (i.ti = function (e, t, n) {
              var i = this;
              (t = void 0 === t || t),
                (n = void 0 === n ? 0 : n),
                (this.i &&
                  this.F &&
                  ((function () {
                    for (
                      var r = null, a = c(i.i.variants), o = a.next();
                      !o.done;
                      o = a.next()
                    )
                      if ((o = o.value).audio.label == e) {
                        r = o;
                        break;
                      }
                    null != r &&
                      ((i.Y = i.g.adaptationSetCriteriaFactory()),
                      i.Y.configure({
                        language: r.language,
                        role: "",
                        channelCount: 0,
                        sc: "",
                        spatialAudio: !1,
                        videoLayout: "",
                        Gc: "",
                        kc: e,
                        codecSwitchingStrategy:
                          i.g.mediaSource.codecSwitchingStrategy,
                        audioCodec: "",
                      }),
                      Np(i, t, n));
                  })(),
                  !this.Ka())) ||
                  (function () {
                    if (i.h && i.h.audioTracks) {
                      for (
                        var t = Array.from(i.h.audioTracks),
                          n = null,
                          r = (t = c(t)).next();
                        !r.done;
                        r = t.next()
                      )
                        (r = r.value).label == e && (n = r);
                      n && Up(i, n);
                    }
                  })();
            }),
            (i.Ue = function () {
              var e = this.oa;
              return this.s ? this.s.isTextVisible() : e;
            }),
            (i.gh = function () {
              return this.dd.map(function (e) {
                return br(e);
              });
            }),
            (i.fh = function (e) {
              if (!this.dd.length) return [];
              var t = nr(e);
              if (
                !(e = this.dd.filter(function (e) {
                  return nr(e.language) == t;
                })).length
              )
                return [];
              for (
                var n = [], i = new Set(), r = (e = c(e)).next();
                !r.done;
                r = e.next()
              )
                (r = r.value).segmentIndex &&
                  r.segmentIndex.Tb(function (e) {
                    var t = e.T()[0],
                      r = e.startTime + "-" + e.endTime + "-" + t;
                    (e = {
                      id: r,
                      title: t,
                      startTime: e.startTime,
                      endTime: e.endTime,
                    }),
                      i.has(r) || (n.push(e), i.add(r));
                  });
              return n;
            }),
            (i.xi = function (e) {
              (e = !!e),
                this.oa != e &&
                  ((this.oa = e),
                  this.m == ng
                    ? (this.s.setTextVisibility(e),
                      this.g.streaming.alwaysStreamText ||
                        (e
                          ? this.j.s ||
                            (0 <
                              (e = Ir(
                                this.i.textStreams,
                                this.tc,
                                this.bd,
                                this.$c
                              )).length &&
                              (oh(this.j, e[0]), Hp(this), Gp(this)))
                          : (function (e) {
                              var t = e.i.get(Rt);
                              t &&
                                (wh(t),
                                xh(t).catch(function () {}),
                                (e.D = e.i.get(Rt)),
                                e.i.delete(Rt)),
                                (e.s = null);
                            })(this.j)))
                    : this.h &&
                      this.h.src &&
                      this.h.textTracks &&
                      this.s.setTextVisibility(e),
                  Vp(this));
            }),
            (i.vh = function () {
              if (this.F) var e = this.F.kd();
              else {
                if (null == this.ca) return new Date();
                e = this.ca;
              }
              if (this.i && !this.Ka()) {
                var t = this.i.presentationTimeline;
                return new Date(1e3 * ((t.s || t.i) + e));
              }
              return this.h && this.h.getStartDate
                ? ((t = this.h.getStartDate()),
                  isNaN(t.getTime()) ? null : new Date(t.getTime() + 1e3 * e))
                : null;
            }),
            (i.Vf = function () {
              if (this.i && !this.Ka()) {
                var e = this.i.presentationTimeline;
                return new Date(1e3 * (e.s || e.i));
              }
              return this.h && this.h.getStartDate
                ? ((e = this.h.getStartDate()), isNaN(e.getTime()) ? null : e)
                : null;
            }),
            (i.vd = function () {
              return this.R() && this.i
                ? this.i.presentationTimeline.vd()
                : null;
            }),
            (i.hb = function () {
              if (this.m == ng) return this.J.hb();
              var e = { total: [], audio: [], video: [], text: [] };
              return this.m == ig && (e.total = Uc(this.h.buffered)), e;
            }),
            (i.td = function () {
              if (!this.h || !this.h.currentTime) return null;
              var e = this.Vf().getTime() + 1e3 * this.h.currentTime;
              return Math.floor(Date.now() - e);
            }),
            (i.getStats = function () {
              if (this.m != ng && this.m != ig)
                return {
                  width: NaN,
                  height: NaN,
                  streamBandwidth: NaN,
                  decodedFrames: NaN,
                  droppedFrames: NaN,
                  corruptedFrames: NaN,
                  stallsDetected: NaN,
                  gapsJumped: NaN,
                  estimatedBandwidth: NaN,
                  completionPercent: NaN,
                  loadLatency: NaN,
                  manifestTimeSeconds: NaN,
                  drmTimeSeconds: NaN,
                  playTime: NaN,
                  pauseTime: NaN,
                  bufferingTime: NaN,
                  licenseTime: NaN,
                  liveLatency: NaN,
                  maxSegmentDuration: NaN,
                  manifestSizeBytes: NaN,
                  bytesDownloaded: NaN,
                  nonFatalErrorCount: NaN,
                  manifestPeriodCount: NaN,
                  manifestGapCount: NaN,
                  switchHistory: [],
                  stateHistory: [],
                };
              Dp(this);
              var e = this.h,
                t = e.currentTime / e.duration;
              if (!isNaN(t) && !this.R()) {
                var n = this.A;
                (t = Math.round(100 * t)),
                  (n.i = isNaN(n.i) ? t : Math.max(n.i, t));
              }
              if (
                (this.F && ((this.A.W = this.F.Cf()), (this.A.X = this.F.Df())),
                e.getVideoPlaybackQuality)
              ) {
                (n = e.getVideoPlaybackQuality()), (t = this.A);
                var i = Number(n.totalVideoFrames);
                (t.S = Number(n.droppedVideoFrames)),
                  (t.O = i),
                  (this.A.L = Number(n.corruptedVideoFrames));
              }
              if (
                (this.C ? (n = (n = this.C).G ? n.G : NaN) : (n = NaN),
                (this.A.o = n),
                this.m == ng)
              ) {
                if (((n = this.j.l), (t = this.j.s), n)) {
                  var r = (i = this.K ? this.K.i : 1) * n.bandwidth;
                  t && t.bandwidth && (r += i * t.bandwidth), (this.A.A = r);
                }
                n &&
                  n.video &&
                  ((t = this.A),
                  (i = n.video.height || NaN),
                  (t.m = n.video.width || NaN),
                  (t.l = i)),
                  this.R() && ((n = this.td() || 0), (this.A.B = n / 1e3)),
                  this.i &&
                    ((this.A.F = this.i.periodCount),
                    (this.A.D = this.i.gapCount),
                    this.i.presentationTimeline &&
                      (this.A.J = this.i.presentationTimeline.h)),
                  (n = this.o.getBandwidthEstimate()),
                  (this.A.s = n);
              }
              this.m == ig &&
                (((n = this.A).Pb = isNaN(n.Pb) ? NaN : n.Pb + NaN),
                (n = this.A),
                (t = e.videoHeight || NaN),
                (n.m = e.videoWidth || NaN),
                (n.l = t));
              var a = this.A;
              (e = a.m), (n = a.l), (t = a.A), (i = a.O), (r = a.S);
              for (
                var o = a.L,
                  s = a.X,
                  u = a.W,
                  l = a.s,
                  d = a.i,
                  h = a.C,
                  f = a.G,
                  p = a.j,
                  g = Ih(a.g, "playing"),
                  m = Ih(a.g, "paused"),
                  v = Ih(a.g, "buffering"),
                  y = a.o,
                  b = a.B,
                  w = a.J,
                  x = a.cg,
                  S = a.Pb,
                  T = a.K,
                  A = a.F,
                  k = a.D,
                  I = (function (e) {
                    function t(e) {
                      return {
                        timestamp: e.timestamp,
                        state: e.state,
                        duration: e.duration,
                      };
                    }
                    for (
                      var n = [], i = c(e.h), r = i.next();
                      !r.done;
                      r = i.next()
                    )
                      n.push(t(r.value));
                    return e.g && n.push(t(e.g)), n;
                  })(a.g),
                  C = [],
                  M = (a = c(a.h.g)).next();
                !M.done;
                M = a.next()
              )
                (M = M.value),
                  C.push({
                    timestamp: M.timestamp,
                    id: M.id,
                    type: M.type,
                    fromAdaptation: M.fromAdaptation,
                    bandwidth: M.bandwidth,
                  });
              return {
                width: e,
                height: n,
                streamBandwidth: t,
                decodedFrames: i,
                droppedFrames: r,
                corruptedFrames: o,
                stallsDetected: s,
                gapsJumped: u,
                estimatedBandwidth: l,
                completionPercent: d,
                loadLatency: h,
                manifestTimeSeconds: f,
                drmTimeSeconds: p,
                playTime: g,
                pauseTime: m,
                bufferingTime: v,
                licenseTime: y,
                liveLatency: b,
                maxSegmentDuration: w,
                manifestSizeBytes: x,
                bytesDownloaded: S,
                nonFatalErrorCount: T,
                manifestPeriodCount: A,
                manifestGapCount: k,
                stateHistory: I,
                switchHistory: C,
              };
            }),
            (i.Og = function (e, t, n, i, r, a, o) {
              o = void 0 !== o && o;
              var s,
                u,
                l,
                c,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b = this;
              return L(function (w) {
                switch (w.g) {
                  case 1:
                    if (b.m != ng && b.m != ig) throw new Ee(1, 7, 7004);
                    if (
                      ("subtitles" != n &&
                        "captions" != n &&
                        X(
                          "Using a kind value different of `subtitles` or `captions` can cause unwanted issues."
                        ),
                      i)
                    ) {
                      w.u(2);
                      break;
                    }
                    return x(w, Ap(b, e), 3);
                  case 3:
                    i = w.h;
                  case 2:
                    if (
                      ((s = []), b.B && (s = b.B.getCuePoints()), b.m != ig)
                    ) {
                      w.u(4);
                      break;
                    }
                    return (
                      o && (n = "forced"),
                      x(
                        w,
                        (function (e, t, n, i, r, a, o) {
                          var s, u, l, c;
                          return L(function (d) {
                            if (1 == d.g)
                              return "text/vtt" != r || o.length
                                ? x(
                                    d,
                                    kp(
                                      e,
                                      t,
                                      e.D,
                                      e.g.streaming.retryParameters
                                    ),
                                    3
                                  )
                                : d.u(2);
                            2 != d.g &&
                              ((s = d.h),
                              (u = Ip(e, s, r, o)),
                              (l = new Blob([u], { type: "text/vtt" })),
                              (t = Sd(l)),
                              (r = "text/vtt")),
                              (c = document.createElement("track"));
                            var h = e.L,
                              f = t;
                            try {
                              if (h.g.enabled) {
                                var p = Mf(h);
                                (p.ot = Of), (p.su = !0);
                                var g = Lf(f, Pf(p));
                              } else g = f;
                            } catch (m) {
                              Y(
                                "CMCD_TEXT_TRACK_ERROR",
                                "Could not generate text track CMCD data.",
                                m
                              ),
                                (g = f);
                            }
                            return (
                              (c.src = g),
                              (c.label = a),
                              (c.kind = i),
                              (c.srclang = n),
                              e.h.getAttribute("crossorigin") ||
                                e.h.setAttribute("crossorigin", "anonymous"),
                              e.h.appendChild(c),
                              d.return(c)
                            );
                          });
                        })(b, e, t, n, i, a || "", s),
                        5
                      )
                    );
                  case 5:
                    if (
                      ((u = nr(t)),
                      (l = b.Yb()),
                      (c = l.find(function (e) {
                        return (
                          nr(e.language) == u &&
                          e.label == (a || "") &&
                          e.kind == n
                        );
                      })))
                    )
                      return jp(b), w.return(c);
                    throw new Ee(1, 2, 2012);
                  case 4:
                    if (
                      ((d = Nt),
                      (h = b.La()),
                      (f = h.end - h.start),
                      b.i && (f = b.i.presentationTimeline.getDuration()),
                      1 / 0 == f)
                    )
                      throw new Ee(1, 4, 4033);
                    if (!s.length) {
                      w.u(6);
                      break;
                    }
                    return x(
                      w,
                      kp(b, e, b.D, b.g.streaming.retryParameters),
                      7
                    );
                  case 7:
                    (p = w.h),
                      (g = Ip(b, p, i, s)),
                      (m = new Blob([g], { type: "text/vtt" })),
                      (e = Sd(m)),
                      (i = "text/vtt");
                  case 6:
                    if (
                      ((v = {
                        id: b.fe++,
                        originalId: null,
                        groupId: null,
                        createSegmentIndex: function () {
                          return Promise.resolve();
                        },
                        segmentIndex: Ds(0, f, [e]),
                        mimeType: i || "",
                        codecs: r || "",
                        kind: n,
                        encrypted: !1,
                        drmInfos: [],
                        keyIds: new Set(),
                        language: t,
                        originalLanguage: t,
                        label: a || null,
                        type: d.ua,
                        primary: !1,
                        trickModeVideo: null,
                        dependencyStream: null,
                        emsgSchemeIdUris: null,
                        roles: [],
                        forced: !!o,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        accessibilityPurpose: null,
                        external: !0,
                        fastSwitching: !1,
                        fullMimeTypes: new Set([Mi(i || "", r || "")]),
                        isAudioMuxedInVideo: !1,
                        baseOriginalId: null,
                      }),
                      (y = Mi(v.mimeType, v.codecs)),
                      !Gi(y))
                    )
                      throw new Ee(2, 2, 2014, i);
                    return b.i.textStreams.push(v), jp(b), w.return(br(v));
                }
              });
            }),
            (i.Pg = function (e, t) {
              var n,
                i,
                r,
                a,
                o,
                s,
                u,
                l,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b,
                w,
                S = this;
              return L(function (T) {
                switch (T.g) {
                  case 1:
                    if (S.m != ng && S.m != ig) throw new Ee(1, 7, 7004);
                    if (t) {
                      T.u(2);
                      break;
                    }
                    return x(T, Ap(S, e), 3);
                  case 3:
                    t = T.h;
                  case 2:
                    if ("text/vtt" != t) throw new Ee(1, 2, 2017, e);
                    if (
                      ((n = Nt),
                      (i = S.La()),
                      (r = i.end - i.start),
                      S.i && (r = S.i.presentationTimeline.getDuration()),
                      1 / 0 == r)
                    )
                      throw new Ee(1, 4, 4045);
                    return x(
                      T,
                      kp(S, e, S.D, S.g.streaming.retryParameters),
                      4
                    );
                  case 4:
                    if (((a = T.h), !(o = zi(t)))) throw new Ee(2, 2, 2014, t);
                    for (
                      s = o(),
                        u = {
                          periodStart: 0,
                          segmentStart: 0,
                          segmentEnd: r,
                          vttOffset: 0,
                        },
                        l = ke(a),
                        d = s.parseMedia(l, u, e, []),
                        h = [],
                        f = c(d),
                        p = f.next(),
                        g = {};
                      !p.done;
                      g = { $d: void 0, lc: void 0 }, p = f.next()
                    )
                      (g.lc = p.value),
                        (g.$d = null),
                        (m = (function (t) {
                          return function () {
                            return (
                              null == t.$d && (t.$d = Mt([e], [t.lc.payload])),
                              t.$d || []
                            );
                          };
                        })(g)),
                        (v = new vs(
                          g.lc.startTime,
                          g.lc.endTime,
                          m,
                          0,
                          null,
                          null,
                          0,
                          0,
                          1 / 0
                        )),
                        g.lc.payload.includes("#xywh") &&
                          4 ===
                            (y = g.lc.payload.split("#xywh=")[1].split(","))
                              .length &&
                          v.zg({
                            height: parseInt(y[3], 10),
                            positionX: parseInt(y[0], 10),
                            positionY: parseInt(y[1], 10),
                            width: parseInt(y[2], 10),
                          }),
                        h.push(v);
                    if (((b = t), !h.length)) {
                      T.u(5);
                      break;
                    }
                    return x(
                      T,
                      lf(h[0].T()[0], S.D, S.g.manifest.retryParameters),
                      6
                    );
                  case 6:
                    b = T.h;
                  case 5:
                    return (
                      (w = {
                        id: S.fe++,
                        originalId: null,
                        groupId: null,
                        createSegmentIndex: function () {
                          return Promise.resolve();
                        },
                        segmentIndex: new Es(h),
                        mimeType: b || "",
                        codecs: "",
                        kind: "",
                        encrypted: !1,
                        drmInfos: [],
                        keyIds: new Set(),
                        language: "und",
                        originalLanguage: null,
                        label: null,
                        type: n.Mg,
                        primary: !1,
                        trickModeVideo: null,
                        dependencyStream: null,
                        emsgSchemeIdUris: null,
                        roles: [],
                        forced: !1,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        tilesLayout: "1x1",
                        accessibilityPurpose: null,
                        external: !0,
                        fastSwitching: !1,
                        fullMimeTypes: new Set([Mi(b || "", "")]),
                        isAudioMuxedInVideo: !1,
                        baseOriginalId: null,
                      }),
                      S.m == ig ? S.ae.push(w) : S.i.imageStreams.push(w),
                      jp(S),
                      T.return(wr(w))
                    );
                }
              });
            }),
            (i.Ng = function (e, t, n) {
              var i,
                r,
                a,
                o,
                s,
                u,
                l,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b = this;
              return L(function (w) {
                switch (w.g) {
                  case 1:
                    if (b.m != ng && b.m != ig) throw new Ee(1, 7, 7004);
                    if (n) {
                      w.u(2);
                      break;
                    }
                    return x(w, Ap(b, e), 3);
                  case 3:
                    n = w.h;
                  case 2:
                    if (
                      ((i = Nt),
                      (r = b.La()),
                      (a = r.end - r.start),
                      b.i && (a = b.i.presentationTimeline.getDuration()),
                      1 / 0 == a)
                    )
                      throw new Ee(1, 4, 4054);
                    return x(
                      w,
                      kp(b, e, b.D, b.g.streaming.retryParameters),
                      4
                    );
                  case 4:
                    if (((o = w.h), !(s = zi(n)))) throw new Ee(2, 2, 2014, n);
                    for (
                      u = s(),
                        l = {
                          periodStart: 0,
                          segmentStart: 0,
                          segmentEnd: a,
                          vttOffset: 0,
                        },
                        d = ke(o),
                        h = u.parseMedia(d, l, e, []),
                        f = [],
                        p = c(h),
                        g = p.next(),
                        m = {};
                      !g.done;
                      m = { pd: void 0 }, g = p.next()
                    )
                      (m.pd = g.value),
                        (v = new vs(
                          m.pd.startTime,
                          m.pd.endTime,
                          (function (e) {
                            return function () {
                              return [e.pd.payload];
                            };
                          })(m),
                          0,
                          null,
                          null,
                          0,
                          0,
                          1 / 0
                        )),
                        f.push(v);
                    return (
                      (y = {
                        id: b.fe++,
                        originalId: null,
                        groupId: null,
                        createSegmentIndex: function () {
                          return Promise.resolve();
                        },
                        segmentIndex: new Es(f),
                        mimeType: "text/plain",
                        codecs: "",
                        kind: "",
                        encrypted: !1,
                        drmInfos: [],
                        keyIds: new Set(),
                        language: t,
                        originalLanguage: t,
                        label: null,
                        type: i.ua,
                        primary: !1,
                        trickModeVideo: null,
                        dependencyStream: null,
                        emsgSchemeIdUris: null,
                        roles: [],
                        forced: !1,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        accessibilityPurpose: null,
                        external: !0,
                        fastSwitching: !1,
                        fullMimeTypes: new Set([Mi("text/plain", "")]),
                        isAudioMuxedInVideo: !1,
                        baseOriginalId: null,
                      }),
                      b.dd.push(y),
                      jp(b),
                      w.return(br(y))
                    );
                }
              });
            }),
            (i.vi = function (e, t) {
              (this.la.width = e), (this.la.height = t);
            }),
            (i.hf = function (e) {
              if (this.m == ng) {
                var t = this.j;
                if (((e = void 0 === e ? 0.1 : e), t.m.g)) t = !1;
                else if (t.B) t = !1;
                else {
                  for (
                    var n = c(t.i.values()), i = n.next();
                    !i.done;
                    i = n.next()
                  )
                    !(i = i.value).Qc ||
                      i.sa ||
                      i.Va ||
                      ((i.Qc = !1), bh(t, i, e));
                  t = !0;
                }
              } else t = !1;
              return t;
            }),
            (i.Oe = function () {
              return (
                X(
                  "Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."
                ),
                this.i
              );
            }),
            (i.qh = function () {
              return this.nc;
            }),
            (i.kh = function () {
              var e = { video: null, audio: null, text: null };
              if (this.m != ng) return e;
              for (
                var t = this.j.l,
                  n = this.h.currentTime,
                  i = (t = c([t.video, t.audio, this.j.s])).next();
                !i.done;
                i = t.next()
              )
                if ((i = i.value) && i.segmentIndex) {
                  var r = i.segmentIndex.find(n);
                  (r = {
                    codecs: (r = i.segmentIndex.get(r)).codecs || i.codecs,
                    mimeType: r.mimeType || i.mimeType,
                    bandwidth: r.bandwidth || i.bandwidth,
                  }),
                    "video" == i.type
                      ? ((r.width = i.width),
                        (r.height = i.height),
                        (e.video = r))
                      : "audio" == i.type
                      ? (e.audio = r)
                      : i.type == Rt && (e.text = r);
                }
              return e;
            }),
            (i.yi = function (e) {
              this.Nd = e;
            }),
            (i.disableStream = function (e, t) {
              if (
                !this.g.abr.enabled ||
                this.m === eg ||
                !navigator.onLine ||
                0 == t ||
                !this.i
              )
                return !1;
              if (
                this.i.variants.some(function (t) {
                  var n = t[e.type];
                  return (
                    !(!n || n.id === e.id || t.disabledUntilTime) &&
                    ("audio" != e.type || e.language === n.language)
                  );
                })
              ) {
                for (
                  var n = !1, i = !1, r = c(this.i.variants), a = r.next();
                  !a.done;
                  a = r.next()
                ) {
                  var o = (a = a.value)[e.type];
                  o &&
                    (o.id === e.id
                      ? ((a.disabledUntilTime = Date.now() / 1e3 + t), (n = !0))
                      : o.trickModeVideo &&
                        o.trickModeVideo.id == e.id &&
                        (i = !0));
                }
                return (
                  !(!n && i) &&
                  (this.Td.ta(1),
                  (t = this.hb().video.reduce(function (e, t) {
                    return e + t.end - t.start;
                  }, 0)),
                  Np(this, !1, t, !0, !1),
                  !0)
                );
              }
              return !1;
            }),
            (i.addFont = function (t, n) {
              return (function (t, n) {
                var i, r, a, o, s;
                return L(function (u) {
                  if (1 == u.g)
                    return "fonts" in document && "FontFace" in e
                      ? x(u, document.fonts.ready, 2)
                      : u.return();
                  if (!("entries" in document.fonts)) return u.return();
                  for (
                    i = function (e) {
                      for (
                        var t = [], n = (e = e.entries()).next();
                        !1 === n.done;

                      )
                        t.push(n.value), (n = e.next());
                      return t;
                    },
                      r = c(i(document.fonts)),
                      a = r.next();
                    !a.done;
                    a = r.next()
                  )
                    if ((o = a.value).family === t && "swap" === o.display)
                      return u.return();
                  (s = new FontFace(t, "url(" + n + ")", { display: "swap" })),
                    document.fonts.add(s),
                    S(u);
                });
              })(t, n);
            }),
            (i.Ka = function () {
              return (
                !(!this.h || !this.h.remote) &&
                "disconnected" != this.h.remote.state
              );
            }),
            (i.vc = function () {
              return (
                !(this.h && !this.h.ended) ||
                (this.xa && !this.R() && this.h.currentTime >= this.La().end)
              );
            }),
            F("shaka.Player", Qf),
            (Qf.prototype.isEnded = Qf.prototype.vc),
            (Qf.prototype.isRemotePlayback = Qf.prototype.Ka),
            (Qf.prototype.addFont = Qf.prototype.addFont),
            (Qf.prototype.setVideoContainer = Qf.prototype.yi),
            (Qf.prototype.getFetchedPlaybackInfo = Qf.prototype.kh),
            (Qf.prototype.getManifestParserFactory = Qf.prototype.qh),
            (Qf.prototype.getManifest = Qf.prototype.Oe),
            (Qf.prototype.retryStreaming = Qf.prototype.hf),
            (Qf.prototype.setMaxHardwareResolution = Qf.prototype.vi),
            (Qf.prototype.addChaptersTrack = Qf.prototype.Ng),
            (Qf.prototype.addThumbnailsTrack = Qf.prototype.Pg),
            (Qf.prototype.addTextTrackAsync = Qf.prototype.Og),
            (Qf.prototype.getStats = Qf.prototype.getStats),
            (Qf.prototype.getBufferedInfo = Qf.prototype.hb),
            (Qf.prototype.getSegmentAvailabilityDuration = Qf.prototype.vd),
            (Qf.prototype.getPresentationStartTimeAsDate = Qf.prototype.Vf),
            (Qf.prototype.getPlayheadTimeAsDate = Qf.prototype.vh),
            (Qf.prototype.setTextTrackVisibility = Qf.prototype.xi),
            (Qf.prototype.getChapters = Qf.prototype.fh),
            (Qf.prototype.getChaptersTracks = Qf.prototype.gh),
            (Qf.prototype.isTextTrackVisible = Qf.prototype.Ue),
            (Qf.prototype.selectVariantsByLabel = Qf.prototype.ti),
            (Qf.prototype.selectTextLanguage = Qf.prototype.sg),
            (Qf.prototype.selectAudioLanguage = Qf.prototype.rg),
            (Qf.prototype.getTextLanguages = Qf.prototype.Bh),
            (Qf.prototype.getAudioLanguages = Qf.prototype.bh),
            (Qf.prototype.getTextLanguagesAndRoles = Qf.prototype.Ch),
            (Qf.prototype.getAudioLanguagesAndRoles = Qf.prototype.dh),
            (Qf.prototype.getAudioTracks = Qf.prototype.getAudioTracks),
            (Qf.prototype.selectAudioTrack = Qf.prototype.si),
            (Qf.prototype.selectVariantTrack = Qf.prototype.Rd),
            (Qf.prototype.selectTextTrack = Qf.prototype.tg),
            (Qf.prototype.getThumbnails = Qf.prototype.Eh),
            (Qf.prototype.getAllThumbnails = Qf.prototype.ah),
            (Qf.prototype.getImageTracks = Qf.prototype.mh),
            (Qf.prototype.getTextTracks = Qf.prototype.Yb),
            (Qf.prototype.getVariantTracks = Qf.prototype.yb),
            (Qf.prototype.cancelTrickPlay = Qf.prototype.Hc),
            (Qf.prototype.trickPlay = Qf.prototype.gd),
            (Qf.prototype.getPlaybackRate = Qf.prototype.Ra),
            (Qf.prototype.isBuffering = Qf.prototype.Zf),
            (Qf.prototype.getKeyStatuses = Qf.prototype.sd),
            (Qf.prototype.getActiveSessionsMetadata = Qf.prototype.Me),
            (Qf.prototype.getExpiration = Qf.prototype.Ne),
            (Qf.prototype.drmInfo = Qf.prototype.drmInfo),
            (Qf.prototype.keySystem = Qf.prototype.keySystem),
            (Qf.prototype.isFullyLoaded = Qf.prototype.Nh),
            (Qf.prototype.goToLive = Qf.prototype.Jh),
            (Qf.prototype.seekRange = Qf.prototype.La),
            (Qf.prototype.isAudioOnly = Qf.prototype.Mh),
            (Qf.prototype.isInProgress = Qf.prototype.wc),
            (Qf.prototype.isLive = Qf.prototype.R),
            (Qf.prototype.getAdManager = Qf.prototype.$g),
            (Qf.prototype.getAssetUri = Qf.prototype.qd),
            (Qf.prototype.getNetworkingEngine = Qf.prototype.Pe),
            (Qf.prototype.getMediaElement = Qf.prototype.th),
            (Qf.prototype.getManifestType = Qf.prototype.Tf),
            (Qf.prototype.getLoadMode = Qf.prototype.ph),
            (Qf.prototype.resetConfiguration = Qf.prototype.mi),
            (Qf.prototype.getBufferFullness = Qf.prototype.Rf),
            (Qf.prototype.getNonDefaultConfiguration = Qf.prototype.uh),
            (Qf.prototype.getConfigurationForLowLatency = Qf.prototype.hh),
            (Qf.prototype.getConfiguration = Qf.prototype.getConfiguration),
            (Qf.prototype.configurationForLowLatency = Qf.prototype.Xg),
            (Qf.prototype.configure = Qf.prototype.configure),
            (Qf.prototype.releaseAllMutexes = Qf.prototype.ki),
            (Qf.prototype.destroyAllPreloads = Qf.prototype.Mf),
            (Qf.prototype.preload = Qf.prototype.preload),
            (Qf.prototype.detachAndSavePreload = Qf.prototype.Nf),
            (Qf.prototype.unloadAndSavePreload = Qf.prototype.Bi),
            (Qf.prototype.load = Qf.prototype.load),
            (Qf.prototype.updateStartTime = Qf.prototype.Fi),
            (Qf.prototype.unload = Qf.prototype.hd),
            (Qf.prototype.detach = Qf.prototype.detach),
            (Qf.prototype.attachCanvas = Qf.prototype.Sg),
            (Qf.prototype.attach = Qf.prototype.Cb),
            (Qf.probeSupport = function (t) {
              var n, i, r, a, o;
              return (
                (t = void 0 === t || t),
                L(function (s) {
                  switch (s.g) {
                    case 1:
                      if (((n = {}), !t)) {
                        s.u(2);
                        break;
                      }
                      return x(
                        s,
                        (function () {
                          var t,
                            n,
                            i,
                            r,
                            a,
                            o,
                            s,
                            u,
                            l,
                            d,
                            h,
                            f,
                            p,
                            g,
                            m,
                            v,
                            y,
                            b,
                            w,
                            I,
                            C,
                            M,
                            E,
                            D,
                            P,
                            R,
                            N,
                            _,
                            U,
                            j,
                            O,
                            B,
                            F;
                          return L(function (H) {
                            if (1 == H.g) {
                              if (
                                ((t =
                                  "org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(
                                    " "
                                  )),
                                !(
                                  e.MediaKeys &&
                                  e.navigator &&
                                  e.navigator.requestMediaKeySystemAccess &&
                                  e.MediaKeySystemAccess &&
                                  e.MediaKeySystemAccess.prototype
                                    .getConfiguration
                                ))
                              ) {
                                for (
                                  n = {}, i = c(t), r = i.next();
                                  !r.done;
                                  r = i.next()
                                )
                                  (a = r.value), (n[a] = null);
                                return H.return(n);
                              }
                              for (
                                o = "1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(
                                  " "
                                ),
                                  u = {
                                    "com.widevine.alpha": (s = [
                                      "SW_SECURE_CRYPTO",
                                      "SW_SECURE_DECODE",
                                      "HW_SECURE_CRYPTO",
                                      "HW_SECURE_DECODE",
                                      "HW_SECURE_ALL",
                                    ]),
                                    "com.widevine.alpha.experiment": s,
                                    "com.microsoft.playready.recommendation": [
                                      "150",
                                      "2000",
                                      "3000",
                                    ],
                                  },
                                  h = {
                                    videoCapabilities: (l = [
                                      {
                                        contentType:
                                          'video/mp4; codecs="avc1.42E01E"',
                                      },
                                      {
                                        contentType: 'video/webm; codecs="vp8"',
                                      },
                                    ]),
                                    audioCapabilities: (d = [
                                      {
                                        contentType:
                                          'audio/mp4; codecs="mp4a.40.2"',
                                      },
                                      {
                                        contentType:
                                          'audio/webm; codecs="opus"',
                                      },
                                    ]),
                                    initDataTypes: [
                                      "cenc",
                                      "sinf",
                                      "skd",
                                      "keyids",
                                    ],
                                  },
                                  f = [null, "cenc", "cbcs", "cbcs-1-9"],
                                  p = new Map(),
                                  g = function (e, t) {
                                    var n, i, r, a, s, u, l, d, h, f, g, m, v;
                                    return L(function (y) {
                                      switch (y.g) {
                                        case 1:
                                          return (
                                            T(y, 2),
                                            x(y, t.createMediaKeys(), 5)
                                          );
                                        case 5:
                                          n = y.h;
                                        case 4:
                                          A(y, 3);
                                          break;
                                        case 2:
                                          return k(y), y.return();
                                        case 3:
                                          if (
                                            ((r =
                                              !!(i =
                                                t.getConfiguration()
                                                  .sessionTypes) &&
                                              i.includes("persistent-license")),
                                            Ge() && (r = !1),
                                            (a =
                                              t.getConfiguration()
                                                .videoCapabilities),
                                            (s =
                                              t.getConfiguration()
                                                .audioCapabilities),
                                            (u = {
                                              persistentState: r,
                                              encryptionSchemes: [],
                                              videoRobustnessLevels: [],
                                              audioRobustnessLevels: [],
                                              minHdcpVersions: [],
                                            }),
                                            p.has(e) && p.get(e)
                                              ? (u = p.get(e))
                                              : p.set(e, u),
                                            (l = a[0].encryptionScheme) &&
                                              !u.encryptionSchemes.includes(
                                                l
                                              ) &&
                                              u.encryptionSchemes.push(l),
                                            (d = a[0].robustness) &&
                                              !u.videoRobustnessLevels.includes(
                                                d
                                              ) &&
                                              u.videoRobustnessLevels.push(d),
                                            (h = s[0].robustness) &&
                                              !u.audioRobustnessLevels.includes(
                                                h
                                              ) &&
                                              u.audioRobustnessLevels.push(h),
                                            ("getStatusForPolicy" in n))
                                          ) {
                                            for (
                                              f = [],
                                                g = c(o),
                                                m = g.next(),
                                                v = {};
                                              !m.done;
                                              v = { Rc: void 0 }, m = g.next()
                                            )
                                              (v.Rc = m.value),
                                                u.minHdcpVersions.includes(
                                                  v.Rc
                                                ) ||
                                                  f.push(
                                                    n
                                                      .getStatusForPolicy({
                                                        minHdcpVersion: v.Rc,
                                                      })
                                                      .then(
                                                        (function (e) {
                                                          return function (t) {
                                                            "usable" != t ||
                                                              u.minHdcpVersions.includes(
                                                                e.Rc
                                                              ) ||
                                                              u.minHdcpVersions.push(
                                                                e.Rc
                                                              );
                                                          };
                                                        })(v)
                                                      )
                                                  );
                                            return x(y, Promise.all(f), 0);
                                          }
                                          y.u(0);
                                      }
                                    });
                                  },
                                  m = function (e, t, n, i) {
                                    var r, a, o, s, u, l, d, f, p, m;
                                    return L(function (v) {
                                      switch (v.g) {
                                        case 1:
                                          for (
                                            T(v, 2),
                                              r = hn(h),
                                              a = c(r.videoCapabilities),
                                              o = a.next();
                                            !o.done;
                                            o = a.next()
                                          )
                                            ((s = o.value).encryptionScheme =
                                              t),
                                              (s.robustness = n);
                                          for (
                                            u = c(r.audioCapabilities),
                                              l = u.next();
                                            !l.done;
                                            l = u.next()
                                          )
                                            ((d = l.value).encryptionScheme =
                                              t),
                                              (d.robustness = i);
                                          return (
                                            ((f = hn(r)).persistentState =
                                              "required"),
                                            (f.sessionTypes = [
                                              "persistent-license",
                                            ]),
                                            (p = [f, r]),
                                            nt()
                                              ? x(
                                                  v,
                                                  $i(
                                                    5,
                                                    navigator.requestMediaKeySystemAccess(
                                                      e,
                                                      p
                                                    )
                                                  ),
                                                  7
                                                )
                                              : x(
                                                  v,
                                                  navigator.requestMediaKeySystemAccess(
                                                    e,
                                                    p
                                                  ),
                                                  6
                                                )
                                          );
                                        case 6:
                                          (m = v.h), v.u(5);
                                          break;
                                        case 7:
                                          m = v.h;
                                        case 5:
                                          return x(v, g(e, m), 8);
                                        case 8:
                                          A(v, 0);
                                          break;
                                        case 2:
                                          k(v), S(v);
                                      }
                                    });
                                  },
                                  v = function (e, t, n, i) {
                                    var r, a, o;
                                    return L(function (s) {
                                      switch (s.g) {
                                        case 1:
                                          return (
                                            T(s, 2),
                                            (r = {
                                              type: "media-source",
                                              video: {
                                                contentType: l[0].contentType,
                                                width: 640,
                                                height: 480,
                                                bitrate: 1,
                                                framerate: 1,
                                              },
                                              audio: {
                                                contentType: d[0].contentType,
                                                channels: 2,
                                                bitrate: 1,
                                                samplerate: 1,
                                              },
                                              keySystemConfiguration: {
                                                keySystem: e,
                                                video: {
                                                  encryptionScheme: t,
                                                  robustness: n,
                                                },
                                                audio: {
                                                  encryptionScheme: t,
                                                  robustness: i,
                                                },
                                              },
                                            }),
                                            nt()
                                              ? x(
                                                  s,
                                                  $i(
                                                    5,
                                                    navigator.mediaCapabilities.decodingInfo(
                                                      r
                                                    )
                                                  ),
                                                  7
                                                )
                                              : x(
                                                  s,
                                                  navigator.mediaCapabilities.decodingInfo(
                                                    r
                                                  ),
                                                  6
                                                )
                                          );
                                        case 6:
                                          (a = s.h), s.u(5);
                                          break;
                                        case 7:
                                          a = s.h;
                                        case 5:
                                          return (
                                            (o = a.keySystemAccess),
                                            x(s, g(e, o), 8)
                                          );
                                        case 8:
                                          A(s, 0);
                                          break;
                                        case 2:
                                          k(s), S(s);
                                      }
                                    });
                                  },
                                  y = c(t),
                                  b = y.next();
                                !b.done;
                                b = y.next()
                              )
                                (w = b.value), p.set(w, null);
                              for (
                                I = function (e) {
                                  return "org.w3.clearkey" !== e || !Ye();
                                },
                                  C = [],
                                  M = c(f),
                                  E = M.next();
                                !E.done;
                                E = M.next()
                              )
                                for (
                                  D = E.value, P = c(t), R = P.next();
                                  !R.done;
                                  R = P.next()
                                )
                                  (N = R.value),
                                    I(N) &&
                                      (C.push(m(N, D, "", "")),
                                      C.push(v(N, D, "", "")));
                              for (
                                _ = c(t), U = _.next();
                                !U.done;
                                U = _.next()
                              )
                                for (
                                  j = U.value, O = c(u[j] || []), B = O.next();
                                  !B.done;
                                  B = O.next()
                                )
                                  (F = B.value),
                                    I(j) &&
                                      (C.push(m(j, null, F, "")),
                                      C.push(m(j, null, "", F)),
                                      C.push(v(j, null, F, "")),
                                      C.push(v(j, null, "", F)));
                              return x(H, Promise.all(C), 2);
                            }
                            return H.return(_l(p));
                          });
                        })(),
                        3
                      );
                    case 3:
                      n = s.h;
                    case 2:
                      return (
                        (i = (function () {
                          var e = {};
                          if (Be())
                            for (
                              var t = c(Js.keys()), n = t.next();
                              !n.done;
                              n = t.next()
                            )
                              e[n.value] = !0;
                          for (
                            n = (t = c([
                              "application/dash+xml",
                              "application/x-mpegurl",
                              "application/vnd.apple.mpegurl",
                              "application/vnd.ms-sstr+xml",
                            ])).next();
                            !n.done;
                            n = t.next()
                          )
                            e[(n = n.value)] = Be() ? Js.has(n) : Fe(n);
                          return e;
                        })()),
                        (r = (function () {
                          for (
                            var e =
                                'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'
                                  .split(",")
                                  .concat(d(Fi)),
                              t = {},
                              n = (e = c(e)).next();
                            !n.done;
                            n = e.next()
                          ) {
                            Gi((n = n.value))
                              ? (t[n] = !0)
                              : (t[n] = Be() ? Ht(n) || !!xi(n) : Fe(n));
                            var i = n.split(";")[0];
                            t[i] = t[i] || t[n];
                          }
                          return t;
                        })()),
                        x(s, ut(), 4)
                      );
                    case 4:
                      return (
                        (a = s.h),
                        (o = {
                          manifest: i,
                          media: r,
                          drm: n,
                          hardwareResolution: a,
                        }),
                        ag.forEach(function (e, t) {
                          o[t] = e();
                        }),
                        s.return(o)
                      );
                  }
                })
              );
            }),
            (Qf.isBrowserSupported = function () {
              return (
                e.Promise ||
                  X("A Promise implementation or polyfill is required"),
                !(
                  !(e.Promise && e.Uint8Array && Array.prototype.forEach) ||
                  rt("Trident/")
                ) &&
                  (!!Be() || Fe("application/x-mpegurl"))
              );
            }),
            (Qf.setAdManagerFactory = function (e) {
              og = e;
            }),
            (Qf.registerSupportPlugin = function (e, t) {
              ag.set(e, t);
            }),
            (Qf.prototype.destroy = Qf.prototype.destroy);
          var eg = 0,
            tg = 1,
            ng = 2,
            ig = 3;
          (Qf.LoadMode = {
            DESTROYED: eg,
            NOT_LOADED: tg,
            MEDIA_SOURCE: ng,
            SRC_EQUALS: ig,
          }),
            (Qf.version = "4.14.12-npm-dirty");
          var rg = ["", "14"];
          ae = new (function (e) {
            (this.g = e), (this.i = ie), (this.h = re);
          })(new te(Number(rg[0]), Number(rg[1])));
          var ag = new Map(),
            og = null;
          function sg() {}
          function ug(e, t) {
            for (
              e = { priority: t || 0, callback: e }, t = 0;
              t < lg.length;
              t++
            )
              if (lg[t].priority < e.priority) return void lg.splice(t, 0, e);
            lg.push(e);
          }
          F("shaka.polyfill", sg),
            (sg.register = ug),
            (sg.installAll = function () {
              for (var e = c(lg), t = e.next(); !t.done; t = e.next()) {
                t = t.value;
                try {
                  t.callback();
                } catch (n) {
                  X("Error installing polyfill!", n);
                }
              }
            });
          var lg = [];
          function cg() {}
          function dg() {
            if (
              !Object.getOwnPropertyDescriptor(Element.prototype, "ariaHidden")
            )
              for (
                var e = c([
                    "ariaHidden",
                    "ariaLabel",
                    "ariaPressed",
                    "ariaSelected",
                  ]),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                hg(t.value);
          }
          function hg(e) {
            var t = "aria-" + e.toLowerCase().replace(/^aria/, "");
            Object.defineProperty(Element.prototype, e, {
              get: function () {
                return this.getAttribute(t);
              },
              set: function (e) {
                null == e || null == e
                  ? this.removeAttribute(t)
                  : this.setAttribute(t, e);
              },
            });
          }
          function fg() {}
          function pg() {
            $e() || rt("Sky_STB") || ny();
          }
          function gg() {}
          function mg() {
            if (e.Document) {
              var t = Element.prototype;
              (t.requestFullscreen =
                t.requestFullscreen ||
                t.mozRequestFullScreen ||
                t.msRequestFullscreen ||
                t.webkitRequestFullscreen),
                ((t = Document.prototype).exitFullscreen =
                  t.exitFullscreen ||
                  t.mozCancelFullScreen ||
                  t.msExitFullscreen ||
                  t.webkitCancelFullScreen),
                "fullscreenElement" in document ||
                  (Object.defineProperty(document, "fullscreenElement", {
                    get: function () {
                      return (
                        document.mozFullScreenElement ||
                        document.msFullscreenElement ||
                        document.webkitCurrentFullScreenElement ||
                        document.webkitFullscreenElement
                      );
                    },
                  }),
                  Object.defineProperty(document, "fullscreenEnabled", {
                    get: function () {
                      return (
                        document.mozFullScreenEnabled ||
                        document.msFullscreenEnabled ||
                        document.webkitFullscreenEnabled
                      );
                    },
                  })),
                document.addEventListener("webkitfullscreenchange", vg),
                document.addEventListener("webkitfullscreenerror", vg),
                document.addEventListener("mozfullscreenchange", vg),
                document.addEventListener("mozfullscreenerror", vg),
                document.addEventListener("MSFullscreenChange", vg),
                document.addEventListener("MSFullscreenError", vg);
            }
          }
          function vg(e) {
            var t = e.type.replace(/^(webkit|moz|MS)/, "").toLowerCase(),
              n = document.createEvent("Event");
            n.initEvent(t, e.bubbles, e.cancelable), e.target.dispatchEvent(n);
          }
          function yg() {}
          function bg() {
            var e = !0;
            ((We() && !nt() && !it()) ||
              Ye() ||
              Je() ||
              $e() ||
              qe() ||
              ze() ||
              Ze() ||
              Qe() ||
              (at() && !Ye())) &&
              (e = !1),
              (e && navigator.mediaCapabilities) ||
                (navigator.mediaCapabilities ||
                  (navigator.mediaCapabilities = {}),
                (xg = navigator.mediaCapabilities),
                (navigator.mediaCapabilities.decodingInfo = wg));
          }
          function wg(t) {
            var n, i, r, a, o, s, u;
            return L(function (l) {
              switch (l.g) {
                case 1:
                  if (
                    ((n = {
                      supported: !1,
                      powerEfficient: !0,
                      smooth: !0,
                      keySystemAccess: null,
                      configuration: t,
                    }),
                    (i = t.video),
                    (r = t.audio),
                    "media-source" != t.type)
                  ) {
                    if ("file" != t.type) return l.return(n);
                    if (
                      (i && ((a = i.contentType), !Fe(a))) ||
                      (r && ((o = r.contentType), !Fe(o)))
                    )
                      return l.return(n);
                    l.u(2);
                    break;
                  }
                  if (!Be()) return l.return(n);
                  if (!i) {
                    l.u(3);
                    break;
                  }
                  return x(
                    l,
                    (function (t) {
                      var n;
                      return L(function (i) {
                        return 1 == i.g
                          ? We()
                            ? x(
                                i,
                                (function (t) {
                                  var n, i, r, a;
                                  return L(function (o) {
                                    if (1 == o.g) {
                                      if (
                                        !(
                                          e.cast &&
                                          cast.__platform__ &&
                                          cast.__platform__.canDisplayType
                                        )
                                      )
                                        return o.return(Ht(t.contentType));
                                      switch (
                                        ((n = t.contentType),
                                        t.width &&
                                          t.height &&
                                          1280 < t.width &&
                                          720 < t.height &&
                                          (n +=
                                            "; width=" +
                                            t.width +
                                            "; height=" +
                                            t.height),
                                        t.framerate &&
                                          (24 > (i = Math.round(t.framerate)) ||
                                            30 < i) &&
                                          (n += "; framerate=" + t.framerate),
                                        t.transferFunction || "")
                                      ) {
                                        case "":
                                        case "srgb":
                                          break;
                                        case "pq":
                                          n += "; eotf=smpte2084";
                                          break;
                                        case "hlg":
                                          n += "; eotf=arib-std-b67";
                                          break;
                                        default:
                                          return o.return(!1);
                                      }
                                      return (
                                        (r = !1),
                                        (a = Sg).has(n)
                                          ? ((r = a.get(n)), o.u(2))
                                          : x(
                                              o,
                                              cast.__platform__.canDisplayType(
                                                n
                                              ),
                                              3
                                            )
                                      );
                                    }
                                    return (
                                      2 != o.g && ((r = o.h), a.set(n, r)),
                                      o.return(r)
                                    );
                                  });
                                })(t),
                                3
                              )
                            : i.u(2)
                          : 2 != i.g
                          ? ((n = i.h), i.return(n))
                          : i.return(Ht(t.contentType));
                      });
                    })(i),
                    4
                  );
                case 4:
                  if (!l.h) return l.return(n);
                case 3:
                  if (r) {
                    var c = r.contentType;
                    if (
                      (We() &&
                        r.spatialRendering &&
                        (c += "; spatialRendering=true"),
                      !Ht(c))
                    )
                      return l.return(n);
                  }
                case 2:
                  return t.keySystemConfiguration
                    ? ((s = t.keySystemConfiguration),
                      x(
                        l,
                        (function (e, t, n) {
                          var i, r, a, o, s, u, l, c, d, h, f;
                          return L(function (p) {
                            switch (p.g) {
                              case 1:
                                if (
                                  ((i = []),
                                  (r = []),
                                  n.audio &&
                                    ((a = {
                                      robustness: n.audio.robustness || "",
                                      contentType: t.contentType,
                                    }),
                                    ze() &&
                                      t.contentType.includes('codecs="ac-3"') &&
                                      (a.contentType =
                                        'audio/mp4; codecs="ec-3"'),
                                    n.audio.encryptionScheme &&
                                      (a.encryptionScheme =
                                        n.audio.encryptionScheme),
                                    i.push(a)),
                                  n.video &&
                                    ((o = {
                                      robustness: n.video.robustness || "",
                                      contentType: e.contentType,
                                    }),
                                    n.video.encryptionScheme &&
                                      (o.encryptionScheme =
                                        n.video.encryptionScheme),
                                    r.push(o)),
                                  (s = {
                                    initDataTypes: [n.initDataType],
                                    distinctiveIdentifier:
                                      n.distinctiveIdentifier,
                                    persistentState: n.persistentState,
                                    sessionTypes: n.sessionTypes,
                                  }),
                                  i.length && (s.audioCapabilities = i),
                                  r.length && (s.videoCapabilities = r),
                                  (u = e ? e.contentType : ""),
                                  (l = t ? t.contentType : ""),
                                  (c = _i(u) + ";" + Ni(u)),
                                  (d = _i(l) + ";" + Ni(l)),
                                  (h = n.keySystem),
                                  (f = null),
                                  T(p, 2),
                                  Ue.has(c + "#" + d + "#" + h))
                                ) {
                                  (f = Ue.get(c + "#" + d + "#" + h) || null),
                                    p.u(4);
                                  break;
                                }
                                return x(
                                  p,
                                  navigator.requestMediaKeySystemAccess(
                                    n.keySystem,
                                    [s]
                                  ),
                                  5
                                );
                              case 5:
                                (f = p.h), Ue.set(c + "#" + d + "#" + h, f);
                              case 4:
                                A(p, 3);
                                break;
                              case 2:
                                k(p);
                              case 3:
                                return p.return(f);
                            }
                          });
                        })(i, r, s),
                        6
                      ))
                    : ((n.supported = !0), l.return(n));
                case 6:
                  (u = l.h) && ((n.supported = !0), (n.keySystemAccess = u));
                case 5:
                  return l.return(n);
              }
            });
          }
          (sg.Aria = cg),
            (cg.install = dg),
            ug(dg),
            (sg.EncryptionScheme = fg),
            (fg.install = pg),
            ug(pg, -2),
            (sg.Fullscreen = gg),
            (gg.install = mg),
            ug(mg),
            (sg.MediaCapabilities = yg),
            (yg.install = bg);
          var xg = null;
          yg.originalMcap = xg;
          var Sg = new Map();
          function Tg() {}
          function Ag() {
            var t = et();
            (e.MediaSource || e.ManagedMediaSource) &&
              (t && e.MediaSource
                ? 12 >= t
                  ? (kg(), Ig())
                  : 15 >= t && kg()
                : rt("DT_STB_BCM")
                ? (kg(), Ig())
                : (rt("Tizen 2") || Ge() || rt("Tizen 4")) &&
                  (function () {
                    var t = MediaSource.isTypeSupported.bind(MediaSource);
                    if (
                      ((MediaSource.isTypeSupported = function (e) {
                        return "opus" != Ni(e) && t(e);
                      }),
                      e.ManagedMediaSource)
                    ) {
                      var n =
                        ManagedMediaSource.isTypeSupported.bind(
                          ManagedMediaSource
                        );
                      e.ManagedMediaSource.isTypeSupported = function (e) {
                        return "opus" != Ni(e) && n(e);
                      };
                    }
                  })()),
              (e.MediaSource || e.ManagedMediaSource) &&
                (function () {
                  if (e.MediaSource) {
                    var t = MediaSource.isTypeSupported.bind(MediaSource);
                    MediaSource.isTypeSupported = function (e) {
                      return "mp2t" != Li(e) && t(e);
                    };
                  }
                  if (e.ManagedMediaSource) {
                    var n =
                      ManagedMediaSource.isTypeSupported.bind(
                        ManagedMediaSource
                      );
                    e.ManagedMediaSource.isTypeSupported = function (e) {
                      return "mp2t" != Li(e) && n(e);
                    };
                  }
                })(),
              e.MediaSource &&
                MediaSource.isTypeSupported('video/webm; codecs="vp9"') &&
                !MediaSource.isTypeSupported(
                  'video/webm; codecs="vp09.00.10.08"'
                ) &&
                (function () {
                  var e = MediaSource.isTypeSupported;
                  qe() ||
                    (MediaSource.isTypeSupported = function (t) {
                      var n = t.split(/ *; */),
                        i = n.findIndex(function (e) {
                          return e.startsWith("codecs=");
                        });
                      if (0 > i) return e(t);
                      var r = n[i]
                          .replace("codecs=", "")
                          .replace(/"/g, "")
                          .split(/\s*,\s*/),
                        a = r.findIndex(function (e) {
                          return e.startsWith("vp09");
                        });
                      return (
                        0 <= a &&
                          ((r[a] = "vp9"),
                          (n[i] = 'codecs="' + r.join(",") + '"'),
                          (t = n.join("; "))),
                        e(t)
                      );
                    });
                })();
          }
          function kg() {
            var e = MediaSource.prototype.addSourceBuffer;
            MediaSource.prototype.addSourceBuffer = function () {
              var t = e.apply(this, R.apply(0, arguments));
              return (t.abort = function () {}), t;
            };
          }
          function Ig() {
            var e = SourceBuffer.prototype.remove;
            SourceBuffer.prototype.remove = function (t, n) {
              return e.call(this, t, n - 0.001);
            };
          }
          function Cg() {}
          function Mg() {
            (screen.orientation && screen.orientation.unlock) ||
              (null != screen.orientation
                ? (void 0 === screen.orientation.lock &&
                    (screen.orientation.lock = function () {
                      return Promise.resolve();
                    }),
                  void 0 === screen.orientation.unlock &&
                    (screen.orientation.unlock = function () {}))
                : null != e.orientation &&
                  (function () {
                    function t() {
                      switch (e.orientation) {
                        case -90:
                          (n.type = "landscape-secondary"), (n.angle = 270);
                          break;
                        case 0:
                          (n.type = "portrait-primary"), (n.angle = 0);
                          break;
                        case 90:
                          (n.type = "landscape-primary"), (n.angle = 90);
                          break;
                        case 180:
                          (n.type = "portrait-secondary"), (n.angle = 180);
                      }
                    }
                    var n = new Eg();
                    (screen.orientation = n),
                      t(),
                      e.addEventListener("orientationchange", function () {
                        t();
                        var e = new Yo("change");
                        n.dispatchEvent(e);
                      });
                  })());
          }
          function Eg() {
            Jo.call(this), (this.type = ""), (this.angle = 0);
          }
          function Dg() {}
          function Pg() {
            e.MediaKeys &&
              (!MediaKeys.prototype.setServerCertificate ||
                Ge() ||
                rt("Tizen 4") ||
                rt("Tizen 5.0") ||
                Ke()) &&
              (MediaKeys.prototype.setServerCertificate = Lg);
          }
          function Lg() {
            return Promise.resolve(!1);
          }
          function Rg() {}
          function Ng() {
            if (
              !(
                !e.HTMLVideoElement ||
                (navigator.requestMediaKeySystemAccess &&
                  MediaKeySystemAccess.prototype.getConfiguration)
              )
            ) {
              if (HTMLMediaElement.prototype.webkitGenerateKeyRequest)
                Wg = "webkit";
              else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
              (navigator.requestMediaKeySystemAccess = Ug),
                delete HTMLMediaElement.prototype.mediaKeys,
                (HTMLMediaElement.prototype.mediaKeys = null),
                (HTMLMediaElement.prototype.setMediaKeys = jg),
                (e.MediaKeys = Bg),
                (e.MediaKeySystemAccess = Og),
                (e.shakaMediaKeysPolyfill = Xg);
            }
          }
          function _g(e) {
            return Wg ? Wg + e.charAt(0).toUpperCase() + e.slice(1) : e;
          }
          function Ug(e, t) {
            try {
              var n = new Og(e, t);
              return Promise.resolve(n);
            } catch (i) {
              return Promise.reject(i);
            }
          }
          function jg(e) {
            var t = this.mediaKeys;
            return (
              t && t != e && Fg(t, null),
              delete this.mediaKeys,
              (this.mediaKeys = e) && Fg(e, this),
              Promise.resolve()
            );
          }
          function Og(e, t) {
            this.g = this.keySystem = e;
            var n = !1;
            "org.w3.clearkey" == e &&
              ((this.g = "webkit-org.w3.clearkey"), (n = !1));
            var i = !1,
              r = document.getElementsByTagName("video");
            r = r.length ? r[0] : document.createElement("video");
            for (var a = (t = c(t)).next(); !a.done; a = t.next()) {
              var o = {
                  audioCapabilities: [],
                  videoCapabilities: [],
                  persistentState: "optional",
                  distinctiveIdentifier: "optional",
                  initDataTypes: (a = a.value).initDataTypes,
                  sessionTypes: ["temporary"],
                  label: a.label,
                },
                s = !1;
              if (a.audioCapabilities)
                for (
                  var u = c(a.audioCapabilities), l = u.next();
                  !l.done;
                  l = u.next()
                )
                  (l = l.value).contentType &&
                    ((s = !0),
                    r.canPlayType(l.contentType.split(";")[0], this.g) &&
                      (o.audioCapabilities.push(l), (i = !0)));
              if (a.videoCapabilities)
                for (
                  l = (u = c(a.videoCapabilities)).next();
                  !l.done;
                  l = u.next()
                )
                  (l = l.value).contentType &&
                    ((s = !0),
                    r.canPlayType(l.contentType, this.g) &&
                      (o.videoCapabilities.push(l), (i = !0)));
              if (
                (s ||
                  (i =
                    r.canPlayType("video/mp4", this.g) ||
                    r.canPlayType("video/webm", this.g)),
                "required" == a.persistentState &&
                  (n
                    ? ((o.persistentState = "required"),
                      (o.sessionTypes = ["persistent-license"]))
                    : (i = !1)),
                i)
              )
                return void (this.h = o);
            }
            throw (
              ((n = "Unsupported keySystem"),
              ("org.w3.clearkey" != e && "com.widevine.alpha" != e) ||
                (n = "None of the requested configurations were supported."),
              ((e = Error(n)).name = "NotSupportedError"),
              (e.code = DOMException.NOT_SUPPORTED_ERR),
              e)
            );
          }
          function Bg(e) {
            (this.l = e),
              (this.h = null),
              (this.g = new Z()),
              (this.i = []),
              (this.j = new Map());
          }
          function Fg(e, t) {
            (e.h = t), e.g.qb();
            var n = Wg;
            t &&
              (e.g.H(t, n + "needkey", function (t) {
                var n = new CustomEvent("encrypted");
                (n.initDataType = "cenc"),
                  (n.initData = Ae(t.initData)),
                  e.h.dispatchEvent(n);
              }),
              e.g.H(t, n + "keymessage", function (t) {
                var n = Hg(e, t.sessionId);
                n &&
                  ((t = new Yo(
                    "message",
                    (t = new Map()
                      .set(
                        "messageType",
                        null == n.keyStatuses.Pc()
                          ? "licenserequest"
                          : "licenserenewal"
                      )
                      .set("message", t.message))
                  )),
                  n.h && (n.h.resolve(), (n.h = null)),
                  n.dispatchEvent(t));
              }),
              e.g.H(t, n + "keyadded", function (t) {
                (t = Hg(e, t.sessionId)) && t.ready();
              }),
              e.g.H(t, n + "keyerror", function (t) {
                var n = Hg(e, t.sessionId);
                if (n) {
                  var i = Error("EME v0.1b key error"),
                    r = t.errorCode;
                  (r.systemCode = t.systemCode),
                    (i.errorCode = r),
                    !t.sessionId && n.h
                      ? (45 == t.systemCode &&
                          (i.message = "Unsupported session type."),
                        n.h.reject(i),
                        (n.h = null))
                      : t.sessionId && n.g
                      ? (n.g.reject(i), (n.g = null))
                      : ((i = t.systemCode),
                        t.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT
                          ? qg(n, "output-restricted")
                          : qg(n, 1 == i ? "expired" : "internal-error"));
                }
              }));
          }
          function Hg(e, t) {
            var n = e.j.get(t);
            return (
              n ||
              ((n = e.i.shift()) ? ((n.sessionId = t), e.j.set(t, n), n) : null)
            );
          }
          function Vg(e, t, n) {
            Jo.call(this),
              (this.j = e),
              (this.m = !1),
              (this.g = this.h = null),
              (this.i = t),
              (this.l = n),
              (this.sessionId = ""),
              (this.expiration = NaN),
              (this.closed = new Vo()),
              (this.keyStatuses = new Kg());
          }
          function zg(e, t, n) {
            if (e.m)
              return Promise.reject(
                Error("The session is already initialized.")
              );
            e.m = !0;
            try {
              if ("persistent-license" == e.l)
                if (n) var i = ke(mt("LOAD_SESSION|" + n));
                else {
                  var r = mt("PERSISTENT|");
                  i = Ct(r, t);
                }
              else i = ke(t);
            } catch (o) {
              return Promise.reject(o);
            }
            e.h = new Vo();
            var a = _g("generateKeyRequest");
            try {
              e.j[a](e.i, i);
            } catch (o) {
              if ("InvalidStateError" != o.name)
                return (e.h = null), Promise.reject(o);
              new Oe(function () {
                try {
                  e.j[a](e.i, i);
                } catch (t) {
                  e.h.reject(t), (e.h = null);
                }
              }).ea(0.01);
            }
            return e.h;
          }
          function Gg(e, t, n) {
            if (e.g)
              e.g
                .then(function () {
                  return Gg(e, t, n);
                })
                .catch(function () {
                  return Gg(e, t, n);
                });
            else {
              if (((e.g = t), "webkit-org.w3.clearkey" == e.i)) {
                var i = ft(n),
                  r = JSON.parse(i);
                "oct" != r.keys[0].kty &&
                  (e.g.reject(
                    Error("Response is not a valid JSON Web Key Set.")
                  ),
                  (e.g = null)),
                  (i = At(r.keys[0].k)),
                  (r = At(r.keys[0].kid));
              } else (i = ke(n)), (r = null);
              var a = _g("addKey");
              try {
                e.j[a](e.i, i, r, e.sessionId);
              } catch (o) {
                e.g.reject(o), (e.g = null);
              }
            }
          }
          function qg(e, t) {
            var n = e.keyStatuses;
            (n.size = null == t ? 0 : 1),
              (n.g = t),
              (t = new Yo("keystatuseschange")),
              e.dispatchEvent(t);
          }
          function Kg() {
            (this.size = 0), (this.g = void 0);
          }
          ug(bg, -1),
            (sg.MediaSource = Tg),
            (Tg.install = Ag),
            ug(Ag),
            (sg.Orientation = Cg),
            (Cg.install = Mg),
            v(Eg, Jo),
            (Eg.prototype.lock = function (e) {
              function t(e) {
                return screen.lockOrientation
                  ? screen.lockOrientation(e)
                  : screen.mozLockOrientation
                  ? screen.mozLockOrientation(e)
                  : !!screen.msLockOrientation && screen.msLockOrientation(e);
              }
              var n = !1;
              switch (e) {
                case "natural":
                  n = t("default");
                  break;
                case "any":
                  (n = !0), this.unlock();
                  break;
                default:
                  n = t(e);
              }
              return n
                ? Promise.resolve()
                : (((e = Error(
                    "screen.orientation.lock() is not available on this device"
                  )).name = "NotSupportedError"),
                  (e.code = DOMException.NOT_SUPPORTED_ERR),
                  Promise.reject(e));
            }),
            (Eg.prototype.unlock = function () {
              screen.unlockOrientation
                ? screen.unlockOrientation()
                : screen.mozUnlockOrientation
                ? screen.mozUnlockOrientation()
                : screen.msUnlockOrientation && screen.msUnlockOrientation();
            }),
            ug(Mg),
            (sg.PatchedMediaKeysCert = Dg),
            (Dg.install = Pg),
            ug(Pg),
            (sg.PatchedMediaKeysWebkit = Rg),
            (Rg.install = Ng),
            (Og.prototype.createMediaKeys = function () {
              var e = new Bg(this.g);
              return Promise.resolve(e);
            }),
            (Og.prototype.getConfiguration = function () {
              return this.h;
            }),
            (Bg.prototype.createSession = function (e) {
              if (
                "temporary" != (e = e || "temporary") &&
                "persistent-license" != e
              )
                throw new TypeError(
                  "Session type " + e + " is unsupported on this platform."
                );
              var t = this.h || document.createElement("video");
              return (
                t.src || (t.src = "about:blank"),
                (e = new Vg(t, this.l, e)),
                this.i.push(e),
                e
              );
            }),
            (Bg.prototype.setServerCertificate = function () {
              return Promise.resolve(!1);
            }),
            (Bg.prototype.getStatusForPolicy = function () {
              return Promise.resolve("usable");
            }),
            v(Vg, Jo),
            ((i = Vg.prototype).ready = function () {
              qg(this, "usable"), this.g && this.g.resolve(), (this.g = null);
            }),
            (i.generateRequest = function (e, t) {
              return zg(this, t, null);
            }),
            (i.load = function (e) {
              return "persistent-license" == this.l
                ? zg(this, null, e)
                : Promise.reject(Error("Not a persistent session."));
            }),
            (i.update = function (e) {
              var t = new Vo();
              return Gg(this, t, e), t;
            }),
            (i.close = function () {
              if ("persistent-license" != this.l) {
                if (!this.sessionId)
                  return (
                    this.closed.reject(Error("The session is not callable.")),
                    this.closed
                  );
                var e = _g("cancelKeyRequest");
                try {
                  this.j[e](this.i, this.sessionId);
                } catch (t) {}
              }
              return this.closed.resolve(), this.closed;
            }),
            (i.remove = function () {
              return "persistent-license" != this.l
                ? Promise.reject(Error("Not a persistent session."))
                : this.close();
            }),
            ((i = Kg.prototype).Pc = function () {
              return this.g;
            }),
            (i.forEach = function (e) {
              this.g && e(this.g, _e.value());
            }),
            (i.get = function (e) {
              if (this.has(e)) return this.g;
            }),
            (i.has = function (e) {
              var t = _e.value();
              return !(!this.g || !Te(e, t));
            }),
            (i.entries = function () {}),
            (i.keys = function () {}),
            (i.values = function () {});
          var Wg = "",
            Xg = "webkit";
          function Yg() {}
          function Jg() {
            if (e.HTMLVideoElement) {
              var t = HTMLVideoElement.prototype;
              (t.requestPictureInPicture && document.exitPictureInPicture) ||
                !t.webkitSupportsPresentationMode ||
                ((document.pictureInPictureEnabled = !0),
                (document.pictureInPictureElement = null),
                (t.requestPictureInPicture = Zg),
                Object.defineProperty(t, "disablePictureInPicture", {
                  get: em,
                  set: tm,
                  enumerable: !0,
                  configurable: !0,
                }),
                (document.exitPictureInPicture = Qg),
                document.addEventListener(
                  "webkitpresentationmodechanged",
                  $g,
                  !0
                ));
            }
          }
          function $g(e) {
            if ("picture-in-picture" == (e = e.target).webkitPresentationMode) {
              document.pictureInPictureElement = e;
              var t = new Event("enterpictureinpicture");
              e.dispatchEvent(t);
            } else
              document.pictureInPictureElement == e &&
                (document.pictureInPictureElement = null),
                (t = new Event("leavepictureinpicture")),
                e.dispatchEvent(t);
          }
          function Zg() {
            return this.webkitSupportsPresentationMode("picture-in-picture")
              ? (this.webkitSetPresentationMode("picture-in-picture"),
                (document.pictureInPictureElement = this),
                Promise.resolve())
              : Promise.reject(Error("PiP not allowed by video element"));
          }
          function Qg() {
            var e = document.pictureInPictureElement;
            return e
              ? (e.webkitSetPresentationMode("inline"),
                (document.pictureInPictureElement = null),
                Promise.resolve())
              : Promise.reject(Error("No picture in picture element found"));
          }
          function em() {
            return (
              !!this.hasAttribute("disablePictureInPicture") ||
              !this.webkitSupportsPresentationMode("picture-in-picture")
            );
          }
          function tm(e) {
            e
              ? this.setAttribute("disablePictureInPicture", "")
              : this.removeAttribute("disablePictureInPicture");
          }
          function nm() {}
          function im() {
            e.crypto &&
              ("randomUUID" in e.crypto || (e.crypto.randomUUID = rm));
          }
          function rm() {
            var e = URL.createObjectURL(new Blob()),
              t = e.toString();
            return URL.revokeObjectURL(e), t.substr(t.lastIndexOf("/") + 1);
          }
          function am() {}
          function om() {
            var e = Symbol.prototype;
            "description" in e ||
              Object.defineProperty(e, "description", { get: sm });
          }
          function sm() {
            var e = /\((.*)\)/.exec(this.toString());
            return e ? e[1] : void 0;
          }
          function um() {}
          function lm() {
            if (e.HTMLMediaElement) {
              var t = HTMLMediaElement.prototype.play;
              HTMLMediaElement.prototype.play = function () {
                var e = t.apply(this);
                return e && e.catch(function () {}), e;
              };
            }
          }
          function cm() {}
          function dm() {
            if (e.HTMLVideoElement) {
              var t = HTMLVideoElement.prototype;
              !t.getVideoPlaybackQuality &&
                ("webkitDroppedFrameCount" in t || Ke()) &&
                (t.getVideoPlaybackQuality = hm);
            }
          }
          function hm() {
            return {
              droppedVideoFrames: this.webkitDroppedFrameCount,
              totalVideoFrames: this.webkitDecodedFrameCount,
              corruptedVideoFrames: 0,
              creationTime: NaN,
              totalFrameDelay: 0,
            };
          }
          function fm() {}
          function pm() {
            if (!e.VTTCue && e.TextTrackCue) {
              var t = null,
                n = TextTrackCue.length;
              if (3 == n) t = gm;
              else if (6 == n) t = mm;
              else {
                try {
                  var i = !!gm(1, 2, "");
                } catch (r) {
                  i = !1;
                }
                i && (t = gm);
              }
              t &&
                (e.VTTCue = function (e, n, i) {
                  return t(e, n, i);
                });
            }
          }
          function gm(t, n, i) {
            return new e.TextTrackCue(t, n, i);
          }
          function mm(t, n, i) {
            return new e.TextTrackCue(t + "-" + n + "-" + i, t, n, i);
          }
          function vm() {}
          ug(Ng),
            (sg.PiPWebkit = Yg),
            (Yg.install = Jg),
            ug(Jg),
            (sg.RandomUUID = nm),
            (nm.install = im),
            ug(im),
            (sg.Symbol = am),
            (am.install = om),
            ug(om),
            (sg.VideoPlayPromise = um),
            (um.install = lm),
            ug(lm),
            (sg.VideoPlaybackQuality = cm),
            (cm.install = dm),
            ug(dm),
            (sg.VTTCue = fm),
            (fm.install = pm),
            ug(pm),
            (vm.prototype.parseInit = function () {}),
            (vm.prototype.setSequenceMode = function () {}),
            (vm.prototype.setManifestType = function () {}),
            (vm.prototype.parseMedia = function (e, t) {
              for (
                var n = null,
                  i = [],
                  r = (e = c((e = ft(e).split(/\r?\n/)))).next();
                !r.done;
                r = e.next()
              )
                if ((r = r.value) && !/^\s+$/.test(r) && (r = ym.exec(r))) {
                  var a = bm.exec(r[1]);
                  (r = new Wn(
                    (a =
                      60 * parseInt(a[1], 10) +
                      parseFloat(a[2].replace(",", "."))),
                    t.segmentEnd ? t.segmentEnd : a + 2,
                    r[2]
                  )),
                    n && ((n.endTime = a), i.push(n)),
                    (n = r);
                }
              return n && i.push(n), i;
            }),
            F("shaka.text.LrcTextParser", vm),
            (vm.prototype.parseMedia = vm.prototype.parseMedia),
            (vm.prototype.setManifestType = vm.prototype.setManifestType),
            (vm.prototype.setSequenceMode = vm.prototype.setSequenceMode),
            (vm.prototype.parseInit = vm.prototype.parseInit);
          var ym = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,
            bm = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
          function wm() {}
          function xm(e, t, n, i, r, a, o, s, u, l, d, h, f) {
            var p = l;
            if (yn(e)) {
              if (!d) return null;
              var g = {
                tagName: "span",
                children: [xn(e)],
                attributes: {},
                parent: null,
              };
            } else g = e;
            for (
              var m = null, v = c(Ym), y = v.next();
              !y.done && !(m = Em(g, "backgroundImage", i, "#", y.value)[0]);
              y = v.next()
            );
            v = null;
            var b = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;
            if ((y = En(g, Ym, "backgroundImage")) && b.test(y)) {
              if ((v = parseInt(y.split(":").pop(), 10) - 1) >= f.length)
                return null;
              v = f[v];
            } else
              h &&
                y &&
                !y.startsWith("#") &&
                ((b = new se(h)),
                (y = new se(y)),
                (y = b.resolve(y).toString()) && (v = y));
            if (
              (("p" == e.tagName || m || v) && (d = !0),
              (e = d),
              (y =
                "default" ==
                (g.attributes["xml:space"] || (s ? "default" : "preserve"))),
              (s = []),
              !(b = g.children.every(yn)))
            )
              for (var w = c(g.children), x = w.next(); !x.done; x = w.next())
                (x = xm(x.value, t, n, i, r, a, o, y, u, g, d, h, f)) &&
                  s.push(x);
            if (
              ((i = null != l),
              (h = xn(g)),
              (h = g.children.length && h && /\S/.test(h)),
              !(
                (w =
                  g.attributes.begin || g.attributes.end || g.attributes.dur) ||
                h ||
                "br" == g.tagName ||
                0 != s.length ||
                (i && !y)
              ))
            )
              return null;
            for (
              h = (f = Pm(g, n)).start, f = f.end;
              p && p.tagName && "tt" != p.tagName;

            )
              (h = (f = Dm(p, n, h, f)).start), (f = f.end), (p = p.parent);
            if (
              (null == h && (h = 0),
              (h += t.periodStart),
              (f = null == f ? 1 / 0 : f + t.periodStart),
              (h = Math.max(h, t.segmentStart)),
              (f = Math.min(f, t.segmentEnd)),
              !w && 0 < s.length)
            )
              for (
                h = 1 / 0, f = 0, n = (t = c(s)).next();
                !n.done;
                n = t.next()
              )
                (n = n.value),
                  (h = Math.min(h, n.startTime)),
                  (f = Math.max(f, n.endTime));
            if ("br" == g.tagName)
              return ((r = new Wn(h, f, "")).lineBreak = !0), r;
            if (
              ((t = ""),
              b && ((t = bt(xn(g) || "")), y && (t = t.replace(/\s+/g, " "))),
              ((t = new Wn(h, f, t)).nestedCues = s),
              d || (t.isContainer = !0),
              u && (t.cellResolution = u),
              (u = Em(g, "region", a, "")[0]),
              g.attributes.region && u && u.attributes["xml:id"])
            ) {
              var S = u.attributes["xml:id"];
              t.region = o.filter(function (e) {
                return e.id == S;
              })[0];
            }
            return (
              (o = u),
              l &&
                i &&
                !g.attributes.region &&
                !g.attributes.style &&
                (o = Em(l, "region", a, "")[0]),
              (function (e, t, n, i, r, a, o, s) {
                (o = o || s),
                  "rtl" == km(t, n, a, "direction", o) && (e.direction = "rtl"),
                  (s = km(t, n, a, "writingMode", o)),
                  "tb" == s || "tblr" == s
                    ? (e.writingMode = "vertical-lr")
                    : "tbrl" == s
                    ? (e.writingMode = "vertical-rl")
                    : "rltb" == s || "rl" == s
                    ? (e.direction = "rtl")
                    : s && (e.direction = ai),
                  (s = km(t, n, a, "textAlign", !0))
                    ? ((e.positionAlign = Km.get(s)),
                      (e.lineAlign = qm.get(s)),
                      (e.textAlign = ni[s.toUpperCase()]))
                    : (e.textAlign = ti),
                  (s = km(t, n, a, "displayAlign", !0)) &&
                    (e.displayAlign = ri[s.toUpperCase()]);
                (s = km(t, n, a, "color", o)) && (e.color = Tm(s));
                (s = km(t, n, a, "backgroundColor", o)) &&
                  (e.backgroundColor = Tm(s));
                (s = km(t, n, a, "border", o)) && (e.border = s);
                if ((s = km(t, n, a, "fontFamily", o)))
                  switch (s) {
                    case "monospaceSerif":
                      e.fontFamily =
                        "Courier New,Liberation Mono,Courier,monospace";
                      break;
                    case "proportionalSansSerif":
                      e.fontFamily =
                        "Arial,Helvetica,Liberation Sans,sans-serif";
                      break;
                    case "sansSerif":
                      e.fontFamily = "sans-serif";
                      break;
                    case "monospaceSansSerif":
                      e.fontFamily = "Consolas,monospace";
                      break;
                    case "proportionalSerif":
                      e.fontFamily = "serif";
                      break;
                    default:
                      e.fontFamily = s
                        .split(",")
                        .filter(function (e) {
                          return "default" != e;
                        })
                        .join(",");
                  }
                (s = km(t, n, a, "fontWeight", o)) &&
                  "bold" == s &&
                  (e.fontWeight = fi),
                  (s = km(t, n, a, "wrapOption", o)),
                  (e.wrapLine = !s || "noWrap" != s),
                  (s = km(t, n, a, "lineHeight", o)) &&
                    s.match(jm) &&
                    (e.lineHeight = s),
                  (s = km(t, n, a, "fontSize", o)) &&
                    (s.match(jm) || s.match(Um)) &&
                    (e.fontSize = s),
                  (s = km(t, n, a, "fontStyle", o)) &&
                    (e.fontStyle = mi[s.toUpperCase()]);
                i
                  ? ((r = i.attributes.imageType || i.attributes.imagetype),
                    (s = i.attributes.encoding),
                    (i = xn(i).trim()),
                    "PNG" == r &&
                      "Base64" == s &&
                      i &&
                      (e.backgroundImage = "data:image/png;base64," + i))
                  : r && (e.backgroundImage = r),
                  (i = km(t, n, a, "textOutline", o)) &&
                    ((i = i.split(" ")),
                    i[0].match(jm)
                      ? (e.textStrokeColor = e.color)
                      : ((e.textStrokeColor = Tm(i[0])), i.shift()),
                    i[0] && i[0].match(jm)
                      ? (e.textStrokeWidth = i[0])
                      : (e.textStrokeColor = ""));
                (i = km(t, n, a, "letterSpacing", o)) &&
                  i.match(jm) &&
                  (e.letterSpacing = i),
                  (i = km(t, n, a, "linePadding", o)) &&
                    i.match(jm) &&
                    (e.linePadding = i),
                  (i = km(t, n, a, "opacity", o)) &&
                    (e.opacity = parseFloat(i));
                (i = Im(n, a, "textDecoration")) && Am(e, i),
                  (i = Cm(t, a, "textDecoration")) && Am(e, i),
                  (i = km(t, n, a, "textCombine", o)) &&
                    (e.textCombineUpright = i);
                switch (km(t, n, a, "ruby", o)) {
                  case "container":
                    e.rubyTag = "ruby";
                    break;
                  case "text":
                    e.rubyTag = "rt";
                }
              })(t, g, o, m, v, r, e, 0 == s.length),
              t
            );
          }
          function Sm(e, t, n) {
            var i = new Qt(),
              r = e.attributes["xml:id"];
            if (!r) return null;
            (i.id = r),
              (r = null),
              n && (r = _m.exec(n) || Om.exec(n)),
              (n = r ? Number(r[1]) : null),
              (r = r ? Number(r[2]) : null);
            var a,
              o = Im(e, t, "extent");
            if (o) {
              var s = (a = _m.exec(o)) || Om.exec(o);
              null != s &&
                ((i.width = Number(s[1])),
                (i.height = Number(s[2])),
                a ||
                  (null != n && (i.width = (100 * i.width) / n),
                  null != r && (i.height = (100 * i.height) / r)),
                (i.widthUnits = a || null != n ? en : 0),
                (i.heightUnits = a || null != r ? en : 0));
            }
            return (
              (e = Im(e, t, "origin")) &&
                null != (s = (a = _m.exec(e)) || Om.exec(e)) &&
                ((i.viewportAnchorX = Number(s[1])),
                (i.viewportAnchorY = Number(s[2])),
                a
                  ? o ||
                    ((i.width = 100 - i.viewportAnchorX),
                    (i.widthUnits = en),
                    (i.height = 100 - i.viewportAnchorY),
                    (i.heightUnits = en))
                  : (null != r &&
                      (i.viewportAnchorY = (100 * i.viewportAnchorY) / r),
                    null != n &&
                      (i.viewportAnchorX = (100 * i.viewportAnchorX) / n)),
                (i.viewportAnchorUnits = a || null != n ? en : 0)),
              i
            );
          }
          function Tm(e) {
            var t = e.match(/rgba\(([^)]+)\)/);
            return t && 4 == (t = t[1].split(",")).length
              ? ((t[3] = String(Number(t[3]) / 255)),
                "rgba(" + t.join(",") + ")")
              : e;
          }
          function Am(e, t) {
            for (var n = (t = c(t.split(" "))).next(); !n.done; n = t.next())
              switch (n.value) {
                case "underline":
                  e.textDecoration.includes(vi) || e.textDecoration.push(vi);
                  break;
                case "noUnderline":
                  e.textDecoration.includes(vi) && rn(e.textDecoration, vi);
                  break;
                case "lineThrough":
                  e.textDecoration.includes("lineThrough") ||
                    e.textDecoration.push("lineThrough");
                  break;
                case "noLineThrough":
                  e.textDecoration.includes("lineThrough") &&
                    rn(e.textDecoration, "lineThrough");
                  break;
                case "overline":
                  e.textDecoration.includes("overline") ||
                    e.textDecoration.push("overline");
                  break;
                case "noOverline":
                  e.textDecoration.includes("overline") &&
                    rn(e.textDecoration, "overline");
              }
          }
          function km(e, t, n, i, r) {
            return (
              (r = void 0 === r || r),
              (e = Cm(e, n, i)) ? e : r ? Im(t, n, i) : null
            );
          }
          function Im(e, t, n) {
            if (!e) return null;
            var i = En(e, Xm, n);
            return i || Mm(e, t, n);
          }
          function Cm(e, t, n) {
            var i = En(e, Xm, n);
            return i || Mm(e, t, n);
          }
          function Mm(e, t, n) {
            e = Em(e, "style", t, "");
            for (var i = null, r = 0; r < e.length; r++) {
              var a = Cn(e[r], "urn:ebu:tt:style", n);
              a || (a = En(e[r], Xm, n)),
                a || (a = Cm(e[r], t, n)),
                a && (i = a);
            }
            return i;
          }
          function Em(e, t, n, i, r) {
            var a = [];
            if (!e || 1 > n.length) return a;
            var o = e;
            for (
              e = null;
              !e && !(e = r ? Cn(o, r, t) : o.attributes[t]) && (o = o.parent);

            );
            if ((t = e))
              for (r = (t = c(t.split(" "))).next(); !r.done; r = t.next())
                for (r = r.value, o = (e = c(n)).next(); !o.done; o = e.next())
                  if (i + (o = o.value).attributes["xml:id"] == r) {
                    a.push(o);
                    break;
                  }
            return a;
          }
          function Dm(e, t, n, i) {
            return (
              (e = Pm(e, t)),
              null == n ? (n = e.start) : null != e.start && (n += e.start),
              null == i ? (i = e.end) : null != e.start && (i += e.start),
              { start: n, end: i }
            );
          }
          function Pm(e, t) {
            var n = Lm(e.attributes.begin, t),
              i = Lm(e.attributes.end, t);
            return (
              (e = Lm(e.attributes.dur, t)),
              null == i && null != e && (i = n + e),
              { start: n, end: i }
            );
          }
          function Lm(e, t) {
            var n = null;
            if (Bm.test(e)) {
              (e = Bm.exec(e)), (n = Number(e[1]));
              var i = Number(e[2]),
                r = Number(e[3]),
                a = Number(e[4]);
              n =
                (r += (a += (Number(e[5]) || 0) / t.h) / t.frameRate) +
                60 * i +
                3600 * n;
            } else if (Fm.test(e)) n = Rm(Fm, e);
            else if (Hm.test(e)) n = Rm(Hm, e);
            else if (Vm.test(e))
              (e = Vm.exec(e)), (n = Number(e[1]) / t.frameRate);
            else if (zm.test(e)) (e = zm.exec(e)), (n = Number(e[1]) / t.g);
            else if (Gm.test(e)) n = Rm(Gm, e);
            else if (e)
              throw new Ee(
                2,
                2,
                2001,
                "Could not parse cue time range in TTML"
              );
            return n;
          }
          function Rm(e, t) {
            return null == (e = e.exec(t)) || "" == e[0]
              ? null
              : (Number(e[4]) || 0) / 1e3 +
                  (Number(e[3]) || 0) +
                  60 * (Number(e[2]) || 0) +
                  3600 * (Number(e[1]) || 0);
          }
          function Nm(e, t, n, i) {
            (this.frameRate = Number(e) || 30),
              (this.h = Number(t) || 1),
              (this.g = Number(i)),
              0 == this.g && (this.g = e ? this.frameRate * this.h : 1),
              n &&
                (e = /^(\d+) (\d+)$/g.exec(n)) &&
                (this.frameRate *= Number(e[1]) / Number(e[2]));
          }
          Vi("application/x-subtitle-lrc", function () {
            return new vm();
          }),
            (wm.prototype.parseInit = function () {}),
            (wm.prototype.setSequenceMode = function () {}),
            (wm.prototype.setManifestType = function () {}),
            (wm.prototype.parseMedia = function (e, t, n, i) {
              var r = ft(e);
              if (((e = []), "" == r)) return e;
              var a = mn(r, "tt", !0);
              if (!a) throw new Ee(2, 2, 2005, "Failed to parse TTML.");
              if (!(r = Tn(a, "body")[0])) return [];
              var o = En(a, Wm, "frameRate"),
                s = En(a, Wm, "subFrameRate"),
                u = En(a, Wm, "frameRateMultiplier"),
                l = En(a, Wm, "tickRate"),
                d = En(a, Wm, "cellResolution"),
                h = a.attributes["xml:space"] || "default",
                f = En(a, Xm, "extent");
              if ("default" != h && "preserve" != h)
                throw new Ee(2, 2, 2005, "Invalid xml:space value: " + h);
              (h = "default" == h),
                (o = new Nm(o, s, u, l)),
                (d = (function (e) {
                  return e && (e = /^(\d+) (\d+)$/.exec(e))
                    ? { Rb: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
                    : null;
                })(d)),
                (s = ((s = Tn(a, "metadata")[0]) ? s.children : []).filter(
                  function (e) {
                    return "\n" != e;
                  }
                )),
                (u = Tn(a, "style")),
                (l = []);
              for (
                var p = c((a = Tn(a, "region"))), g = p.next();
                !g.done;
                g = p.next()
              )
                (g = Sm(g.value, u, f)) && l.push(g);
              if (wn(r, "p").length)
                throw new Ee(
                  2,
                  2,
                  2001,
                  "<p> can only be inside <div> in TTML"
                );
              for (p = (f = c(wn(r, "div"))).next(); !p.done; p = f.next())
                if (wn(p.value, "span").length)
                  throw new Ee(
                    2,
                    2,
                    2001,
                    "<span> can only be inside <p> in TTML"
                  );
              return (
                (t = xm(r, t, o, s, u, a, l, h, d, null, !1, n, i)) &&
                  (t.backgroundColor || (t.backgroundColor = "transparent"),
                  e.push(t)),
                e
              );
            }),
            F("shaka.text.TtmlTextParser", wm),
            (wm.prototype.parseMedia = wm.prototype.parseMedia),
            (wm.prototype.setManifestType = wm.prototype.setManifestType),
            (wm.prototype.setSequenceMode = wm.prototype.setSequenceMode),
            (wm.prototype.parseInit = wm.prototype.parseInit);
          var _m =
              /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,
            Um = /^(\d{1,4}(?:\.\d+)?|100)%$/,
            jm = /^(\d+px|\d+em|\d*\.?\d+c)$/,
            Om = /^(\d+)px (\d+)px$/,
            Bm = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,
            Fm = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,
            Hm = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,
            Vm = /^(\d*(?:\.\d*)?)f$/,
            zm = /^(\d*(?:\.\d*)?)t$/,
            Gm = RegExp(
              "^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"
            ),
            qm = new Map()
              .set("left", ui)
              .set("center", "center")
              .set("right", "end")
              .set("start", ui)
              .set("end", "end"),
            Km = new Map()
              .set("left", "line-left")
              .set("center", "center")
              .set("right", "line-right"),
            Wm = [
              "http://www.w3.org/ns/ttml#parameter",
              "http://www.w3.org/2006/10/ttaf1#parameter",
            ],
            Xm = [
              "http://www.w3.org/ns/ttml#styling",
              "http://www.w3.org/2006/10/ttaf1#styling",
            ],
            Ym = [
              "http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",
              "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt",
            ];
          function Jm() {
            this.g = new wm();
          }
          function $m() {
            this.g = "UNKNOWN";
          }
          function Zm(e, t, n) {
            var i;
            (i = /^align:(start|middle|center|end|left|right)$/.exec(t))
              ? ((t = i[1]),
                (e.textAlign = "middle" == t ? ti : ni[t.toUpperCase()]))
              : (i = /^vertical:(lr|rl)$/.exec(t))
              ? (e.writingMode = "lr" == i[1] ? "vertical-lr" : "vertical-rl")
              : (i = /^size:([\d.]+)%$/.exec(t))
              ? (e.size = Number(i[1]))
              : (i =
                  /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(
                    t
                  ))
              ? ((e.position = Number(i[1])),
                i[2] &&
                  ((t = i[2]),
                  (e.positionAlign =
                    "line-left" == t || "start" == t
                      ? "line-left"
                      : "line-right" == t || "end" == t
                      ? "line-right"
                      : "center" == t || "middle" == t
                      ? "center"
                      : ei)))
              : (i = /^region:(.*)$/.exec(t))
              ? (t = (function (e, t) {
                  return (
                    (e = e.filter(function (e) {
                      return e.id == t;
                    })),
                    e.length ? e[0] : null
                  );
                })(n, i[1])) && (e.region = t)
              : (n = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))
              ? ((e.lineInterpretation = 1),
                (e.line = Number(n[1])),
                n[2] && (e.lineAlign = li[n[2].toUpperCase()]))
              : (n = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)) &&
                ((e.lineInterpretation = si),
                (e.line = Number(n[1])),
                n[2] && (e.lineAlign = li[n[2].toUpperCase()]));
          }
          function Qm() {
            this.g = null;
          }
          function ev(e, t, n) {
            var i, r, a;
            return (
              new Na()
                .box(
                  "payl",
                  Ba(function (e) {
                    i = ft(e);
                  })
                )
                .box(
                  "iden",
                  Ba(function (e) {
                    r = ft(e);
                  })
                )
                .box(
                  "sttg",
                  Ba(function (e) {
                    a = ft(e);
                  })
                )
                .parse(e),
              i
                ? (function (e, t, n, i, r) {
                    if (((e = new Wn(i, r, e)), Jn(e), t && (e.id = t), n))
                      for (t = new on(n), n = ln(t); n; )
                        Zm(e, n, []), sn(t), (n = ln(t));
                    return e;
                  })(i, r, a, t, n)
                : null
            );
          }
          function tv() {}
          function nv() {
            this.g = new $m();
          }
          function iv(e) {
            var t = "WEBVTT\n\n";
            if ("" == e) return t;
            for (
              var n = (e = c(
                (e = (e = e.replace(/\r+/g, "")).trim()).split("\n\n")
              )).next();
              !n.done;
              n = e.next()
            )
              (n = n.value.split(/\n/))[0].match(/\d+/) && n.shift(),
                (n[0] = n[0].replace(/,/g, ".")),
                (t +=
                  n
                    .join("\n")
                    .replace(/{b}/g, "<b>")
                    .replace(/{\/b}/g, "</b>")
                    .replace(/{i}/g, "<i>")
                    .replace(/{\/i}/g, "</i>")
                    .replace(/{u}/g, "<u>")
                    .replace(/{\/u}/g, "</u>") + "\n\n");
            return t;
          }
          function rv() {}
          function av(e, t) {
            var n = t.Fontname;
            if (
              (n && (e.fontFamily = n),
              (n = t.Fontsize) && (e.fontSize = n + "px"),
              (n = t.PrimaryColour) && (n = ov(n)) && (e.color = n),
              (n = t.BackColour) && (n = ov(n)) && (e.backgroundColor = n),
              t.Bold && (e.fontWeight = fi),
              t.Italic && (e.fontStyle = gi),
              t.Underline && e.textDecoration.push(vi),
              (n = t.Spacing) && (e.letterSpacing = n + "px"),
              (n = t.Alignment))
            )
              switch (parseInt(n, 10)) {
                case 1:
                  (e.displayAlign = ii), (e.textAlign = "start");
                  break;
                case 2:
                  (e.displayAlign = ii), (e.textAlign = ti);
                  break;
                case 3:
                  (e.displayAlign = ii), (e.textAlign = "end");
                  break;
                case 5:
                  (e.displayAlign = "before"), (e.textAlign = "start");
                  break;
                case 6:
                  (e.displayAlign = "before"), (e.textAlign = ti);
                  break;
                case 7:
                  (e.displayAlign = "before"), (e.textAlign = "end");
                  break;
                case 9:
                  (e.displayAlign = "center"), (e.textAlign = "start");
                  break;
                case 10:
                  (e.displayAlign = "center"), (e.textAlign = ti);
                  break;
                case 11:
                  (e.displayAlign = "center"), (e.textAlign = "end");
              }
            (t = t.AlphaLevel) && (e.opacity = parseFloat(t));
          }
          function ov(e) {
            return 0 <= (e = parseInt(e.replace("&H", ""), 16))
              ? "rgba(" +
                  (255 & e) +
                  "," +
                  ((e >> 8) & 255) +
                  "," +
                  ((e >> 16) & 255) +
                  "," +
                  (((e >> 24) & 255) ^ 255) / 255 +
                  ")"
              : null;
          }
          function sv(e) {
            return (
              3600 *
                ((e = dv.exec(e))[1]
                  ? parseInt(e[1].replace(":", ""), 10)
                  : 0) +
              60 * parseInt(e[2], 10) +
              parseFloat(e[3])
            );
          }
          Vi("application/ttml+xml", function () {
            return new wm();
          }),
            (Jm.prototype.parseInit = function (e) {
              var t = !1;
              if (
                (new Na()
                  .box("moov", _a)
                  .box("trak", _a)
                  .box("mdia", _a)
                  .box("minf", _a)
                  .box("stbl", _a)
                  .N("stsd", Ua)
                  .box("stpp", function (e) {
                    (t = !0), e.parser.stop();
                  })
                  .parse(e),
                !t)
              )
                throw new Ee(2, 2, 2007);
            }),
            (Jm.prototype.setSequenceMode = function () {}),
            (Jm.prototype.setManifestType = function () {}),
            (Jm.prototype.parseMedia = function (e, t, n) {
              var i = [],
                r = null,
                a = [],
                o = new Map(),
                s = [];
              if (
                (new Na()
                  .box("moof", _a)
                  .box("traf", _a)
                  .N("tfhd", function (e) {
                    r = qa(e.reader, e.flags).Lc;
                  })
                  .N("trun", function (e) {
                    for (
                      var t = (e = c(
                        (e = Xa(e.reader, e.version, e.flags)).jf
                      )).next();
                      !t.done;
                      t = e.next()
                    )
                      s.push(t.value.sampleSize || r || 0);
                  })
                  .N("subs", function (e) {
                    for (
                      var t = e.reader, n = t.M(), i = -1, r = 0;
                      r < n;
                      r++
                    ) {
                      var a = t.M();
                      (i += a), (a = t.kb());
                      for (var s = [], u = 0; u < a; u++)
                        1 == e.version ? s.push(t.M()) : s.push(t.kb()),
                          t.lb(),
                          t.lb(),
                          t.M();
                      o.set(i, s);
                    }
                  })
                  .box(
                    "mdat",
                    Ba(function (e) {
                      a.push(e);
                    })
                  )
                  .parse(e, !1),
                0 == a.length)
              )
                throw new Ee(2, 2, 2007);
              for (
                var u = Ct.apply(xt, d(a)), l = 0, h = 0;
                h < s.length;
                h++
              ) {
                var f = ke(u, l, s[h]);
                l += s[h];
                var p = o.get(h);
                if (p && p.length) {
                  f = ke(f, 0, p[0]);
                  for (var g = [], m = p[0], v = 1; v < p.length; v++) {
                    var y = ke(e, m, p[v]);
                    (y = St(y)),
                      g.push("data:image/png;base64," + y),
                      (m += p[v]);
                  }
                  i = i.concat(this.g.parseMedia(f, t, n, g));
                } else i = i.concat(this.g.parseMedia(f, t, n, []));
              }
              return i;
            }),
            F("shaka.text.Mp4TtmlParser", Jm),
            (Jm.prototype.parseMedia = Jm.prototype.parseMedia),
            (Jm.prototype.setManifestType = Jm.prototype.setManifestType),
            (Jm.prototype.setSequenceMode = Jm.prototype.setSequenceMode),
            (Jm.prototype.parseInit = Jm.prototype.parseInit),
            Vi('application/mp4; codecs="stpp"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.ttml"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.ttml.im1i"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.ttml.im1t"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.ttml.im2i"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.ttml.im2t"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.ttml.etd1"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.ttml.etd1|im1t"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.ttml.im1t|etd1"', function () {
              return new Jm();
            }),
            Vi('application/mp4; codecs="stpp.TTML.im1t"', function () {
              return new Jm();
            }),
            ($m.prototype.parseInit = function () {}),
            ($m.prototype.setSequenceMode = function () {}),
            ($m.prototype.setManifestType = function (e) {
              this.g = e;
            }),
            ($m.prototype.parseMedia = function (e, t) {
              var n = (e = (e = ft(e)).replace(
                /\r\n|\r(?=[^\n]|$)/gm,
                "\n"
              )).split(/\n{2,}/m);
              if (!/^WEBVTT($|[ \t\n])/m.test(n[0])) throw new Ee(2, 2, 2e3);
              if (((e = t.vttOffset), "HLS" == this.g))
                if (n[0].includes("X-TIMESTAMP-MAP")) {
                  var i = (e = n[0]).match(
                    /LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m
                  );
                  if (((e = e.match(/MPEGTS:(\d+)/m)), !i || !e))
                    throw new Ee(2, 2, 2e3);
                  if (null == (i = (i = i[1]) ? cn(new on(i)) : null))
                    throw new Ee(2, 2, 2e3);
                  e = Number(e[1]);
                  for (
                    var r = t.segmentStart - t.periodStart;
                    95443.7176888889 <= r;

                  )
                    (r -= 95443.7176888889), (e += 8589934592);
                  e = t.periodStart + e / 9e4 - i;
                } else t.periodStart && t.vttOffset == t.periodStart && (e = 0);
              for (
                t = [], r = (i = c(n[0].split("\n"))).next();
                !r.done;
                r = i.next()
              )
                if (((r = r.value), /^Region:/.test(r))) {
                  r = new on(r);
                  var a = new Qt();
                  ln(r), sn(r);
                  for (var o = ln(r); o; ) {
                    var s = a,
                      u = o;
                    (o = /^id=(.*)$/.exec(u))
                      ? (s.id = o[1])
                      : (o = /^width=(\d{1,2}|100)%$/.exec(u))
                      ? (s.width = Number(o[1]))
                      : (o = /^lines=(\d+)$/.exec(u))
                      ? ((s.height = Number(o[1])), (s.heightUnits = 2))
                      : (o =
                          /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(
                            u
                          ))
                      ? ((s.regionAnchorX = Number(o[1])),
                        (s.regionAnchorY = Number(o[2])))
                      : (o =
                          /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(
                            u
                          ))
                      ? ((s.viewportAnchorX = Number(o[1])),
                        (s.viewportAnchorY = Number(o[2])))
                      : /^scroll=up$/.exec(u) && (s.scroll = "up"),
                      sn(r),
                      (o = ln(r));
                  }
                  t.push(a);
                }
              for (
                $n((i = new Map())), r = [], a = (n = c(n.slice(1))).next();
                !a.done;
                a = n.next()
              ) {
                if (
                  (1 != (a = a.value.split("\n")).length || a[0]) &&
                  !/^NOTE($|[ \t])/.test(a[0]) &&
                  "STYLE" == a[0]
                ) {
                  for (s = [], o = -1, u = 1; u < a.length; u++)
                    a[u].includes("::cue") && (s.push([]), (o = s.length - 1)),
                      -1 != o &&
                        (s[o].push(a[u]), a[u].includes("}") && (o = -1));
                  for (o = (s = c(s)).next(); !o.done; o = s.next()) {
                    var l = o.value;
                    (o = "global"),
                      (u = l[0].match(/\((.*)\)/)) && (o = u.pop()),
                      (u = l.slice(1, -1)),
                      l[0].includes("}") &&
                        (l = /\{(.*?)\}/.exec(l[0])) &&
                        (u = l[1].split(";")),
                      (l = i.get(o)) || (l = new Wn(0, 0, ""));
                    for (var d = !1, h = 0; h < u.length; h++) {
                      var f = /^\s*([^:]+):\s*(.*)/.exec(u[h]);
                      if (f) {
                        var p = f[2].trim().replace(";", "");
                        switch (f[1].trim()) {
                          case "background-color":
                          case "background":
                            (d = !0), (l.backgroundColor = p);
                            break;
                          case "color":
                            (d = !0), (l.color = p);
                            break;
                          case "font-family":
                            (d = !0), (l.fontFamily = p);
                            break;
                          case "font-size":
                            (d = !0), (l.fontSize = p);
                            break;
                          case "font-weight":
                            (700 <= parseInt(p, 10) || "bold" == p) &&
                              ((d = !0), (l.fontWeight = fi));
                            break;
                          case "font-style":
                            switch (p) {
                              case "normal":
                                (d = !0), (l.fontStyle = pi);
                                break;
                              case "italic":
                                (d = !0), (l.fontStyle = gi);
                                break;
                              case "oblique":
                                (d = !0), (l.fontStyle = "oblique");
                            }
                            break;
                          case "opacity":
                            (d = !0), (l.opacity = parseFloat(p));
                            break;
                          case "text-combine-upright":
                            (d = !0), (l.textCombineUpright = p);
                            break;
                          case "text-shadow":
                            (d = !0), (l.textShadow = p);
                            break;
                          case "white-space":
                            (d = !0), (l.wrapLine = "noWrap" != p);
                        }
                      }
                    }
                    d && i.set(o, l);
                  }
                }
                if (
                  ((d = e),
                  (1 == (l = a).length && !l[0]) ||
                    /^NOTE($|[ \t])/.test(l[0]) ||
                    "STYLE" == l[0] ||
                    "REGION" == l[0])
                )
                  a = null;
                else if (
                  ((a = null),
                  l[0].includes("--\x3e") || ((a = l[0]), l.splice(0, 1)),
                  (o = cn((s = new on(l[0])))),
                  (h = un(s, /[ \t]+--\x3e[ \t]+/g)),
                  (u = cn(s)),
                  null == o || null == h || null == u)
                )
                  X("Failed to parse VTT time code. Cue skipped:", a, l),
                    (a = null);
                else {
                  for (
                    o += d,
                      u += d,
                      d = l.slice(1).join("\n").trim(),
                      i.has("global")
                        ? (((l = i.get("global").clone()).startTime = o),
                          (l.endTime = u),
                          (l.payload = d))
                        : (l = new Wn(o, u, d)),
                      sn(s),
                      o = ln(s);
                    o;

                  )
                    Zm(l, o, t), sn(s), (o = ln(s));
                  Jn(l, i), null != a && (l.id = a), (a = l);
                }
                a && r.push(a);
              }
              return r;
            }),
            F("shaka.text.VttTextParser", $m),
            ($m.prototype.parseMedia = $m.prototype.parseMedia),
            ($m.prototype.setManifestType = $m.prototype.setManifestType),
            ($m.prototype.setSequenceMode = $m.prototype.setSequenceMode),
            ($m.prototype.parseInit = $m.prototype.parseInit),
            Vi("text/vtt", function () {
              return new $m();
            }),
            Vi('text/vtt; codecs="vtt"', function () {
              return new $m();
            }),
            Vi('text/vtt; codecs="wvtt"', function () {
              return new $m();
            }),
            (Qm.prototype.parseInit = function (e) {
              var t = this,
                n = !1;
              if (
                (new Na()
                  .box("moov", _a)
                  .box("trak", _a)
                  .box("mdia", _a)
                  .N("mdhd", function (e) {
                    (e = Wa(e.reader, e.version)), (t.g = e.timescale);
                  })
                  .box("minf", _a)
                  .box("stbl", _a)
                  .N("stsd", Ua)
                  .box("wvtt", function () {
                    n = !0;
                  })
                  .parse(e),
                !this.g)
              )
                throw new Ee(2, 2, 2008);
              if (!n) throw new Ee(2, 2, 2008);
            }),
            (Qm.prototype.setSequenceMode = function () {}),
            (Qm.prototype.setManifestType = function () {}),
            (Qm.prototype.parseMedia = function (e, t) {
              if (!e.length) return [];
              if (!this.g) throw new Ee(2, 2, 2008);
              var n,
                i = 0,
                r = [],
                a = [],
                o = !1,
                s = !1,
                u = !1,
                l = null;
              if (
                (new Na()
                  .box("moof", _a)
                  .box("traf", _a)
                  .N("tfdt", function (e) {
                    (o = !0), (i = Ka(e.reader, e.version).baseMediaDecodeTime);
                  })
                  .N("tfhd", function (e) {
                    l = qa(e.reader, e.flags).Kc;
                  })
                  .N("trun", function (e) {
                    (s = !0), (r = Xa(e.reader, e.version, e.flags).jf);
                  })
                  .box(
                    "mdat",
                    Ba(function (e) {
                      (u = !0), (n = e);
                    })
                  )
                  .parse(e, !1),
                !u && !o && !s)
              )
                throw new Ee(2, 2, 2008);
              e = i;
              for (
                var d = new ka(n, 0), h = c(r), f = h.next();
                !f.done;
                f = h.next()
              ) {
                var p = (f = f.value).kf || l,
                  g = f.Od ? i + f.Od : e;
                e = g + (p || 0);
                var m = 0;
                do {
                  var v = d.M();
                  m += v;
                  var y = null;
                  "vttc" == Ha(d.M())
                    ? 8 < v && (y = d.Ib(v - 8))
                    : d.skip(v - 8),
                    p &&
                      y &&
                      ((v = ev(
                        y,
                        t.periodStart + g / this.g,
                        t.periodStart + e / this.g
                      )),
                      a.push(v));
                } while (f.sampleSize && m < f.sampleSize);
              }
              return a.filter(Ji);
            }),
            F("shaka.text.Mp4VttParser", Qm),
            (Qm.prototype.parseMedia = Qm.prototype.parseMedia),
            (Qm.prototype.setManifestType = Qm.prototype.setManifestType),
            (Qm.prototype.setSequenceMode = Qm.prototype.setSequenceMode),
            (Qm.prototype.parseInit = Qm.prototype.parseInit),
            Vi('application/mp4; codecs="wvtt"', function () {
              return new Qm();
            }),
            (tv.prototype.parseInit = function () {}),
            (tv.prototype.setSequenceMode = function () {}),
            (tv.prototype.setManifestType = function () {}),
            (tv.prototype.parseMedia = function (e) {
              var t = ft(e).replace(/\r+/g, "");
              if (((e = []), "" == (t = t.trim()))) return e;
              for (
                var n = (t = c(t.split("\n\n"))).next();
                !n.done;
                n = t.next()
              ) {
                var i = new on((n = n.value.split("\n"))[0]),
                  r = cn(i),
                  a = un(i, /,/g);
                if (((i = cn(i)), null == r || null == a || null == i))
                  throw new Ee(
                    2,
                    2,
                    2001,
                    "Could not parse cue time range in SubViewer"
                  );
                e.push(new Wn(r, i, n.slice(1).join("\n").trim()));
              }
              return e;
            }),
            F("shaka.text.SbvTextParser", tv),
            (tv.prototype.parseMedia = tv.prototype.parseMedia),
            (tv.prototype.setManifestType = tv.prototype.setManifestType),
            (tv.prototype.setSequenceMode = tv.prototype.setSequenceMode),
            (tv.prototype.parseInit = tv.prototype.parseInit),
            Vi("text/x-subviewer", function () {
              return new tv();
            }),
            (nv.prototype.parseInit = function () {}),
            (nv.prototype.setSequenceMode = function () {}),
            (nv.prototype.setManifestType = function () {}),
            (nv.prototype.parseMedia = function (e, t, n) {
              return (
                (e = ke(mt((e = iv((e = ft(e))))))),
                this.g.parseMedia(e, t, n, [])
              );
            }),
            F("shaka.text.SrtTextParser", nv),
            (nv.srt2webvtt = iv),
            (nv.prototype.parseMedia = nv.prototype.parseMedia),
            (nv.prototype.setManifestType = nv.prototype.setManifestType),
            (nv.prototype.setSequenceMode = nv.prototype.setSequenceMode),
            (nv.prototype.parseInit = nv.prototype.parseInit),
            Vi("text/srt", function () {
              return new nv();
            }),
            (rv.prototype.parseInit = function () {}),
            (rv.prototype.setSequenceMode = function () {}),
            (rv.prototype.setManifestType = function () {}),
            (rv.prototype.parseMedia = function (e) {
              var t = "",
                n = "",
                i = null,
                r = null;
              for (
                r = (e = c((r = ft(e).split(/\r?\n\s*\r?\n/)))).next();
                !r.done;
                r = e.next()
              ) {
                var a = r.value;
                (r = a),
                  (a = uv.exec(a)) && ((i = a[1]), (r = a[2])),
                  "V4 Styles" == i || "V4+ Styles" == i
                    ? ((t = r), (t = n ? t + "\n" + r : r))
                    : "Events" == i && (n = n ? n + "\n" + r : r);
              }
              for (
                i = [], r = null, e = (t = c(t.split(/\r?\n/))).next();
                !e.done;
                e = t.next()
              )
                if (((e = e.value), !/^\s*;/.test(e) && (a = lv.exec(e))))
                  if (((e = a[1].trim()), (a = a[2].trim()), "Format" == e))
                    r = a.split(cv);
                  else if ("Style" == e) {
                    (e = a.split(cv)), (a = {});
                    for (var o = 0; o < r.length && o < e.length; o++)
                      a[r[o]] = e[o];
                    i.push(a);
                  }
              for (
                r = [], t = null, a = (n = c(n.split(/\r?\n/))).next(), e = {};
                !a.done;
                e = { Cg: void 0 }, a = n.next()
              )
                if (((a = a.value), !/^\s*;/.test(a) && (o = lv.exec(a))))
                  if (((a = o[1].trim()), (o = o[2].trim()), "Format" == a))
                    t = o.split(cv);
                  else if ("Dialogue" == a) {
                    (o = o.split(cv)), (a = {});
                    for (var s = 0; s < t.length && s < o.length; s++)
                      a[t[s]] = o[s];
                    (o = new Wn(
                      (s = sv(a.Start)),
                      sv(a.End),
                      o
                        .slice(t.length - 1)
                        .join(",")
                        .replace(/\\N/g, "\n")
                        .replace(/\{[^}]+\}/g, "")
                    )),
                      (e.Cg = a.Style),
                      (e = i.find(
                        (function (e) {
                          return function (t) {
                            return t.Name == e.Cg;
                          };
                        })(e)
                      )) && av(o, e),
                      r.push(o);
                  }
              return r;
            }),
            F("shaka.text.SsaTextParser", rv),
            (rv.prototype.parseMedia = rv.prototype.parseMedia),
            (rv.prototype.setManifestType = rv.prototype.setManifestType),
            (rv.prototype.setSequenceMode = rv.prototype.setSequenceMode),
            (rv.prototype.parseInit = rv.prototype.parseInit);
          var uv = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,
            lv = /^\s*([^:]+):\s*(.*)/,
            cv = /\s*,\s*/,
            dv = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
          function hv(e, t) {
            var n = 1 & e[t + 1] ? 7 : 9;
            return t + n <= e.length &&
              0 <
                (e =
                  (((3 & e[t + 3]) << 11) |
                    (e[t + 4] << 3) |
                    ((224 & e[t + 5]) >>> 5)) -
                  n)
              ? { Sc: n, aa: e }
              : null;
          }
          function fv(e, t) {
            var n = [
                96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3,
                11025, 8e3, 7350,
              ],
              i = (60 & e[t + 2]) >>> 2;
            if (i > n.length - 1) return null;
            var r = 1 + ((192 & e[t + 2]) >>> 6),
              a = (1 & e[t + 2]) << 2;
            return (
              (a |= (192 & e[t + 3]) >>> 6),
              { sampleRate: n[i], channelCount: a, codec: "mp4a.40." + r }
            );
          }
          function pv(e, t) {
            if (t + 1 < e.length && 255 === e[t] && 240 == (246 & e[t + 1])) {
              var n = 1 & e[t + 1] ? 7 : 9;
              if (t + n >= e.length) return !1;
              var i =
                ((3 & e[t + 3]) << 11) |
                (e[t + 4] << 3) |
                ((224 & e[t + 5]) >>> 5);
              return (
                !(i <= n) &&
                ((t += i) === e.length ||
                  (t + 1 < e.length && 255 === e[t] && 240 == (246 & e[t + 1])))
              );
            }
            return !1;
          }
          function gv(e) {
            (this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null);
          }
          function mv(e, t) {
            if (t + 8 > e.length || 11 !== e[t] || 119 !== e[t + 1])
              return null;
            var n = e[t + 4] >> 6;
            if (3 <= n) return null;
            var i = 63 & e[t + 4],
              r =
                2 *
                [
                  64, 69, 96, 64, 70, 96, 80, 87, 120, 80, 88, 120, 96, 104,
                  144, 96, 105, 144, 112, 121, 168, 112, 122, 168, 128, 139,
                  192, 128, 140, 192, 160, 174, 240, 160, 175, 240, 192, 208,
                  288, 192, 209, 288, 224, 243, 336, 224, 244, 336, 256, 278,
                  384, 256, 279, 384, 320, 348, 480, 320, 349, 480, 384, 417,
                  576, 384, 418, 576, 448, 487, 672, 448, 488, 672, 512, 557,
                  768, 512, 558, 768, 640, 696, 960, 640, 697, 960, 768, 835,
                  1152, 768, 836, 1152, 896, 975, 1344, 896, 976, 1344, 1024,
                  1114, 1536, 1024, 1115, 1536, 1152, 1253, 1728, 1152, 1254,
                  1728, 1280, 1393, 1920, 1280, 1394, 1920,
                ][3 * i + n];
            if (t + r > e.length) return null;
            var a = e[t + 6] >> 5,
              o = 0;
            2 === a
              ? (o += 2)
              : (1 & a && 1 !== a && (o += 2), 4 & a && (o += 2)),
              (o = (((e[t + 6] << 8) | e[t + 7]) >> (12 - o)) & 1);
            var s = 7 & e[t + 5];
            return (
              (e = new Uint8Array([
                (n << 6) | ((e[t + 5] >> 3) << 1) | (s >> 2),
                ((3 & s) << 6) | (a << 3) | (o << 2) | (i >> 4),
                (i << 4) & 224,
              ])),
              {
                sampleRate: [48e3, 44100, 32e3][n],
                channelCount: [2, 1, 2, 3, 3, 4, 4, 5][a] + o,
                ka: e,
                aa: r,
              }
            );
          }
          function vv(e, t) {
            if (11 === e[t] && 119 === e[t + 1]) {
              var n,
                i,
                r = 0,
                a = 5;
              for (t += a; 0 < a; ) {
                i = e[t];
                var o = Math.min(a, 8),
                  s = 8 - o;
                (n = (i & (n = (4278190080 >>> (24 + s)) << s)) >> s),
                  (r = r ? (r << o) | n : n),
                  (t += 1),
                  (a -= o);
              }
              if (16 > r) return !0;
            }
            return !1;
          }
          function yv(e) {
            (this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null);
          }
          function bv(e, t) {
            if (t + 8 > e.length || 2935 != ((e[t] << 8) | e[t + 1]))
              return null;
            var n = new io(e.subarray(t + 2));
            ao(n, 2), ao(n, 3);
            var i = (oo(n, 11) + 1) << 1,
              r = oo(n, 2);
            if (3 == r) {
              r = [24e3, 22060, 16e3][(r = oo(n, 2))];
              var a = 3;
            } else (r = [48e3, 44100, 32e3][r]), (a = oo(n, 2));
            var o = oo(n, 3),
              s = oo(n, 1);
            return (
              (n = oo(n, 5)),
              t + i > e.byteLength
                ? null
                : ((e = Math.floor((i * r) / (16 * [1, 2, 3, 6][a]))),
                  (e = new Uint8Array([
                    (8160 & e) >> 5,
                    (31 & e) << 3,
                    (r << 6) | (n << 1),
                    (o << 1) | s,
                    0,
                  ])),
                  {
                    sampleRate: r,
                    channelCount: [2, 1, 2, 3, 3, 4, 4, 5][o] + s,
                    ka: e,
                    aa: i,
                  })
            );
          }
          function wv(e) {
            (this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null);
          }
          Vi("text/x-ssa", function () {
            return new rv();
          }),
            ((i = gv.prototype).destroy = function () {
              this.g.clear();
            }),
            (i.isSupported = function (e) {
              return (
                "audio/aac" == e.toLowerCase().split(";")[0] &&
                Ht(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "audio/aac" == t.toLowerCase().split(";")[0]
                ? 'audio/mp4; codecs="' + (Ui(t) || "mp4a.40.2") + '"'
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.j;
            }),
            (i.transmux = function (e, t, n, i) {
              for (
                var r = ke(e), a = So(r), o = a.length;
                o < r.length && !pv(r, o);
                o++
              );
              if (
                ((e = 1e3 * n.endTime),
                (a = xo(a)).length &&
                  n &&
                  (a = a.find(function (e) {
                    return (
                      "com.apple.streaming.transportStreamTimestamp" ===
                      e.description
                    );
                  })) &&
                  (e = a.data),
                !(a = fv(r, o)))
              )
                return Promise.reject(new Ee(2, 3, 3018, n ? n.T()[0] : null));
              (t.audioSamplingRate = a.sampleRate),
                (t.channelsCount = a.channelCount);
              for (var s = []; o < r.length; ) {
                var u = hv(r, o);
                if (!u)
                  return Promise.reject(
                    new Ee(2, 3, 3018, n ? n.T()[0] : null)
                  );
                var l = u.Sc + u.aa;
                o + l <= r.length &&
                  s.push({
                    data: r.subarray(o + u.Sc, o + l),
                    size: u.aa,
                    duration: 1024,
                    Qa: 0,
                    flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                  }),
                  (o += l);
              }
              return (
                (r = a.sampleRate),
                (e = Math.floor((e * r) / 1e3)),
                (i = new nc([
                  (i = {
                    id: t.id,
                    type: "audio",
                    codecs: a.codec,
                    encrypted: t.encrypted && 0 < t.drmInfos.length,
                    timescale: r,
                    duration: i,
                    Wa: [],
                    ka: new Uint8Array([]),
                    qa: new Uint8Array([]),
                    va: 0,
                    wa: 0,
                    data: { mb: this.h, baseMediaDecodeTime: e, Ua: s },
                    stream: t,
                  }),
                ])),
                (n = t.id + "_" + n.h),
                this.g.has(n)
                  ? (t = this.g.get(n))
                  : ((t = ic(i)), this.g.set(n, t)),
                (n = this.i !== t),
                (i = uc(i)),
                (this.i = t),
                this.h++,
                n ? ((t = Ct(t, i)), Promise.resolve(t)) : Promise.resolve(i)
              );
            }),
            F("shaka.transmuxer.AacTransmuxer", gv),
            (gv.prototype.transmux = gv.prototype.transmux),
            (gv.prototype.getOriginalMimeType =
              gv.prototype.getOriginalMimeType),
            (gv.prototype.convertCodecs = gv.prototype.convertCodecs),
            (gv.prototype.isSupported = gv.prototype.isSupported),
            (gv.prototype.destroy = gv.prototype.destroy),
            wi(
              "audio/aac",
              function () {
                return new gv("audio/aac");
              },
              Ti
            ),
            ((i = yv.prototype).destroy = function () {
              this.g.clear();
            }),
            (i.isSupported = function (e) {
              return (
                "audio/ac3" == e.toLowerCase().split(";")[0] &&
                Ht(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "audio/ac3" == t.toLowerCase().split(";")[0]
                ? Ge()
                  ? 'audio/mp4; codecs="ec-3"'
                  : 'audio/mp4; codecs="ac-3"'
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.j;
            }),
            (i.transmux = function (e, t, n, i) {
              for (
                var r = So((e = ke(e))), a = r.length;
                a < e.length && !vv(e, a);
                a++
              );
              var o = 1e3 * n.endTime;
              (r = xo(r)).length &&
                n &&
                (r = r.find(function (e) {
                  return (
                    "com.apple.streaming.transportStreamTimestamp" ===
                    e.description
                  );
                })) &&
                (o = r.data),
                (r = 0);
              for (var s = new Uint8Array([]), u = []; a < e.length; ) {
                var l = mv(e, a);
                if (!l)
                  return Promise.reject(
                    new Ee(2, 3, 3018, n ? n.T()[0] : null)
                  );
                (t.audioSamplingRate = l.sampleRate),
                  (t.channelsCount = l.channelCount),
                  (r = l.sampleRate),
                  (s = l.ka),
                  u.push({
                    data: e.subarray(a, a + l.aa),
                    size: l.aa,
                    duration: 1536,
                    Qa: 0,
                    flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                  }),
                  (a += l.aa);
              }
              return (
                (e = Math.floor((o * r) / 1e3)),
                (i = new nc([
                  (i = {
                    id: t.id,
                    type: "audio",
                    codecs: "ac-3",
                    encrypted: t.encrypted && 0 < t.drmInfos.length,
                    timescale: r,
                    duration: i,
                    Wa: [],
                    ka: s,
                    qa: new Uint8Array([]),
                    va: 0,
                    wa: 0,
                    data: { mb: this.h, baseMediaDecodeTime: e, Ua: u },
                    stream: t,
                  }),
                ])),
                (n = t.id + "_" + n.h),
                this.g.has(n)
                  ? (t = this.g.get(n))
                  : ((t = ic(i)), this.g.set(n, t)),
                (n = this.i !== t),
                (i = uc(i)),
                (this.i = t),
                this.h++,
                n ? ((t = Ct(t, i)), Promise.resolve(t)) : Promise.resolve(i)
              );
            }),
            F("shaka.transmuxer.Ac3Transmuxer", yv),
            (yv.prototype.transmux = yv.prototype.transmux),
            (yv.prototype.getOriginalMimeType =
              yv.prototype.getOriginalMimeType),
            (yv.prototype.convertCodecs = yv.prototype.convertCodecs),
            (yv.prototype.isSupported = yv.prototype.isSupported),
            (yv.prototype.destroy = yv.prototype.destroy),
            wi(
              "audio/ac3",
              function () {
                return new yv("audio/ac3");
              },
              Ti
            ),
            ((i = wv.prototype).destroy = function () {
              this.g.clear();
            }),
            (i.isSupported = function (e) {
              return (
                "audio/ec3" == e.toLowerCase().split(";")[0] &&
                Ht(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "audio/ec3" == t.toLowerCase().split(";")[0]
                ? 'audio/mp4; codecs="ec-3"'
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.j;
            }),
            (i.transmux = function (e, t, n, i) {
              for (
                var r = So((e = ke(e))), a = r.length;
                a < e.length && 2935 != ((e[a] << 8) | e[a + 1]);
                a++
              );
              var o = 1e3 * n.endTime;
              (r = xo(r)).length &&
                n &&
                (r = r.find(function (e) {
                  return (
                    "com.apple.streaming.transportStreamTimestamp" ===
                    e.description
                  );
                })) &&
                (o = r.data),
                (r = 0);
              for (var s = new Uint8Array([]), u = []; a < e.length; ) {
                var l = bv(e, a);
                if (!l)
                  return Promise.reject(
                    new Ee(2, 3, 3018, n ? n.T()[0] : null)
                  );
                (t.audioSamplingRate = l.sampleRate),
                  (t.channelsCount = l.channelCount),
                  (r = l.sampleRate),
                  (s = l.ka),
                  u.push({
                    data: e.subarray(a, a + l.aa),
                    size: l.aa,
                    duration: 1536,
                    Qa: 0,
                    flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                  }),
                  (a += l.aa);
              }
              return (
                (e = Math.floor((o * r) / 1e3)),
                (i = new nc([
                  (i = {
                    id: t.id,
                    type: "audio",
                    codecs: "ec-3",
                    encrypted: t.encrypted && 0 < t.drmInfos.length,
                    timescale: r,
                    duration: i,
                    Wa: [],
                    ka: s,
                    qa: new Uint8Array([]),
                    va: 0,
                    wa: 0,
                    data: { mb: this.h, baseMediaDecodeTime: e, Ua: u },
                    stream: t,
                  }),
                ])),
                (n = t.id + "_" + n.h),
                this.g.has(n)
                  ? (t = this.g.get(n))
                  : ((t = ic(i)), this.g.set(n, t)),
                (n = this.i !== t),
                (i = uc(i)),
                (this.i = t),
                this.h++,
                n ? ((t = Ct(t, i)), Promise.resolve(t)) : Promise.resolve(i)
              );
            }),
            F("shaka.transmuxer.Ec3Transmuxer", wv),
            (wv.prototype.transmux = wv.prototype.transmux),
            (wv.prototype.getOriginalMimeType =
              wv.prototype.getOriginalMimeType),
            (wv.prototype.convertCodecs = wv.prototype.convertCodecs),
            (wv.prototype.isSupported = wv.prototype.isSupported),
            (wv.prototype.destroy = wv.prototype.destroy),
            wi(
              "audio/ec3",
              function () {
                return new wv("audio/ec3");
              },
              Ti
            );
          var xv = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
          function Sv(e) {
            if (!e.length) return null;
            var t = e.find(function (e) {
                return 32 == e.type;
              }),
              n = e.find(function (e) {
                return 33 == e.type;
              }),
              i = e.find(function (e) {
                return 34 == e.type;
              });
            if (!t || !n || !i) return null;
            var r = (function (e) {
              var t = new io(e, !0);
              return (
                fo(t),
                fo(t),
                oo(t, 4),
                oo(t, 2),
                oo(t, 6),
                (e = oo(t, 3)),
                (t = ho(t)),
                { Ze: e + 1, uf: t }
              );
            })(t.fullData);
            e = (function (e) {
              (e = new io(e, !0)), fo(e), fo(e);
              var t = 0,
                n = 0,
                i = 0,
                r = 0;
              oo(e, 4);
              var a = oo(e, 3);
              ho(e);
              for (
                var o = oo(e, 2),
                  s = oo(e, 1),
                  u = oo(e, 5),
                  l = fo(e),
                  c = fo(e),
                  d = fo(e),
                  h = fo(e),
                  f = fo(e),
                  p = fo(e),
                  g = fo(e),
                  m = fo(e),
                  v = fo(e),
                  y = fo(e),
                  b = fo(e),
                  w = [],
                  x = [],
                  S = 0;
                S < a;
                S++
              )
                w.push(ho(e)), x.push(ho(e));
              if (0 < a) for (S = a; 8 > S; S++) oo(e, 2);
              for (S = 0; S < a; S++) w[S] && oo(e, 88), x[S] && fo(e);
              lo(e),
                (w = lo(e)),
                3 == w && oo(e, 1),
                (x = lo(e)),
                (S = lo(e)),
                ho(e) &&
                  ((t += lo(e)), (n += lo(e)), (i += lo(e)), (r += lo(e)));
              var T = lo(e),
                A = lo(e),
                k = lo(e);
              if (ho(e)) for (var I = 0; I <= a; I++) lo(e), lo(e), lo(e);
              else lo(e), lo(e), lo(e);
              if ((lo(e), lo(e), lo(e), lo(e), lo(e), lo(e), ho(e) && ho(e)))
                for (I = 0; 4 > I; I++)
                  for (var C = 0; C < (3 === I ? 2 : 6); C++)
                    if (ho(e)) {
                      var M = Math.min(64, 1 << (4 + (I << 1)));
                      1 < I && co(e);
                      for (var E = 0; E < M; E++) co(e);
                    } else lo(e);
              for (
                ho(e),
                  ho(e),
                  ho(e) && (fo(e), lo(e), lo(e), ho(e)),
                  I = lo(e),
                  M = C = 0;
                M < I;
                M++
              )
                if (((E = !1), 0 !== M && (E = ho(e)), E)) {
                  M === I && lo(e), ho(e), lo(e);
                  for (var D = (E = 0); D <= C; D++) {
                    var P = ho(e),
                      L = !1;
                    P || (L = ho(e)), (P || L) && E++;
                  }
                  C = E;
                } else {
                  for (C = (D = lo(e)) + (E = lo(e)), P = 0; P < D; P++)
                    lo(e), ho(e);
                  for (D = 0; D < E; D++) lo(e), ho(e);
                }
              if (ho(e))
                for (I = lo(e), C = 0; C < I; C++) {
                  for (M = 0; M < k + 4; M++) oo(e, 1);
                  oo(e, 1);
                }
              if (((I = k = 1), (C = 0), ho(e), ho(e), ho(e))) {
                if (
                  (ho(e) &&
                    ((E = [
                      1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3,
                      2,
                    ]),
                    (D = [
                      1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2,
                      1,
                    ]),
                    0 < (M = fo(e)) && 16 >= M
                      ? ((k = E[M - 1]), (I = D[M - 1]))
                      : 255 === M && ((k = oo(e, 16)), (I = oo(e, 16)))),
                  ho(e) && ho(e),
                  ho(e) && (oo(e, 3), ho(e), ho(e) && (fo(e), fo(e), fo(e))),
                  ho(e) && (lo(e), lo(e)),
                  ho(e),
                  ho(e),
                  ho(e),
                  (M = ho(e)) && (lo(e), lo(e), lo(e), lo(e)),
                  ho(e) && (oo(e, 32), oo(e, 32), ho(e) && lo(e), ho(e)))
                )
                  for (
                    D = !1,
                      M = ho(e),
                      E = ho(e),
                      (M || E) &&
                        ((D = ho(e)) && (fo(e), oo(e, 5), ho(e), oo(e, 5)),
                        oo(e, 4),
                        oo(e, 4),
                        D && oo(e, 4),
                        oo(e, 5),
                        oo(e, 5),
                        oo(e, 5)),
                      P = 0;
                    P <= a;
                    P++
                  ) {
                    var R = !0;
                    (L = 1), ho(e) || (R = ho(e));
                    var N = !1;
                    if ((R ? lo(e) : (N = ho(e)), N || (L = lo(e) + 1), M)) {
                      for (R = 0; R < L; R++) lo(e), lo(e), D && (lo(e), lo(e));
                      ho(e);
                    }
                    if (E) {
                      for (R = 0; R < L; R++) lo(e), lo(e), D && (lo(e), lo(e));
                      ho(e);
                    }
                  }
                ho(e) &&
                  (ho(e),
                  ho(e),
                  ho(e),
                  (C = lo(e)),
                  lo(e),
                  lo(e),
                  lo(e),
                  lo(e));
              }
              return {
                Ee: b,
                Ke: o,
                Le: s,
                Je: u,
                Fe: l,
                Ge: c,
                He: d,
                Ie: h,
                ye: f,
                ze: p,
                Ae: g,
                Be: m,
                Ce: v,
                De: y,
                Fd: C,
                se: 0,
                qe: w,
                pe: T,
                oe: A,
                width: x - (t + n) * (1 === w || 2 === w ? 2 : 1),
                height: S - (i + r) * (1 === w ? 2 : 1),
                pi: k,
                oi: I,
              };
            })(n.fullData);
            var a = (function (e) {
              var t = new io(e, !0);
              fo(t),
                fo(t),
                lo(t),
                lo(t),
                ho(t),
                ho(t),
                oo(t, 3),
                ho(t),
                ho(t),
                lo(t),
                lo(t),
                co(t),
                ho(t),
                ho(t),
                ho(t) && lo(t),
                co(t),
                co(t),
                ho(t),
                ho(t),
                ho(t),
                ho(t),
                (e = ho(t)),
                (t = ho(t));
              var n = 1;
              return t && e ? (n = 0) : t ? (n = 3) : e && (n = 2), { af: n };
            })(i.fullData);
            return (
              (t = (function (e, t, n, i) {
                var r = new Uint8Array(
                  23 +
                    (5 + e.byteLength) +
                    (5 + t.byteLength) +
                    (5 + n.byteLength)
                );
                return (
                  (r[0] = 1),
                  (r[1] =
                    ((3 & i.Ke) << 6) | ((i.Le ? 1 : 0) << 5) | (31 & i.Je)),
                  (r[2] = i.Fe),
                  (r[3] = i.Ge),
                  (r[4] = i.He),
                  (r[5] = i.Ie),
                  (r[6] = i.ye),
                  (r[7] = i.ze),
                  (r[8] = i.Ae),
                  (r[9] = i.Be),
                  (r[10] = i.Ce),
                  (r[11] = i.De),
                  (r[12] = i.Ee),
                  (r[13] = 240 | ((3840 & i.Fd) >> 8)),
                  (r[14] = 255 & i.Fd),
                  (r[15] = 252 | (3 & i.af)),
                  (r[16] = 252 | (3 & i.qe)),
                  (r[17] = 248 | (7 & i.pe)),
                  (r[18] = 248 | (7 & i.oe)),
                  (r[19] = 0),
                  (r[20] = 0),
                  (r[21] =
                    ((3 & i.se) << 6) |
                    ((7 & i.Ze) << 3) |
                    ((i.uf ? 1 : 0) << 2) |
                    3),
                  (r[22] = 3),
                  (r[23] = 160),
                  (r[24] = 0),
                  (r[25] = 1),
                  (r[26] = (65280 & e.byteLength) >> 8),
                  (r[27] = 255 & e.byteLength),
                  r.set(e, 28),
                  (r[23 + (5 + e.byteLength)] = 161),
                  (r[e.byteLength + 29] = 0),
                  (r[e.byteLength + 30] = 1),
                  (r[e.byteLength + 31] = (65280 & t.byteLength) >> 8),
                  (r[e.byteLength + 32] = 255 & t.byteLength),
                  r.set(t, e.byteLength + 33),
                  (r[23 + (e.byteLength + 10 + t.byteLength)] = 162),
                  (r[e.byteLength + 10 + t.byteLength + 24] = 0),
                  (r[e.byteLength + 10 + t.byteLength + 25] = 1),
                  (r[e.byteLength + 10 + t.byteLength + 26] =
                    (65280 & n.byteLength) >> 8),
                  (r[e.byteLength + 10 + t.byteLength + 27] =
                    255 & n.byteLength),
                  r.set(n, e.byteLength + 10 + t.byteLength + 28),
                  r
                );
              })(t.fullData, n.fullData, i.fullData, {
                Ze: r.Ze,
                uf: r.uf,
                Ke: e.Ke,
                Le: e.Le,
                Ee: e.Ee,
                Je: e.Je,
                Fe: e.Fe,
                Ge: e.Ge,
                He: e.He,
                Ie: e.Ie,
                ye: e.ye,
                ze: e.ze,
                Ae: e.Ae,
                Be: e.Be,
                Ce: e.Ce,
                De: e.De,
                se: e.se,
                Fd: e.Fd,
                qe: e.qe,
                pe: e.pe,
                oe: e.oe,
                af: a.af,
              })),
              { height: e.height, width: e.width, qa: t, va: e.pi, wa: e.oi }
            );
          }
          function Tv(e, t) {
            var n = (e[t + 1] >> 3) & 3,
              i = (e[t + 1] >> 1) & 3,
              r = (e[t + 2] >> 4) & 15,
              a = (e[t + 2] >> 2) & 3;
            if (1 !== n && 0 !== r && 15 !== r && 3 !== a) {
              var o = e[t + 3] >> 6;
              (r = 1e3 * Iv[14 * (3 === n ? 3 - i : 3 === i ? 3 : 4) + r - 1]),
                (a = Cv[3 * (3 === n ? 0 : 2 === n ? 1 : 2) + a]),
                (n = Mv[n][i]);
              var s = Ev[i],
                u = Math.floor((n * r) / a + ((e[t + 2] >> 1) & 1)) * s,
                l = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
              return (
                (l = l ? parseInt(l[1], 10) : 0) &&
                  87 >= l &&
                  2 === i &&
                  224e3 <= r &&
                  0 === o &&
                  (e[t + 3] |= 128),
                {
                  sampleRate: a,
                  channelCount: 3 === o ? 1 : 2,
                  aa: u,
                  ni: 8 * n * s,
                }
              );
            }
            return null;
          }
          function Av(e, t) {
            return !(255 !== e[t] || 224 & ~e[t + 1] || !(6 & e[t + 1]));
          }
          function kv(e, t) {
            if (t + 1 < e.length && Av(e, t)) {
              var n = Tv(e, t),
                i = 4;
              return (
                n && n.aa && (i = n.aa),
                (t += i) === e.length || (t + 1 < e.length && Av(e, t))
              );
            }
            return !1;
          }
          var Iv = [
              32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448,
              32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384,
              32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32,
              48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16,
              24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160,
            ],
            Cv = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
            Mv = [
              [0, 72, 144, 12],
              [0, 0, 0, 0],
              [0, 72, 144, 12],
              [0, 144, 144, 12],
            ],
            Ev = [0, 1, 1, 4];
          function Dv(e) {
            (this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null);
          }
          function Pv(e) {
            (this.h = e), (this.g = null);
          }
          function Lv(e) {
            (this.h = e),
              (this.g = Pl.get("ISOBoxer")()) &&
                (function (e) {
                  function t() {
                    this._procFullBox(),
                      1 & this.flags &&
                        (this._procField("AlgorithmID", "uint", 24),
                        this._procField("IV_size", "uint", 8),
                        this._procFieldArray("KID", 16, "uint", 8)),
                      this._procField("sample_count", "uint", 32),
                      this._procEntries(
                        "entry",
                        this.sample_count,
                        function (e) {
                          this._procEntryField(
                            e,
                            "InitializationVector",
                            "data",
                            8
                          ),
                            2 & this.flags &&
                              (this._procEntryField(
                                e,
                                "NumberOfEntries",
                                "uint",
                                16
                              ),
                              this._procSubEntries(
                                e,
                                "clearAndCryptedData",
                                e.NumberOfEntries,
                                function (e) {
                                  this._procEntryField(
                                    e,
                                    "BytesOfClearData",
                                    "uint",
                                    16
                                  ),
                                    this._procEntryField(
                                      e,
                                      "BytesOfEncryptedData",
                                      "uint",
                                      32
                                    );
                                }
                              ));
                        }
                      );
                  }
                  e.g.addBoxProcessor("saio", function () {
                    this._procFullBox(),
                      1 & this.flags &&
                        (this._procField("aux_info_type", "uint", 32),
                        this._procField("aux_info_type_parameter", "uint", 32)),
                      this._procField("entry_count", "uint", 32),
                      this._procFieldArray(
                        "offset",
                        this.entry_count,
                        "uint",
                        1 === this.version ? 64 : 32
                      );
                  }),
                    e.g.addBoxProcessor("saiz", function () {
                      this._procFullBox(),
                        1 & this.flags &&
                          (this._procField("aux_info_type", "uint", 32),
                          this._procField(
                            "aux_info_type_parameter",
                            "uint",
                            32
                          )),
                        this._procField("default_sample_info_size", "uint", 8),
                        this._procField("sample_count", "uint", 32),
                        0 === this.default_sample_info_size &&
                          this._procFieldArray(
                            "sample_info_size",
                            this.sample_count,
                            "uint",
                            8
                          );
                    }),
                    e.g.addBoxProcessor("senc", t),
                    e.g.addBoxProcessor("uuid", function () {
                      for (var e = !0, n = 0; 16 > n; n++)
                        this.usertype[n] !== Nv[n] && (e = !1);
                      e &&
                        (this._parsing && (this.type = "sepiff"), t.call(this));
                    });
                })(this);
          }
          function Rv(e, t) {
            for (
              var n = 8, i = 0;
              i < e.boxes.length && e.boxes[i].type !== t;
              i++
            )
              n += e.boxes[i].size;
            return n;
          }
          ((i = Dv.prototype).destroy = function () {
            this.g.clear();
          }),
            (i.isSupported = function (e) {
              return (
                "audio/mpeg" == e.toLowerCase().split(";")[0] &&
                Ht(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "audio/mpeg" == t.toLowerCase().split(";")[0]
                ? 'audio/mp4; codecs="mp3"'
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.j;
            }),
            (i.transmux = function (e, t, n, i) {
              for (
                var r = ke(e), a = So(r).length;
                a < r.length && !kv(r, a);
                a++
              );
              var o;
              for (e = []; a < r.length; ) {
                var s = Tv(r, a);
                if (!s)
                  return Promise.reject(
                    new Ee(2, 3, 3018, n ? n.T()[0] : null)
                  );
                o || (o = s),
                  a + s.aa <= r.length &&
                    e.push({
                      data: r.subarray(a, a + s.aa),
                      size: s.aa,
                      duration: 1152,
                      Qa: 0,
                      flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                    }),
                  (a += s.aa);
              }
              return o
                ? ((r = ((9e4 * o.ni) / o.sampleRate) * this.h),
                  (i = new nc([
                    (i = {
                      id: t.id,
                      type: "audio",
                      codecs: "mp3",
                      encrypted: t.encrypted && 0 < t.drmInfos.length,
                      timescale: o.sampleRate,
                      duration: i,
                      Wa: [],
                      ka: new Uint8Array([]),
                      qa: new Uint8Array([]),
                      va: 0,
                      wa: 0,
                      data: { mb: this.h, baseMediaDecodeTime: r, Ua: e },
                      stream: t,
                    }),
                  ])),
                  (n = t.id + "_" + n.h),
                  this.g.has(n)
                    ? (t = this.g.get(n))
                    : ((t = ic(i)), this.g.set(n, t)),
                  (n = this.i !== t),
                  (i = uc(i)),
                  (this.i = t),
                  this.h++,
                  n ? ((t = Ct(t, i)), Promise.resolve(t)) : Promise.resolve(i))
                : Promise.reject(new Ee(2, 3, 3018, n ? n.T()[0] : null));
            }),
            F("shaka.transmuxer.Mp3Transmuxer", Dv),
            (Dv.prototype.transmux = Dv.prototype.transmux),
            (Dv.prototype.getOriginalMimeType =
              Dv.prototype.getOriginalMimeType),
            (Dv.prototype.convertCodecs = Dv.prototype.convertCodecs),
            (Dv.prototype.isSupported = Dv.prototype.isSupported),
            (Dv.prototype.destroy = Dv.prototype.destroy),
            wi(
              "audio/mpeg",
              function () {
                return new Dv("audio/mpeg");
              },
              Ti
            ),
            ((i = Pv.prototype).destroy = function () {}),
            (i.isSupported = function (e) {
              if ("video/mp2t" != e.toLowerCase().split(";")[0]) return !1;
              var t = Ui(e).split(","),
                n = Pt("audio", t);
              return (
                (t = Pt("video", t)),
                !(!n || t || "mp3" != Ri(n)) &&
                  Ht(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "video/mp2t" == t.toLowerCase().split(";")[0]
                ? "audio/mpeg"
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.h;
            }),
            (i.transmux = function (e, t, n, i, r) {
              if (
                (this.g ? this.g.clearData() : (this.g = new To()),
                (e = ke(e)),
                "mp3" != (e = this.g.parse(e)).rd().audio || "audio" != r)
              )
                return Promise.reject(new Ee(2, 3, 3018, n ? n.T()[0] : null));
              for (
                n = new Uint8Array([]), r = c(e.Fb()), e = r.next();
                !e.done;
                e = r.next()
              )
                if ((e = e.value.data))
                  for (t = 0; t < e.length; )
                    (i = Tv(e, t))
                      ? (t + i.aa <= e.length &&
                          (n = Ct(n, e.subarray(t, t + i.aa))),
                        (t += i.aa))
                      : t++;
              return Promise.resolve(n);
            }),
            F("shaka.transmuxer.MpegTsTransmuxer", Pv),
            (Pv.prototype.transmux = Pv.prototype.transmux),
            (Pv.prototype.getOriginalMimeType =
              Pv.prototype.getOriginalMimeType),
            (Pv.prototype.convertCodecs = Pv.prototype.convertCodecs),
            (Pv.prototype.isSupported = Pv.prototype.isSupported),
            (Pv.prototype.destroy = Pv.prototype.destroy),
            wi(
              "video/mp2t",
              function () {
                return new Pv("video/mp2t");
              },
              Ai
            ),
            ((i = Lv.prototype).destroy = function () {}),
            (i.isSupported = function (e, t) {
              var n = e.startsWith("mss/");
              return (
                !(!this.g || !n) &&
                (t
                  ? Ht(this.convertCodecs(t, e))
                  : ((t = this.convertCodecs("audio", e)),
                    (e = this.convertCodecs("video", e)),
                    Ht(t) || Ht(e)))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return t.replace("mss/", "");
            }),
            (i.getOriginalMimeType = function () {
              return this.h;
            }),
            (i.transmux = function (e, t, n) {
              if (!n) return Promise.resolve(ke(e));
              if (!t.mssPrivateData)
                return Promise.reject(new Ee(2, 3, 3020, n ? n.T()[0] : null));
              try {
                var i,
                  r = this.g.parseBuffer(e),
                  a = r.fetch("tfhd");
                a.track_ID = t.id + 1;
                var o = r.fetch("tfdt"),
                  s = r.fetch("traf");
                null === o &&
                  (((o = this.g.createFullBox("tfdt", s, a)).version = 1),
                  (o.flags = 0),
                  (o.baseMediaDecodeTime = Math.floor(
                    n.startTime * t.mssPrivateData.timescale
                  )));
                var u = r.fetch("trun"),
                  l = r.fetch("tfxd");
                l && l._parent.boxes.splice(l._parent.boxes.indexOf(l), 1);
                var c = r.fetch("tfrf");
                c && c._parent.boxes.splice(c._parent.boxes.indexOf(c), 1);
                var d = r.fetch("sepiff");
                if (null !== d) {
                  (d.type = "senc"), (d.usertype = void 0);
                  var h = r.fetch("saio");
                  if (null === h) {
                    ((h = this.g.createFullBox("saio", s)).version = 0),
                      (h.flags = 0),
                      (h.entry_count = 1),
                      (h.offset = [0]);
                    var f = this.g.createFullBox("saiz", s);
                    if (
                      ((f.version = 0),
                      (f.flags = 0),
                      (f.sample_count = d.sample_count),
                      (f.default_sample_info_size = 0),
                      (f.sample_info_size = []),
                      2 & d.flags)
                    )
                      for (i = 0; i < d.sample_count; i += 1)
                        f.sample_info_size[i] =
                          10 + 6 * d.entry[i].NumberOfEntries;
                    else f.default_sample_info_size = 8;
                  }
                }
                (a.flags &= 16777214), (a.flags |= 131072), (u.flags |= 1);
                var p = r.fetch("moof");
                u.data_offset = p.getLength() + 8;
                var g = r.fetch("saio");
                null !== g &&
                  (g.offset[0] = Rv(p, "traf") + Rv(s, "senc") + 16);
                var m = ke(r.write());
                return Promise.resolve(m);
              } catch (v) {
                return v instanceof Ee
                  ? Promise.reject(v)
                  : Promise.reject(new Ee(2, 3, 3022, n ? n.T()[0] : null));
              }
            }),
            F("shaka.transmuxer.MssTransmuxer", Lv),
            (Lv.prototype.transmux = Lv.prototype.transmux),
            (Lv.prototype.getOriginalMimeType =
              Lv.prototype.getOriginalMimeType),
            (Lv.prototype.convertCodecs = Lv.prototype.convertCodecs),
            (Lv.prototype.isSupported = Lv.prototype.isSupported),
            (Lv.prototype.destroy = Lv.prototype.destroy);
          var Nv = new Uint8Array([
            162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141,
            244,
          ]);
          function _v(e) {
            (this.m = e),
              (this.g = 0),
              (this.i = new Map()),
              (this.l = this.h = this.j = null);
          }
          wi(
            "mss/audio/mp4",
            function () {
              return new Lv("mss/audio/mp4");
            },
            Ti
          ),
            wi(
              "mss/video/mp4",
              function () {
                return new Lv("mss/video/mp4");
              },
              Ti
            ),
            ((i = _v.prototype).destroy = function () {
              this.i.clear(), this.h && this.h.destroy();
            }),
            (i.isSupported = function (e, t) {
              if ("video/mp2t" != e.toLowerCase().split(";")[0]) return !1;
              var n = e;
              t && (n = this.convertCodecs(t, e));
              var i = Ui(n).split(",");
              return (
                (n = Pt("audio", i)),
                (i = Pt("video", i)),
                !(
                  (n && ((n = Ri(n)), !Ov.includes(n))) ||
                  (i && ((n = Ri(i)), !Bv.includes(n)))
                ) &&
                  (t
                    ? Ht(this.convertCodecs(t, e))
                    : ((t = this.convertCodecs("audio", e)),
                      (e = this.convertCodecs("video", e)),
                      Ht(t) || Ht(e)))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "video/mp2t" == t.toLowerCase().split(";")[0]
                ? ((t = Ui(t)
                    .replace("mp4a.40.34", "mp3")
                    .split(",")
                    .map(function (e) {
                      return mr(e, "audio/mp4");
                    })
                    .map(vr)
                    .join(",")),
                  "audio" == e
                    ? 'audio/mp4; codecs="' + t + '"'
                    : 'video/mp4; codecs="' + t + '"')
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.m;
            }),
            (i.transmux = function (e, t, n, i, r) {
              var a = ke(e);
              if ("audio" == r && !Co(a)) {
                for (var o = So(a), s = o.length; s < a.length; s++)
                  if (kv(a, s))
                    return Promise.reject(
                      new Ee(2, 3, 3018, n ? n.T()[0] : null)
                    );
                for (s = o.length; s < a.length; s++)
                  if (pv(a, s))
                    return (
                      this.h || (this.h = new gv("audio/aac")),
                      this.h.transmux(e, t, n, i, r)
                    );
                return Promise.reject(new Ee(2, 3, 3018, n ? n.T()[0] : null));
              }
              this.j ? this.j.clearData() : (this.j = new To());
              var u = this.j.parse(a),
                l = [],
                h = u.rd();
              try {
                var f = null;
                if ("video" == r) {
                  switch (h.video) {
                    case "avc":
                      var p = [],
                        g = null,
                        m = u.Zb(),
                        v = (function (e) {
                          function t(e) {
                            r = {
                              data: new Uint8Array([]),
                              frame: !1,
                              isKeyframe: !1,
                              pts: e.pts,
                              dts: e.dts,
                              nalus: [],
                            };
                          }
                          function n() {
                            if (r && r.nalus.length && r.frame) {
                              for (
                                var e = [], t = c(r.nalus), n = t.next();
                                !n.done;
                                n = t.next()
                              ) {
                                var a = (n = n.value).fullData.byteLength,
                                  o = new Uint8Array(4);
                                (o[0] = (a >> 24) & 255),
                                  (o[1] = (a >> 16) & 255),
                                  (o[2] = (a >> 8) & 255),
                                  (o[3] = 255 & a),
                                  e.push(o),
                                  e.push(n.fullData);
                              }
                              (r.data = Ct.apply(xt, d(e))), i.push(r);
                            }
                          }
                          for (
                            var i = [], r = null, a = !1, o = 0;
                            o < e.length;
                            o++
                          ) {
                            var s = e[o],
                              u = s.nalus,
                              l = !1;
                            r && u.length && !a && (n(), t(s));
                            for (
                              var h = (u = c(s.nalus)).next();
                              !h.done;
                              h = u.next()
                            ) {
                              var f = !1;
                              switch ((h = h.value).type) {
                                case 1:
                                  var p = !1;
                                  f = !0;
                                  var g = h.data;
                                  l &&
                                    4 < g.length &&
                                    (2 === (g = go(new io(g))) ||
                                      4 === g ||
                                      7 === g ||
                                      9 === g) &&
                                    (p = !0),
                                    p &&
                                      r &&
                                      r.frame &&
                                      !r.isKeyframe &&
                                      (n(), (r = null)),
                                    r || t(s),
                                    (r.frame = !0),
                                    (r.isKeyframe = p);
                                  break;
                                case 5:
                                  (f = !0),
                                    r &&
                                      r.frame &&
                                      !r.isKeyframe &&
                                      (n(), (r = null)),
                                    r || t(s),
                                    (r.frame = !0),
                                    (r.isKeyframe = !0);
                                  break;
                                case 6:
                                case 8:
                                case 12:
                                  f = !0;
                                  break;
                                case 7:
                                  l = f = !0;
                                  break;
                                case 9:
                                  (a = f = !0),
                                    r && r.frame && (n(), (r = null)),
                                    r || t(s);
                                  break;
                                default:
                                  f = !1;
                              }
                              r && f && r.nalus.push(h);
                            }
                          }
                          return n(), i;
                        })(m);
                      if (!v.length)
                        throw new Ee(2, 3, 3023, n ? n.T()[0] : null);
                      for (var y = 0; y < v.length; y++) {
                        var b = v[y];
                        null == g && (g = b.dts);
                        var w;
                        (w =
                          y + 1 < v.length
                            ? (v[y + 1].dts || 0) - (b.dts || 0)
                            : 1 < v.length
                            ? (b.dts || 0) - (v[y - 1].dts || 0)
                            : 9e4 * (n.endTime - n.startTime)),
                          p.push({
                            data: b.data,
                            size: b.data.byteLength,
                            duration: w,
                            Qa: Math.round((b.pts || 0) - (b.dts || 0)),
                            flags: {
                              Sa: 0,
                              Ja: 0,
                              Ia: 0,
                              Ga: 0,
                              Ha: b.isKeyframe ? 2 : 1,
                              Ta: b.isKeyframe ? 0 : 1,
                            },
                          });
                      }
                      for (
                        var x = [], S = c(m), T = S.next();
                        !T.done;
                        T = S.next()
                      )
                        x.push.apply(x, d(T.value.nalus));
                      var A = (function (e) {
                        if (!e.length) return null;
                        var t = e.find(function (e) {
                          return 7 == e.type;
                        });
                        if (
                          ((e = e.find(function (e) {
                            return 8 == e.type;
                          })),
                          !t || !e)
                        )
                          return null;
                        var n = new io(t.data),
                          i = fo(n);
                        if (
                          (fo(n),
                          fo(n),
                          uo(n),
                          xv.includes(i) &&
                            (3 === (i = lo(n)) && ao(n, 1),
                            uo(n),
                            uo(n),
                            ao(n, 1),
                            ho(n)))
                        ) {
                          i = 3 !== i ? 8 : 12;
                          for (var r = 0; r < i; r++)
                            ho(n) && po(n, 6 > r ? 16 : 64);
                        }
                        if ((uo(n), 0 === (i = lo(n)))) lo(n);
                        else if (1 === i)
                          for (
                            ao(n, 1), uo(n), uo(n), i = lo(n), r = 0;
                            r < i;
                            r++
                          )
                            uo(n);
                        uo(n), ao(n, 1);
                        var a = lo(n),
                          o = lo(n),
                          s = oo(n, 1);
                        0 === s && ao(n, 1), ao(n, 1);
                        var u = 0,
                          l = 0,
                          c = 0,
                          h = 0;
                        if (
                          (ho(n) &&
                            ((u = lo(n)),
                            (l = lo(n)),
                            (c = lo(n)),
                            (h = lo(n))),
                          (r = i = 1),
                          ho(n) && ho(n))
                        ) {
                          var f = fo(n);
                          0 < f && 16 >= f
                            ? ((i = [
                                1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64,
                                160, 4, 3, 2,
                              ][f - 1]),
                              (r = [
                                1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33,
                                99, 3, 2, 1,
                              ][f - 1]))
                            : 255 === f && ((i = oo(n, 16)), (r = oo(n, 16)));
                        }
                        return (
                          (n = (2 - s) * (o + 1) * 16 - 2 * c - 2 * h),
                          (a = 16 * (a + 1) - 2 * u - 2 * l),
                          (u = []),
                          (t = t.fullData),
                          u.push((t.byteLength >>> 8) & 255),
                          u.push(255 & t.byteLength),
                          (u = u.concat.apply(u, d(t))),
                          (t = []),
                          (e = e.fullData),
                          t.push((e.byteLength >>> 8) & 255),
                          t.push(255 & e.byteLength),
                          (t = t.concat.apply(t, d(e))),
                          {
                            height: n,
                            width: a,
                            qa: (e = new Uint8Array(
                              [1, u[3], u[4], u[5], 255, 225].concat(u, [1], t)
                            )),
                            va: i,
                            wa: r,
                          }
                        );
                      })(x);
                      if (!A || null == g)
                        throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                      (t.height = A.height),
                        (t.width = A.width),
                        (f = {
                          id: t.id,
                          type: "video",
                          codecs: "avc1",
                          encrypted: t.encrypted && 0 < t.drmInfos.length,
                          timescale: 9e4,
                          duration: i,
                          Wa: [],
                          ka: new Uint8Array([]),
                          qa: A.qa,
                          va: A.va,
                          wa: A.wa,
                          data: { mb: this.g, baseMediaDecodeTime: g, Ua: p },
                          stream: t,
                        });
                      break;
                    case "hvc":
                      var k = [],
                        I = null,
                        C = [],
                        M = u.Zb();
                      if (!M.length)
                        throw new Ee(2, 3, 3023, n ? n.T()[0] : null);
                      for (var E = 0; E < M.length; E++) {
                        var D = M[E],
                          P = D.nalus;
                        C.push.apply(C, d(P));
                        for (
                          var L = !1, R = [], N = !1, _ = c(P), U = _.next();
                          !U.done;
                          U = _.next()
                        ) {
                          var j = U.value;
                          switch (j.type) {
                            case 1:
                            case 0:
                              var O = (N = !0);
                              break;
                            case 19:
                            case 20:
                            case 21:
                              L = O = N = !0;
                              break;
                            case 32:
                            case 33:
                            case 34:
                            case 39:
                            case 40:
                              O = !0;
                              break;
                            case 35:
                              N = O = !0;
                              break;
                            default:
                              O = !1;
                          }
                          if (N && O) {
                            var B = j.fullData.byteLength,
                              F = new Uint8Array(4);
                            (F[0] = (B >> 24) & 255),
                              (F[1] = (B >> 16) & 255),
                              (F[2] = (B >> 8) & 255),
                              (F[3] = 255 & B),
                              R.push(F),
                              R.push(j.fullData);
                          }
                        }
                        var H = R.length
                          ? { data: Ct.apply(xt, d(R)), isKeyframe: L }
                          : null;
                        if (H) {
                          null == I && null != D.dts && (I = D.dts);
                          var V;
                          (V =
                            E + 1 < M.length
                              ? (M[E + 1].dts || 0) - (D.dts || 0)
                              : 1 < M.length
                              ? (D.dts || 0) - (M[E - 1].dts || 0)
                              : 9e4 * (n.endTime - n.startTime)),
                            k.push({
                              data: H.data,
                              size: H.data.byteLength,
                              duration: V,
                              Qa: Math.round((D.pts || 0) - (D.dts || 0)),
                              flags: {
                                Sa: 0,
                                Ja: 0,
                                Ia: 0,
                                Ga: 0,
                                Ha: H.isKeyframe ? 2 : 1,
                                Ta: H.isKeyframe ? 0 : 1,
                              },
                            });
                        }
                      }
                      var z = Sv(C);
                      if (!z || null == I)
                        throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                      (t.height = z.height),
                        (t.width = z.width),
                        (f = {
                          id: t.id,
                          type: "video",
                          codecs: "hvc1",
                          encrypted: t.encrypted && 0 < t.drmInfos.length,
                          timescale: 9e4,
                          duration: i,
                          Wa: [],
                          ka: new Uint8Array([]),
                          qa: z.qa,
                          va: z.va,
                          wa: z.wa,
                          data: { mb: this.g, baseMediaDecodeTime: I, Ua: k },
                          stream: t,
                        });
                  }
                  f && (l.push(f), (f = null));
                }
                if ("audio" == r) {
                  switch (h.audio) {
                    case "aac":
                      for (
                        var G,
                          q = [],
                          K = null,
                          W = null,
                          X = null,
                          Y = c(u.Fb()),
                          J = Y.next();
                        !J.done;
                        J = Y.next()
                      ) {
                        var $ = J.value,
                          Z = $.data;
                        if (Z) {
                          var Q = 0;
                          if (-1 == W && X) (Z = Ct(X, $.data)), (W = null);
                          else if (null != W && X) {
                            Q = Math.max(0, W);
                            var ee = Ct(X, Z.subarray(0, Q));
                            q.push({
                              data: ee,
                              size: ee.byteLength,
                              duration: 1024,
                              Qa: 0,
                              flags: {
                                Sa: 0,
                                Ja: 0,
                                Ia: 0,
                                Ga: 0,
                                Ha: 2,
                                Ta: 0,
                              },
                            }),
                              (W = X = null);
                          }
                          if (!(G = fv(Z, Q)))
                            throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                          for (
                            t.audioSamplingRate = G.sampleRate,
                              t.channelsCount = G.channelCount,
                              null == K && null !== $.pts && (K = $.pts);
                            Q < Z.length;

                          ) {
                            var te = hv(Z, Q);
                            if (!te) {
                              (X = Z.subarray(Q, Z.length)), (W = -1);
                              break;
                            }
                            var ne = te.Sc + te.aa;
                            0 != (W = Math.max(0, Q + ne - Z.length))
                              ? (X = Z.subarray(Q + te.Sc, Q + ne))
                              : Q + ne <= Z.length &&
                                q.push({
                                  data: Z.subarray(Q + te.Sc, Q + ne),
                                  size: te.aa,
                                  duration: 1024,
                                  Qa: 0,
                                  flags: {
                                    Sa: 0,
                                    Ja: 0,
                                    Ia: 0,
                                    Ga: 0,
                                    Ha: 2,
                                    Ta: 0,
                                  },
                                }),
                              (Q += ne);
                          }
                        }
                      }
                      if (!G || null == K) {
                        if (!u.Zb().length)
                          throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                        K = 9e4 * n.startTime;
                        var ie = Pt("audio", t.codecs.split(","));
                        if (!ie || !t.channelsCount || !t.audioSamplingRate)
                          throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                        G = {
                          sampleRate: t.audioSamplingRate,
                          channelCount: t.channelsCount,
                          codec: ie,
                        };
                        var re = (function (e, t) {
                          if ("mp4a.40.2" === e) {
                            if (1 === t)
                              return new Uint8Array([0, 200, 0, 128, 35, 128]);
                            if (2 === t)
                              return new Uint8Array([
                                33, 0, 73, 144, 2, 25, 0, 35, 128,
                              ]);
                            if (3 === t)
                              return new Uint8Array([
                                0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0,
                                142,
                              ]);
                            if (4 === t)
                              return new Uint8Array([
                                0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0,
                                128, 44, 128, 8, 2, 56,
                              ]);
                            if (5 === t)
                              return new Uint8Array([
                                0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0,
                                130, 48, 4, 153, 0, 33, 144, 2, 56,
                              ]);
                            if (6 === t)
                              return new Uint8Array([
                                0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0,
                                130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32,
                                8, 224,
                              ]);
                          } else {
                            if (1 === t)
                              return new Uint8Array([
                                1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0,
                                0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94,
                              ]);
                            if (2 === t || 3 === t)
                              return new Uint8Array([
                                1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0,
                                0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94,
                              ]);
                          }
                          return null;
                        })(ie, t.channelsCount);
                        if (!re) throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                        for (
                          var ae = K + 9e4 * (n.endTime - n.startTime), oe = K;
                          oe < ae;

                        )
                          q.push({
                            data: re,
                            size: re.byteLength,
                            duration: 1024,
                            Qa: 0,
                            flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                          }),
                            (oe += (1024 / G.sampleRate) * 9e4);
                      }
                      var se = G.sampleRate,
                        ue = (K / 9e4) * se;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: G.codec,
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: se,
                        duration: i,
                        Wa: [],
                        ka: new Uint8Array([]),
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: ue, Ua: q },
                        stream: t,
                      };
                      break;
                    case "ac3":
                      for (
                        var le = [],
                          ce = 0,
                          de = new Uint8Array([]),
                          he = null,
                          fe = c(u.Fb()),
                          pe = fe.next();
                        !pe.done;
                        pe = fe.next()
                      ) {
                        var ge = pe.value,
                          me = ge.data;
                        null == he && null !== ge.pts && (he = ge.pts);
                        for (var ve = 0; ve < me.length; ) {
                          var ye = mv(me, ve);
                          ye
                            ? ((t.audioSamplingRate = ye.sampleRate),
                              (t.channelsCount = ye.channelCount),
                              (ce = ye.sampleRate),
                              (de = ye.ka),
                              le.push({
                                data: me.subarray(ve, ve + ye.aa),
                                size: ye.aa,
                                duration: 1536,
                                Qa: 0,
                                flags: {
                                  Sa: 0,
                                  Ja: 0,
                                  Ia: 0,
                                  Ga: 0,
                                  Ha: 2,
                                  Ta: 0,
                                },
                              }),
                              (ve += ye.aa))
                            : ve++;
                        }
                      }
                      if (0 == ce || 0 == de.byteLength || null == he)
                        throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                      var be = (he / 9e4) * ce;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: "ac-3",
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: ce,
                        duration: i,
                        Wa: [],
                        ka: de,
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: be, Ua: le },
                        stream: t,
                      };
                      break;
                    case "ec3":
                      for (
                        var we = [],
                          xe = 0,
                          Se = new Uint8Array([]),
                          Te = null,
                          Ae = c(u.Fb()),
                          Ie = Ae.next();
                        !Ie.done;
                        Ie = Ae.next()
                      ) {
                        var Ce = Ie.value,
                          Me = Ce.data;
                        null == Te && null !== Ce.pts && (Te = Ce.pts);
                        for (var De = 0; De < Me.length; ) {
                          var Pe = bv(Me, De);
                          Pe
                            ? ((t.audioSamplingRate = Pe.sampleRate),
                              (t.channelsCount = Pe.channelCount),
                              (xe = Pe.sampleRate),
                              (Se = Pe.ka),
                              we.push({
                                data: Me.subarray(De, De + Pe.aa),
                                size: Pe.aa,
                                duration: 1536,
                                Qa: 0,
                                flags: {
                                  Sa: 0,
                                  Ja: 0,
                                  Ia: 0,
                                  Ga: 0,
                                  Ha: 2,
                                  Ta: 0,
                                },
                              }),
                              (De += Pe.aa))
                            : De++;
                        }
                      }
                      if (0 == xe || 0 == Se.byteLength || null == Te)
                        throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                      var Le = (Te / 9e4) * xe;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: "ec-3",
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: xe,
                        duration: i,
                        Wa: [],
                        ka: Se,
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: Le, Ua: we },
                        stream: t,
                      };
                      break;
                    case "mp3":
                      for (
                        var Re,
                          Ne = [],
                          _e = null,
                          Ue = c(u.Fb()),
                          je = Ue.next();
                        !je.done;
                        je = Ue.next()
                      ) {
                        var Oe = je.value,
                          Be = Oe.data;
                        if (Be) {
                          null == _e && null !== Oe.pts && (_e = Oe.pts);
                          for (var Fe = 0; Fe < Be.length; ) {
                            var He = Tv(Be, Fe);
                            He
                              ? (Re || (Re = He),
                                Fe + He.aa <= Be.length &&
                                  Ne.push({
                                    data: Be.subarray(Fe, Fe + He.aa),
                                    size: He.aa,
                                    duration: 1152,
                                    Qa: 0,
                                    flags: {
                                      Sa: 0,
                                      Ja: 0,
                                      Ia: 0,
                                      Ga: 0,
                                      Ha: 2,
                                      Ta: 0,
                                    },
                                  }),
                                (Fe += He.aa))
                              : Fe++;
                          }
                        }
                      }
                      if (!Re || null == _e)
                        throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                      var Ve = Re.sampleRate,
                        ze = (_e / 9e4) * Ve;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: "mp3",
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: Ve,
                        duration: i,
                        Wa: [],
                        ka: new Uint8Array([]),
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: ze, Ua: Ne },
                        stream: t,
                      };
                      break;
                    case "opus":
                      var Ge = [],
                        qe = null,
                        Ke = u.D;
                      if (!Ke) throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                      var We = [];
                      switch (Ke.Ug) {
                        case 1:
                        case 2:
                          We = [0];
                          break;
                        case 0:
                          We = [255, 1, 1, 0, 1];
                          break;
                        case 128:
                          We = [255, 2, 0, 0, 1];
                          break;
                        case 3:
                          We = [1, 2, 1, 0, 2, 1];
                          break;
                        case 4:
                          We = [1, 2, 2, 0, 1, 2, 3];
                          break;
                        case 5:
                          We = [1, 3, 2, 0, 4, 1, 2, 3];
                          break;
                        case 6:
                          We = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                          break;
                        case 7:
                          We = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                          break;
                        case 8:
                          We = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                          break;
                        case 130:
                          We = [1, 1, 2, 0, 1];
                          break;
                        case 131:
                          We = [1, 1, 3, 0, 1, 2];
                          break;
                        case 132:
                          We = [1, 1, 4, 0, 1, 2, 3];
                          break;
                        case 133:
                          We = [1, 1, 5, 0, 1, 2, 3, 4];
                          break;
                        case 134:
                          We = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                          break;
                        case 135:
                          We = [1, 1, 7, 0, 1, 2, 3, 4, 5, 6];
                          break;
                        case 136:
                          We = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7];
                      }
                      for (
                        var Xe = new Uint8Array(
                            [
                              0,
                              Ke.channelCount,
                              0,
                              0,
                              (Ke.sampleRate >>> 24) & 255,
                              (Ke.sampleRate >>> 17) & 255,
                              (Ke.sampleRate >>> 8) & 255,
                              (Ke.sampleRate >>> 0) & 255,
                              0,
                              0,
                            ].concat(d(We))
                          ),
                          Ye = Ke.sampleRate,
                          Je = c(u.Fb()),
                          $e = Je.next();
                        !$e.done;
                        $e = Je.next()
                      ) {
                        var Ze = $e.value,
                          Qe = Ze.data;
                        null == qe && null !== Ze.pts && (qe = Ze.pts);
                        for (var et = 0; et < Qe.length; ) {
                          for (
                            var tt = !!(16 & Qe[et + 1]),
                              nt = !!(8 & Qe[et + 1]),
                              it = et + 2,
                              rt = 0;
                            255 === Qe[it];

                          )
                            (rt += 255), (it += 1);
                          (rt += Qe[it]),
                            (it += 1),
                            (it += tt ? 2 : 0),
                            (it += nt ? 2 : 0);
                          var at = Qe.slice(it, it + rt);
                          Ge.push({
                            data: at,
                            size: at.byteLength,
                            duration: 960,
                            Qa: 0,
                            flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                          }),
                            (et = it + rt);
                        }
                      }
                      if (0 == Xe.byteLength || null == qe)
                        throw new Ee(2, 3, 3018, n ? n.T()[0] : null);
                      (t.audioSamplingRate = Ke.sampleRate),
                        (t.channelsCount = Ke.channelCount);
                      var ot = (qe / 9e4) * Ye;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: "opus",
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: Ye,
                        duration: i,
                        Wa: [],
                        ka: Xe,
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: ot, Ua: Ge },
                        stream: t,
                      };
                  }
                  f && (l.push(f), (f = null));
                }
              } catch (ft) {
                return ft && 3023 == ft.code
                  ? Promise.resolve(new Uint8Array([]))
                  : Promise.reject(ft);
              }
              if (!l.length)
                return Promise.reject(new Ee(2, 3, 3018, n ? n.T()[0] : null));
              var st = new nc(l),
                ut = t.id + "_" + n.h;
              if (this.i.has(ut)) var lt = this.i.get(ut);
              else (lt = ic(st)), this.i.set(ut, lt);
              var ct = this.l !== lt,
                dt = uc(st);
              if (((this.l = lt), this.g++, ct)) {
                var ht = Ct(lt, dt);
                return Promise.resolve(ht);
              }
              return Promise.resolve(dt);
            }),
            F("shaka.transmuxer.TsTransmuxer", _v),
            (_v.prototype.transmux = _v.prototype.transmux),
            (_v.prototype.getOriginalMimeType =
              _v.prototype.getOriginalMimeType),
            (_v.prototype.convertCodecs = _v.prototype.convertCodecs),
            (_v.prototype.isSupported = _v.prototype.isSupported),
            (_v.prototype.destroy = _v.prototype.destroy);
          var Uv,
            jv,
            Ov = ["aac", "ac-3", "ec-3", "mp3", "opus"],
            Bv = ["avc", "hevc"];
          function Fv() {}
          function Hv() {}
          function Vv() {
            Uv || navigator.emeEncryptionSchemePolyfilled
              ? console.debug("EmeEncryptionSchemePolyfill: Already installed.")
              : navigator.requestMediaKeySystemAccess &&
                MediaKeySystemAccess.prototype.getConfiguration
              ? ((Uv = navigator.requestMediaKeySystemAccess),
                console.debug(
                  "EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."
                ),
                (navigator.requestMediaKeySystemAccess = zv),
                (navigator.emeEncryptionSchemePolyfilled = !0))
              : console.debug("EmeEncryptionSchemePolyfill: EME not found");
          }
          function zv(e, t) {
            var n,
              i = this;
            return L(function (r) {
              return 1 == r.g
                ? (console.assert(
                    i == navigator,
                    'bad "this" for requestMediaKeySystemAccess'
                  ),
                  x(r, Uv.call(i, e, t), 2))
                : Qv((n = r.h))
                ? (console.debug(
                    "EmeEncryptionSchemePolyfill: Native encryptionScheme support found."
                  ),
                  (navigator.requestMediaKeySystemAccess = Uv),
                  r.return(n))
                : (console.debug(
                    "EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."
                  ),
                  (navigator.requestMediaKeySystemAccess = Gv),
                  r.return(Gv.call(i, e, t)));
            });
          }
          function Gv(e, t) {
            var n,
              i,
              r,
              a,
              o,
              s,
              u,
              l,
              d,
              h,
              f,
              p,
              g = this;
            return L(function (m) {
              if (1 == m.g) {
                for (
                  console.assert(
                    g == navigator,
                    'bad "this" for requestMediaKeySystemAccess'
                  ),
                    n = Zv(e),
                    i = [],
                    r = c(t),
                    a = r.next();
                  !a.done;
                  a = r.next()
                )
                  (o = a.value),
                    (s = qv(o.videoCapabilities, n)),
                    (u = qv(o.audioCapabilities, n)),
                    (o.videoCapabilities &&
                      o.videoCapabilities.length &&
                      !s.length) ||
                      (o.audioCapabilities &&
                        o.audioCapabilities.length &&
                        !u.length) ||
                      (((l = Object.assign({}, o)).videoCapabilities = s),
                      (l.audioCapabilities = u),
                      i.push(l));
                if (!i.length)
                  throw (
                    (((d = Error(
                      "Unsupported keySystem or supportedConfigurations."
                    )).name = "NotSupportedError"),
                    (d.code = DOMException.NOT_SUPPORTED_ERR),
                    d)
                  );
                return x(m, Uv.call(g, e, i), 2);
              }
              return (
                (h = m.h),
                (p = f = null),
                i[0] &&
                  (i[0].videoCapabilities &&
                    (f = i[0].videoCapabilities[0].encryptionScheme),
                  i[0].audioCapabilities &&
                    (p = i[0].audioCapabilities[0].encryptionScheme)),
                m.return(new $v(h, f, p))
              );
            });
          }
          function qv(e, t) {
            return e
              ? e.filter(function (e) {
                  return ey(e.encryptionScheme, t);
                })
              : e;
          }
          function Kv() {}
          function Wv() {
            jv || navigator.mediaCapabilitiesEncryptionSchemePolyfilled
              ? console.debug("McEncryptionSchemePolyfill: Already installed.")
              : navigator.mediaCapabilities
              ? ((jv = navigator.mediaCapabilities.decodingInfo),
                console.debug(
                  "McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."
                ),
                (navigator.mediaCapabilities.decodingInfo = Xv),
                (navigator.mediaCapabilitiesEncryptionSchemePolyfilled = !0))
              : console.debug(
                  "McEncryptionSchemePolyfill: MediaCapabilities not found"
                );
          }
          function Xv(e) {
            var t,
              n,
              i = this;
            return L(function (r) {
              switch (r.g) {
                case 1:
                  return (
                    console.assert(
                      i == navigator.mediaCapabilities,
                      'bad "this" for decodingInfo'
                    ),
                    x(r, jv.call(i, e), 2)
                  );
                case 2:
                  if (!(t = r.h).supported || !e.keySystemConfiguration)
                    return r.return(t);
                  if ((n = t.keySystemAccess) && Qv(n))
                    return (
                      console.debug(
                        "McEncryptionSchemePolyfill: Native encryptionScheme support found."
                      ),
                      (navigator.mediaCapabilities.decodingInfo = jv),
                      r.return(t)
                    );
                  if (
                    (console.debug(
                      "McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."
                    ),
                    (navigator.mediaCapabilities.decodingInfo = Yv),
                    n)
                  ) {
                    r.u(3);
                    break;
                  }
                  return x(r, Jv(e), 4);
                case 4:
                  return (t.keySystemAccess = r.h), r.return(t);
                case 3:
                  return r.return(Yv.call(i, e));
              }
            });
          }
          function Yv(e) {
            var t,
              n,
              i,
              r,
              a,
              o,
              s,
              u = this;
            return L(function (l) {
              switch (l.g) {
                case 1:
                  return (
                    console.assert(
                      u == navigator.mediaCapabilities,
                      'bad "this" for decodingInfo'
                    ),
                    (n = t = null),
                    !e.keySystemConfiguration ||
                    ((i = e.keySystemConfiguration),
                    (r = i.keySystem),
                    (n = i.audio && i.audio.encryptionScheme),
                    (t = i.video && i.video.encryptionScheme),
                    (a = Zv(r)),
                    (o = {
                      powerEfficient: !1,
                      smooth: !1,
                      supported: !1,
                      keySystemAccess: null,
                      configuration: e,
                    }),
                    ey(n, a) && ey(t, a))
                      ? x(l, jv.call(u, e), 2)
                      : l.return(o)
                  );
                case 2:
                  if ((s = l.h).keySystemAccess) {
                    (s.keySystemAccess = new $v(s.keySystemAccess, t, n)),
                      l.u(3);
                    break;
                  }
                  if (!e.keySystemConfiguration) {
                    l.u(3);
                    break;
                  }
                  return x(l, Jv(e), 5);
                case 5:
                  s.keySystemAccess = l.h;
                case 3:
                  return l.return(s);
              }
            });
          }
          function Jv(e) {
            var t, n;
            return L(function (i) {
              if (1 == i.g) {
                var r = e.keySystemConfiguration,
                  a = [],
                  o = [];
                return (
                  r.audio &&
                    a.push({
                      robustness: r.audio.robustness || "",
                      contentType: e.audio.contentType,
                      encryptionScheme: r.audio.encryptionScheme,
                    }),
                  r.video &&
                    o.push({
                      robustness: r.video.robustness || "",
                      contentType: e.video.contentType,
                      encryptionScheme: r.video.encryptionScheme,
                    }),
                  (r = {
                    initDataTypes: r.initDataType ? [r.initDataType] : [],
                    distinctiveIdentifier: r.distinctiveIdentifier,
                    persistentState: r.persistentState,
                    sessionTypes: r.sessionTypes,
                  }),
                  a.length && (r.audioCapabilities = a),
                  o.length && (r.videoCapabilities = o),
                  (t = r),
                  x(
                    i,
                    navigator.requestMediaKeySystemAccess(
                      e.keySystemConfiguration.keySystem,
                      [t]
                    ),
                    2
                  )
                );
              }
              return (n = i.h), i.return(n);
            });
          }
          function $v(e, t, n) {
            (this.g = e),
              (this.i = t || null),
              (this.h = n || null),
              (this.keySystem = e.keySystem);
          }
          function Zv(e) {
            return e.startsWith("com.widevine") ||
              e.startsWith("com.microsoft") ||
              e.startsWith("com.chromecast") ||
              e.startsWith("com.adobe") ||
              e.startsWith("org.w3")
              ? "cenc"
              : e.startsWith("com.apple")
              ? "cbcs"
              : e.startsWith("com.huawei")
              ? "cenc"
              : (console.warn(
                  "EmeEncryptionSchemePolyfill: Unknown key system:",
                  e,
                  "Please contribute!"
                ),
                null);
          }
          function Qv(e) {
            var t =
              (e = e.getConfiguration()).audioCapabilities &&
              e.audioCapabilities[0];
            return !(
              !(e = (e.videoCapabilities && e.videoCapabilities[0]) || t) ||
              void 0 === e.encryptionScheme
            );
          }
          function ey(e, t) {
            return (
              !e ||
              e == t ||
              !(("cbcs" != e && "cbcs-1-9" != e) || !(ay || uy || ry))
            );
          }
          function ty() {}
          function ny() {
            Vv(), Wv();
          }
          wi(
            "video/mp2t",
            function () {
              return new _v("video/mp2t");
            },
            ki
          ),
            v(Fv, Uu),
            F("shaka.util.FairPlayUtils", Fv),
            F("EmeEncryptionSchemePolyfill", Hv),
            (Hv.install = Vv),
            F("McEncryptionSchemePolyfill", Kv),
            (Kv.install = Wv),
            ($v.prototype.getConfiguration = function () {
              var e = this.g.getConfiguration();
              if (e.videoCapabilities)
                for (
                  var t = c(e.videoCapabilities), n = t.next();
                  !n.done;
                  n = t.next()
                )
                  n.value.encryptionScheme = this.i;
              if (e.audioCapabilities)
                for (
                  n = (t = c(e.audioCapabilities)).next();
                  !n.done;
                  n = t.next()
                )
                  n.value.encryptionScheme = this.h;
              return e;
            }),
            ($v.prototype.createMediaKeys = function () {
              return this.g.createMediaKeys();
            }),
            F("EncryptionSchemePolyfills", ty),
            (ty.install = ny);
          var iy,
            ry = navigator.userAgent.includes("CrKey"),
            ay =
              100 <= parseInt(navigator.userAgent.split("Firefox/").pop(), 10),
            oy = navigator.userAgent || "";
          if (oy.includes("Web0S")) {
            var sy = oy.match(/Chrome\/(\d+)/);
            iy = !!sy && 79 <= parseInt(sy[1], 10);
          } else iy = !1;
          var uy = iy;
          void 0 !== n && n.exports && (n.exports = ty);
        }.call(i, e, e, void 0),
        i.shaka))
          t[r] = i.shaka[r];
      })();
    },
  },
]);
//# sourceMappingURL=sourcemaps/368676bb4ca53670.vendor.js.map
